6
1
0
2

 
r
a

 

M
8
1

 
 
]

.

A
Q
h
t
a
m

[
 
 

1
v
8
6
7
5
0

.

3
0
6
1
:
v
i
X
r
a

FOLDING KLR ALGEBRAS

PETER J MCNAMARA

Abstract. This paper develops the theory of KLR algebras with a Dynkin diagram auto-
morphism. This is foundational material intended to allow folding techniques in the theory
of KLR algebras.

1. Introduction

In Lie theory, the process of folding by a Dynkin diagram automorphism is a technique
that can be used to extend theorems orginally proved for symmetric Cartan data to all Lie
types. This paper develops the theory of folding for KLR algebras.

KLR algebras (named after Khovanov, Lauda and Rouquier) are a family of graded algebras
introduced in [KL1, R1] for the purposes of categorifying quantised enveloping algebras. They
also appear in the literature under the name of quiver Hecke algebras.

While KLR algebras exist for arbitrary symmetrisable Cartan data, it is known that the
KLR algebras in symmetric types have a richer theory with more desirable properties. This is
usually a consequence of the geometric interpretation of symmetric KLR algebras [VV, R2, M]
or through the theory of R-matrices of [KKK]. Thus we believe that incorporating a diagram
automorphism into the narrative and using the technique of folding is an important way to
think about categoriﬁed quantum groups in nonsymmetric types, as an alternative to working
with nonsymmetric KLR algebras.

The folding constructions performed in this paper are modelled on those of [L, Chapter
2], where Lusztig constructs the canonical basis using perverse sheaves and a diagram au-
tomorphism.
In fact when one considers the geometric interpretation of KLR algebras as
extension algebras and works over the ﬁeld ¯Ql, the category Pν which we study is equivalent
to Lusztig’s ˜QV .

Our main aim in this paper is to develop the theory of folded KLR algebras, to a depth
comparable to that of [KL1]. Our main theorems are the categoriﬁcation theorems, Theorems
6.1 and 6.2. Our proof is diﬀerent from [KL1] in that we do not rely on the quantum Gabber-
Kac theorem. Instead, we ﬁrst identify an appropriate class of simple objects with the crystal
B(∞), using the Kashiwara-Saito characterisation of B(∞). This identiﬁcation is Theorem
10.8, and generalises [LV].

We also conclude with a section proving that this categorifcation provides us with a basis
of canonical type. This concept of a basis of canonical type is motivated from the deﬁnition
given in [B] and is a strengthening of the notion of a perfect basis.

Date: March 21, 2016.

1

2

PETER J MCNAMARA

An application of this work to the KLR categoriﬁcation of cluster algebras will appear in

a forthcoming paper [Mc].

A Cartan datum (I, ·) is a set I together with a symmetric bilinear form on the free abelian

2. KLR Algebras

group ZI, denoted i · j such that

(1) i · i ∈ {2, 4, 6, · · · } for all i ∈ I
(2) 2 i·j

i·i ∈ {0, −1, −2, . . .} for all distinct i, j ∈ I.

Let di = i · i/2 and cij = i · j/di. Then the matrix C = (cij)i,j∈I is a symmetrisable Cartan
matrix with D = diag (di)i∈I a symmetrising matrix.

Let a be an automorphism of the Cartain datum (I, ·) such that i · j = 0 if i and j are
in the same a-orbit. Let n be the order of a. We assume that n is ﬁnite (this is of course
automatic if I is ﬁnite).

Out of the data of C and a, we construct another Cartan datum. Let J be the set of orbits

in I. We can embed ZJ inside ZI by sending j ∈ J to Pi∈j i. If we restrict the symmetric

form on ZI to ZJ we place the structure of a Cartan datum on J. It is known that any
Cartan datum (J, ·) arises from such a construction where the Cartan datum (I, ·) satisﬁes
i · i = 2 for all i ∈ I. Such Cartan data (I, ·) are called symmetric.

Deﬁne, for any ν ∈ NI,

Seq (ν) = {i = (i1, . . . , i|ν|) ∈ I |ν| |

ij = ν}.

|ν|

Xj=1

This is acted upon by the symmetric group S|ν| in which the adjacent transposition (i, i + 1)
is denoted si.

Let k be an algebraically closed ﬁeld whose characteristic does not divide n. In a similar
vein to how simple modules for a KLR algebra over any ﬁeld are absolutely irreducible, we
expect here that we only need to assume that k contains n n-th roots of unity. But we do
not pursue this question in this paper.

To each i, j ∈ I, we deﬁne polynomials Qij(u, v) ∈ k[u, v] such that for all i, j ∈ I,

(1) Qii(u, v) = 0
(2) If u has degree di and v has degree dj then Qij is a homogeneous polynomial of degree

−dicij = −djcji such that the coeﬃcients of u−cij and v−cji are both nonzero.

(3) Qij(u, v) = Qji(v, u).
(4) Qa(i)a(j)(u, v) = Qij(u, v).

The KLR algebras are deﬁned in terms of this family of polynomials Qi,j, though this
dependence is suppressed from the notation. There is a diagrammatic approach to presenting
the following generators and relations, which the reader may ﬁnd more convenient. These
diagrams can be found in [KL1, KL2, TW].

FOLDING KLR ALGEBRAS

3

Deﬁnition 2.1. The KLR algebra R(ν) is the associative k-algebra generated by elements
ei, yj, τk with i ∈ Seq (ν), 1 ≤ j ≤ |ν| and 1 ≤ k < |ν|, subject to the relations

ei = 1,

eiej = δi,jei, Xi∈Seq(ν)

ykyl = ylyk, ykei = eiyk,
τlei = esliτl,
τ 2
k ei = Qik,ik+1(yk, yk+1)ei,

τkτl = τlτk if |k − l| > 1,

(τkyl − ysk(l)τk)ei =


(τk+1τkτk+1 − τkτk+1τk)ei

−ei
ei
0

if l = k, ik = ik+1,
if l = k + 1, ik = ik+1,
otherwise,

(2.1)

Qik,ik+1(yk, yk+1) − Qik,ik+1(yk+2, yk+1)

yk − yk+2

0

ei

if ik = ik+2,

otherwise.

=


If w is a permutation in S|ν|, write w as a reduced product of simple reﬂections w =
In general this depends on the choice of a reduced

si1 . . . sin and deﬁne τw = τi1 . . . τin.
product but we will only use it in this paper for those w for which τw is well-deﬁned.

The KLR algebras R(ν) are Z-graded, where ei is of degree zero, yjei is of degree ij · ij
and τkei is of degree −ik · ik+1. All R(ν)-modules will always be assumed to be graded left
modules. If V is any Z-graded vector space, we use Vi to denote its i-th graded piece. Given
a R(ν)-module M , its grading shift is denoted qM , this is the module with (qM )i = Mi−1.
Because of the condition Qa(i)a(j)(u, v) = Qij(u, v) on the polynomials Qij, the auto-
morphism a of the Cartan datum (I, ·) induces an isomorphism R(aν) ∼= R(ν). The most
important case for us will be when aν = ν, when a induces an automorphism of the algebra
R(ν), which we shall also call a.

Now consider ν such that aν = ν. An R(ν)-module structure on a vector space V is the
same as a homomorphism from R(ν) to Endk(V ). If we precompose with the automorphism a
of R(ν), we get a new R(ν)-module structure on the same vector space. This autoequivalence
of the category of R(ν)-modules is denoted a∗.

Let Cν be the category whose objects are pairs (M, σ) where M is a representation of R(ν)

and σ : a∗M −→ M is an isomorphism such that

σ ◦ a∗σ ◦ · · · ◦ (a∗)n−1σ = idM .

(2.2)

A morphism from (M, σ) to (M ′, σ′) in Cν is a R(ν)-module map f : M −→ M ′ such that the
following diagram commutes:

a∗M

a∗f

−−−−→ a∗M ′

σ

y

M

σ′

y

f

−−−−→ M ′.

4

PETER J MCNAMARA

The following easy observation gives an alternative way to think about the category Cν.

Lemma 2.2. The category Cν is equivalent to the category of representations of the smash
product R(ν)#Z/n.

Let Pν be the full subcategory of ﬁnitely generated projective objects in Cν (an object of
Cν is ﬁnitely generated if it is ﬁnitely generated as a module for R(ν)#Z/n, equivalently if
the underlying R(ν)-module is ﬁnitely generated). The categorically minded reader may wish
to parse this as the category of compact projective objects of Cν.

Let Lν be the full subcategory of Cν whose objects are pairs (M, σ) where M is ﬁnite di-
mensional, or equivalently the full subcategory of ﬁnite length objects. We have the following
obvious corollary of Lemma 2.2:

Corollary 2.3. The categories Cν and Lν are abelian.

3. The Grothendieck Group Construction

Let ζn be a primitive n-th root of unity in C. Fix once and for all a ring homomorphism

Z[ζn] → k.

If (M, σ) is an object of Cν, then so is ζn(M, σ) := (M, ζnσ).
An object (A, φ) of Cν is said to be traceless if there is a representation M of R(ν), an

integer t ≥ 2 dividing n such that (a∗)tM ∼= M , and an isomorphism

A ∼= M ⊕ a∗M ⊕ · · · ⊕ (a∗)t−1M

under which φ corresponds to an isomorphism carrying the summand (a∗)jM onto (a∗)jM
for 1 ≤ j < t and the summand (a∗)tM onto M .

The group K(Pν) is deﬁned to be the Z[ζn]-module generated by symbols [(M, σ)] where

(M, σ) is an object of Pν , subject to the relations

[X] = [X ′] + [X ′′]
[(M, ζnσ)] = ζn[(M, σ)]

if X ∼= X ′ ⊕ X ′′

[X] = 0

if X is traceless

The group K(Lν) is deﬁned similarly from the category Lν, except that in place of the

ﬁrst relation, we have

[X] = [X ′] + [X ′′]

if there is a short exact seqence 0 → X ′ → X → X ′′ → 0.

Both K(Pν) and K(Lν) are Z[ζn, q, q−1]-modules, where q acts by a grading shift.
Given two objects (M, σ) and (N, τ ) in Cν, there is an induced automorphism of HomR(ν)(M, N ),

namely

f 7→ (a∗)−1(τ −1 ◦ f ◦ σ).

We will call this automorphism aστ . It allows us to deﬁne a pairing in the following Lemma,
whose proof is straightforward and omitted.

FOLDING KLR ALGEBRAS

5

Lemma 3.1. The form deﬁned by the below displayed equation descends to a semilinear
pairing K(Pν) × K(Lν) → Z[ζn]((q))

h[(M, σ)], [(N, τ )]i =Xd∈Z

tr(aστ , HomR(ν)(M, N )d)qd

(3.1)

Let ψ be the antiautomorphism of R(ν) which sends each of the generators ei, yj and τk to
themselves. If P is a R(ν)-module, we denote by P ψ the right R(ν)-module whose underlying
space is P and the action of R(ν) is given by p · r = ψ(r)p for p ∈ P and r ∈ R(ν).

Now given isomorphisms σ : a∗P −→ P and τ : a∗Q −→ Q, there is an induced isomorphism
τ ⊗ σ : a∗Qψ ⊗R(ν) a∗P −→ Qψ ⊗R(ν) P . Since a∗Qψ ⊗R(ν) a∗P is canonically isomorphic to
Qψ ⊗R(ν) P , we can consider τ ⊗ σ as an automorphism of Qψ ⊗R(ν) P . Using τ ⊗ σ, we also
obtain a pairing of interest, whose existence proof is again straightforward and omitted.

Lemma 3.2. The form deﬁned by the below displayed equation descends to a symmetric
bilinear pairing K(Pν ) × K(Pν ) → Z[ζn]((q)).

([(P, σ)], [(Q, τ )]) =Xd∈Z

tr(τ ⊗ σ, (Qψ ⊗R(ν) P )d)qd.

(3.2)

Remark 3.3. There is also a semilinear pairing h·, ·i on K(Pν) deﬁned using the Hom form
using the same formula (3.1). It is realted to this bilinear pairing by (x, y) = hx, ¯yi.
Lemma 3.4. Let L be a simple R(ν)-module. Let t be the minimal integer such that (a∗)tL ∼=
L. Then there exists σ such that (L ⊕ a∗L ⊕ · · · ⊕ (a∗)t−1L, σ) is an object of Cν.

Remark 3.5. As the proof will indicate, this lemma and Theorem 3.6 below are very gen-
eral results about representations of an algebra with an action of a ﬁnite cyclic group. In
particular, the same staments hold when R(ν) is replaced by R(λ) ⊗ R(µ).

Proof. Let σ0 be an isomorphism from (a∗)tL to L. We have the canonical identiﬁcation

a∗(L ⊕ a∗L ⊕ · · · ⊕ (a∗)t−1L) ∼= a∗L ⊕ (a∗)2L ⊕ · · · ⊕ (a∗)tL.

In block form, choose σ to be of the form





0 0 · · ·
1 0 · · ·
0 1 · · ·
...
. . .
0 0 · · ·

...

0 λσ0
0
0
0
0
...
...
0
1





where λ ∈ k. In order for (2.2) to hold, we must have

λn/tσ0 ◦ (a∗)tσ0 ◦ · · · ◦ (a∗)n−tσ0 = idL.

By Schur’s Lemma σ0 ◦ (a∗)tσ0 ◦ · · · ◦ (a∗)n−tσ0 is a nonzero scalar. Since k is algebraically
closed, there exists λ satisfying this equation, completing the proof.
(cid:3)

It is clear that all modules formed in this way are simple in Cν and for diﬀerent choices of

λ that they produce pairwise nonisomorphic simples.

6

PETER J MCNAMARA

Theorem 3.6. The construction of Lemma 3.4 provides a classiﬁcation of all simple objects
in Cν. In particular, a simple object of Cν is either traceless or of the form (L, σ) with L a
simple R(ν)-module.

Proof. We use the Induction-Restriction adjunction for the inclusion of algebras R(ν) ֒→
R(ν)#Z/n. Suppose that (S, σ) is a simple object in Cν. Let L be a simple R(ν)-submodule
of S. Then by adjunction, there is a morphism in Cν from IndCν
R(ν) L to (S, σ), which is
surjective as (S, σ) is simple.
R(ν)(L) is

The module IndCν

(L ⊕ a∗L ⊕ · · · ⊕ (a∗)n−1L, φ)

where φ is the obvious permutation matrix.

Now suppose that t is the minimal integer such that (a∗)tL ∼= L. Let σ0 and λ be as in
the proof of Lemma 3.4 and write X(L, λ, σ0) for the corresponding module constructed in
the proof. Deﬁne φ : IndCν

R(ν)(L) −→ X(L, λ, σ0) by

φ|(a∗)rt+sL = λrσ0a∗σ0 · · · (a∗)r−1σ0 : (a∗)rt+sL −→ (a∗)sL.

It is easy to see that this does indeed deﬁne a morphism in Cν. As λ varies amongst all
possible choices, we get diﬀerent nonisomorphic simple quotients of IndCν
R(ν)(L). A dimension
count shows that there is a direct sum decomposition

Therefore (S, σ) is one of these direct summands, completing the proof.

(cid:3)

IndCν

R(ν)(L) ∼=Mλ

X(L, λ, σ0).

4. Induction and Restriction

For λ, µ ∈ NJ, the automorphisms a of R(λ) and R(µ) induce an automorphism a of
R(λ) ⊗ R(µ) by a(v ⊗ w) = av ⊗ aw. Let Cλ⊔µ denote the category of graded representations
of (R(λ) ⊗ R(µ))#Z/n. We deﬁne Pλ⊔µ and Lλ⊔µ in an analogous fashion.

Given (M, σ) and (N, τ ) in Cλ and Cµ respectively, we can form the induced module

M ◦ N := R(λ + µ) OR(λ)⊗R(µ)

M ⊗ N.

The isomorphisms σ and τ induce an isomorphism a∗M ◦ a∗N → M ◦ N . When precomposed
with the natural isomorphism a∗(M ◦ N ) ∼= a∗M ◦ a∗N , we obtain an isomorphism

The object

is an element of Cλ+µ.

σ ◦ τ : a∗(M ◦ N ) → M ◦ N.

(M, σ) ◦ (N, τ ) := (M ◦ N, σ ◦ τ )

For λ, µ ∈ NJ, let eλµ be the image of the identity under the inclusion R(λ) ⊗ R(µ) →

R(λ + µ). Given a R(λ + µ)-module M , its restriction is deﬁned by

Resλ,µ M := eλµM.

FOLDING KLR ALGEBRAS

7

It is a R(λ) ⊗ R(µ)-module.

Since eλµ is invaraint under a, there is a canonical isomorphism a∗(Res M ) ∼= Res(a∗M ).

Thus we obtain a restriction functor from Cλ+µ to Cλ⊔µ.

Given objects (M, σ) and (N, τ ) of Cλ and Cµ respectively, there is a tensor product object

(M ⊗ N, σ ⊗ τ ) of Cλ⊔µ.

Proposition 4.1. The tensor product induces isomorphisms of Z[ζn, q, q−1]-modules

K(Pλ) ⊗Z[ζn] K(Pµ) ∼= K(Pλ⊔µ),
K(Lλ) ⊗Z[ζn] K(Lµ) ∼= K(Lλ⊔µ).

Proof. Since k is algbraically closed, every indecomposable projective module for R(λ)⊗R(µ)
is a tensor product of projective modules over R(λ) and R(µ). Furthermore, every simple
module for R(λ) ⊗ R(µ) is a tensor product of simple modules over R(λ) and R(µ). Theorem
3.6 now completes the proof.
(cid:3)

Corollary 4.2. The restriction functor from Cλ+µ to Cλ⊔µ induces a coassociative coproduct
on the direct sums

K(Pν)

Mν∈NJ

and Mν∈NJ

K(Lν).

Theorem 4.3. The functors of induction and restriction form an adjoint pair of exact func-
tors between Cλ⊔µ and Cλ+µ.

Proof. The adjunction follows from the usual tensor-hom adjunction. Exactness follows from
exactness in the situation where there is no automorphism a. For restriction, this is obvious
and for induction, exactness follows from [KL1, Proposition 2.16].
(cid:3)

Deﬁnition 4.4. A functor is said to be traceless if its image lies in the full subcategory of
traceless objects.

We refer to the ﬁltration appearing in the below theorem as the Mackey ﬁltration. This

important Theorem in the unfolded case is [KL1, Proposition 2.18]

Theorem 4.5. Let λ1, . . . , λk, µ1 . . . , µl ∈ NJ be such that Pi λi = Pj µj. Consider the

exact functor

Resµ1,...,µl ◦ Indλ1,...,λk

from Cλ1⊔···⊔λk to Cµ1⊔···⊔µl This composite functor has a natural ﬁltration by exact functors.
The subquotient functors in this ﬁltration which are not traceless are indexed by tuples νij

satisfying λi = Pj νij and µj = Pi νij, and are isomorphic, up to a grading shift, to the

composition

Indµ

ν ◦τ ◦ Resλ
ν .

Here Resλ
(⊗jR(νij))-mod −→ ⊗j(⊗iR(νij))-mod is given by permuting the tensor factors and Indµ
(⊗iR(νij))-mod −→ ⊗jR(µj)-mod is the tensor product of the Indν•i.

ν : ⊗i R(λi)-mod −→ ⊗i(⊗jR(νij))-mod is the tensor product of the Resνi•, τ : ⊗i
ν : ⊗j

8

PETER J MCNAMARA

Proof. For simplicity we give the proof for the case where k = l = 2, from which the general
case follows. Write B for the (R(µ1) ⊗ R(µ2), R(λ1) ⊗ R(λ2))-bimodule R(λ1 + λ2). Then
tensoring with B is the usual composition Resµ1,µ2 ⊗ Indλ1,λ2 without the automorphism a
considered. We now describe the ﬁltration of B as in the proof of [KL1, Proposition 2.18].

Let η• = (η11, η12, η21, η22) be a quadruple of elements in NI such that ηi1 + ηi2 = λi and
η1j + η2j = µj for i, j ∈ {1, 2}. Let w(η•) be the involutive permutation where w(i) = i
if i ≤ |η11| or i > |λ1 + η21| and w(i) = i + |η12| if |η11| < i ≤ |λ1|. Deﬁne the element
u(η•) = τw(η•) ∈ R(λ1 + λ2).

Then B is generated as a bimodule by the elements u(η•). Deﬁne a partial order on the
set of all quadruples η• by η• ≥ η′
21 ∈ NI. Let B(≤ η•), respectively B(< η•)
be the subbimodule of B generated by all u(ζ•) with ζ• ≤ η•, respectively ζ• < η•. Let
B(η•) = B(≤ η•)/B(< η•).

• if η21 − η′

The functor of tensoring with the subquotient B(η•) is the composition Indµ

ν . In
particular it is exact, so we indeed have a ﬁltration by exact subfunctors. We now need to
understand how this ﬁltration interacts with the automorphism a.

ν ◦τ ◦ Resλ

If aη• = η•, then the functor B(η•) ⊗ − coincides with the composite functor Indµ

ν ◦τ ◦ Resλ
ν

from Cλ1⊔λ2 to Cµ1⊔µ2.

If aη• 6= η•, consider B(η•) ⊕ B(aη•) ⊕ · · · B(at−1η•) where t is the minimal positive
integer such that atη• = η•. Grouping the subquotients in orbits in this manner produces
a subquotient functor which is tensoring with the direct sum bimodule. Furthermore, this
subquotient functor is traceless, because the a-action comes from the a-action on the bimodule
which is permuting the summands.
(cid:3)

Theorem 4.6. The induction and restriction functors send projective objects to projective
objects.

Proof. The induction and restriction functors have right adjoints restriction and coinduction
respectively. This coinduction functor is discussed in [LV, §2.3] in the unfolded case with a
straightforward generalisation to the folded case. The restriction functor is clearly exact and
the coinduction functor is exact since R(λ + µ) is a free R(λ) ⊗ R(µ)-module. The theorem
follows since a functor sends projectives to projectives if it has an exact right adjoint.
(cid:3)

Let P be a ﬁnitely generated projective R(ν)-module. Then we can deﬁne a dual module

5. Duality

DP = Hom(P, R(ν)).

This is the direct sum of all homogeneous homomorphisms between P and R(ν), not
necessarily of zero degree. It is a graded k-vector space where (DP )m = Hom(qmP, R(ν))0,
where we are referring to degree zero homomorphisms only.

This is also a R(ν)-module, where the action of R(ν) is by

r(λ)(m) = λ(ψ(r)m)

(5.1)

for all r ∈ R(ν), λ ∈ D(P ) and m ∈ P .

FOLDING KLR ALGEBRAS

9

Let M be a ﬁnite dimensional R(ν)-module. Then its dual D(M ) := Homk(M, k) is also
an R(ν)-module by the same formula (5.1) for all r ∈ R(ν), λ ∈ D(M ) and m ∈ M . The
module DM is also naturally graded.

For any morphism f : M −→ N between ﬁnitely generated projective, or ﬁnite dimensional

R(ν)-modules, there is then an induced morphism Df : DN −→ DM .

Now we deﬁne the dual of an object (M, σ) in Lν or Pν by the formula

D(M, σ) = (DM, (Dσ)−1)

where the appropriate duality is taken depending on which category we are in. It is clear
that D is a contravariant functor from Lν to itself. To show that D sends Pν to Pν, since
projective modules are direct summands of free modules, it suﬃces to show that dual of a
free R(ν)#Z/n-module is free. The free R(ν)#Z/n-module of rank one is

(R(ν) ⊕ a∗R(ν) ⊕ · · · ⊕ (a∗)n−1R(ν), φ)

where, φ is the obvious permutation matrix. It is straightforward to compute that this is
isomorphic to its dual.

An object M of Lν or P of Pν is said to be self-dual if there is an isomorphism DM ∼= M

in Lν, respectively DP ∼= P in Pν .
Lemma 5.1. If P and Q are projective then D(P ◦ Q) ∼= DP ◦ DQ.

Proof. Since projective modules are all direct summands of free modules, it suﬃces to consider
the case where P and Q are free. This computation is similar to the one which shows that D
sends Pν to Pν .
(cid:3)

6. The Statement of the Categorification Theorems

The algebra fQ(q) is the Q(q)-algebra as deﬁned in [L] generated by elements {θj | j ∈ J}.
Lusztig deﬁnes it as the quotient of a free algebra by the radical of a bilinear form. By
the quantum Gabber-Kac theorem, it has a presentation as the quotient of a free algebra
by the quantum Serre relations. Morally, fQ(q) should be thought of as the positive part of
the quantised enveloping algebra Uq(g). There is only a slight diﬀerence in the coproduct,
necessary as the coproduct of Uq(g) does not map Uq(g)+ into Uq(g)+ ⊗ Uq(g)+.

There is a Z[q, q−1]-form of fQ(q), which we denote simply by f . It is the Z[q, q−1]-subalgebra
i=1(qi − q−i)/(q −

j = θn

of fQ(q) generated by the divided powers θ(n)
q−1) is the q-factorial and qj = qdj .

j /[n]qj !, where [n]q! = Qn

The algebra f is graded by NJ where θj has degree j for all j ∈ J. We write f = ⊕ν∈NJ fν for
its decomposition into graded components. Of signiﬁcant importance for us is the dimension
formula from [L, Theorem 33.1.3].

where Φ+ is the set of positive roots in the root system deﬁned by (J, ·).

Xν∈NJ

dim fνtν = Yα∈Φ+

(1 − tα)− mult(α).

The tensor product f ⊗ f has an algebra structure given by

(x1 ⊗ y1)(x2 ⊗ y2) = qβ1·α2x1x2 ⊗ y1y2

(6.1)

10

PETER J MCNAMARA

where y1 and x2 are homogeneous of degree β1 and α2 respectively.

Given any bilinear form (·, ·) on f , we obtain a bilinear form (·, ·) on f ⊗ f by

(x1 ⊗ x2, y1 ⊗ y2) = (x1, x2)(y1, y2).

There is a unique algebra homomorphism r : f −→ f ⊗ f such that r(θj) = θj ⊗ 1 + 1 ⊗ θj
for all j ∈ J. For each x ∈ fν , deﬁne jr(x) and rj(x) where r(x) = jr(x) ⊗ θj plus terms in
other bidegrees and r(x) = θj ⊗ rj(x) plus terms in other bidegrees.

The algebra f has a symmetric bilinear form h·, ·i satisfying

hθj, θji = (1 − qj·j)−1
hx, yzi = hr(x), y ⊗ zi.

The form h·, ·i is nondegenerate. Indeed, in the deﬁnition of f in [L], fQ(q) is deﬁned to
be the quotient of a free algebra by the radical of this bilinear form. It is known that f is
a free Z[q, q−1]-module. Let f ∗ be the graded dual of f with respect to h·, ·i. By deﬁnition,
f ∗ = ⊕ν∈NI f ∗
Q(q) are isomorphic, though there
is no such isomorphism between their integral forms.

ν . As twisted bialgebras over Q(q), fQ(q) and f ∗

There is a bar involution on f which is the algebra automorphism of f sending q to q−1
and ﬁxing the generators θj. It induces a bar involution on f ∗ by λ(x) = λ(x) for all λ ∈ f ∗
and x ∈ f .

Let kν denote the Z[q, q−1]-span of the classes of self-dual indecomposable projectives
ν denote the Z[q, q−1]-span of the classes of self-dual simple
ν for the decomposition of k

inside K(Pν). Similarly, let k∗
modules inside K(Lν). Write k = ⊕ν∈NJ kν and k∗ = ⊕ν∈NJ k∗
and k∗ into their graded pieces.

We are now able to state the main categoriﬁcation theorems of this paper. They will be

proved at the end of Section 11.

Theorem 6.1. There is a unique Z[q, q−1]-linear grading preserving isomorphism γ : f −→ k
such that

(1) γ(θ(m)
(2) Under the isomorphism γ, the multiplication fλ ⊗fµ → fλ+µ corresponds to the product

] for all j ∈ J and m ∈ N.

) = [P (m)

j

j

on k induced by Indλ,µ.

(3) Under the the isomorphism γ, the comultiplication fλ+µ → fλ ⊗ fµ corresponds to the

coproduct on k induced by Resλ,µ.

(4) Under the isomorphism γ, the bar involution on f corresponds to the anti-linear in-

volutive automorphism on k induced by the duality D.

(5) The isomorphism γ intertwines the pairings h·, ·i and (·, ·) deﬁned on f and k respec-

tively.

Theorem 6.2. There is a Z[q, q−1]-linear grading preserving isomorphism γ∗ : k∗ −→ f ∗ such
that

(1) γ∗([L(j)]) = θ∗
(2) Under the isomorphism γ∗, the multiplication f ∗

j for all j ∈ J.

product on k∗ induced by Indλ,µ.

λ ⊗ f ∗

µ → f ∗

λ+µ corresponds to the

FOLDING KLR ALGEBRAS

11

λ+µ → f ∗

λ ⊗ f ∗

µ corresponds to the

(3) Under the the isomorphism γ∗, the comultiplication f ∗

coproduct on k∗ induced by Resλ,µ.

(4) Under the isomorphism γ∗, the bar involution on f ∗ corresponds to the anti-linear

antiautomorphism on k∗ induced by the duality D.

(5) The isomorphism γ∗ is the graded dual of the isomorphism γ in Theorem 6.1.

7. One Colour Folded KLR Algebras

Let j ∈ J. Let the elements of the orbit j be i1, i2, . . . , it.
The algebra R(i1 + · · · + it) has a unique irreducible representation Lj. This representation
has a basis [w] where w runs over all permutations of {i1, . . . , it}. The idempotent ei acts on
[w] by 1 if i = w and by 0 otherwise. The dots yi all act by zero. The crossings τi act by the
symmetric group action on the set of all permutations.

The module a∗Lj has by construction the same underlying vector space but the action is

twisted by the automorphism a. We deﬁne σ : a∗Lj −→ Lj by σ[w] = [aw]. Deﬁne

L(j) = (Lj, σ).

Let P (j) be the projective cover of L(j) in Cj. We can explicitly construct P (j) in a
similar fashion to the construction of L(j).
It is of the form P (j) = (Pj, σ) where Pj =
⊕w∈Stk[x1, . . . xt][w].

Lemma 7.1. For all j ∈ J, we have (P (j), P (j)) = (1 − qj·j)−1.

Proof. Let t = |j|. Recall that as a vector space, Pj = ⊕w∈Stk[x1, . . . , xt][w]. There is an
isomorphism

given by

P ψ
j ⊗R(ν) Pj ∼= k[z1, . . . , zt]

f (x)[w] ⊗ g(y)[u] 7→ δwuf (z)g(z).

The automorphism σ ⊗ σ acts by permuting the zi’s. In the monomial basis, this action is
by a permutation matrix, so the trace is the number of ﬁxed points, which consists only of
powers of z1z2 · · · zt. The statement of the lemma follows.
(cid:3)

Lemma 7.2. The object L(jn) := q

(n
2)
j L(j)◦n is a self-dual simple object of Cnj.

Proof. The object L(jn) is irreducible because L◦n
is an irreducible R(n(i1 +· · ·+it))-module.
j
The self-duality appears later in a more general form in Lemma 9.3. We don’t bother to prove
it here as it is not yet important.
(cid:3)

Let P (j)(n) be the projective cover of L(jn) in Cj

Theorem 7.3. In

∞

Mn=0

K(Pnj), we have the identity

[P (j)(m)][P (j)(n)] =(cid:20)m + n
n (cid:21)j

[P (j)(m+n)].

12

PETER J MCNAMARA

Proof. It suﬃces to prove the dual version, namely

r([L(jn)]) = Xa+b=n(cid:20)n
a(cid:21)j

[L(ja)] ⊗ [L(jb)].

(7.1)

Consider Resmj,nj L(jm+n) under the Mackey ﬁltration. All terms either come from per-
(cid:3)

mutations or are trivially traceless by the a-action on the Mackey ﬁltration.

8. Some Important Lemmas

This section is modelled on [KL1, §3.2], the technical heart of that paper, which in turn is

modelled on [K, Ch 5]. We provide all proofs for the sake of completeness.

For any j ∈ J and any object M of Cν, deﬁne

ǫj(M ) = {max n ∈ N | Resnj,ν−nj M 6= 0}.

(8.1)

Lemma 8.1. Let N be an irreducible object in Cν and j ∈ J such that ǫj(N ) = 0. Let
M = L(j)◦n ◦ N . Then

(1) Resnj,ν−nj ∼= L(jn) ⊗ N .
(2) The head of M is irreducible and ǫj(hd M ) = n
(3) All other composition factors L of M have ǫj(L) < ǫj(M ).

Proof. Since ǫj(N ) = 0, (1) is a consequence of the Mackey ﬁltration.

If Q is a quotient of M , then by adjunction there is a morphism from L(jn) ⊗ N to
Resnj,ν−nj Q, which is injective as N is irreducible. Now suppose that Q1 ⊕ Q2 is a quotient
of M with Q1 and Q2 nonzero. As restriction is exact, we get a surjection from Resnj,ν−nj M
to Resnj,ν−nj Q1 ⊕ Resnj,ν−nj Q2. By (1) this is a contradition, hence the head of M is
irreducible. Furthremore this argument also shows that ǫj(hd(M )) = n.

Now consider the short exact sequence 0 → K → M → hd(M ) → 0 and apply Resnj,ν−nj.
We have shown above that there is an induced isomorphism Resnj,ν−nj M ∼= Resnj,ν−nj hd(M ).
Therefore Resnj,ν−nj K = 0 which proves (3).
(cid:3)

Lemma 8.2. Let M be irreducible in Cν and j ∈ J. Let m = ǫj(M ). Then there exists a
simple object X in Cν−mj such that

Resmj,ν−mj(M ) ∼= L(jm) ⊗ X.

Proof. Since L(j)◦m is the only simple R(mj)-module, there exists a simple X such that
L(jm) ⊗ X is a submodule of Resmj,ν−mj(M ). Since m = ǫj(M ) it must be that ǫj(X) = 0.
The inclusion of L(jm) ⊗ X into Resmj,ν−mj(M ) factors through the adjunction morphism
in the following diagram:

L(jm) ⊗ X

❙❙❙❙❙❙❙❙❙❙❙❙❙❙❙

a

Resmj,ν−mj(L(jm) ◦ X)

Resmj,ν−mj(M )

4❥❥❥❥❥❥❥❥❥❥❥❥❥❥❥

f

Since ǫj(X) = 0, the Mackey ﬁltration shows that the adjunction morphism a is an iso-
morphism. The inclusion of L(jm) ⊗ X into Resmj,ν−mj(M ) yields by adjunction a morphism

/
/
)
)
4
FOLDING KLR ALGEBRAS

13

from L(jm) ◦ X to M which is surjective as M is simple. The map f is obtained by applying
the restriction functor to this surjection. Since the restriction functor is exact, f is surjective.
Therefore f ◦ a is a surjective map from a simple source to a target which is nonzero as
(cid:3)

ǫj(M ) = m. Thus it is an isomorphism.
Lemma 8.3. Let N be irreducible in Cν, m ∈ N and j ∈ J. Let M = L(jm) ◦ N . Then the
head of M is irreducible, ǫj(hd(M )) = ǫj(N ) + m and all other composition factors L of M
have ǫj(L) < ǫj(N ) + m.

Proof. Let n = ǫ(N ). By Lemma 8.2, there exists a simple object X such that

Resnj,ν−nj(N ) ∼= L(jn) ⊗ X.

This object X satisﬁes ǫj(X) = 0.

By adjunction, there is a nonzero morphism from L(jn) ◦ X to N , which is surjective as
X is simple. Applying the exact functor L(jm) ◦ −, we obtain a surjection from L(jm+n) ◦ X
to M . Therefore all composition factors of M are composition factors of L(jm+n) ◦ X. The
statement of this lemma now follows from Lemma 8.1(2) and (3).
(cid:3)

9. Crystal Operators

Recall the deﬁnition of ǫj(M ) from (8.1). We similarly deﬁne

ǫ∗
j (M ) = {max n ∈ N | Resν−nj,nj M 6= 0}.

For any two modules M and N , deﬁne M ⋄ N = hd(M ◦ N ).
Let Bν be set of all self-dual (L, σ) in Cν where L is simple. Let B = ⊔ν∈NJ Bν. We now

construct some crystal operators on B.

For M ∈ Bν, deﬁne

soc HomR(j)(L(j), Resj,ν−j M )

soc HomR(j)(L(j), Resν−j,j M )

˜ejM = q1−ǫj(M )
j (M )

j
1−ǫ∗
j

˜e∗
j M = q
˜fjM = qǫj(M )
j
ǫ∗
j (M )
˜f ∗
j M = q
j M ⋄ L(j)
wt(M ) = ν.

L(j) ⋄ M

Since L(j) is the unique simple object in Cj, the following identities hold:

ǫj(M ) = max{n ∈ N | ˜en
ǫ∗
j (M ) = max{n ∈ N | (˜e∗

j M 6= 0}
j )nM 6= 0}

Lemma 9.1. Assume that ˜ej and ˜fj send B to B ⊔ {0}. Then for b, b′ ∈ B, b = ˜fjb if and
only if b′ = ˜ejb.

Proof. This is immediate from the adjunction isomorphism

HomCν+j (L(j) ◦ N, M ) ∼= HomCν (HomR(j)(L(j), Resj,ν−j M ).

(cid:3)

14

PETER J MCNAMARA

The rest of this section is dedicated to showing that the operators ˜ej and ˜fj send B to

B ⊔ {0}.

The KLR algebra R(j) is symmetric in the sense of [KKKO1, Deﬁnition 1.3]. In particular
there is a R-matrix rLj ,M : Lj ◦M −→ M ◦Lj for every R(ν)-module M . This is a homogeneous
morphism whose degree is given by the following lemma:

Lemma 9.2. If M is simple, then the degree of rLj ,M is (ν − ǫj(M )j) · j.

Proof. If ǫj(M ) = 0, then this is [KKKO2, Proposition 4.18]. To deal with the general case,
we induct on ǫj(M ). So suppose that ǫj(M ) > 0. Then we can write M = hd(Lj ◦ N ) for
some simple N . By Lemma 8.3, ǫj(N ) < ǫj(M ) so by induction we can assume the result
known for N . Consider the diagram

Lj ◦ M ←−−−− Lj ◦ Lj ◦ N

rLj ,M

y

id◦rLj ,N

y

M ◦ Lj ←−−−− Lj ◦ N ◦ Lj.

This diagram commutes and the degrees of the horizontal maps are zero so the degrees of
the vertical maps must agree.
(cid:3)

Lemma 9.3. If (M, σ) ∈ Bν then ˜fj(M, σ) ∈ Bν+j.

Proof. By [KKKO1, Theorem 3.2], if M is simple, then the image of the R-matrix can be
identiﬁed with both the head of L(j) ◦ M and the socle of M ◦ L(j), and furthermore this
image is simple. Consider the diagram:

rLj ,M

Lj ◦ M

/ Lj ⋄ M X

/ D(Lj ⋄ M ) 

/ D(Lj ◦ M )

/ DM ◦ DLj

/ M ◦ Lj

a∗(Lj ◦ M )

a∗(Lj ⋄ M )

a∗D(Lj ⋄ M ) 

a∗D(Lj ◦ M )

a∗DM ◦ a∗DLj

a∗(M ◦ Lj)

a∗rLj ,M

The unlabelled morphisms in the top row are, from left to right, the canonical surjection,
the canonical inclusion, the canonical isomorphism, and the circle product of the morphisms
f : DM −→ M and g : DLj −→ Lj which exhibit isomorphisms (M, σ) ∼= (DM, (Dσ)−1) and
(Lj, σj) ∼= (D(Lj), (Dσj)−1). There exists a unique morphism X : Lj ⋄ M −→ D(Lj ⋄ M )
making the top row commute. Each morphism on the bottom row is the pullback of the
morphism on the top row under a∗.

We have to show the commutativity of the square

Lj ⋄ M

X

−−−−→ D(Lj ⋄ M )

a∗(Lj ⋄ M )

a∗X−−−−→ a∗D(Lj ⋄ M ).

D(σ′)−1

x

σ′

x

+
+
/
/
/
/

/
/
/
/
/
/
/
O
O
2
2
/
/
O
O

/
/
O
O
/
/
O
O
/
/
O
O
O
O
FOLDING KLR ALGEBRAS

15

This square commutes because all other squares in the large diagram above are already known
to commute.

To check the grading shift, note that the degree of the isomorphism D(Lj ◦M ) ∼= DM ◦DLj
is ν · j. The degree of rLj ,M is (ν − ǫj(M )j) · j by Lemma 9.2. Therefore the degree of the
isomorphism D(Lj ⋄ M ) ∼= Lj ⋄ M is ǫj(M )j · j. Thus a degree shift of qǫj(M )
is required to
get a self-dual object.
(cid:3)

j

Lemma 9.4. If M ∈ Bν then ˜ej(M ) ∈ Bν−j ∪ {0}.
Proof. Assume that ǫj(M ) 6= 0, so in particular e∗
j (M ) > 0. Let N be a simple direct
summand of ǫj(M ). Then by adjunction, M is a quotient of L(j) ◦ N . Let m = ǫj(M ). Then
Lemma 8.2 ﬁnds a simple X such that

Resmj,ν−mj(M ) ∼= L(jm) ⊗ X.

As the restriction functor is exact, this is a quotient of Resmj,ν−mj(L(j) ◦ N ).

By Lemma 8.3, ǫj(N ) = m−1. Therefore in the Mackey ﬁltration of Resmj,ν−mj(L(j)◦N ),
there is only one nonzero term, which involves considering Res(m−1)j,ν−mj N . From Lemma
8.2, we have

Res(m−1)j,ν−mj N ∼= L(jm−1) ⊗ Y

for some simple Y .

We therefore have X ∼= Y . Since N can be recovered as the head of L(jm−1) ◦ Y , this

means that N is uniquely determined by M .

To show that this simple summand N has multiplicity one in ˜ej(M ) follows from the

adjunction formula

HomCν+j (L(j) ◦ N, M ) ∼= HomCν (HomR(j)(L(j), Resj,ν−j M ).

Therefore ˜ej(M ) is simple. We hereafter denote it by N .

By the classiﬁcation of irreducibles in Theorem 3.6, there exists an isomorphism N ∼= ζDN
for some root of unity ζ. The large commutative diagram in the proof of the previous Lemma
now shows that as M ∼= ˜fiN , we have M ∼= ζDM . Since M is assumed self-dual, ζ = 1,
completing the proof.
(cid:3)

10. The Crystal

We deﬁne a crystal for the Cartan datum (J, ·) to be a set B together with maps ˜ei, ˜fi : B −→

B ⊔ {0}, ǫi, φi : B −→ Z for all i ∈ J, and wt : B −→ ZJ, satisfying the conditions

(1) φi(b) = ǫi(b) + hhi, wt(b)i
(2) If b ∈ B and ˜ei(b) ∈ B then wt(˜ei(b)) = wt(b) + αi, ǫi(˜eib) = ǫi(b) − 1 and φi(˜eib) =

φi(b) + 1.

(3) If b ∈ B and ˜fi(b) ∈ B then wt( ˜fi(b)) = wt(b) − αi, ǫi( ˜fib) = ǫi(b) + 1 and φi( ˜fib) =

φi(b) − 1.

(4) If b, b′ ∈ B, then b′ = ˜eib if and only if b = ˜fib′.
There are more general notions of a crystal in the literature which allow ǫi and φi to take
the value −∞. Also the image of wt is usually allowed to land in the entire weight lattice,
as opposed to ZJ. Since we do not come across these crystals here, we shall ignore them.

16

PETER J MCNAMARA

Deﬁnition 10.1. A crystal B is highest weight if

(1) It has a distinguished element b0 such that every b ∈ B can be reached from b0 by

applying the operators ˜fj for j ∈ J.

(2) For all b ∈ B and j ∈ J, ǫj(b) = max{n | ˜en

j (b) 6= 0}.

The following result allows us to identify a crystal as B(∞) (the crystal which is a com-
binatorial skeleton of a Verma module). It is equivalent to the criterion of Kashiwara and
Saito [KS, Proposition 3.2.3], and we sketch a proof of this equivalence later in this section.

Theorem 10.2. [TW, Proposition 1.4] Assume (B, ˜ei, ˜fi) and (B, ˜e∗
i ) are highest weight
crystals with the same highest weight element b0 of weight 0. Suppose that the following
conditions are satisﬁed for all b ∈ B and all distinct pairs i, j ∈ J:

i , ˜f ∗

i (b) 6= 0,
˜fi(b),
j

i (b) + hwt(b), α∨

i i ≥ 0,

(1) ˜fi(b) 6= 0, ˜f ∗
(2) ˜fi ˜f ∗
j (b) = ˜f ∗
(3) ǫi(b) + ǫ∗
(4) If ǫi(b) + ǫ∗
(5) If ǫi(b) + ǫ∗
(6) If ǫi(b) + ǫ∗

i (b) + hwt(b), α∨
i (b) + hwt(b), α∨
i (b) + hwt(b), α∨

i i = 0, then ˜fi(b) = ˜f ∗
i i ≥ 1, then ǫ∗
i i ≥ 2, then ˜fi ˜f ∗

i (b).
i ( ˜fi(b)) = ǫ∗
i (b) = ˜f ∗

i

i (b) and ǫi( ˜f ∗
˜fi(b).

i (b)) = ǫi(b).

Then (B, ˜ei, ˜fi) ∼= (B, ˜e∗
˜e∗
i = ∗˜ei∗ under these identiﬁcations.

i , ˜f ∗

i ) ∼= B(∞). Furthermore, if ∗ is the Kashiwara involution, then

Let t be a natural number. We deﬁne a highest weight sl2 bicrystal Bt. Let

Bt = {(a, b, c) ∈ N3 | a + b + c = t} ∪ {(a, b, 0) ∈ N3 | t − |a − b| ∈ 2N}

The operators ˜f and ˜f ∗ act on Bt by the formulae

(a + 1, b + 1, 0)

˜f (a, b, c) =((a + 1, b, c − 1)
˜f ∗(a, b, c) =((a, b + 1, c − 1)

(a + 1, b + 1, 0)

if c > 0
if c = 0

if c > 0
if c = 0

In this crystal, ǫ(a, b, c) = a, ǫ∗(a, b, c) = b and the weight is given by

ǫ(a, b, c) + ǫ∗(a, b, c) + hwt(a, b, c), α∨

i i = c.

The following lemma is straightforward:

Lemma 10.3. Suppose (B, ˜ej, ˜fi, ˜e∗
Then any subset of B generated by a single b ∈ B and the operators ˜ej, ˜fj, ˜e∗
isomorphic to Bt for some natural number t.

i ) satisﬁes the conditions of Theorem 10.2. Fix j ∈ J.
is

j and ˜f ∗

i , ˜f ∗

j

Proof of Theorem 10.2. The criterion of [KS, Proposition 3.2.3] is in terms of a strict embed-
ding of crystals Φi : B −→ B ⊗ Bi. It is straightforward from Lemma 10.3 to compute that
such a strict embedding exists and satisﬁes the necessary properties to allow us to apply the
Kashiwara-Saito criterion and complete the proof.
(cid:3)

FOLDING KLR ALGEBRAS

17

The following lemma is the folded version of [LV, Proposition 7.1(ii)] and has the same

proof.

Lemma 10.4. Suppose that M ∈ B is such that ǫ∗
˜fi(˜ei)cM .
Proof. Let N = (˜ei)cM . Then ˜fiM is a quotient of L(i) ◦ N ◦ L(ic). Applying the exact
functor Resν+i,ci yields a surjection

i (M ) = c. Then (˜ei)c ˜fiM =

i ( ˜fiM ) = ǫ∗

Resν+i,ci L(i) ◦ N ◦ L(ic) ։ Resν+i,ci ˜fiM.

i ( ˜fiM ) = c, the object Resν+i,ci ˜fiM is nonzero and every simple subquotient is of the

Since ǫ∗
form (˜ei)c ˜fiM ⊗ L(ic). Therefore there is a surjection

Resν+i,ci L(i) ◦ N ◦ L(ic) ։ (˜ei)c ˜fiM ⊗ L(ic).

Note that ǫ∗

i (N ) = 0. Therefore in the Mackey ﬁltration of Resν+i,ci L(i) ◦ N ◦ L(ic), the
only possible subquotients which are not traceless are L(i) ◦ N ⊗ L(ic) and N ◦ L(i) ⊗ L(ic).
i ((˜ei)c ˜fiM ) = 0, there are no
By the induction-restriction adjunction and the fact that ǫ∗
homomorphisms from N ◦ L(i) to (˜ei)c ˜fiM . Therefore there must be a surjection

L(i) ◦ N ։ (˜ei)c ˜fiM.

Since ˜fiN is the unique irreducible quotient of L(i) ◦ N , it must be that we have our desired
isomorphism ˜fiN ∼= (˜ei)c ˜fiM .
(cid:3)

Proposition 10.5. Conditions (1)-(6) in Theorem 10.2 are satisﬁed by the crystal B.

Proof. That condition (1) is satisﬁed is obvious.

j (M ) and ˜f ∗

For (2), note that ˜fi ˜f ∗

˜fi(M ) are both simple quotients of Li ◦M ◦Lj. It suﬃces
to prove that the underlying R-module of Li ◦ M ◦ Lj has a simple head, which then forces
these two quotients to be identical. This follows from the classiﬁcation of irreducible modules
in terms of semicuspidal decompositions in [TW, §2], where we consider a convex order with
all simple roots in i at one extreme and all simple roots in j at the other extreme.

j

The condition (3) does not involve the diagram automorphism, so follows from the corre-

i ( ˜fi(M )) − ǫ∗

i ( ˜fi(M )) = ǫi(M ) + 1.

sponding result in the unfolded case, namely [LV, Proposition 6.7(v)].
We now turn our attention to (4). Suppose M is such that ǫi(M )+ǫ∗

i i = 0.
We apply the inequality (3) to ˜fi(M ) as well as the obvious inequalities ǫi( ˜fi(M ))−ǫi(M ) ≤ 1
and ǫ∗

i (M )+hwt(M ), α∨

i (M ) ≤ 1 to deduce that ǫ∗

Now consider M ◦ Li. The object ˜f ∗(M ) is both the head and the unique subquotient
with maximal ǫ∗
i . Taking duals shows that the socle of Li ◦ M is the unique subquotient
i ( ˜fi(M )) = ǫi(M ) + 1 shows that the head, ˜fi(M ), is
i . But the identity ǫ∗
with maximal ǫ∗
the unique subquotient with maximal ǫ∗
i . Therefore Li ◦ M is irreducible, so the R-matrix
induces an isomorphism (in C) between M ◦ Li and Li ◦ M . This is an isomorphism between
˜f ∗
i (M ) and ˜fi(M ), as desired.
The condition (5) also does not involve the diagram automorphism, so also follows from

the corresponding result in the unfolded case in [LV].

18

PETER J MCNAMARA

For condition (6), ﬁrst apply condition (5) to deduce ǫ∗

i (M ). This implies
that ˜fiM also satisﬁes the condition (5). Now applying (5) to both M and ˜fiM yields
ǫi( ˜f ∗
˜fiM ) = ǫi( ˜fiM ). With these two equations, we apply Lemma 10.4
twice to reach the desired conclusion.
(cid:3)
Lemma 10.6. Suppose i, j ∈ J and b ∈ B. Then ˜ei ˜f ∗

i M ) = ǫiM and ǫi( ˜f ∗

i ( ˜fiM ) = ǫ∗

j b is either equal to ˜f ∗

j ˜eib or b.

i

Proof. If i = j then this is an immediate consequence of Lemma 10.3 and Proposition 10.5
since this result holds in the crystal Bt. So now suppose that i 6= j. Then ǫi(b) = ǫi( ˜f ∗
j b) so
either ˜ei ˜f ∗
j ˜eib are both zero, or both nonzero. In the latter case, applying condition
(3) to ˜ei ˜f ∗
(cid:3)

j b and ˜f ∗
j b implies the result.

Let [1] be the object (k, id) in C0. It lies in B. If n is odd this is the only element of B
of weight zero. If n is even, there is exactly one other weight zero element of B, which we
denote [−1].
Lemma 10.7. Let BL be the subset of B consisting of all elements of the form ˜fi1 · · · ˜fik [1].
Let BR be the subset of B consisting of all elements of the form ˜f ∗
[1]. Then BL = BR.

i1 · · · ˜f ∗
ik

Proof. What we have to prove is that it is impossible to have an equation of the form.

˜fi1 · · · ˜fik [1] = ˜f ∗

j1 · · · ˜f ∗

jk[−1]

Suppose for want of a contradition that such an equation holds. We apply ˜ei1 to this equa-
tion and repeatedly use Lemma 10.6 on the right hand side to either arrive at a smaller
counterexample or a direct contradiction.
(cid:3)

Theorem 10.8. The bicrystal BL = BR is isomorphic to B(∞).

Proof. It is clear that BL = BR is highest weight. It is a bicrystal by Lemma 10.7. Proposition
10.5 shows that it satisﬁes the conditions (1)-(6) in the statement of Theorem 10.2. Applying
Theorem 10.2 completes the proof.
(cid:3)

We will now write B+ for the bicrystal BL = BR.

Remark 10.9. Our use of [LV, Proposition 6.7(v)] is the only place in this paper where we
use the necessary fact that the leading coeﬃcients of Qij(u, v) are nonzero.

Corollary 10.10. The Grothendieck group K(Pν) has dimension
(1 − tα)− mult(α).

Xν∈NJ

dim K(Pν )tν = Yα∈Φ+

11. Proof of the Main Theorem

We have natural bases B and B∗ of K(P) and K(L). Speciﬁcally B∗ consists of the classes
of objects of B+. This is a basis by Theorem 3.6, together with the fact that every irreducible
R(ν)-module is isomorphic to its dual up to a grading shift. The basis B consists of the
classes of projective covers of elements of B+.
Theorem 11.1. The bases B and B∗ are dual to each other.

FOLDING KLR ALGEBRAS

19

Proof. Since k is algebraically closed, Schur’s Lemma implies that the endomorphism algebra
of any simple object is k. Therefore Hom(P, L) is either 0 or k when P is indecomposable
projective and L is simple. As the pairing between K(P) and K(L) is realised by the Hom
pairing (3.1), this implies that B and B∗ are dual to each other.
(cid:3)

Lemma 11.2. The structure constants for multiplication in K(P) with respect to the basis
B are in Z[q, q−1].

Proof. Write [P ][Q] = PR∈B aR

Grothendieck group, the duality D sends ζn to ζ −1
on Z[ζn, q, q−1] ﬁxing q.

P Q[R] where a priori the aR

Since D(P ◦ Q) ∼= (DP ) ◦ (DQ) by Lemma 5.1, we have

P Q[R] lie in Z[ζn, q, q−1]. On the
n , which we will denote by a bar involution

XR∈B

aR

P Q[R] = [P ][Q] = [DP ][DQ] = [D(P ◦ Q)] =XR

aR
P Q[DR] = aR

P Q[R].

This implies that each coeﬃcient aR
as desired.

P Q is invariant under the bar involution so lies in Z[q, q−1]

(cid:3)

Let j = (j1, j2, . . .) be a sequence of elements of J in which each element occurs inﬁnitely

often.

Suppose b ∈ B(∞). Deﬁne inductively a sequence of natural numbers by

cm = ǫjm(˜e

cjm−1
jm−1

(· · · ˜e

cj1
j1

(b) · · · )).

This deﬁnes a function ι : B(∞) −→ N∞ which is known to be injective. Since B+ ∼= B(∞),

we can view ι as an inclusion from B+ to N∞.

If c ∈ N∞, we deﬁne P (c) = P (c1)

j1

◦ P (c2)

j2

◦ · · · .

Lemma 11.3. For c ∈ N∞ and L ∈ B+, Hom(P (c), L) = 0 unless ι(L) ≥ c in lexicographical
order. If ι(L) = c then Hom(P (c), L) ∼= k.

Proof. Write P (c) = P (c1)

◦ Q. By adjunction,

j1
Hom(P (c), L) ∼= Hom(P (c1)

j1

⊗ Q, Resc1j1,ν−c1j1 L).

If ǫj1(L) < c1, this is zero. If ǫj1(L) = c1, then by Lemma 8.2, Resc1j1,ν−c1j1 L ∼= L(jc1
Therefore

1 )⊗ ˜ec1
j1

L.

Hom(P (c), L) ∼= Hom(Q, ˜ec1
j1

L).

So unless ι(L) > c in lexicographical order, we have either computed Hom(P (c), L) or are in
a position where we can proceed by induction.
(cid:3)

Lemma 11.4. The structure constants for comultiplication in K(P) with respect to the basis
B are in Z[q, q−1].

Proof. By Lemma 11.3, the set {[P (ι(b))]} is a basis of K(P). Since the objects P (ι(b)) are all
self-dual, these also form a basis of k. We will now compute r([P (c)]) to prove the result.

20

PETER J MCNAMARA

From Theorem 7.3, [c]!q[P (c)] = [P c] so it suﬃces to compute r([P c]). Theorem 4.5 tells
us that modulo traceless subquotients (which are zero in the Grothendieck group), all sub-
quotients of Res P c are a grading shift of P c′
. Thus all structure constants lie in Q(q).
This is enough to complete the proof since Q(q) ∩ Z[ζn, q, q−1] = Z[q, q−1].
(cid:3)

⊗ P c′′

Proposition 11.5. The twisted bialgebra structures on ⊕ν∈NJ K(Pν ) and ⊕ν∈NJ K(Lν) re-
strict to twisted biaglebra structures on k and k∗ respectively. The corresponding twisted
bialgebras k and k∗ are graded duals of each other.

Proof. That k is a bialgebra is Lemmas 11.2 and 11.4. Since k is algebraically closed, the
endomorphism algebra of any simple object is k. Therefore the Hom pairing is a perfect
pairing between k and k∗. Hence the statement for k∗ follows from that for k.
(cid:3)

Let ′fQ(q) be the free Q(q)-algebra generated by θj. Let ′f be the Z[q, q−1]-subalgebra

generated by the divided powers θ(n)

. There is a canonical surjection from ′f to f .

j

Deﬁne χ : ′f −→ k to be the unique algebra homomorphism such that χ(θj) = [Pj] for all

j ∈ J.

Lemma 11.6. χ is a homomorphism of coalgebras.

Proof. To show that χ is a coalgebra homomorphism, we have to show that the coproduct
on k satisﬁes the properties

(1) r([Pj]) = [Pj] ⊗ 1 + 1 ⊗ [Pj]
(2) r(xy) = r(x)r(y) where the multiplication on the right hand side is the twisted one

given in (6.1).

The ﬁrst of these facts is straightforward, while the second follows from Theorem 4.5 (the
Mackey ﬁltration).
(cid:3)

Lemma 11.7. The homomorphism χ is surjective.

j

] = χ(θ(c)

Proof. Since [P (c)
j ), the elements {P (ι(b))} for b ∈ B(∞) all lie in the image of χ.
Lemma 11.3 shows that if we expand {P (ι(b))} in the basis B of classes of indecomposable
projectives, the coeﬃcients that appear form a unitriangular matrix. In particular this matrix
is invertible over Z[q, q−1] which implies the surjectivity of χ.
(cid:3)

Lemma 11.8. χ is an isometry.

Proof. To show that χ is an isometry it suﬃces to show that the pairng (·, ·) on k deﬁned by
(3.2) satisﬁes the properties

(1) ([Pj], [Pj ]) = (1 − qj·j)−1,
(2) (x, yz) = (r(x), y ⊗ z),
(3) (xy, z) = (x ⊗ y, r(z)).

The ﬁrst of these conditions is Lemma 7.1. The third follows from the Induction-Restriction
adjunction. The second follows from the third since the form (·, ·) is symmetric.
(cid:3)

Corollary 11.9. The kernel of χ lies in the radical of h·, ·i.

FOLDING KLR ALGEBRAS

21

Proof of Theorem 6.1. Recall that f is the quotient of ′f by the radical of h·, ·i. Lemma 11.7
and Corollary 11.9 imply that χ induces a surjection π from f to k, satisfying π(θj) = [Pj]
for all j ∈ J. Theorem 10.8 and [L, Theorem 33.1.3] compute the graded ranks of the free
Z[q, q−1]-modules k and f respectively. These ranks are the same, so π is an isomorphism. (cid:3)

12. Bases of Canonical Type

Let σ be the antiautomorphism of f that ﬁxes the Chevalley generators θj. This is induced
from an automorphism σ of each R(ν) which sends ei1,...,in to ein,...,i1, yj to yn+1−j and τk to
−τn−k. The bar involution of f is the automorphism ﬁxing the generators θj and sending q
to q−1. Both σ and the bar involution induce corresponding involutions on f ∗, which we will
also call σ or the bar involution respectively.

The following deﬁnition is lifted from [B] where it appears in the special case where q is

specialised to 1.

Deﬁnition 12.1. A basis B of f is said to be of canonical type if it satisﬁes the conditions (1)–
(6) below:

(1) The elements of B are weight vectors.
(2) 1 ∈ B.
(3) Each right ideal (θp
(4) In the bases induced by B, the left multiplication by θ(p)

j f ⊗ Q(q)) ∩ f is spanned by a subset of B.

from f /θj f onto θp

j

j f /θp+1

j

f

is given by a permutation matrix.

(5) B is stable by σ.
(6) B is stable under the bar involution.

There is a dual notion:

Deﬁnition 12.2. A basis B∗ of f ∗ is said to be of dual canonical type if it satisﬁes the
conditions (1)–(6) below:

(1) The elements of B∗ are weight vectors.
(2) 1 ∈ B∗.
(3) Each ker(rj p) is spanned by a subset of B∗.
(4) In the bases induced by B∗, the map

rj p : ker(rj p+1)/ ker(rj p) −→ ker(rj)

is given by a permutation matrix.

(5) B∗ is stable by σ.
(6) B∗ is stable under the bar involution.
The algebra f acts on f ∗ where θj acts by the endomorphism rj.

If B∗ is a basis of
dual canonical type, then the specialisation of B∗ at q = 1 is a perfect basis of the unipotent
coordinate ring Z[N ] (which is the specialisation of f ∗ at q = 1) in the sense of [BK, Deﬁnition
5.30]. The other results of [BK, §5] then prove that the crystal obtained from any basis of
dual canonical type is isomorphic to B(∞).
Theorem 12.3. A basis B of Uq(n) is of canonical type if and only if its dual basis B∗ of
Aq(n) is of dual canonical type.

22

PETER J MCNAMARA

Proof. Let A be the matrix representing the linear transformation from fν to fν+pj that is
left-multiplication by θj with respect to the basis B. Condition (3) in Deﬁnition 12.1 is

equivalent to A being in block form (cid:0) 0

θp
i f ⊗ Q(q) ∩ f corresponds to the rows in X. Furthermore X is invertible over Q(q) since this
linear transformation is injective.

X(cid:1) where the subset of B spanning the right ideal

Let B be the matrix representing the linear transformation rj p from fν+pj to fν with respect
to the basis B. Condition (3) in Deﬁnition 12.2 is equivalent to B∗ being in block form ( 0 Y )
with Y invertible over Q(q) where the subset of B∗ spanning ker(rj p) corresponds to the
columns not part of Y .

Since passing between the matrices representing adjoint operators corresponds to taking
the transpose of a matrix, the two conditions labelled (3) in Deﬁnitions 12.1 and 12.2 are
equivalent. The equivalence of the other conditions is obvious.
(cid:3)

Theorem 12.4. [B, §2.3] Let λ ∈ P +. Let V (λ) be a highest weight module of the quantum
group Uq(g) constructed from (J, ·) with highest weight λ and let vλ be a highest weight vector.
Let B be a basis of canonical type. Then the set

is a basis of V (λ).

{bvλ | b ∈ B, bvλ 6= 0}

Proof. By [L, Corollary 6.2.3(a)], the map x 7→ x−vλ is a surjective map from f to V (λ) with
kernel the left ideal

j ,λi+1

f θ

hα∨
j

K =Xj∈J

.

By conditions (3) and (5) in the deﬁnition of a bais of canonical type, K is spanned by
elements of B. Hence B induces a basis of the quotient V (λ).
(cid:3)

Theorem 12.5. Let M ∈ B+ and p ≤ ǫj(M ) be a natural number. Then

rj p([M ]) =(cid:20)ǫj(M )

p

(cid:21)j

[˜ep

j M ] + XN ∈B+

ǫj(N )<ǫj(M )−p

aN [N ]

(12.1)

for some aN ∈ Z[q, q−1].
Proof. Let m = ǫj(M ). By Lemma 8.2, Resmj,ν−mj(M ) ∼= L(jm) ⊗ X for some irreducible
object X of Cν−mj.

Now suppose that L(ip) ⊗ Y is a simple composition factor of Respm,ν−pm M . Note that
ǫj(Y ) ≤ m − p. If ǫj(Y ) < m − p then this term contributes in an allowable way to the sum
in (12.1). If ǫj(Y ) = m − p then again by Lemma 8.2, Res(m−p)j,ν−(m−p)j Y ∼= L(jm−p) ⊗ Z
for some irreducible object Z. Since the restriction functor is exact we must have X ∼= Z.

j (M ), this identiﬁes Y as ˜f m−p
As X ∼= ˜em
It remains to compute the coeﬃcient of [˜ep

j

j (M ).

j (M ) = ˜ep
˜em
j M ] in the expansion (12.1), which follows from
(cid:3)

(7.1).

Theorem 12.6. The set B∗ ∩ ker(rip) is a basis of ker(rip).

FOLDING KLR ALGEBRAS

23

Proof. It suﬃces to show that rip is injective on

spanh[M ] | M ∈ B+ and ǫi(M ) ≥ pi.

Since the crystal operator ˜ep

i is injective on the set of b ∈ B+ ∼= B(∞) satisfying ǫi(b) ≥ p,

this injectivity follows from Theorem 12.5 above.

(cid:3)

Theorem 12.7. The basis B∗ is a basis of dual canonical type.

Proof. Conditions (1) and (2) in Deﬁnition 12.2 are obvious. Condition (3) is Theorem
12.6. Condition (4) follows from Theorem 12.5, noting that if [M ] ∈ ker(rj p+1) \ ker(rp
j ),
then ǫj(M ) = p. The stability under σ is because σ is induced by the automorphism σ of
R(ν). The stability under the bar involution is because B∗ consists of the classes of self-dual
objects.
(cid:3)

Corollary 12.8. The KLR basis B is a basis of canonical type.

Proof. This is a consequence of Theorems 12.8, 12.3 and 11.1.

(cid:3)

From Theorem 12.4, we obtain in addition the following Corollary.

Corollary 12.9. The KLR basis B induces a basis in any irreducible highest weight module.

Remark 12.10. When there is no diagram automorphism, a categoriﬁed version of Corollary
12.9 is proved in [KK] and [W].

When C is a symmetric Cartan matrix, the ﬁeld k is of characteristic zero and the polyno-
mials Qij(u, v) are all of the form ±(u − v)−cij , the basis B is the same as Lusztig’s canonical
basis, or equivalently Kashiwara’s lower global basis. This follows from comparing the geo-
metric interpretation of the KLR algebras as Ext algebras due to [VV, R2] and Lusztig’s
construction of the canonical basis in terms of perverse sheaves in [L]. A relevant discussion
for how to geometrically construct projective modules in this situation can be found in [CG,
§8.7].

References

[B]
[BK]

[CG]

[KK]

[KKK]

Pierre Baumann. The canonical basis and the quantum Frobenius morphism. arXiv:1201.0303.
Arkady Berenstein and David Kazhdan. Geometric and unipotent crystals. II. From unipotent
bicrystals to crystal bases. In Quantum groups, volume 433 of Contemp. Math., pages 13–88.
Amer. Math. Soc., Providence, RI, 2007. arXiv:math/0601391
Neil Chriss and Victor Ginzburg. Representation theory and complex geometry. Birkh¨auser Boston,
Inc., Boston, MA, 1997.
Seok-Jin Kang and Masaki Kashiwara. Categoriﬁcation of highest weight modules via Khovanov-
Lauda-Rouquier algebras. Invent. Math., 190(3):699–742, 2012. arXiv:1102.4677
Seok-Jin Kang, Masaki Kashiwara, and Myungho Kim. Symmetric quiver Hecke algebras and
R-matrices of quantum aﬃne algebras. arXiv:1304.0323.

[KKKO1] Seok-Jin Kang, Masaki Kashiwara, Myungho Kim, and Se-jin Oh. Simplicity of heads and socles

of tensor products. Compos. Math., 151(2):377–396, 2015. arXiv:1404.4125

[KKKO2] Seok-Jin Kang, Masaki Kashiwara, Myungho Kim, and Se-Jin Oh. Monoidal categoriﬁcation of

[KL1]

cluster algebras II. arXiv:1502.06714.
Mikhail Khovanov and Aaron D. Lauda. A diagrammatic approach to categoriﬁcation of quantum
groups. I. Represent. Theory, 13:309–347, 2009. arXiv:0803.4121

24

[KL2]

[K]

[KS]

[L]

[LV]

[M]

[Mc]
[R1]
[R2]

[TW]

[VV]

[W]

PETER J MCNAMARA

Mikhail Khovanov and Aaron D. Lauda. A diagrammatic approach to categoriﬁcation of quantum
groups II. Trans. Amer. Math. Soc., 363(5):2685–2700, 2011. arXiv:0804.2080
Alexander Kleshchev. Linear and projective representations of symmetric groups, volume 163 of
Cambridge Tracts in Mathematics. Cambridge University Press, Cambridge, 2005.
Masaki Kashiwara and Yoshihisa Saito. Geometric construction of crystal bases. Duke Math. J.,
89(1):9–36, 1997. arXiv:q-alg/9606009
George Lusztig. Introduction to quantum groups, volume 110 of Progress in Mathematics.
Birkh¨auser Boston Inc., Boston, MA, 1993.
Aaron D. Lauda and Monica Vazirani. Crystals from categoriﬁed quantum groups. Adv. Math.,
228(2):803–861, 2011. arXiv:0909.1810
Ruslan Maksimau. Canonical basis, KLR algebras and parity sheaves. J. Algebra, 422:563–610,
2015. arXiv:1301.6261
Peter J. McNamara. Cluster monomials are dual canonical. Preprint.
Rapha¨el Rouquier. 2-Kac-Moody algebras. arXiv:0812.5023.
Rapha¨el Rouquier. Quiver Hecke algebras and 2-Lie algebras. Algebra Colloq., 19(2):359–410, 2012.
arXiv:1112.3619
Peter Tingley and Ben Webster. Mirkovic-Vilonen polytopes and Khovanov-Lauda-Rouquier alge-
bras. arXiv:1210.6921.
Michela Varagnolo and Eric Vasserot. Canonical bases and KLR-algebras. J. Reine Angew. Math.,
659:67–100, 2011. arXiv:0901.3992
Ben Webster. Canonical bases and higher representation theory. Compos. Math., 151(1):121–166,
2015. arXiv:1209.0051

E-mail address: p.mcnamara@uq.edu.au

