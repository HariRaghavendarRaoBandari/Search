6
1
0
2

 
r
a

 

M
4
1

 
 
]
I

N
.
s
c
[
 
 

1
v
7
0
3
4
0

.

3
0
6
1
:
v
i
X
r
a

LinearProgrammingApproachesforPowerSavingsinSoftware-deﬁnedNetworks(TheExtendedVersion)FahimehAlizadehMoghaddamSNE&S2groupsUniversityofAmsterdam&VUUniversityAmsterdamAmsterdam,TheNetherlandsEmail:f.alizadehmoghaddam@uva.nlPaolaGrossoSystemandNetworkEngineeringgroup(SNE)UniversityofAmsterdamAmsterdam,TheNetherlandsEmail:p.grosso@uva.nlAbstract—Software-deﬁnednetworkshavebeenproposedasaviablesolutiontodecreasethepowerconsumptionofthenetwork-ingcomponentindatacenternetworks.Stillthequestionremainsonwhichschedulingalgorithmsaremostsuitedtoachievethisgoal.Wepropose4differentlinearprogrammingapproachesthatschedulerequestedtrafﬁcﬂowsonSDNswitchesaccordingtodifferentobjectives.Dependingonpre-deﬁnedsoftwarequalityrequirementssuchasdelayandperformance,asinglevariationoracombinationofvariationscanbeselectedtooptimizethepowersavingandtheperformancemetrics.Oursimulationresultsdemonstratethatallouralgorithmvariationsoutperformtheshortestpathschedulingalgorithm,ourbaselineonpowersavings,lessormorestronglydependingonthepowermodelchosen.WeshowthatinFatTreenetworks,whereswitchescansaveupto60%ofpowerinsleepingmode,wecanachieve15%minimumimprovementassumingaone-to-onetrafﬁcscenario.Twoofouralgorithmvariationsprivilegeperformanceoverpowersavingandstillprovidearound45%ofthemaximumachievablesavings.I.INTRODUCTIONNetworkingdevicesareoneofthemaincontributorstopowerconsumptionindatacenters.However,improvingontheiroverallpowerefﬁciencyisnotatrivialtask.Infact,fromthedatacenterprovidersperspectivepowerefﬁciencyinthenetworkneedstobeweightedagainstotherqualityrequirementssuchasitsperformance,reliabilityandavail-ability.Thisresultsinthedeploymentoflargenumberofswitches,connectedviamultiple(includingback-up)links,whoseaverageutilizationrateisaround30%[1].Inthiscontextthereisroomforimprovementintheoverallenergyefﬁciencyofthenetworkingcomponent.Nowadays,software-deﬁnednetworks(SDN)arereplacingtraditionalnetworksduetotheiradvantageofprovidingpro-grammabilityandcontrollabilityoftheunderlyingnetwork.AsInfoneticsResearchforecasts[2],therewillbe87%growthinSDNdeploymentinNorthAmerican-basedenterprisesby2016.GivenSDNswiderangeofapplicationsandtheirrapidgrowthindatacenternetworks,theyareoftenchosenaspartofthepowerefﬁcientsolutions.Inanearliersystematicliteraturereview[3],westudiedtheexistingenergyefﬁcientnetworkingsolutionsandweobservedagrowingtrendinusingSDNscombinedwithenergyawareness.Theexistingenergyefﬁcientnetworkingsolutionsareimplementedasﬂowschedulersthatfullﬁlluser-deﬁnedqualityrequirementswhileconsideringenergyconsumptionimprovements.However,theeffectivenessofSDNswithrespecttoenergyefﬁciencyarenotfullystudiedanditisnotdeterminedhowtheprogrammabilityofnetworkscanbeaaddedvalueinthismatter.Besides,scalabilityandperformancecostofenergyefﬁciencyoptimizationarestillopenquestions.Linearprogrammingalgorithmsarerecentlydeployedtoperformasaschedulerfortheincomingﬂowsontheavailablepaths[4]–[10].Findingtheoptimumsolution,e.g.mappingtheﬂowstothepaths,isanNP-hardproblem.Inthispaper,wewillshowitispossibletoreducethecomplexitybysplittingandadjustingtheproblem.Wepropose4linearprogrammingalgorithmsthatdifferintheirobjectivefunctions.Westudyeachalgorithmtoseetowhatextenttheyimpactotherqualityrequirementssuchasperformance.Ourmaincontributionsare:•Wederivefourdifferentﬂowschedulingalgorithmsthattakeintoaccountanumberofconstraintstoprovideeitherhighestthroughputorhighestpowerefﬁciency.•Weimplementamodulardecisionframeworktoevaluateouralgorithmvariations,whichcollectsstatisticalinfor-mationfromthenetworkandschedulestheexisting/newﬂowsaccordingly.•Wesupportourhypothesiswithanumberofsimulationexperimentsandwecompareourresultswithabaseline,namelytheshortest-pathschedulingalgorithm.•Weassesstowhatextentthescalabilityqualityrequire-mentisfulﬁlledbyperformingexperimentsinnetworkofdifferentsizes,differentnumbersofﬂows,anddifferentcharacteristicsofswitches.Therestofthearticleisstructuredasfollows.Existingrelatedworkonpowerefﬁciencysolutionsforsoftware-deﬁnednetworksisdiscussedinsectionII.InsectionIII,wepresentourschedulingalgorithmanditsimplementation.WedescribeourevaluationdecisionframeworkanditscomponentsinsectionIV.SectionsVandVIpresentthesimulationscenar-iosandexperimentalresults,respectively.OurﬁndingsandobservationsarediscussedinsectionVII.Finally,thepaperisconcludedanddirectionsforfutureworkareintroducedinsectionVIII.II.RELATEDWORKPowerandenergyefﬁciencyofdatacenternetworkshasoftenbeenaby-productofotheroptimizationstrategies.Themainfocusindatacentershasbeenonenergy-awarevirtualmachine(VM)placement,andtheunderlyingnetworkistreatedasthesideproblemintermsofprovidingpowersavings.Inthiscase,powersavingsinthenetworkusuallyareachievedbytrafﬁcconsolidationortrafﬁclocality[4],[11].Forexample,theframeworksintroducedin[12],[13],minimizethenumberofactiveracksinthedatacenternetworksbyconsolidatingVMsinfewernumberofracks.VMplacementhasbeenidentiﬁedasaroutingproblemin[6]andithasbeencombinedwiththenetworkoptimization.Solelyfocusedonthenetworkingcomponent,[14]introducedadistributedﬂowschedulingschemesuitablewithinadatacenternetwork.Still,therearenocompletestudiesmadeonthetrade-offbetweentheoptimizationinthenetworkcomponentandtheapplicationrelatedobjectives.Weinsteadfocusspeciﬁcallyonthis,withthegoalofprovidingapplicationdevelopersthatintendtoprogramthenetworkaclearoverviewoftheprosandconsoftheiralgorithmschoices.ToprovidethisinformationtoapplicationdeveloperswefocusontheFatTreetopology,averywellknownthree-tiereddatacenternetworkarchitecture.Thisisn’ttheonlypossiblechoice:Fang,etal.in[15]studydifferentnetworkarchitecturesotherthanFatTree,namely,2N-Tree,VL2andBCubefromthepowersavingpointofview.L.Gyarmati,etal.designacomparisonstudyonenergyconsumptionofBCube,DCell,FatTreeandbalancedTreenetworkarchitectures[16].AswewilldiscussinSec.IV-Athedecisionframeworkwedevelopedallowstodeﬁnearbitrarytopologiesasinput,andassuchwillallowcomparisonsbetweendifferentdatacenterarchitectures.Thereareotherstudiesthat,likeours,deploysoftware-deﬁnednetworksinordertoapplytheenergy-awarechangesdecidedbytheirdecisionframeworksorapplications.Thepioneerworkinthisera,ElasticTree[7]designsacentralizeddecisionframeworktoturnofftheidlenetworkdevices.Adisadvantageofthismodelisthatthemulti-minutebootingtimeofswitchesmakeshandlingappropriatelyburstytrafﬁcmoredifﬁcult.Differently,weuseinoursimulationthesleep-ingmodeofswitches;thistakesmuchshortertime(around1s)toturnthembackon,whilestillprovidingsigniﬁcantamountofpowersaving.Therearesimilarapproachesthatputidlenetworkdevicesintothesleepingmodeorturnthemoffbyimplementingheuristicschedulingalgorithms[5],[17],[18].Theymostlyprovidethetrafﬁcmatrixasaninputtotheschedulingalgorithm,whichisnotalwaysarealisticscenario.Contrarily,wefocusonrealtimeﬂowrequestswhilekeepingthescalabilityqualityrequirementinmind,aswewilldiscussinSec.III-D.III.THEFLOWSCHEDULINGALGORITHMToenablecommunicationbetweennodesinanSDN,aschedulingalgorithmneedtoselecttherouteﬁrst.Suchanalgorithmcanbeenergy-agnosticandupdatetheﬂowtablesoftheswitches,regardlessofenergyconsumptionoftherouteanditsthroughput.Shortest-pathﬁndingapproach(SP)issuchanexampleasitdoesnotretrieveanybandwidth/energyrelatedinformationfromthesystemandconsequentlycannotmakesmartdecisionsbasedthis.Weuseitanditsextensionasabaselinetocomparethequalitymetricsofouralgorithmwith.Inordertodesignourpower-savvyschedulingalgorithm,wedeploytheIntegerLinearProgrammingmodel,whichdeﬁnestheproblemasalinearfunctionofdifferentvariablesandthevaluesselectedforvariablesneedtomeetthelimitationsofpre-deﬁnedconstraints.Weaimtoscheduletheincomingnetworktrafﬁcwithpowersavingintentionsandreducingthevolumeofthetrafﬁcbyintelligentendpointplacementsisoutofscopeofthisresearch.Therefore,weassumetheendpointsareknownbeforehand.Also,noinitialtrafﬁcmatrixisassignedtothedatacenterandtheincomingloadisroutedinrealtime.Thismakesscalabilityaveryimportantqualityrequirementinourschedulingalgorithmdesign.A.ObjectivesTherearethreeobjectivesthatcanbeconsideredwhenschedulingtrafﬁcﬂows:•Minimizethepowerconsumptionofthedatacenternetwork:Tominimizethetotalpowerconsumption,therearemul-tipleoptions.Oneistoturnofftheidlenetworkdevices,butthistakesasigniﬁcantamountoftimeforthedevicestobootandbebackupagain.Anotheroptionistoturnofftheidleswitchportsseparately,whenneeded.ThisisessencetheapproachtakenbytechniqueslikeEnergyEfﬁcientEthernet,whichareshowntoprovidesomeenergysavings.Stillthedevicechassisisthemainenergyconsumingcomponent;[7]statesthatswitchesconsumeupto90%oftheirmaximumpowerassoonastheyareturnedon,beforeanyincomingload.Therefore,weplaceourfocusonputtingtheidlenetworkdevicesintothesleepingmode.Switchesinthesleepingmodestillconsumeenergybutmuchlessthanwhentheydointheactivemode.Thisvaluewilldependonthetechnologiesadopted.Besides,theirtransitiontimeissigniﬁcantlylessthanthebootingduration.Ultimately,weaimtominimizethenumberofactiveswitchesforagivennumberofﬂowsinthenetwork.Eq.1deﬁnesthealgorithmobjective,withtotalpowerconsumptionPCbeingthesumofthepowerconsump-tionofeachactiveswitch,mthenumberofactiveswitchesselectedtoservennumberofﬂows.Minimize(PC=mXj=1PCj)(1)•Minimizethenumberoftransitionsfromthesleepingmodetotheactivemode:Anotherenergy-awareapproachthatweapplyisprioritiz-ingthealreadyexistingactiveswitchesoverthesleepingones.Thishelpussavethetransitiontime.Consequently,thedurationoftheschedulingphasewillbeshorteralthoughtheachievedbandwidthsfortheﬂowsmightbereducedduetolinksharing.Therefore,itisuptoouroptimizationalgorithmtokeepthebalancebetweenthebandwidthsandthepowerconsumptionbyturningontheswitches.Weassociatethisconceptwithanewvariablecalledtransitiondegree,whichindicatesthenumberofswitchesthatneedtobeturnedonfortheincomingload.Thetransitiondegreecanhaveavaluebetween0andthetotalnumberofswitches.TheobjectiveexpressedinEq.2istominimizethisvariable.Minimize(transitiondegree)(2)•MaximizethebandwidthfortheﬂowsFromtheuserperspective,themainqualityrequirementisapplicationperformance.Inreallifescenarios,differentapplicationsmighthavedifferentperformancerequire-mentsandtheywillgetdifferentpriorities.Inthiswork,weassumethatalltheapplications,hencetheﬂowsweschedule,havethesamepriorityinregardtothroughputandwetrytooptimizethebandwidthfortheﬂowswithfairness.Maximize(nXi=1BWi)(3)Eq.3deﬁnestheobjective,withnbeingthenumberofﬂowsinthedatacenternetwork.B.AlgorithmVariationsVariationsinapplication-levelqualityrequirementsmightprivilegeoneormoreoftheobjectives.Thisleadsusdeﬁnedifferentvariationsofourschedulingalgorithmaccordingly.Foreachvariation,differentobjectivesareboundtogethertoformulateanobjectivevariable.However,itisimportanttonotethatallthevariationsarepowerefﬁcientastheidleswitchesareputintothesleepingmode.Weidentiﬁedfourdistinctobjectivevariables:LP-v1:FullversionAsEq.4shows,alltheobjectivesaretakenintoaccount,wherenisthenumberofﬂowsandmisthenumberofactiveswitches.Inordertoavoidzerodenominatorinthefraction,1isaddedtotransitiondegree.Pni=1BWi(transitiondegree+1)∗Pmj=1PCj(4)LP-v2:WithoutpriorityInthisversion,alltheswitcheseitherintheactivemodeorinthesleepingmodehavethesamechanceofbeingselectedforthenextcomingﬂow.WedonotgiveprioritytothealreadyactiveswitchesasEq.5displays:Pni=1BWiPmj=1PCj(5)LP-v3:OnlythroughputguaranteedFordelay-sensitiveapplications,degradingthroughputforthepurposeofenergyefﬁciencyisnotacceptable.Therefore,onlyperformanceimprovementsaretakenintoaccountintothisobjectivevariables,whichdoesnotshapethetrafﬁctoincreasethenumberofidledevices.Thisversionstillachievessomepowerefﬁciencybyputtingtheidleswitchesintosleepingmodeifthereisany.Eq.6showsthatinthisversionweonlyconsiderbandwidthvalues.nXi=1BWi(6)LP-v4:OnlyenergyefﬁcientOurlastvariationonlytakesthepowerefﬁciencymetricintoaccountandminimizesthetotalpowerconsumptionofthedatacenternetwork,whenservingaspeciﬁcnumberofﬂows.Tobemoreefﬁcient,wealsoincludetransitiondegree,whichisshowninEq.7.(transitiondegree+1)∗mXj=1PCj(7)C.AlgorithmImplementationInordertomodelourlinearprogrammingproblemwedeﬁnecombination.Acombinationconsistsofasetofselectedpathsfortherequestedﬂows.Wekeepalistofcombina-tions,whicharedistinctanddifferintheselectedpathsandconsequentlyintheachievedbandwidthsandthetotalpowerconsumption.Asnewﬂowsrequestarrive,thecombinationswillgrowbothinsizeandinnumber.Unlikethegrowthinsize,whichisaddingonlyoneﬂowandoneselectedpath,thegrowthinnumberismoreaccelerated.Eq.8calculatesthetotalnumberofcombinations,wherenisthenumberofrequestedﬂows.ForscalabilityreasonsthatwillbediscussedlaterinsectionIII-D,wereducethenumberofcombinationstoonlythree.Numberofcombinations=nYi=1numberofpossiblepathsi(8)Eachcombinationcouldbeacandidateforprovidingthepathsforrequestedﬂows.Thepseudo-codeinAlgorithm1describesthestepsperformedinourschedulingprocessforeachofthealgorithmvariations.Combinationselectionisdonebycomparingthembasedontheirobjectivevariable.Wecalculatethenecessarymetrics(themaximumpowerconsumption,themaximumbandwidthsortransitiondegree)foreachcombination.ForlnumberofcombinationsinEq.9,wemodelourlinearprogrammingobjectivefunctionwithalistofbooleanvariables(x),whichshowsifacombinationisselected,multipliedbytheobjectivevariables.IncaseofvariationsLP-v1,LP-v2andLP-v3,theobjectivefunctionistomaximizetheobjectivevariables,whereasitminimizestheobjectivevariableincaseofvariationLP-v4.lXk=1xk∗(Combinationobjectivevariablek)(9)Wedeﬁnetheconstraints(Plk=1xk=3andPlk=1xk=1)toensurethattop3combinationsareselectedforCombi-nationListandonly1combinationisselectedasSelectedCom-bination.Algorithm1ScalableLinearProgrammingFlowSchedulerwhileTRUEdoifnewRequestedFlownotNullthenpossiblePaths←ListofpossiblepathsinthedatacenternetworkifCombinationListnot∅thenCombinationList←UpdateeachcombinationwithnewpossiblepathselseCombinationList←Createacombinationwitheachnewpossiblepathendifforallcombination∈CombinationListdoUpdatetheobjectivevariable:←ifnecessaryestimatePC←ifnecessaryestimateBW←ifnecessarycalculatetransitiondegreeendforCombinationList←Keeponlytop3combinations(Outputoflinearprogrammingformulation)SelectedCombination←Top1combination(Outputoflinearprogrammingformulation)Remove/Modify/AddﬂowsontheswitchesendifendwhileD.ScalabilityAnalysisTheloadonouralgorithmcanbescaledupbyincreasingthesizeofthenetworkandthenumberofﬂowrequests.WewillstoreonlytopthreecombinationsinCombinationListregardlessofthenetworksizeandtheloadgrowth.Inthiswaythecomplexityofthealgorithmintermsofnumberofcombinationswillbeindependentfromthenumberofﬂowrequests.However,thesizeofeachcombinationwillgrowasitincludesthepathsetforalltheﬂows.Thealgorithmhastwophases.First,combinationswillbeaddedbasedonthenumberofpossiblepaths.Therewillbe(3∗numberofpossiblepathsforthenewﬂow)newcombinations,wherelaterthetopthreewillbeselectedandstored.Second,eachnewcombinationneedstobeupdatedintermsofitsperformancemetrics.TheexecutiontimefortheﬁrstphaseofthealgorithmisO(n),wherendenotesthenumberofpossiblepathsforeachstep.Sincenisusuallyasmallnumber(especiallyintheFatTreenetworks)indatacenternetworksanddoesnotgrowrapidlyalongwiththenetworksize,itisreasonabletorunthealgorithmuponeachﬂowrequest.ThesecondphaseofthealgorithmupdatestheperformancemetricsofasubsetoftheactiveswitchesthatwillcarrytheincomingloadanditexecutesinO(1).Foreachnewpossiblepath,activeswitchescanbeupdated/modiﬁedinconstanttime,whichmakesouralgorithmveryscalablewiththenumberofﬂowrequestsandthesizeofthenetwork.IV.DESIGNOFEVALUATIONDECISIONFRAMEWORKWedesignanevaluationdecisionframework,whosetaskistodeploythedifferentvariationsoftheschedulingalgorithm.ThedecisionframeworkcollectsthestatisticalinformationfromthenetworkandschedulesnewﬂowsorreschedulestheexistingﬂowsbasedononlinedecisionsbytheLPalgorithm.Fig.1presentsthearchitectureofthedecisionframeworkconsistingofthreemainmodules:1)Scheduler,2)Controller,and3)Monitor.Fig.1:Ourevaluationdecisionframeworkconsistingofthescheduler,thecontrollerandthemonitorcomponentsA.SchedulerTheschedulerisatthecenterofourframework.Alltheinformationfromothermodulesandexternaldatasourcesareinputstothismodule.Theschedulerdeploystheﬂowschedulingalgorithmanditreliesontwotypesofinputs:ofﬂine,andonline.Monitoringdataonpowerconsumptionandbandwidthofswitchesareonlineinputs.Ofﬂineinputisgiventothemoduleattheinitialtimeandwillnotchangeduringtheruntime.Theofﬂineinputsbytheschedulerare:•QoSrequirements:Anapplicationwillprovidethemin-imumqualityrequirementstoperformasexpected.Forexampleanapplicationmightdeﬁneboundariesforband-widthandlatencies,whichwillbeaddedasconstraintstoourlinearprogrammingapproaches.•Initialtrafﬁcmatrix:Itispossibletoprovidetheschedulerwiththetrafﬁcsetupattheinitialtime.Inthiscaseallﬂowsarefullyscheduledatthebeginning.Wedidnotusethisfeatureinourexperiments.•Networkarchitecture:Thescheduleristoldatthebe-ginningwhichnetworktopologyisdeployedinthedatacenter.Ourschedulercanbeusedtosupportanumberofknownnetworkarchitectures.Inourexperiments,weusetheFatTreetopology.B.ControllerThecontrollercomponentreceivestherequestsforsettingnewﬂowsfromtheunderlinedevices.Anytimeanewpacketarrivestoaswitch,forwhichanactionisnotknown(the“Packetnotmatching”function),thepacketissenttothecontrollercomponentandfromtheretotheschedulercom-ponent.Decisionsregardingtheﬂowpathsaremadebytheschedulermodule,whicharecommunicatedlaterthroughthe“Setpath”functiontothecontrollercomponent.Thecontroller,whichperformsasamiddlewarebetweentheswitchesandthescheduler,appliesmodiﬁcationstotheﬂowtablesoftheswitches(the“Updateﬂowtable”function).C.MonitorThismodulecollectsperiodicallystatisticalinformationfromthenetwork(the“Collectstatisticaldata”function)andprovidestheschedulerwiththecurrentstatusoftheﬂowsandutilizationofthenetworkdevices(the“Retrievestatisticaldata”function).Requestingstatsdatafromtheswitchesonatimelybasisaddsoverheadintermsofperformancedegrada-tionanddelayincrease.Itisimportanttoselecttherightsam-plerateforswitchestoreportontheirﬂowstatsinsuchawaythatnoconsiderableinformationwillbemissingandoverheadisstilltolerable.Reportsprovidedbythemonitorarefurtherusedbytheschedulercomponent.Otherthanperformance-relateddata,energy-relatedinformationcanalsobecollectedbythemonitor.Theinformationprovidedbythismodulearetheinputforpowerconsumptionmodels.Ifrealtimeoractualmonitorsarenotpresent,itispossibletocalculatethepowerconsumptionoftheswitchesbasedonformalizedassumptions.Thisiswhatwedidinourexperiments.Realtimeandonlineinputsareproducedbythenetworkdevicesandarepassedtotheschedulerthroughthecontrollerandthemonitorcomponentsduringruntime.V.SIMULATIONSCENARIOSWeimplementedanumberofexperimentsinasimulationenvironmentusingourdecisionframework.Tosimulatethe“NetworkArchitecture”inFig.1weuseMininet1,whichprovidesuswithanetworktestbedtodevelopthesoftware-deﬁnednetworkingsystem.Forthecontrollercomponentweusetheopen-sourcePOXcontrolsoftware2,whichupdatestheﬂowtablesofthesimulatedOpenvSwitches.WeimplementacombinationoftheGurobiPythonoptimizer3andPOXasouroptimizationsolverintheschedulercomponent..Asshownbefore[3],FatTreeisthemostwidelydeployednetworkarchitectureindatacentersanditisdesignedtofadeouttheproblemof“singlepointoffailure”.FatTreeplacestheswitchesinathree-levelhierarchy,namelycore,aggregationandedgeswitches.Edgeswitchesarealsoknownastopofrackswitches(ToR).AggregationandedgeswitchesformtogethercellscalledPODs.WeadoptedtheFatTreetopologyinoursimulationsandweusePODstosimulatedistanttrafﬁcscenarios.Wedeﬁnenetworkarchitecturesofvariablesizesnamely,20,45and80switchesallconnectedwithlinksof1Gbps,summarizedinTableI.TABLEI:ThethreesimulationconﬁgurationsoftheFatTreenetworkarchitectureusedinoursimulationSwitchportsSwitchesHostsPODsMaximumFlows420164864554627880128864A.PerformanceMetricsPerformancemetricshelpusevaluatethroughourexperi-mentstheenergysavingsthatcanbeachievedusingdifferent1http://mininet.org2http://www.noxrepo.org/pox/about-pox/3http://www.gurobi.com/variationsoftheschedulingalgorithmandthedegradationofotherqualityrequirements.Wefocusontwoperformancemetrics:•Powerconsumption:Sincewedeployourexperimentsinasimulationenvironment,weestimatethepowerconsumptionofthedatacenternetwork.Weadoptedthismodelinoursimulations:Powerswitch=Powerchassis+numlinecards∗Powerlinecard+configsXi=0(Powerconfigsi∗numportsXj=0utilizationFactorj)(10)ThisisbasedonthemodelproposedbyMahadevanetal.[19].InEq.10,Powerlinecardsrepresentsthepowerconsumptionofthelinecardandnumlinecardsisthenumberofplugged-incards.PowerconfigsiisthepowerconsumptionofaportwiththespeciﬁedlinkrateiandutilizationFactorjistheutilizationofportjoftheswitch.Inourexperiment,weassumethateachﬂowsendsdatawiththehighestpossiblebandwidth.Therefore,itisalwayspossibletocalculatetheutilizationratesoftheswitchports.•Timetocomplete:Wedeﬁnetimetocomplete(TTC)asthetimeittakesforahosttosendpredeﬁnednumberofbytestoanotherhostinthenetwork.TTCisarepresentativeQoSrequirementbecauseitisalignedwiththeresponsetimeandtheperformance.B.TrafﬁcPatternsDependingontheuseofthedatacenter,theincomingtrafﬁccanfollowcertainpatterns,asidentiﬁedby[20],whichdistinguishenterpriseanduniversitydatacentersfromclouddatacentersbasedontheirrunningapplications.Inourcurrentwork,wegeneratethetrafﬁcinthedatacenternetworkbasedonOne-to-One,modeledbyhavingallthehostsinpairs[17],[21].Fig.2:AFatTreenetworkarchitecturewith20switches(S1-S20)and16hosts(h1-h16)Asdescribedin[22],thenetworktrafﬁciscategorizedbasedonlengthoftheassociatedpaths(numberofswitches):1)Far,2)Middle,and3)Near.ThelattertwoinvolveonlyonePODrespectivelywith3switchesand1switch.WeimplementtheFartrafﬁcstudycase,wherenodesfromdifferentPODstransferdatatoeachother.SincetheFartrafﬁcinvolvesmorenumberofswitchesandlessswitchescanbeturnedtothesleepingmode,thisprovidesmoreinterestingscenariotovali-dateouralgorithms.However,wecanutilizethenetworklinksfullyandinvestigatemoreoptionsforthetrafﬁcconsolidation.ForexampleinFig.2,h1connectstoarandomlyselectedhostfromPOD2,POD3orPOD4andtheprocedureiscontinueduntilallthehostshavebeenpaired.VI.RESULTSWeranoursimulationsinthethreeFatTreenetworkarchitecturesidentiﬁedinTableI,namelywith20,45and80switches.InordertoevaluateouralgorithmvariationsintermsofpowersavingandTTCdegradation,weﬁrstdeﬁnedtheminimumandmaximumvaluesoftheseperformancemetricsandidentiﬁedthebaselinealgorithmwewillcompareagainst.Aﬁrstpossiblecandidateistheshortest-path(SP)algorithm.ThedrawbackofSPisthatitalwaysselectstheﬁrstpossibleshortest-pathforanewﬂowrequestanditmightschedulemanyﬂowsonthesamelinkdegradingtheoverallperfor-mance.Asecondpossiblecandidateisanon-energyefﬁcientversionofourLP-v3,whichwecallSmartSP.SmartSPdoesnotputidledevicesintothesleepingmode,henceitisnotenergyefﬁcient,butitmaximizesthebandwidthachievementsofalltheﬂowsanddoesnotselectonlytheﬁrstpossiblepath.WecomparedSPandSmartSPalgorithmsinthethreenetworksizes.TableIIsummarizesthepowerconsumptionofdatacenternetworkofvariablesizeswhenrunningeachofthetwoalgorithmswith100%utilizationrateintheone-to-onetrafﬁcscenario.Asexpected,thepowerconsumptionofSPandSmartSPisinthesamerangebecausetheydonotputtheidleswitchesintosleepingmodeandeffectivelythepowerconsumptionisgivenbythenumberofactiveswitches.ThelittlevariationsweobservebetweenthetwoalgorithmsisduetodifferentutilizationfactorsthatappearinEq.10giventhepathchosenwillnotbealwaysthesame.TABLEII:TotalpowerconsumptionofSPandSmartSPinthethreesimulatednetworktopologies(20,45and80switches)BaselinecandidatesTotalpowerconsumption(20switches)Totalpowerconsumption(45switches)Totalpowerconsumption(80switches)SP3032W6856W12114WSmartSP3039W6847W12198WFig.3showstheTTCmetricforthetwocandidatebase-lineschedulingalgorithmsinthethreesimulatednetworktopologieswith100%utilizationrateoftheone-to-onetrafﬁcscenario.Inallthe20,the45andthe80switchestopologiestheTTCoftheSmartSPalgorithmislowerthantheoneoftheSPalgorithm.InfactSmartSP,whichmakesintelligentdecisionsregardingbandwidthachievements,effectivelyendsupprovidinghigherbandwidthstotherequestingﬂows.GiventheirequivalentpowerconsumptionandthebetterTTCofSmartSP,weadoptthisalgorithmratherthanSPasbaselinealgorithm.WeexpectthatthepowerconsumptionofourfourvariationsofLPwillallimproveonSmartSP;atthesametimeweareinterestedinquantifyingwhatisthedegradationintheTTCineachofthefourvariations.204580Number of switches020040060080010001200Time to complete (s)SPSmart SPFig.3:TimetocompleteforSPandSmartSPschedulingalgorithmsinthethreesimulatednetworktopologies(38GBofdata)Itmustbenotedthatpowerconsumptionwillincreaseiftheloadgoesup.Thisincreasecouldbesmallwhenduetohigherlinkutilizationratesorlargewhenturningontheswitchesfromthesleepingmode.Powerconsumptionvaluescannotbetheexclusivemetricusedtoassessthefunctionalityoftheschedulingalgorithm.Instead,powersavingprovidesabetterbenchmarkamongdifferentalgorithms:powersavingistheamountthattheeachofschedulingalgorithmswillsaveifthereissomeroomforimprovement.Theachievablepowersavinginthesleepingmodewillheavilyinﬂuencethetotalpowersavinginthedatacenter.Toquantifythis,weﬁrstexaminedthepowerconsumptionofthefourschedulingalgorithmsunderdifferentpowersav-ingspercentagesinsleepingmode.Ourswitchescouldsavebetween20%,40%,60%and80%wheninthisstate,wherethe40%andthe60%arethemostrealisticvalues.Intherestofthispaperwewilluse60%asthepowersavingofthedevicesinthesleepingmode[23].TableIIIshowsthemaximumpowersavingofeachalgorithmcomparedtotheSmartSPinthenetworkofsize45with27ﬂows.Inallcases,themaximumpowersavingisachievedbyLP-v4,followedbyLP-v1,LP-v2andLP-v3.Thereisanearlylinearrelationbetweenthemaximumachievablepowersavingandthemaximumsleepingmodepowersaving.20%improvementofpowersavinginsleepingmoderesultsin10%improvementforpowersensitivealgorithms(LP-v1andLP-v4)and5%improvementforperformancesensitivealgorithms(LP-v2andLP-v3).TABLEIII:Maximumpowersavingsasfunctionofsleepingmodepowersavings(45switcheswith27ﬂows)AlgorithmvariationsMaximumsleepingmodepowersavings:20%40%60%80%LP-v112%23%35%46%LP-v26%12%17%23%LP-v35%11%16%22%LP-v413%24%36%48%Toassessthescalabilityqualityrequirementofthealgo-rithmsweinvestigatedthepowerconsumptionofthefouralgorithmvariationswhenincreasingtheﬂownumbers.Fig.4showstheresultsforanetworkofsize20,45and80respectively.Inthenetworkofsize20wemeasurethepowerconsumedinpresenceof1,3,5and8ﬂows;weused2,5,10,15,20and27ﬂowsinthenetworkofsize45and5,20,35,50and64ﬂowsinthenetworkofsize80.InallcasesLP-v4andSmartSPpresentthelowestandhighestvalues,andassuchtheyidentifythelowerandhighestboundforthepowerconsumption.16002000240028002468Flow numbersPower Consumption (W)VariationsLP−v1LP−v2LP−v3LP−v4SmartSP(a)FatTreenetworkwith20switches3000400050006000700001020Flow numbersPower Consumption (W)VariationsLP−v1LP−v2LP−v3LP−v4SmartSP(b)FatTreenetworkwith45switches600080001000012000204060Flow numbersPower Consumption (W)VariationsLP−v1LP−v2LP−v3LP−v4SmartSP(c)FatTreenetworkwith80switchesFig.4:Powerconsumptionofthedatacenternetworkfordifferentalgorithmvariationswithvariablenumberofﬂowsbasedontheone-to-onetrafﬁcscenarioforaﬁxednetworksizeThethreesubﬁguresshowthatLP-v1selectspathssuchthatthetotalpowerconsumptionremainsclosetotheoptimumenergyefﬁcientvariation(LP-v4).Gradually,whenthenumberofﬂowsincrease,LP-v1andLP-v4divergeasLP-v1needstotakeintoaccountthethroughputrequirementstoo.LP-v2andLP-v3showalmostidenticalpatternswhenincreasingthenumberofﬂows.Similartosquare-rootfunctions,theychangerapidlyintermsofpowerconsumptionforthesmallnumberofﬂowsparticularlyincaseof45and80switches.Theirpowerconsumptionshowslessaccelerationforlargernumberofﬂowsbecausetherearenomoreswitchestoturnonfromthesleepingmode.Whenthenumberofﬂowsissmallallthealgorithmvariationsshowthesamepowerconsumption;inthiscaseitwillnotbepossibletoprovidepowersavingsfromshapingthenetworktrafﬁcandincreasingthenumberofidledevices.However,smallnumberofﬂowswillinvolvesmallnumberofswitchesandpowersavingscanbeachievedbyputtingtheexistingidledevicesintothesleepingmode.Fig.5showstheTTCmeasuredfromtheapplicationsrunninginthehostsasfunctionofthefourpossibleschedulingalgorithmswhenrunningwithmaximumnumberofﬂows.Weconﬁgureapplicationstosend38GBofdatatothereceiver.AlgorithmvariationsthatperformbetterinpowerconsumptionexhibithigherTTCmeasurements,e.g.LP-v4thatfocusespurelyontheenergyefﬁciencywillproduceamuchlargertimetocomplete,71%forthenetworkof20switchesand502%forthenetworkof80switches.LP-v1alsoshowsaconsiderableincreaseinTTCwhenthenetworksizegrows.Differently,LP-v2andLP-v3appeartobemoreperformance-focusedandstablefordifferentsizesofthenetwork.IfperformanceisthedecisivefactorLPv2andLPv3willbethelikelychoice.Inthiscaseitisinterestingtoquantifythedegradationinpowersavings.Fig.6showsthedegradationinpowersavingcomparedtothebaselinevalues(LP-v4andSmartSP)whenusingdifferentvariationsoftheschedulingalgorithm,comparedtotheoptimalpowersavingachievedwithLPv4.Degradationpercentageiscalculatedfromthefollowing,giventhatxisthepowerconsumptionofthealgorithmvariation:DegradationPercentagex=(PCx−PCLP-v4PCSmartSP−PCLP-v4)∗100(11)204580Number of switches03006009001200150018002100240027003000Time to complete (s)Smart SPLP-v1LP-v2LP-v3LP-v4Fig.5:Timetocompleteforthefourdifferentschedulingalgorithminthethreesimulatednetworktopologies(38GBofdata)InallthreetopologiesweobservedthatLP-v1isthemostpowerefﬁcientvariationthatshowsaround95%improvement,whichmeansonly5%degradationfromtheoptimumpowersaving.LP-v2withachieving50%ofmaximumpowersavingoutperformsLP-v3withachieving45%ofmaximumpowersaving,whichprovidesmorebandwidthfortherunningappli-cations.Itisinterestingtoseethatallthevariationsremainwiththesamerangeofpowersavingfordifferentnetworksizes.204580Number of switches020406080100Degradation in power saving (%)LP-v1LP-v2LP-v3Fig.6:Degradationinpowersavingsofthreeschedulingalgo-rithmsnamely,LP-v1,LP-v2andLP-v3inthethreesimulatednetworktopologies.LP-v4andSmartSPareconsideredasthebaselinesforcalculationofpowersaving.VII.DISCUSSIONApplicationsrunningindatacentershavedifferentqualityrequirements.Ourresultscanbeusedasinputsforthemtodecideonwhichalgorithmtoimplementforﬂowschedulinginsoftware-deﬁnednetworks.AsshowninsectionVI,ourfouralgorithmvariationshavedifferentbehaviorasfunctionofthesizeofthenetwork,thenumberofﬂowstobescheduled,andtheexpectedpowersavingoftheswitcheswheninsleepingmode.LP-v2andLP-v3providehigherbandwidthforapplicationsandsmallertimetocomplete,whilestillsavingpowercomparedtotheshortest-pathalgorithm.Thismakesthemagreatchoicefordelay-sensitiveapplications.LP-v1andLP-v4focusontheenergyefﬁciencyqualityrequirementratherthanthetimetocompleteofapplications,assuchtheycanbeadoptedfordelay-insensitiveapplications.Inadatacenterwewilloftenseeacombinationofdelay-sensitiveanddelay-insensitiveapplications.Inthiscase,theschedulercomponentinourframeworkcanbeeasilyextendedtodeploymultiplevariationsoflinearprogrammingalgorithmconcurrently.Ourﬁndingsshowanearlylinearrelationbetweenthetotalpowersavingsindatacenternetworkandthepowersavingofswitchesinsleepingmode.Itisimportanttoassesstheswitchespowersavingintheirsleepingmodebeforehand,whichhelpstheschedulingalgorithmsadjusttheirdecisions.Switcheswithlowersleepingmodepowersavingsarepri-oritizedtocarrytheincomingloadeitherbyperformancesensitivealgorithms(LP-v2andLP-v3)orpowersensitivealgorithms(LP-v1andLP-v4).VIII.CONCLUSIONInthispaperwepresenteddifferentvariationsoflinearprogrammingschedulingalgorithmsthatcanoptimizethepowersavingsinsoftware-deﬁnednetworks.Eachvariationhasadifferentobjectiveintermsofpoweroptimizationandperformance-relatedqualityrequirements.Eachobjectivefunctionimplementsacombinationoffollowingapproaches:“puttheidledevicesintosleepingmode”,“increasethenum-berofidledevices”,“prioritizetheexistingactiveswitchesoverthesleepingones”.Theprogrammabilityofsoftware-deﬁnednetworksempowersapplicationstochoosethebestﬂowsetandapplydirectmodiﬁcationsontheﬂowtablesoftheswitches.Ouralgorithmvariationsaredesignedfordatacenternetworks,inwhichrealtimeandscalabletrafﬁcschedulingiscrucial.Weprovidescalabilitybykeepingthetop3ﬂowsetcandidates,whichsavesoncomputationtimeasnewﬂowscomein.WeevaluatedouralgorithmvariationsinasimulatedFatTreenetworkarchitectureusingaone-to-onetrafﬁcscenario.Wealsoquantiﬁedtherelationbetweenpowersavingofeachalgorithmandsleepingmodepowersaving.Ourresultsshowthattwoofthevariations(LP-v2andLP-v3)remainstableintermsofpowersavingandthetimetocompletemetrics,asthenetworksizegrows.Twoother(LP-v1andLP-v4)providethehighestpowersavingsinthenetworkandtheyaresuitablefordelay-insensitiveapplications.Thereareafewopenquestionsthatweplantocoverinfuturework.Firstly,manyapplicationswillexhibitaone-to-manytrafﬁcpattern.Inthiscase,trade-offbetweenpowersav-ingsandtimetocompleteofthefouralgorithmsmightdifferfromtheone-to-onescenariowecurrentlyexamined.Wecanexpectingeneralthatlessswitchescanbeputinthesleepingmodebecauseofthemoresharedlinks.Consequently,thevariationsinpowersavingsbetweenalgorithmswillbelower.Furthermore,ourcurrentimplementationoftheschedulertreatsallﬂowsequallyintermsoftheirexpectedthroughputrequirement.Inreality,short-livedﬂowswillconcurrentlyrunwithlong-livedﬂows,aswellashigh-throughputﬂowswithlow-throughputﬂows.Therefore,itwouldbeinterestingtodistinguishbetweenthemandthiscanbedonebyonlineorofﬂinelearningofsoftwaretrafﬁcpatterns.ACKNOWLEDGMENTThisworkhasbeensponsoredbytheRAAK/MKB-project“GreeningtheCloud”andbytheDutchnationalprogramCOMMIT.REFERENCES[1]J.Liu,F.Zhao,X.Liu,andW.He,“Challengestowardselasticpowermanagementininternetdatacenters,”inDistributedComputingSystemsWorkshops,2009.ICDCSWorkshops’09.29thIEEEInternationalConferenceon.IEEE,2009,pp.65–72.[2]C.Grossner,“Sdnstrategiessurvey,”July2014,[Online;accessed14-Dec-2015].[3]F.A.Moghaddam,P.Lago,andP.Grosso,“Energy-efﬁcientnetworkingsolutionsincloud-basedenvironments:Asystematicliteraturereview,”ACMComputingSurveys(CSUR),vol.47,no.4,p.64,2015.[4]B.Kantarci,L.Foschini,A.Corradi,andH.T.Mouftah,“Inter-and-intradatacentervm-placementforenergy-efﬁcientlarge-scalecloudsystems,”inGlobecomWorkshops(GCWkshps),2012IEEE.IEEE,2012,pp.708–713.[5]X.Wang,Y.Yao,X.Wang,K.Lu,andQ.Cao,“Carpo:Correlation-awarepoweroptimizationindatacenternetworks,”inINFOCOM,2012ProceedingsIEEE.IEEE,2012,pp.1125–1133.[6]H.Jin,T.Cheocherngngarn,D.Levy,A.Smith,D.Pan,J.Liu,andN.Pissinou,“Jointhost-networkoptimizationforenergy-efﬁcientdatacenternetworking,”inParallel&DistributedProcessing(IPDPS),2013IEEE27thInternationalSymposiumon.IEEE,2013,pp.623–634.[7]B.Heller,S.Seetharaman,P.Mahadevan,Y.Yiakoumis,P.Sharma,S.Banerjee,andN.McKeown,“Elastictree:Savingenergyindatacenternetworks.”inNSDI,vol.10,2010,pp.249–264.[8]B.Kantarci,L.Foschini,A.Corradi,andH.T.Mouftah,“Designofenergy-efﬁcientcloudsystemsvianetworkandresourcevirtualization,”InternationalJournalofNetworkManagement,2013.[9]A.Leivadeas,C.Papagianni,andS.Papavassiliou,“Energyawarenetworkedcloudmapping,”inNetworkComputingandApplications(NCA),201312thIEEEInternationalSymposiumon.IEEE,2013,pp.195–202.[10]J.Buysse,K.Georgakilas,A.Tzanakaki,M.DeLeenheer,B.Dhoedt,C.Develder,andP.Demeester,“Calculatingtheminimumboundsofenergyconsumptionforcloudnetworks,”inComputerCommunicationsandNetworks(ICCCN),2011Proceedingsof20thInternationalCon-ferenceon.IEEE,2011,pp.1–7.[11]W.Fang,X.Liang,S.Li,L.Chiaraviglio,andN.Xiong,“Vmplanner:Optimizingvirtualmachineplacementandtrafﬁcﬂowroutingtoreducenetworkpowercostsinclouddatacenters,”ComputerNetworks,vol.57,no.1,pp.179–196,2013.[12]L.Wang,F.Zhang,J.ArjonaAroca,A.V.Vasilakos,K.Zheng,C.Hou,D.Li,andZ.Liu,“Greendcn:Ageneralframeworkforachievingenergyefﬁciencyindatacenternetworks,”SelectedAreasinCommunications,IEEEJournalon,vol.32,no.1,pp.4–15,2014.[13]L.Wang,F.Zhang,A.V.Vasilakos,C.Hou,andZ.Liu,“Jointvirtualmachineassignmentandtrafﬁcengineeringforgreendatacenternetworks,”ACMSIGMETRICSPerformanceEvaluationReview,vol.41,no.3,pp.107–112,2014.[14]R.Liu,H.Gu,X.Yu,andX.Nian,“Distributedﬂowschedulinginenergy-awaredatacenternetworks,”CommunicationsLetters,IEEE,vol.17,no.4,pp.801–804,2013.[15]W.Fang,X.Liang,Y.Sun,andA.V.Vasilakos,“Networkelementschedulingforachievingenergy-awaredatacenternetworks,”Interna-tionalJournalofComputersCommunications&Control,vol.7,no.2,pp.241–251,2014.[16]L.GyarmatiandT.A.Trinh,“Howcanarchitecturehelptoreduceenergyconsumptionindatacenternetworking?”inProceedingsofthe1stInternationalConferenceonEnergy-EfﬁcientComputingandNetworking.ACM,2010,pp.183–186.[17]M.Xu,Y.Shang,D.Li,andX.Wang,“Greeningdatacenternetworkswiththroughput-guaranteedpower-awarerouting,”ComputerNetworks,vol.57,no.15,pp.2880–2899,2013.[18]Y.Shang,D.Li,andM.Xu,“Energy-awareroutingindatacenternetwork,”inProceedingsoftheﬁrstACMSIGCOMMworkshoponGreennetworking.ACM,2010,pp.1–8.[19]P.Mahadevan,P.Sharma,S.Banerjee,andP.Ranganathan,“Apowerbenchmarkingframeworkfornetworkdevices,”inNETWORKING2009.Springer,2009,pp.795–808.[20]T.Benson,A.Akella,andD.A.Maltz,“Networktrafﬁccharacteristicsofdatacentersinthewild,”inProceedingsofthe10thACMSIGCOMMconferenceonInternetmeasurement.ACM,2010,pp.267–280.[21]S.U.KhanandA.Y.Zomaya,HandbookonDataCenters.Springer,2015.[22]N.H.Thanh,P.N.Nam,T.-H.Truong,N.T.Hung,L.K.Doanh,andR.Pries,“Enablingexperimentsforenergy-efﬁcientdatacenternetworksonopenﬂow-basedplatform,”inCommunicationsandElec-tronics(ICCE),2012FourthInternationalConferenceon.IEEE,2012,pp.239–244.[23]“Ciscocatalyst2960-x,2960-cx,and3560-cxplatforms:Thegreenestcatalystswitchesever,”2015,[Online;accessed14-Dec-2015].