6
1
0
2

 
r
a

M
2

 

 
 
]
T
C
h
t
a
m

.

[
 
 

1
v
2
2
8
0
0

.

3
0
6
1
:
v
i
X
r
a

Hilbertian toposes and ε-toposes

Fabio Pasquali

Paris Diderot University

Introduction

Hilbert’s epsilon calculus is an extension of Hilbert’s system for classical ﬁrst
order predicates logic by a term-forming operator which replaces the existential
quantiﬁcation. Speciﬁcally, for every well formed formula ψ(x) there exists a
term εx

ψ, in which x is not free, such that

∃x.ψ(x) → ψ[εx

ψ/x]

Since its introduction Hilbert’s Epsilon calculus has had a variety of application
in many ﬁelds of mathematics, logic, informatics, linguistics, etc. One of the
ﬁrst approaches to the Epsilon calculus in the framework of category theory is
due to J.L.Bell , who introduced in [1] an intuitionistic typed and higher order
version of it using the internal logic of elementary toposes. The calculus pre-
sented by Bell has the constraint that all epsilon terms are closed. That is to
say that epsilon terms exist only for formulas with at most one free variable.
This restriction is motivated by the fact that the presence of epsilon terms with
one (or more) free variable implies the validity of the Axiom of Choice. Hence
toposes collapse to boolean ones [2]. The calculus was called by the author par-
tial epsilon calculus. In [1] the author introduces also the notion of Hilbertian
topos which is the appropriate structure to express the partial epsilon calculus.
In [1] an actual example of Hilbertian topos was not provided.

This paper can be seen as a prosecution of [1]. We give an example of Hilbertian
topos. The relevance of this example is that it underlines the constructive na-
ture of the partial epsilon calculus. In fact we prove that the Martin Hyland’s
Eﬀective topos [3] is Hilbertian. Moreover we study the full epsilon calculus
in toposes. It turns out that the presence of all epsilon terms is a condition
stronger than the Axiom of Choice, in fact we prove that the internal logic of a
topos is the full epsilon calculus if and only if the topos validate the axiom of
choice and every arrow of a non-initial object to the terminal object is epic.

In section 1 we recall the internal calculus of toposes. Then we introduce in
the framework of topos logic the epsilon calculus and the partial epsilon calcu-
lus. In section 2 we recall the Bell’s deﬁnition of Hilbertian topos. Large part
of the section is devoted to prove that the Eﬀective topos is Hilbertian. The
characterization theorem of those toposes whose internal logic is the full epsilon
calculus is in 3.

1

1 Epsilon calculus in toposes

We work in the internal language of a given elementary topos E. We brieﬂy
recall it below. Details can be found in standard books of topos theory.

Suppose E is an elementary topos. We denote by ΣE the many typed signa-
ture generated by the objects and the arrows of E. Hence the types of ΣE are
the objects of E and these are closed under ﬁnite product types and power types
with all η/β-conversions. This is to say that, up to η/β-conversion, the product
type of A and B is a categorical product A × B, the unite type is a terminal
object 1 of E and the power type of A is a categorical power object P(A) of A.

A function symbol f of ΣE with arity A1, A2, ..., An −→ B is an arrow f : A1 ×
A2 × ... × An −→ B in E. A relation symbol of ΣE of arity A1, A2, ..., An is a
monic arrow of E with codomain A1 × A2 × ... × An.

Contexts, i.e ﬁnite lists of typed variables

(x1: A1, x2: A2, . . . , xn: An)

will be denoted by capital greek letters. A term is an expression of the form

Γ | t: A

where Γ is a context. We write sequents in the following form

Γ | φ1, φ2, ...φn ⊢ φn+1

to express that all formulas in the sequent are formulas in the context Γ.

As we work in the internal logic of an elementary topos E, a sequent

Γ | φ1, φ2, ...φn ⊢ φn+1

in the context Γ is derivable if and only if the monic arrow with codomain Γ
that represents φ1 ∧ φ2 ∧ · · · ∧ φn factors through the monic arrow that represent
φn+1.

The epsilon calculus

The internal language of an elementary topos is the (intuitionistic higher order
and typed) ε-calculus if it validates the following two rules

Γ, x: A | ψ
Γ | εx
ψ: A

ε-form

Γ, x: A | ψ

Γ | ∃x: A. ψ ⊢ ψ[εx

ψ/x]

ε-I

provided that A is not the empty type (i.e. the initial object) and the empty
type does not appear among types in Γ.

The rule ε-form establish that for every monic ψ with codomain Γ × A, if A is
not initial, then there is an arrow εψ: Γ −→ A. This motivates the constraint

2

on A to be not the empty type. For if A is the empty type 0, i.e. 0 is an initial
object of E, then using ε-form we get

x: 0 | ⊤
∗: 1 | εx

⊤: 0

ε-form

where εx

⊤ is an arrow 1 −→ 0. If such an arrow exists, the topos is degenerate.

If the internal language of an elementary topos validates ε-form and ε-I, then
the axiom of choice is derivable: take a formula a: A, b: B | F , then we have a
term a: A | εb

F : B such that

a: A | ∃b: B. F (a, b) ⊢ F (a, εb

F (a))

which leads to the following

⊤ ⊢ ∀a: A. [∃b: B. F (a, b) → F (a, εb

F (a))]

In toposes, if the axiom of choice is valid, the law of excluded middle is derivable
[2]. This motivates the following deﬁnition.

We say that the internal language of an elementary topos is the partial ε-calculus
if it validates the following two rules

x: A | ψ

∗: 1 | εx

ψ: A

εp-form

x: A | ψ

∃x: A. ψ ⊢ ψ[εx

ψ/x]

εp-I

provided that A is not the empty.

In the partial ε-calculus, ε-terms are necessarily closed. Or, equivalently, ε-
terms exists only for those formulas with at most one free variable. Thus all
ε-terms are arrows whose domain is teh terminal object 1. Under this constraint
we can not carry out the previous argument to derive the axiom of choice. In
fact in the partial ε-calculus the axiom of choice is not derivable, as we shall see
in next section.

We call Hilbertian toposes those toposes whose internal logic is the partial ε-
calculus. And we call ε-toposes those toposes whose internal logic is the full
ε-calculus. The former class was already studied in [1] and we dedicate the next
section to produce a relevant member of it. The latter is introduced in section
3.

2 Hilbertian toposes

Hilbertian toposes were introduced by Bell in [1] as the appropriate structure
to validate rules of partial epsilon calculus.

We shall denote by · ֌ · and · ։ · arrows which are monic and epic respectively.

An elementary topos E is Hilbertian if every diagram of the form

X /

p

/ A

/ 1

3

/
/
/
/
/
can be expanded to a commutative diagram of the form

X

/ U /

1

εp

X /

/ A

p

/ 1

It is clear that if p: X ֌ A is a formula in the context A, say a: A | p(a)
then, by the general theory of topos logic [4], the arrow U ֌ 1 corresponds
to the sentence ∃a: A p(a). By the universal property of pullback there is an
arrow from U to any pullback of p along εp, which is to say that the sequent
∃a: A p(a) ⊢ p(εp) is valid. Since the other direction is always derivable, the
condition above is equivalent to say that U is isomorphic to the pullback of p
along εp. This is also the proof of the following theorem.

Proposition 2.1. The internal logic of an Hilbertian topos is the partial epsilon
calculus exactly when every object A is either initial or the arrow A −→ 1 is
epic.

As remarked in [1], as soon as we admit ε-terms with even one free variable,
the axiom of choice is derivable. This is not the case for Hilbertian toposes.
To underline the constructive nature of Hilbertian toposes we show that Martin
Hyland’s Eﬀective topos is Hilbertian.

We recall below the deﬁnition of the eﬀective topos. This topos can be seen
as the result of the tripos to topos construction applied to the realizability tri-
pos [5]. As triposes do not play any role here, we give a direct presentation of
the eﬀective topos and we address the reader to [3] for details.

The eﬀective topos

If n and p are natural numbers, we write n.p to denote the application to p of
the partial recursive function coded by n, and we call n.p the Kleene application
of n to p.

Suppose X is a set and φ, ψ: X −→ P(N) are function from X to the pow-
erset of the set of natural numbers. We say that φ ≤ ψ if there exists a number
n such that for every x ∈ X and every a ∈ φ(x) the Kleene application n.a is
deﬁned and n.a ∈ ψ(x). The relation ≤ is a preorder on P(N)X and we call it
Kleene realizability order. Moreover we say that n is a track of φ ≤ ψ. The
poset reﬂection of P(N)X is a Heyting algebra [5]. Binary meets are denoted
by ∧ and a top element by ⊤X . Pseudo relative complements by →. The top
element ⊤X is represented by the function on X to P(N) which whose values
are constantly equal to N.

Denote by 1 a chosen singleton set. Members of P(N)1 ≃ P(N) are called
sentences. We say that a sentence φ is valid when ⊤1 ≤ φ.

For every set X, and every ρ ∈ P(N)X×X we say that ρ is a partial equiva-
lence relation over X if both the sentences

\

\

x∈X

y∈X

ρ(x, y) → ρ(y, x)

4

/
/
/
/
/
/




/
/
/
/
/
\

\

\

x∈X

y∈X

z∈X

ρ(x, y) ∧ ρ(y, z) → ρ(x, z)

are valid. If we read the intersection as a universal quantiﬁcation, the two sen-
tences above express the fact that ρ is symmetric and transitive.

Suppose A and B are sets and ρ and σ are partial equivalence relations over A
and B respectively. F ∈ P(N)A×B is said to be a functional relation from the
pair (A, ρ) to the pair (B, σ) if all the following sentences are valid

\

\

a∈A

b∈B

F (a, b) → ρ(a, a) ∧ σ(b, b)

\

\

\

\

a∈A

a′∈A

b∈B

b′∈B

F (a, b) ∧ ρ(a, a′) ∧ σ(b, b′) → F (a′, b′)

\

\

\

a∈A

b∈B

b′∈B

F (a, b) ∧ F (a, b′) → σ(b, b′)

\

[ρ(a, a) → [

F (a, b)]

a∈A

b∈B

The ﬁrst and second sentences express the fact that F ”believes” that ρ and σ
are equality predicates over A and B respectively. Then in particular in the ﬁrst
sentence ρ(a, a) ∧ σ(b, b) plays the role of a top element. The third and fourth
sentences express (if we read the union as an existential quantiﬁcation) the fact
that F behaves like a function from A to B, i.e. it is singled-valued and total.

The eﬀective topos Ef f is the category whose objects are pairs (A, ρ) where A is
a set and ρ is a partial equivalence relation over A and an arrow [F ]: (A, ρ) −→
(B, σ) is an equivalence class of functional relations where G ∈ [F ] if and only
if G = F as members of the poset reﬂection of P(N)A×B.

For the rest of the section we freely confuse a morphism of Ef f with any of
its representatives.

Suppose (A, ρ) is an object of Ef f . A member P of P(N)A is said to be a
strict and relational proposition over (A, ρ) if the following sentences are valid

P (x) → ρ(x, x)

\

x∈A

\

\

x∈A

y∈A

ρ(x, y) ∧ P (x) → P (y)

As we wrote before for F , these two sentences express the fact that P ”be-
lieves” that ρ is an equality predicate. We say that a monomorphism M of
Ef f , with codomain (A, ρ), is represented by P if M is isomorphic to a monic
ρP : (A, ρP ) −→ (A, ρ) where

ρP (x, y) = ρ(x, y) ∧ P (x)

The following properties holds in Ef f , proofs are in [3, 5].

5

1) Every monomorphism M : (A, ρ) −→ (B, σ) is isomorphic to one of the
form σP : (B, σP ) −→ (B, σ) for some strict and relational proposition P
over (B, σ).

2) A terminal object of Ef f is (1, ⊤1×1). And the unique arrow 1ρ: (A, ρ) −→
(1, ⊤1×1) is the functional relation in P(N)A×1 ≃ P(N)A determined by
the following assignment x 7→ ρ(x, x).

3) Given a diagram of the form (A, ρ) ։ (U, ξ) ֌ (1, ⊤1×1), the monomor-

phism (U, ξ) ֌ (1, ⊤1×1) is represented by

ρ(x, x)

[

x∈A

which is a strict and relational proposition over (1, ⊤1×1).

4) For every pair of objects of Ef f , say (A, ρ) and (B, σ), if f : A −→ B is a

function such that the sentence

\

\

x∈A

y∈A

ρ(x, y) → σ(f (x), f (y))

is valid, then the assignment

(x, b) 7→ σ(f (x), b) ∧ ρ(x, x)

determines an element of P(N)A×B, which is a functional relation from
(A, ρ) to (B, σ). We denote it by Γ(f ) and we call it the graph of f . Thus
Γ(f ) is (the representative of) a morphism of Ef f from (A, ρ) to (B, σ).

5) A pullback of a monic σP : (B, σP ) −→ (B, σ) along F : (A, ρ) −→ (B, σ) is

the monic represented by Q in P(N)A, where

Q(a) = [

F (a, b) ∧ P (b)

b∈B

6) An arrow E: (A, ρ) −→ (B, σ) is epic if and only if the following sentence

is valid

\

[σ(b, b) → [

E(a, b)]

b∈B

a∈A

Previous points 1) to 5) allow to prove the following lemma.

Lemma 2.2. Under the notation above, if F is of the form Γ(f ) for some
function f : A −→ B, then Q = P ◦ f ∧ ρ in the poset reﬂection of P(N)A.

Proof. Consider the following equalities in the poset reﬂection of P(N)A

Q(a) = [

Γ(f )(a, b) ∧ P (b)

b∈B

= [

b∈B

= [

b∈B

σ(f (a), b) ∧ ρ(a, a) ∧ P (b)

σ(f (a), b) ∧ ρ(a, a) ∧ P (f (a))

= P (f (a)) ∧ [

Γ(f )(a, b)

b∈B

= P (f (a)) ∧ ρ(a, a)

6

where in passing from second to third line we used the fact that P is relational
and in the last line we use the fact that Γ(f ) is functional (and hence total).

Corollary 2.3. If (A, ρ) is (1, ⊤1×1) and if F is of the form Γ(f ) for some
function f : 1 −→ B, then Q = P ◦ f in the poset reﬂection of P(N)A.

Proof. Straightforward.

We can now prove the main proposition of the section.

Proposition 2.4. Ef f is Hilbertian.

Proof. Consider the diagram

(A, ρP ) /

ρP /

/ (A, ρ)

!ρ

/ 1

It suﬃces to show that there exists an arrow ερP : (1, ⊤1×1) −→ (A, ρ) such that
the pullback of ρP along ερP is isomorphic to the monic arrow in any epi-mono
factorization of !ρ ◦ ρP . After point 3) above this is represented by

[

ρP (a, a) = [

ρ(a, a) ∧ P (a) = [

P (a)

a∈A

a∈A

a∈A

Since !ρ is epic we have after point 6) that

is a valid sentence. Which is to say that in P(N)1 ≃ P(N) we have

⊤1 → [

ρ(a, a)

a∈A

N ≤ [

ρ(a, a)

a∈A

In other words the union on the right is not empty, i.e. there is a with ρ(a, a) 6= ∅.

Any such a ∈ A determines an obvious function a: 1 −→ A with the property
that

N ≤ ρ(a, a)

in fact the inequality is tracked by the code of any constant function n 7→ x
where x is any chosen element of ρ(a, a). Therefore the graph

is an arrow of Ef f .

Γ(a): (1, ⊤1×1) −→ (A, ρ)

After 2.3 we have that the pullback of ρP along Γ(a) is represented by P (a).
Then to prove that Ef f is Hilbertian it suﬃces to show that there is ε: 1 −→
(A, ρ) such that

P (ε) = [

P (a)

a∈A

If the union is empty then P (a) = ∅ for every a ∈ A, thus any choice of ε with
ρ(ε, ε) 6= ∅ determines the desired ε-term. We proved above that at least one
such arrow exists.

If the union is not empty, then there is q ∈ A with P (q) 6= ∅. Since P is
strict we have that P (q) ≤ ρ(q, q), then ρ(q, q) is not empty and Γ(q) is the
desired epsilon term.

7

/
/
/
/
3

ε-Toposes

If, on one side, Hilbertian toposes are the appropriate structure to interpret the
partial epsilon calculus, ε-toposes, which we introduce below, are the appropri-
ate structure to express the full epsilon calculus. Indeed we show a little more:
ε-toposes are the exact structure to express the full epsilon calculus (see propo-
sition 3.2). Of course, as the axiom of choice is derivable, ε-toposes validate the
law of excluded middle [2]. Recall that a topos validates the axiom of choice
(AC) if every epimorphism has a section.

Deﬁnition 3.1. An elementary topos E is an ε-topos if it validates AC and if
every arrow A −→ 1 is epic, provided that A is not initial.

There is a trivial example of ε-topos which is Sets, the topos of sets and

functions.

Proposition 3.2. Let E be an elementary topos. The following are equivalent

i) The internal logic of E is the full epsilon calculus

ii) E is an ε-topos

Before proving the statement, we remark that the internal logic of Hilbertian
toposes is a fragment of the full epsilon calculus, then an immediate consequence
of 3.2 is that every ε-topos is Hilbertian.

Proof. i→ ii) We already remarked that in the full epsilon calculus AC is deriv-
able. Now consider a non-initial object A. We have a proposition ⊤1×A which
is represented by the identity arrow id1×A. Then there exists an epsilon term

ε⊤1×A: 1 −→ A

which is necessarily a section of the unique arrow A −→ 1. An arrow with a
section is epic.

ii→i) Suppose φ: X ֌ Γ × A is monic. Then we have a diagram

X

φ

q

/ Im(πΓφ)

m

Γ × A

/ Γ

πΓ

where the image of πΓφ is the monomorphism m: Im(πΓφ) ֌ Γ which repre-
sents the formula Γ | ∃a: A φ(a).

By AC the epimorphism q has a section s. Moreover every monic has a comple-
ment, then Γ is the coproduct

Γ ≃ Im(πΓφ) + Y

8



/
/
/


/
for some object Y , where m is one of the two canonical injections. Denote by
iY the other canonical injection and consider the diagram

X

s

φ

/ Γ × A

a

[φs,a!Y ]

Im(πΓφ)

m /

Γ

iY

1

Y

!Y

where a is a section of the unique arrow Γ × A −→ 1, which exists by AC since
we assumed that those arrows are epic. The arrow πA[φs, a!Y ] is εφ.

It remains to prove that the square

Im(πΓφ)

s

X

φ

m

Γ

/ Γ × A

hidΓ,εφi

which is commutative, is also a pullback.

Consider the arrows x: Q −→ X and y: Q −→ Γ, with hidΓ, εφiy = φx. The
arrow qx: Q −→ Im(πΓφ) is the desired arrow, in fact

φsqx = hidΓ, εφimqx = hidΓ, εφiπΓφx = hidΓ, εφiπΓhidΓ, εφiy = hidΓ, εφiy = φx

then x = sqx since φ is monic. Analogously, using the fact that hidΓ, εφi is
monic, since it is a section, we have mqx = y

One might be led to think that the condition that arrows A −→ 1 are
epic is redundant. The following example shows that in a topos this does not
follow from AC: consider the topos Sets × Sets. It validates AC, but the arrow
(1, ∅) −→ (1, 1) is clearly not epic. In other words, the presence of all ε-terms
is suﬃcient to prove AC, but not necessary.

4 Conclusions

If, on one side, the internal logic of Hilbertian toposes is intuitionistic, on the
other side the internal logic of ε-toposes is necessarily classic. Toposes can be
seen as Heyting categories with the power objects axiom. In Heyting categories
AC does not imply LEM and therefore they might constitute an appropriate
setting to interpret the full intuitionistic ﬁrst order epsilon calculus. Neverthe-
less the study of the epsilon calculus inside a Heyting category is left to future
developments.

References

[1] John L. Bell. Hilbert’s ǫ-operator in intuitionistic type theories. Math. Logic

Quart., 39(3):323–337, 1993.

9

/
o
o
/
O
O
O
O
o
o
O
O
/
/




/
[2] R. Diaconescu. Axiom of choice and complementation. Proceedings of the

American Mathematical Society, 51(1):176 – 178, 1975.

[3] J. M. E. Hyland. The eﬀective topos. In The L.E.J. Brouwer Centenary
Symposium (Noordwijkerhout, 1981), volume 110 of Stud. Logic Foundations
Math., pages 165–216. North-Holland, Amsterdam-New York, 1982.

[4] P. T. Johnstone. Sketches of an elephant - A topos theory compendium.

Clarendon Press - Oxford, 2002.

[5] A. M. Pitts. Tripos theory in retrospect. Math. Struct. in Comp. Science,

12:265–279, 2002.

10

