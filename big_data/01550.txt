6
1
0
2

 
r
a

M
4

 

 
 
]

.

A
R
h
t
a
m

[
 
 

1
v
0
5
5
1
0

.

3
0
6
1
:
v
i
X
r
a

Reconstructing the topology on monoids and polymorphism

clones of the rationals

Mike Behrisch∗, Technische Universit¨at Wien†, and

John K Truss and Edith Vargas-Garc´ıa‡, University of Leeds§.¶

e-mails: behrisch@logic.at, pmtjkt@leeds.ac.uk, alemaniamir5@gmail.com.

Abstract

We show how to reconstruct the topology on the monoid of endomorphisms of the rational
numbers under the strict or reﬂexive order relation, and the polymorphism clone of the rational
numbers under the reﬂexive relation.
In addition we show how automatic homeomorphicity
results can be lifted to polymorphism clones generated by monoids.

2010 Mathematics Subject Classiﬁcation 08A35
keywords: rationals, automatic homeomorphicity, embedding, endomorphism, polymorphism

clone

1

Introduction

We write M and E for the monoids of endomorphisms of (Q, <) (coinciding with the self-embeddings
of (Q, <) since < is linear) and (Q, ≤) respectively, and G for the automorphism group Aut(Q, <)
(which equals Aut(Q, ≤)), so that G is the family of invertible members of E. Our main results
are that M and E have ‘automatic homeomorphicity’ in the sense of [1], with a corresponding
result for the polymorphism clone of (Q, ≤). This intuitively means that the natural topology (see
below for a precise deﬁnition) can be recognized inside the algebraic structure; the more formal
deﬁnition says that any isomorphism from M to a closed submonoid of the full transformation
monoid on a countable set is also necessarily a homeomorphism, with an analogous statement for E
and Pol(Q, ≤). The case of Pol(Q, <) is not yet solved. According to the treatment given in [1], the
main preliminary technical result needed to demonstrate automatic homeomorphicity for M is that
any injective endomorphism of M which ﬁxes G pointwise, also ﬁxes every member of M (since M
is the closure of G). We need a slightly more general variant of this fact for the proofs regarding the
monoid E. We are also able to show the truth of the corresponding statement for automorphisms
of E (though the deduction of automatic homeomorphicity requires more work, and a new and direct
method, since G is not dense in E). We may identify M as the family of injective members of E;
another important monoid which plays a role in some of the proofs is that of the surjective maps
in E, denoted by S, which we show to coincide with the epimorphisms of (Q, ≤). We shall see that,
in fact, each of these is deﬁnable (in the monoid language) in E.

In order to establish the mentioned preliminary result for M , we somehow have to represent
the members of M inside G. The most natural and obvious way to attempt to do this is via
centralizers. Indeed in similar ‘interpretability’ results for G, this is often suﬃcient, and in our case,

∗The research of the ﬁrst named author was partly supported by the Austrian Science Fund (FWF) under grant

no. I836-N23.

†Institute for Discrete Mathematics and Geometry, Wiedner Hauptstraße 8–10, 1040 Wien, Austria
‡The research of the third author was supported by CONACYT.
§Department of Pure Mathematics, University of Leeds, Leeds LS2 9JT, UK
¶We thank Christian and Maja Pech for helpful remarks.

1

we can make quite good progress using this idea. To be more concrete, let us write ξ for the given
injective endomorphism of M which ﬁxes G pointwise. Given any f ∈ M , it is natural to consider
CG(f ) = {g ∈ G : f g = gf }. For certain values of f , we can show that CG(f ) = CG(f1) ⇒ f = f1.
From this it easily follows that ξ(f ) = f . This is because the centralizers of f and ξ(f ) are equal, as
g ∈ CG(ξ(f )) ⇔ gξ(f ) = ξ(f )g ⇔ ξ(gf ) = ξ(f g) (as ξ ﬁxes members of G) ⇔ gf = f g ⇔ g ∈ CG(f ),
and so from CG(f ) = CG(ξ(f )) we deduce that ξ(f ) = f . Among elements f to which this applies
are those of the form f (x) = x if x < π, x + 1 if x > π (and similarly for any other irrational), as
well as many others. An example of an f to which this does not apply is f (x) = x if x < 0, x + 1 if
x ≥ 0 (which shares a centralizer with f1 given by f1(x) = x if x ≤ 0, x + 1 if x > 0). In the case of
order-preserving permutation groups, arguments using centralizers are widespread, and solve many
problems. See [2] for material on this.

To prove that ξ(f ) = f for general f is however more involved, and a technique described
in [1] which uses sets of pairs of group elements rather than subsets of G is used instead. This is
S(f ) = {(α, β) ∈ G2 : αf = f β}. Our method is then to ﬁnd certain subfamilies of M , which we
denote by Γ, Γ+, Γ−, and Γ±, and show that for f ∈ Γ ∪ Γ+ ∪ Γ− ∪ Γ±, S(f ) = S(f1) ⇔ f = f1,
from which by essentially the same proof as above, ξ(f ) = f . Then we show that for any member f
of M there are g1, g2 lying in one of Γ, Γ+, Γ−, Γ± such that g1f = g2, and use a trick involving
cancellation to conclude the proof. We need a few technicalities to achieve this. From this it
immediately follows by results from [1] that M has automatic homeomorphicity (Theorem 2.6).

In the next section we move on to a discussion of the endomorphism monoid E of (Q, ≤). We
can show that various natural subsets of E are deﬁnable in E, and we can lift the technical result
concerning the map ξ to this context too (assuming that it is an automorphism).

In section 4, we discuss the analogous result for E. The key idea here is to analyze directly
the possible actions of E on a countable set Ω, which is the set which features in the deﬁnition of
‘automatic homeomorphicity’. Any isomorphism of E to a closed submonoid of the transformation
monoid on Ω gives rise to a monoid ‘action’ of E on Ω. We focus on the group orbits of G ⊆ E, and
use them to guide our analysis. Provided we know that the restriction of the isomorphism to M maps
it to a closed submonoid, we can deduce from Theorem 2.6 that it is a homeomorphism. Closedness
of this image is easy to prove if the isomorphism sends constants to constants, but examples show
that, in general, we cannot rely on this property. Thus, we have to invent another method to ensure
closedness, which is done by generalizing Lemma 12 from [1]. After this is solved, we are able
to demonstrate precisely how the members of M act on Ω, and using the technical lemmas from
section 3, we can then directly describe how E acts, and show that the isomorphism assumed to
exist must also be a homeomorphism.

In section 5, we use the earlier results to lift automatic homeomorphicity to the corresponding
polymorphism clone. So far this argument only works in the reﬂexive case, since ‘idempotents’ with
ﬁnite image are required in the proof, which exist in E but not in M . The problem highlighted in
the previous paragraph for the monoid does not cause diﬃculties here however, since the fact that
for clones the images of constants are necessarily constants avoids the diﬃculty.

In the ﬁnal section, we give a method for lifting automatic homeomorphicity (and also automatic
continuity—a variant, where every homomorphism into the full transformation monoid / clone on a
countable set is required to be continuous) from monoids to the clones they generate. In this context,
we can immediately deduce that the polymorphism clones hEnd(Q, <)i and hEnd(Q, ≤)i generated
by End(Q, <) and End(Q, ≤), respectively, have automatic homeomorphicity. These clones are
(rather small) subclones of the corresponding full polymorphism clones.

To make sense of results about continuity, we need to recall what the topology is, on G, M ,
E, and indeed also on the clone. For E, we take as sub-basic open sets all sets of the form Bqr =
{f ∈ E : f (q) = r}, and the topologies on G and M are then the induced ones. Basic open sets are
then ﬁnite intersections of these, so have the form {f ∈ E : f ↾B = g}, where B is a ﬁnite subset
of Q and g : B → Q. In the polymorphism clone P , the same sets are used, but with higher ‘arities’.
Thus for each n, and q1, q2, . . . , qn, r ∈ Q, Bq1q2...qnr = {f ∈ P (n) : f (q1, q2, . . . , qn) = r} is taken
as a sub-basic open set. Similarly, in the full transformation monoid Tr(Ω) on a set Ω (usually
countable), sub-basic open sets have the form {f ∈ Tr(Ω) : f (x) = y} for x, y ∈ Ω, with basic open
sets as ﬁnite intersections of these, and sub-basic open sets on the polymorphism clone similarly

2

given by allowing increased arities. We remark that saying that G is dense in M thus says that
any embedding of (Q, <) can be approximated by automorphisms on arbitrarily large ﬁnite sets.
Therefore, saying that M is the closure of G says that any limit of members of G lies in M and any
member of M may be expressed as such a limit. It is worth noting that, since G, M and E or the
corresponding monoids on Ω live on a countable carrier set, their topology is actually metrizable by
an ultrametric (see [4, 1.1, p. 132] for details). This enables us to use sequential convergence and
continuity instead of the net analogues needed in general, and we shall exploit this, for instance, in
section 6.

An alternative proof of the main technical result Corollary 2.5 was given independently by James

Hyde [3] (not using methods from [1]).

2 Main technical lemmas for M

Throughout this section we suppose that ξ is an injective endomorphism of M which ﬁxes G point-
wise, and our goal is to show that it also ﬁxes M pointwise. It is fairly easy to show by ‘bare hands’
that there are some members of M which must be ﬁxed, for instance those f that are characterized
by their centralizers (meaning that if f and f ′ have equal centralizers in G, then they are equal).
However, this type of argument only applies to a limited range of members of M , and we need a
more systematic approach. For this we isolate particular subfamilies of members of M , written Γ,
Γ+, Γ−, Γ±, show that all their members are ﬁxed, and then lift this to all members f of M by
writing f in terms of members of Γ ∪ Γ+ ∪ Γ− ∪ Γ±. To describe what Γ is, we require the following
deﬁnition.

The 2-coloured version of the rationals denoted by Q2, can be characterized as the set Q of
rational numbers, together with a colouring function F : Q → C = {red, blue} such that for every
x < y in Q and c ∈ C there is z ∈ Q with x < z < y and F (z) = c. It is well known that this exists
and is unique up to isomorphism.

A key observation in what we do is that the only relevant information about f ∈ M for our present
purposes is the value of its image. This is because, if f1 and f2 in M have the same image, then
f −1
2 f1 is (deﬁned and) an automorphism, so by hypothesis is ﬁxed by ξ, and, since f2(f −1
2 f1) = f1,
it is immediate that f1 is ﬁxed if and only if f2 is. So we really need to focus mainly on subsets
of Q, though we often construe them as images. In fact with regard to this, it is clear that a subset
of Q is the image of some self-embedding if and only if it is isomorphic to Q.

With this in mind, for any A ⊆ Q isomorphic to Q, let us deﬁne a relation ∼ on Q by x ∼ y
if there is at most one point of A strictly between x and y. Then (rather surprisingly) this is an
equivalence relation. For if x ∼ y ∼ z and not x ∼ z, then there must be distinct a, b ∈ A between x
and z. The interval between x and z cannot be contained in either of the intervals between x and y
or between y and z (since then x ∼ z would be immediate). We assume without loss of generality
that x < y, and so it follows that y < z. One of a, b lies in [x, y] and the other in [y, z], but now a
and b are consecutive members of a copy of Q, which is impossible.

The equivalence classes are clearly convex and can intersect A in at most one point. So this gives
two main options, that is, equivalence classes intersecting A (in a singleton), which we call ‘red’, and
those which are disjoint from A, which we call ‘blue’. Furthermore, being convex subsets of Q, each
∼-class is a non-empty interval of Q of the form (a, b), (a, b], [a, b), or [a, b] (where a, b ∈ R ∪ {±∞}
and in the last case a = b is allowed).

From the deﬁnition of ∼ and in particular from convexity of the equivalence classes we observe
the following properties. Putting [x]∼ < [y]∼ for rationals x, y with x 6∼ y if and only if x < y gives
a well-deﬁned strict linear order on the equivalence classes. Moreover, by the choice of A, if x, y ∈ A
and x < y then there are inﬁnitely many points z ∈ A satisfying x < z < y. That is, between two
distinct red classes there are inﬁnitely many red classes. Similarly, if x and y belong to distinct blue
equivalence classes, there must be at least two and thus inﬁnitely many points of A in between. Also
if x is in a red class and y is in a blue one (and we may assume that actually x ∈ A), then there must
be another (and hence inﬁnitely many) point of A between them. Consequently, between any two
distinct equivalence classes, we ﬁnd inﬁnitely many red classes. Thus, whenever we can show that

3

at least one blue class lies between any two points of A, then between any two distinct ∼-classes
there is a red as well as a blue class.

We denote by Γ the family of all f ∈ M such that Q may be written as the disjoint union
S{Aq : q ∈ Q2} of convex subsets Aq of Q such that q < r ⇒ Aq < Ar, each Aq is isomorphic
to Q, and if q is a red point of Q2 then Aq is a red interval of Q with respect to im(f ) (that is,
|Aq ∩ im(f )| = 1), and if q is a blue point of Q2 then Aq is blue (that is, Aq ∩ im(f ) = ∅). The
intuition is that the points of the image of f are spread out as much as they possibly can be. To
handle members of M whose image may be bounded above or below, we also need to consider Γ+,
which is deﬁned similarly but using Q2 ∪ {∞} (Q2 with a right endpoint added), and similarly Γ−,
Γ± from Q2 ∪ {−∞}, Q2 ∪ {±∞} (all inﬁnite points coloured blue). The need to consider these
variants was pointed out to us by Christian Pech.

A main technical lemma, adapted from [1], shows how certain pairs of ﬁnite partial automorph-
isms can be extended to pairs of automorphisms. For this purpose, for any g ∈ M we let ∼ be the
equivalence relation deﬁned above with respect to im(g), and let P be the family of all pairs (a, b)
of ﬁnite partial automorphisms of Q satisfying the following properties:

(1) a is colour-preserving (that is, an element x ∈ dom(a) belongs to a red interval if and only if
a(x) belongs to a red interval), strongly ∼-preserving (meaning that for x, y ∈ dom(a), x ∼ y ⇔
a(x) ∼ a(y)), and if there is a least or greatest blue interval, then a preserves it,

(2) if x ∈ dom(a) lies in a red interval containing a point y of im(g), then y ∈ dom(a),

(3) if x ∈ im(a) lies in a red interval containing a point y of im(g), then y ∈ im(a),

(4) g(dom(b)) ⊆ dom(a),

(5) g(im(b)) ⊆ im(a),

(6) if x ∈ im(g) ∩ dom(a), then g−1(x) ∈ dom(b), and gbg−1(x) = a(x),

(7) if x ∈ im(g) ∩ im(a), then g−1(x) ∈ im(b), and gb−1g−1(x) = a−1(x).

Lemma 2.1. Let g ∈ Γ ∪ Γ+ ∪ Γ− ∪ Γ±. Then any (a, b) ∈ P can be extended to a pair of
automorphisms (α, β) of (Q, <) such that αg = gβ.

Proof. We ﬁrst treat the case g ∈ Γ. We deﬁne a ﬁnite partial automorphism a of Q2 thus. Let
Q = S{Aq : q ∈ Q2} as in the deﬁnition of g ∈ Γ, and let a(q) = r if there is x ∈ Aq ∩ dom(a) such
that a(x) ∈ Ar. Clause (1) guarantees that a is well-deﬁned, and clauses (1), (2), (3) ensure that it
is colour-preserving. Extend a to an automorphism α of Q2, and let α ∈ Aut(Q, <) be an extension
of a satisfying α(im(g)) = im(g) (it is possible to achieve this because a(im(g) ∩ dom(a)) ⊆ im(g)
by (6) and a−1(im(g) ∩ im(a)) ⊆ im(g) by (7)) such that for each q ∈ Q2, α(Aq) = Aα(q). This is
possible since for any q such that Aq ∩ dom(a) 6= ∅, if a(Aq ∩ dom(a)) ⊆ Ar, then a(q) = r. Let
β = g−1αg, which is also an automorphism, since α preserves im(g).

A similar argument applies to Γ+, Γ−, Γ±, using Q2 ∪ {∞}, Q2 ∪ {−∞}, Q2 ∪ {±∞} respectively
in the argument in place of Q2, noting that the ﬁnal condition in clause (1) ensures that the greatest
or least blue interval, if it exists, is preserved by α.

Lemma 2.2. Any injective monoid homomorphism ξ : M → E which ﬁxes G pointwise also ﬁxes
every member of Γ ∪ Γ+ ∪ Γ− ∪ Γ±.

Proof. Recall the deﬁnition of S(g) = {(α, β) ∈ G2 : αg = gβ} for g ∈ E. Now let g ∈ Γ, and
consider elements u and s of Q with s 6= g(u). We construct (α, β) in S(g) such that α(s) 6= s and
β(u) = u. We consider two cases:

1. If s ∈ im(g), then s and g(u) lie in diﬀerent red intervals. Without loss of generality we suppose
that g(u) < s. Since im(g) ∼= Q, there is t ∈ im(g) greater than s. Since g is order-reﬂecting
(that is, its inverse preserves the order), u < g−1(s) < g−1(t). Hence a = {(g(u), g(u)), (s, t)}
and b = {(u, u), ((g−1(s), g−1(t))} are ﬁnite partial automorphisms. We can verify that (a, b) ∈
P (as deﬁned before Lemma 2.1).

4

2. If s /∈ im(g), then since g(u) 6= s, without loss of generality we suppose that g(u) < s. We

consider two cases:

(i) If s lies in a blue interval Aq, we choose t 6= s in the same interval. Since Aq is convex, a =
{(s, t), (g(u), g(u))} and b = {(u, u)} are ﬁnite partial automorphisms. Again (a, b) ∈ P .

(ii) If s lies in a red interval Aq containing r ∈ im(g), we choose t ∈ Aq \ {g(u), r, s}
on the same side of r (which also allows for the possibility that r = g(u)). Then
a = {(g(u), g(u)), (r, r), (s, t)} and b = {(u, u), (g−1(r), g−1(r))} are ﬁnite partial auto-
morphisms, and once more we can verify that (a, b) ∈ P .

In each case we can extend (a, b) to (α, β) such that αg = gβ by appealing to Lemma 2.1, thus

(α, β) lies in S(g), and satisﬁes β(u) = u, α(s) = t 6= s.

This means that for any u in Q the element g(u) can be recovered from S(g), namely as the

unique value s in Q satisfying either side of the equivalence

g(u) = s ⇐⇒ ∀(α, β) ∈ S(g) (β(u) = u → α(s) = s)

(1)

For if g(u) = s and (α, β) ∈ S(g) veriﬁes β(u) = u, then α(s) = α(g(u)) = g(β(u)) = g(u) = s. This
implication is even true for any g ∈ E, not just for g ∈ Γ. Conversely, if g ∈ Γ and g(u) 6= s, then
by the above we can construct (α, β) ∈ S(g) such that β(u) = u and α(s) 6= s.

Note that since ξ is an injective homomorphism ﬁxing G pointwise,

S(ξ(g)) = {(α, β) ∈ G2 : αξ(g) = ξ(g)β} = {(α, β) ∈ G2 : ξ(αg) = ξ(gβ)}

= {(α, β) ∈ G2 : αg = gβ} = S(g).

From this and Condition (1) we obtain ξ(g) = g: namely, for u ∈ Q put s := ξ(g)(u), then all of the
following equivalent conditions hold:

∀(α, β) ∈ S (ξ (g)) (β(u) = u → α(s) = s) ⇐⇒

∀(α, β) ∈ S(g) (β(u) = u → α(s) = s)

(1)
⇐⇒ g(u) = s.

Similar proofs apply in the cases g ∈ Γ+, Γ−, Γ±. We just note for instance in the case of Γ+

that if s lies in the greatest blue interval, then so does t (Case (2i)).

Now we consider how the members of Γ and M interact. If g ∈ Γ and f ∈ M where im(f ) is
‘coterminal’ (that is, for every x ∈ Q there are u, v ∈ im(f ) with u ≤ x ≤ v), then any ∼gf -class
is a union of a convex family of ∼g-classes. This is because im(gf ) ⊆ im(g) and so if x ≤ y, then
x ∼g y ⇒ |[x, y] ∩ im(g)| ≤ 1 ⇒ |[x, y] ∩ im(gf )| ≤ 1 ⇒ x ∼gf y. Since all ∼g-classes are isomorphic
to Q, so are all the ∼gf -classes. The family of red ∼gf -classes is ordered like Q, since it corresponds
precisely to the image of gf , which is a copy of Q. And the blue ∼gf -classes occupy some cuts
among the red ones. Two distinct blue ∼gf -classes must occupy distinct cuts, as if they had no red
∼gf -class between them, then by deﬁnition of ∼gf , they would have to be in the same ∼gf -class.
This means that we may write Q as a disjoint union of sets Aq for q lying in some subset Q of Q2,
where each Aq is isomorphic to Q and all the red members of Q2 lie in Q. This describes the general
set-up. Depending on the particular g and f , we may ﬁnd that gf ∈ Γ or not. We ﬁrst see that
if they both lie in Γ, then the product necessarily does too. Modiﬁed remarks apply in the cases
where im(f ) is bounded above, or below, or both, in which case we use the appropriate class, Γ+
or Γ− or Γ±.

Lemma 2.3. If g1 and g2 lie in Γ then so does g2g1 (and similarly for Γ+, Γ−, Γ±).

Proof. From the above remarks, we just need to see that between any two g2g1-red intervals there is a
g2g1-blue one. Let g2g1(x) < g2g1(y). Since g1 ∈ Γ, there is a g1-blue interval (a, b) ⊆ (g1(x), g1(y)),
and its endpoints a and b are irrationals which are limits of points of im(g1). Let a = supn∈N g1(an),
b = inf n∈N g1(bn) where (an) is an increasing sequence, and (bn) is a decreasing sequence. From
(a, b) ∩ im(g1) = ∅ it follows that g2(a, b) ∩ im(g2g1) = ∅. Let (c, d) be the g2g1-interval containing

5

If c ≤ g2g1(an) for some n ∈ N, then c ≤ g2g1(an) < g2g1(an+1) < g2g1(an+2) < d
g2(a, b).
which would give more than one point of im(g2g1) in (c, d), contrary to its being a g2g1-interval.
Similarly we cannot have g2g1(bn) ≤ d for any n. Therefore, if c < g2g1(z) < d for some z ∈ Q, then
g2g1(an) < g2g1(z) < g2g1(bn) for every n. This implies that g1(an) < g1(z) < g1(bn) for all n ∈ N,
hence a < g1(z) < b, contrary to (a, b) ∩ im(g1) = ∅. Consequently, (c, d) ∩ im(g2g1) = ∅, and (c, d) is
a g2g1-blue interval. Furthermore, for t in (c, d), we have g2g1(an) < c < t for all n, thus t ≤ g2g1(x)
would imply g1(x) > g1(an) for every n and so g1(x) > a. This contradicts (a, b) ⊆ (g1(x), g1(y)),
hence g2g1(x) < t. Analogously, we can prove t < g2g1(y), and therefore, (c, d) ⊆ (g2g1(x), g2g1(y)).
From this and the basic properties of ∼g2g1 observed earlier, it easily follows that the family of

∼g2g1 -intervals is ordered like Q2.

Lemma 2.4. For any f ∈ M whose image is coterminal in Q, there is g ∈ Γ such that gf ∈ Γ (with
similar statements for the other classes Γ+, Γ−, Γ±).

Proof. It is no doubt possible to prove this directly, but it seems a little easier to go by way of the
previous lemma. We start by taking any g1 ∈ Γ, and then we see that we can describe g1f fairly well.
Then we take another g2 ∈ Γ, which will be chosen so that g2g1f ∈ Γ. Appealing to Lemma 2.3, we
may let g = g2g1 to conclude the proof.

By the discussion above, there is a subset Q of Q2 containing all the red points, such that
Q = Sq∈Q Aq where the Aq are copies of Q such that q < r in Q implies that Aq < Ar and if q ∈ Q
is red, then Aq is a g1f -red interval, and if it is blue, then Aq is a g1f -blue interval. Let us also write
Q = Sq∈Q2 Bq where Bq ∼= Q and q < r ⇒ Bq < Br, and we choose g2 ∈ Γ mapping Aq to Bq for
each q ∈ Q. More precisely, for this we let Bq = Sr∈Q2 Bq,r where Bq,r ∼= Q and r < s ⇒ Bq,r < Bq,s
and ensure that if r is red, | im(g2) ∩ Bq,r| = 1, and if r is blue, im(g2) ∩ Bq,r = ∅. From this we can
see that g2 ∈ Γ. Furthermore, each Bq for red q is a g2g1f -red interval, and for blue q is a g2g1f -blue
interval. Hence also g2g1f ∈ Γ.

Corollary 2.5. Any injective monoid homomorphism ξ : M → E which ﬁxes G pointwise also ﬁxes
every member of M .

Proof. Let f ∈ M . By Lemma 2.4, if im(f ) is coterminal, then there is g ∈ Γ such that gf ∈ Γ. By
Lemma 2.2, ξ ﬁxes g and gf . Therefore gξ(f ) = ξ(g)ξ(f ) = ξ(gf ) = gf . Since g is in Γ and thus
in M , it is left cancellable (see Lemma 3.2 below), and hence ξ(f ) = f . If im(f ) is bounded above
but not below, we argue similarly using Γ+ in place of Γ, and Γ−, Γ± correspond in a similar way
to the cases im(f ) bounded below and not above, and bounded above and below, respectively.

It clearly follows from this corollary that every injective endomorphism of M ﬁxing G pointwise

is the identity on M . This implies the following theorem.

Theorem 2.6. M = Emb(Q, ≤) has automatic homeomorphicity, meaning that any isomorphism
between M and a closed submonoid of the full transformation monoid on a countable set is a homeo-
morphism.

Proof. This follows from Corollary 2.5 and [1, Lemma 12, p. 13], since G is dense in the closed monoid
M = End(Q, <); for by [1, Proposition 7, p. 8] we know that G has automatic homeomorphicity,
since it has the small index property [5] and hence automatic continuity [1, 3.6, p. 8].

3 Preliminary results for the endomorphism monoid of (Q, ≤)

Let us now consider (Q, ≤), and the associated four ‘natural’ monoids, namely its endomorphisms
End(Q, ≤), embeddings Emb(Q, ≤) (being the same as the injective endomorphisms due to the
order being linear), surjective endomorphisms Surj(Q, ≤), and automorphisms Aut(Q, ≤). The em-
beddings and automorphisms are the same as for (Q, <), so we continue to abbreviate these as M
and G respectively. The others we write as E (for endomorphisms) and S (for ‘surjective’) respect-
ively. Since we want to see what we can ‘recover’ from G as before, we ﬁrst look at which subsets
of E are deﬁnable. We starting by showing that the surjective endomorphisms coincide with the
endomorphisms having a right inverse.

6

Lemma 3.1. Each map which is right inverse to some f ∈ S belongs to M . In particular a member
of E belongs to S if and only if it has a right inverse endomorphism. Furthermore, the sets of right
inverse endomorphisms of distinct members of S are unequal.

Proof. Let f ∈ S and suppose g : Q → Q satisﬁes f g = idQ. We show that g ∈ End(Q, <) = M .
For this consider x, y ∈ Q such that x < y. Then f (g(x)) = x 6≥ y = f (g(y)), which implies that
g(x) 6≥ g(y) since f is order-preserving. As the order is linear, it follows that g(x) < g(y).

As every f ∈ S is surjective, it has a right inverse map, which belongs to M ⊆ E by the above.

Moreover, if f ∈ E has a right inverse g, then f g = idQ implies that f is surjective.

To prove the ﬁnal remark, we observe how to ‘recover’ (i.e. deﬁne) f ∈ S from its family of right
inverses. In fact f (x) = y ⇔ (∃g ∈ E)(f g = idQ ∧ g(y) = x). For from the above, it is clear that if
f (x) = y, there is a right inverse map (and hence endomorphism) taking y to x, which gives ‘⇒’.
Conversely, if g(y) = x for some right inverse g of f , then f (x) = f g(y) = y.

Let us write C for the family of constant maps, namely {ca : a ∈ Q}, where ca(x) = a for all x.
Thus C ⊆ E (but of course C ∩ M = ∅ = C ∩ S). All the mentioned sets are indeed deﬁnable in E.

Lemma 3.2. Each of C, M , S, G is a deﬁnable subset of E: C contains precisely all left absorbing
(left zero) elements in E, M are the monomorphisms, S coincides with the epimorphisms, and G
consists of the isomorphisms inside E.

Proof. We have to show that C = {g ∈ E : (∀f ∈ E)gf = g}. To see that this correctly deﬁnes C,
ﬁrst let a ∈ Q, and note that for any f ∈ E, caf = ca since caf (x) = a = ca(x) for all x ∈ Q.
Conversely, suppose that gf = g for all f ∈ E, and pick any a ∈ Q. Then gca = g and hence for any
x ∈ Q, g(x) = gca(x) = g(a), so g is constant.

We would like to characterize M as the members of E with left inverses, but this is incorrect, as
one sees for instance by considering the function f (x) = x if x < π, x + 1 if x > π. If this had a left
inverse g say, then for all a and b such that a < π < b, f (a) < 4 < f (b), and so a < g(4) < b, which
forces g(4) to be π which is not rational. Instead we use a related condition, of left cancellability
(i.e., of being a ‘monomorphism’). So we shall show that a member f of E lies in M if and only
if for any g and h in E, f g = f h ⇒ g = h. If f ∈ M then this property holds, since for any g
and h such that f g(x) = f h(x) holds for any x in Q, we have g(x) = h(x) due to f being injective.
Conversely, suppose that f is a monomorphism in E. Whenever x, y ∈ Q are such that f (x) = f (y),
then f cx = f cy holds for the constant endomorphisms cx, cy ∈ E. As f is left cancellable, this
implies cx = cy, and so x = y. Hence, f is an injective endomorphism, thus it belongs to M .

Clearly, by Lemma 3.1 the set S is deﬁnable as the collection of endomorphisms of (Q, ≤) having
a right inverse endomorphism. However, we can also show that f ∈ S if and only if it is right
cancellable (so is an ‘epimorphism’). Certainly, if f ∈ S, then it is right cancellable because there
is a right inverse for f . Conversely, suppose that f is not surjective, and let y not lie in its image.
Let g(x) = h(x) = x if x < y, g(x) = h(x) = x + 1 if x > y, and g(y) = y, h(y) = y + 1. Then
g, h ∈ E, and they agree on Q \ {y} ⊇ im(f ), and hence gf = hf . However, g 6= h, so f is not right
cancellable.

Finally, G = M ∩ S, so it too is deﬁnable as the set of isomorphisms (i.e. the morphisms having

two-sided inverses).

Lemma 3.3. For any h ∈ End(Q, ≤) there are f ∈ M and g ∈ S such that h = gf .

Proof. If q ∈ Q then h−1({q}) is a convex subset of Q, since h(x1) = h(x2) = q and x1 ≤ y ≤ x2
imply that h(y) = q. Let X = Sq∈Q Xq where Xq equals {q} × h−1({q}) if q lies in the image
of h, and is {q} otherwise. We order X lexicographically, i.e., each Xq is ordered as subset of Q,
and we put x1 < x2 for x1 ∈ Xq1 and x2 ∈ Xq2 if and only if q1 < q2. Then X is countable
densely linearly ordered without endpoints, so there is an isomorphism θ : Q → X. Let ϕ : X → Q
be given by ϕ((q, y)) = q if h(y) = q, and ϕ(q) = q if q does not lie in the image of h. Finally, let
f (x) = θ−1((h(x), x)) and g = ϕθ.

We verify the desired properties. To see that f ∈ M , let x < y. Then h(x) ≤ h(y) so it follows
that (h(x), x) < (h(y), y), so θ−1(h(x), x) < θ−1(h(y), y). Also, since θ and ϕ are order-preserving

7

and surjective, so is g. Finally, to see that h = gf , take any x ∈ Q. Then q = h(x) ∈ im(h), so
(h(x), x) ∈ Xq and f (x) = θ−1((h(x), x)), so gf (x) = ϕθθ−1((h(x), x)) = ϕ((h(x), x)) = h(x).

Corollary 3.4. Any monoid automorphism ξ of E which ﬁxes G pointwise is the identity.

Proof. The key point here is that since by Lemma 3.2 M is deﬁnable in E as the family of left
cancellable elements, ξ must map M to itself, so we can appeal to Corollary 2.5 to deduce that it
also ﬁxes M pointwise. The ﬁrst part of Lemma 3.1 implies that ξ ﬁxes S setwise, so it follows from
the contrapositive of the second part that it ﬁxes S pointwise. Now it is immediate from Lemma 3.3
that ξ ﬁxes every member of E.

Note that we would really like this to hold for injective endomorphisms, and not just for auto-
morphisms. This may be true, but our proof does not show it at present; that is because for a
possibly not surjective ξ, it is not clear that the deﬁning property of M inside E (namely left can-
cellability) carries over to its image under ξ. A more detailed analysis of the proof of Lemma 3.2
however shows that the property does hold for injective endomorphisms ξ whose image contains at
least one constant operation.

We conclude this section by showing the deﬁnability of some other concepts, related to what we

have already done.

Lemma 3.5. The relation f, g ∈ M ∧ im(f ) ⊆ im(g) is deﬁnable in the monoid E.

Proof. We already know that membership in M is deﬁnable. We can then deﬁne the given relation
by (∃h ∈ M )f = gh. Clearly if this formula is true, then the image of f is contained in the image
of g. Conversely, if im(f ) ⊆ im(g), we can deﬁne h by h(q) = r ⇔ f (q) = g(r). This deﬁnes h since
im(f ) ⊆ im(g), and it is well-deﬁned because g is 1–1. Finally, h preserves the (strict) order since f
does and g reﬂects it.

This result may be used to give a ‘representation’ of Q inside M , namely we can characterize
those members f of M whose image omits precisely one point of Q by the formula f ∈ M \ G ∧ (∀g ∈
M \ G(im(f ) ⊆ im(g) → im(g) ⊆ im(f ))), representing that f has a maximal image among non-
automorphisms. And of course we can also characterize when two such maps ‘encode’ the same
point by saying that they have the same image.

We remark that in E, by contrast, we already have the constant maps cq available, so we have

an immediate and direct way of representing the points of Q inside the monoid.

Finally in this section, we show how ﬁnite subsets of Q can be represented in E.

Lemma 3.6. For any f ∈ E, im(f ) = {q ∈ Q : (∃h ∈ E)f h = cq}. Hence | im(f )| = n ⇔ there are
exactly n constants k such that (∃h ∈ E)f h = k.

Proof. If q = f (r) for some r ∈ Q, then f cr = cq, so we may choose h ∈ E as cr. Conversely, if
f h = cq for some h ∈ E, then {q} = im(cq) = im(f h) ⊆ im(f ).

We remark that the situation for these maps is radically diﬀerent in the cases n = 1 and n > 1.
For n = 1 there are exactly ℵ0 maps having image of that size, namely the constant maps cq. But
if n > 1, for each B of size n there are 2ℵ0 maps having image B. For if B = {b0, b1, . . . , bn−1} then
f −1({bi}) are pairwise disjoint intervals with endpoints ai, ai+1 say, −∞ = a0 < a1 < . . . < an = ∞
(open or closed or semi-open) and ai may take any real value. All the same, these maps are quite
easy to visualize, and will play an important part in what follows.

4 Automatic homeomorphicity of End(Q, ≤)

In this section we give a discussion of the automatic homeomorphicity question for E. Here, since G
is not dense in E, we are obliged to use a more direct method, which may be of some independent
interest (and will also be used in section 5). In the hypothesis of automatic homeomorphicity we
are asked to consider an isomorphism θ of E with a closed submonoid E′ of the full transformation
monoid Tr(Ω) on some countable set Ω, and show that it is a homeomorphism. This θ may be

8

viewed as a (faithful) monoid action of E on Ω (which we write as a left action). Our strategy is
to try to demonstrate directly that θ is a homeomorphism, by describing explicitly what it can be.
If X ⊆ Ω is one such orbit, then for some x ∈ X,
To that end, let us study the G-orbits of θ.
X = {θ(g)(x) : g ∈ G}. By the orbit-stabilizer theorem, the orbit is in natural 1–1 correspondence
with the left cosets of the stabilizer Gx = {g ∈ G : θ(g)(x) = x}. Since X ⊆ Ω, it is countable, and
so |G : Gx| is countable. By the small index property for G [5], Gx = GB for some ﬁnite B ⊆ Q, and
furthermore, this gives rise to an identiﬁcation of X with the set [Q]n of the n-element subsets of Q
respecting the action as follows: Let ag(B) = θ(g)(x). Then ag1(B) = ag2(B) ⇔ θ(g1)(x) = θ(g2)(x) ⇔
2 g1 ∈ Gx ⇔ g−1
g−1
2 g1 ∈ GB ⇔ g1(B) = g2(B). Since [Q]n, the set of n-element subsets of Q, forms
an orbit under the action of G, this means that we may write X as {ag(B) : g ∈ G} = {aC : C ∈ [Q]n},
and the action of θ is given by θ(g)(aC ) = ag(C). Under these circumstances we say that this G-orbit
has rank n.

B : B ∈ [Q]ni}. The action is therefore given by θ(g)(ai

The conclusion of the discussion in the previous paragraph is that Ω may be written as the
union of G-orbits, each having ﬁnite rank, and θ provides a natural action of G on each G-orbit.
Let us write Ω = Si∈I Ωi, where Ωi are the G-orbits, and let Ωi have rank ni, so that we may
write Ωi = {ai
g(B) for each i ∈ I and
B ∈ [Q]ni . What we now want to do is to show how this action extends to an action of E, ﬁrst
treating members of M . To do this, we need to know that the restriction θ ↾M : M → M ′, where
M ′ = θ(M ), is continuous. We could infer this from Theorem 2.6 once we knew that M ′ is a closed
submonoid of E′. However, it turns out we ﬁrst need to prove continuity of the restriction before
we can verify this assumption, so using Theorem 2.6 does not seem to be the right way to do it.

B) = ai

Lemma 4.1. For an isomorphism θ : E → E′ to a closed submonoid E′ ⊆ Tr(Ω) on a count-
able set Ω, the monoid M ′ = θ(M ) is closed in Tr(Ω) and the restriction θ ↾M : M → M ′ is a
homeomorphism.

Proof. This is an almost verbatim copy of the proof of Lemma 12 in [1], but with the ending modiﬁed
as we are in a slightly diﬀerent situation.

Let us denote by G′ the monoid reduct of the group of invertible elements of E′, and let G′ be the
closure of G′ in E′; this is again a transformation monoid, and G′ is dense in it. We also know that G
comprises the set of invertible elements of E, and it is dense in the closed monoid M . It is easy to see
that θ(G) ⊆ G′ as θ is a monoid homomorphism. Moreover, since θ is an isomorphism, θ−1(G′) ⊆ G
follows by a symmetric argument, and hence θ(G) = G′ so that the restriction θ ↾G : G → G′ is a
well-deﬁned bijective monoid homomorphism. As the monoids G and G′ are group reducts, θ ↾G
actually is a group isomorphism, too. Moreover, density of G′ in the closed monoid G′ implies
that G′ = G′ ∩ Sym(Ω), and similarly G is a closed subgroup of the full symmetric group on Q.
As the automorphism group G has automatic homeomorphicity, θ ↾G is a homeomorphism. Now
applying Proposition 11 of [1], there is an extension θ ↾G : M → G′ of θ ↾G, which is a monoid
isomorphism and a homeomorphism. As E′ is closed, G′ ⊆ E′, and we let ι : G′ → E′ be the inclusion
map, which is a monoid embedding. Then ξ := θ−1ιθ ↾G is an injective monoid homomorphism
from M into E, which ﬁxes every member of G. By Corollary 2.5, ξ(f ) = f for every f ∈ M ,
i.e. θ(f ) = θ(ξ(f )) = ι(θ ↾G(f )) = θ ↾G(f ). This proves that M ′ = θ(M ) = θ ↾G(M ) = G′, and
hence M ′ is closed in Tr(Ω). Moreover, θ ↾M : M → M ′ coincides with θ ↾G and consequently is a
homeomorphism.

Lemma 4.2. For each f ∈ M , i ∈ I, and ai

B ∈ Ω, θ(f )(ai

B) = ai

f (B).

Proof. As G is dense in M , we may ﬁnd a sequence (gn) in G such that gn → f . Now the topologies
on M and M ′ are generated by sub-basic open sets of the form Bqr = {h ∈ M : h(q) = r} for
q, r ∈ Q and CijBC = {h ∈ θ(M ) : h(ai
C} for i, j ∈ I, B ∈ [Q]ni and C ∈ [Q]nj . Let
B = {q1, . . . , qm} and rk = f (qk). Since gn → f and f ∈ Bqkrk , there is Nk such that (∀n ≥ Nk)gn ∈
Bqk rk , so for all n ≥ max1≤k≤m Nk, gn(B) = f (B). By Lemma 4.1, the restriction of θ to M is
continuous. Hence θ(gn) → θ(f ). Let θ(f )(ai
C . Thus θ(f ) ∈ CijBC . From θ(gn) → θ(f )
it follows that (∃N )(∀n ≥ N )θ(gn) ∈ CijBC . Hence for this N , (∀n ≥ N )θ(gn)(ai
C . But
we know that θ(gn)(ai
gn(B) as gn ∈ G. Hence for such n, j = i and gn(B) = C. Taking

B) = aj

B) = aj

B) = aj

B) = ai

9

n ≥ N, max1≤k≤m Nk, it follows that j = i and C = gn(B) = f (B). Thus θ(f )(ai
required.

B) = ai

f (B) as

We can extend the statement of Lemma 4.2 to certain members of E, provided that they act

‘like’ members of M on the relevant set.

Lemma 4.3. If f ∈ E, i ∈ I, and ai

B ∈ Ωi, where |f (B)| = ni = |B|, then θ(f )(ai

B) = ai

f (B).

Proof. First consider the case where f ∈ S. As in the proof of Lemma 3.1 there is a right inverse
h ∈ M for f , and in addition, h may be chosen so that for each x ∈ B, hf (x) = x. Then, applying
Lemma 4.2 to h ∈ M , θ(f )(ai
f (B). Now
consider any h ∈ E such that |h(B)| = ni. By Lemma 3.3, we may write h = gf where f ∈ M and
g ∈ S, and |g(f (B))| = |h(B)| = ni. Hence by what we have just shown, θ(g)(ai
gf (B), so,
by Lemma 4.2 applied to f ∈ M , θ(h)(ai

hf (B)) = θ(f )θ(h)(ai

f (B)) = θ(idQ)(ai

B) = θ(f )(ai

f (B)) = ai

f (B)) = ai
h(B).

B) = θ(g)θ(f )(ai

B) = θ(g)(ai

f (B)) = ai

gf (B) = ai

If f ∈ E ‘collapses’ a set B, then we can certainly not deduce that θ(f )(ai

C for j = i,
since Ωi and Ωj will have diﬀerent ranks. For the proof of openness in the main theorem, we would
still need some information about C, namely that it is contained in f (B).

B) = aj

Lemma 4.4. Let i ∈ I and B ∈ [Q]ni. Then the following statements hold.

(i) There is an idempotent endomorphism h ∈ E having B as image such that θ(h)(ai

B) = ai

B.

(ii) θ(f1)(ai

B) = θ(f2)(ai

B) whenever f1, f2 ∈ E satisfy f1 ↾B= f2 ↾B.

(iii) If, for f ∈ E, j ∈ I and C ⊆ Q are given by θ(f )(ai

B) = aj

C , then C ⊆ f (B).

Proof.

(i) By subdividing Q into |B| pairwise disjoint intervals each containing a unique member
of B, and mapping the whole of each such interval to the member of B it contains, we obtain
an endomorphism h ∈ E ﬁxing all elements of B and satisfying im(h) = B, which is clearly
idempotent. Since h(B) = B ∈ [Q]ni, we can apply Lemma 4.3 to get θ(h)(ai
B.

B) = ai

h(B) = ai

(ii) Consider the idempotent h ∈ E constructed in (i). We see by inspection that f1h = f2h, where-

fore θ(f1)(ai

B) = θ(f1)θ(h)(ai

B) = θ(f1h)(ai

B) = θ(f2h)(ai

B) = θ(f2)θ(h)(ai

B ) = θ(f2)(ai

B).

(iii) Now suppose for a contradiction that there is c ∈ C \ f (B). Then there is h ∈ G moving c to
h(c) /∈ C but ﬁxing all members of f (B). Hence f ↾B= f ′ ↾B, where f ′ = hf , since h ﬁxes f (B)
pointwise. As shown in (ii), θ(f ′)(ai
B) =
θ(h)θ(f )(ai
h(C), contrary to h(C) 6= C. We conclude that C ⊆ f (B) as
required.

C . However, θ(f ′)(ai

B ) = θ(h)(aj

B) = θ(hf )(ai

B) = θ(f )(ai

C ) = aj

B) = aj

Using the ideas from above, we can demonstrate automatic homeomorphicity of E = End(Q, ≤).

Theorem 4.5. E = End(Q, ≤) has automatic homeomorphicity, meaning that any isomorphism θ
between E and a closed submonoid E′ ⊆ Tr(Ω) on a countable set Ω is a homeomorphism.

B) = aj

Proof. The sub-basic open sets in E and E′ are of the form Bqr = {f ∈ E : f (q) = r} and CijBC =
{f ∈ E′ : f (ai
C} for B ∈ Ωi, C ∈ Ωj, so to establish continuity we have to show that each
θ−1(CijBC ) is open in E. Now B is a ﬁnite set, so we may let B = {q1, q2, . . . , qm}, and, for an
arbitrary f ∈ θ−1(CijBC ), we let rk = f (qk). Thus f ∈ Tm
k=1 Bqk rk ⊆
θ−1(CijBC ), and this is what is required, since it shows that θ−1(CijBC ) is a union of open sets, hence
open in E. For let f ′ ∈ Tm
k=1 Bqkrk . Then f ′(qk) = rk for each k, which means that f and f ′ agree
on B. By part (ii) of Lemma 4.4, it follows that θ(f ′)(ai
C . Hence f ′ ∈ θ−1(CijBC ).
To show that θ is also open, it suﬃces to show that the image of any sub-basic open set is open.
So consider θ(Bqr) for any rationals q and r. Look at any member of this set, which may be written
as θ(f ) where f ∈ Bqr; we shall ﬁnd i, j ∈ I and B, C ⊆ Q so that θ(f ) ∈ CijBC ⊆ θ(Bqr). Since
f ∈ Bqr, f (q) = r. We shall show that there is some i ∈ I such that | im(f )| ≥ ni > 0. Then we
can ﬁnd B and C of size ni such that f (B) = C with q ∈ B. Now we take j = i, and observe

k=1 Bqk rk . We show that Tm

B) = θ(f )(ai

B) = aj

10

B) = ai

f (B) = ai

using Lemma 4.3 that, θ(f )(ai
C , which tells us that θ(f ) ∈ CiiBC . Furthermore,
for any g ∈ CiiBC , since we are in E′, g = θ(h) for some h ∈ E, and θ(h)(ai
C. Therefore,
Lemma 4.4(iii) yields C ⊆ h(B), and as |B| = |C|, ﬁniteness of B implies C = h(B). As f maps q
to r, and so q and r are the corresponding entries of B and C when enumerated in increasing order,
it follows that h also maps q to r. Hence h ∈ Bqr, which shows that g = θ(h) ∈ θ(Bqr), as required.
To see that such i ∈ I exists, suppose otherwise. This means that for every i ∈ I, if ni > 0
then | im(f )| < ni. Consider any i ∈ I and ai
C . Then C ⊆ f (B) by
Lemma 4.4 and so nj ≤ | im(f )|.
It follows that nj = 0, and C = ∅. Choose g ∈ G such that
g(f (x)) 6= f (x) holds for some x ∈ Q, e.g. g(y) = y + 1 for y ∈ Q. For every i ∈ I and B ∈ [Q]ni,
θ(gf )(ai
∅ = θ(f )(ai
B), showing that θ(gf ) = θ(f ).
However, gf 6= f by the choice of g, contrary to the injectivity of θ.

B ∈ Ωi and let θ(f )(ai

B) = θ(g)θ(f )(ai

∅) = aj

g(∅) = aj

B ) = θ(g)(aj

B) = ai

B) = aj

We would like to have more precise information about the action of the image of θ on Ω. We
have partial information about this from Lemmas 4.2, 4.3, 4.4 but this still seems to leave many
options open. We now set about describing the most general situation we are aware of under which
there is such an action. The conjecture will then be that this describes everything that actually can
occur.

The most natural way for E to act is just directly on Q, and we can see that the action on any
orbit of rank 1 must be like this, since the condition used in Lemma 4.3 (namely that |f (B)| = |B|)
is immediately veriﬁed. The next most natural action is on S1≤i≤n[Q]i for some ﬁxed n ≥ 1. Here
we just let θ(f )(B) = f (B), and note that the G-orbits are the [Q]i = {B ⊂ Q : |B| = i}, and this
‘cascades’ through the G-orbits depending on the behaviour of the map f . Generalizing this, let
n = nk > nk−1 > . . . > n0 = 0. This time we let X = S0≤i≤k[Q]ni, and deﬁne θ(f )(B) to be
the ﬁrst ni elements of f (B) if i is greatest such that ni ≤ |f (B)|, if i > 0, and 0 if i = 0. It is
straightforward to verify that this is an action.

The general action that we have in mind is built up from ones of this kind using a ‘tree’. The tree
in question will be a countable partially ordered set (T, ≤) in which for each t ∈ T , {s ∈ T : s ≤ t}
is a ﬁnite linearly ordered set, with a labelling l : T → N such that t1 < t2 ⇒ l(t1) < l(t2) (strictly
speaking, this is a ‘forest’). Given such T , which has at least one point labelled by a non-zero
number, (or else, inﬁnitely many labelled 0), we can form Ω = S{[Q]l(t) × {t} : t ∈ T }, and the
action is given as above ‘down each branch’. That is, θ(f )(B1, t1) = (B2, t2) if B2 is the ﬁrst l(t2)
elements of f (B1) if t2 is the greatest point below t1 in T such that l(t2) ≤ |f (B1)|. This is similarly
easily veriﬁed to be an action. So the main question remaining here is whether all such actions are
of this form.

5 Automatic homeomorphicity of Pol(Q, ≤)

In this section we use ideas from earlier in the paper to prove automatic homeomorphicity for the
polymorphism clone Pol(Q, ≤). For deﬁnitions of the relevant notions here we refer the reader to [1],
but mention a few notations and ideas that are needed. Denoting by OA the collection of all ﬁnitary
operations f : An → A (n ≥ 0) on a set A, a subset C ⊆ OA is called a (‘concrete’) clone on A if
it is closed under the operations of composition when deﬁned (that is, the ‘arities’ are correct) and
it contains all ‘projections’. These are the maps π(n)
(a1, a2, . . . , an) = ai,
where 1 ≤ i ≤ n. The collection of all polymorphisms of a relational structure always forms a clone,
and clones arising in this way are precisely the ones that are topologically closed. Of central interest
here is the clone Pol(Q, ≤) of polymorphisms of (Q, ≤), which is the family of all n-ary functions on Q
for n ≥ 0 that preserve ≤, i.e. that are monotone maps from (Q, ≤)n to (Q, ≤). Spelling out precisely
what this means, f : Qn → Q lies in the clone provided that if (a1, a2, . . . , an), (b1, b2, . . . , bn) ∈ Qn
and ai ≤ bi for all i, then f (a1, a2, . . . , an) ≤ f (b1, b2, . . . , bn). There is a corresponding notion
of ‘abstract clone’, which we do not require here. Let us note also that the set OA of all ﬁnitary
operations on A forms a clone, even a polymorphism clone (e.g., OA = Pol(A, A)). This is the
analogue of Sym(A) for the automorphism group and Tr(A) for the endomorphism monoid.

: An → A given by π(n)

i

i

11

Relying on results of [1], when proving automatic homeomorphicity of the clone Pol(Q, ≤), it will
suﬃce to verify that any clone isomorphism between Pol(Q, ≤) and a closed clone on some countable
set is continuous. To exhibit the general method we are using here, we ﬁrst prove the following result,
which is based on adapting the strategy used to demonstrate the ﬁrst part of Theorem 4.5.

Lemma 5.1. Let A and B be sets, P and P ′ be clones on A and B, respectively, and θ : P → P ′ be
a clone homomorphism. If for every b ∈ B there is some unary function h ∈ P (1) with ﬁnite image
such that θ(h)(b) = b, then θ is continuous.

Proof. Under the given assumptions we have to verify that θ−1(C) is open in P for any sub-basic
open set C of P ′. By deﬁnition of the topology of P ′ there are n ∈ N, (b1, . . . , bn) = b ∈ Bn and
b′ ∈ B such that C = {g ∈ P ′(n) : g(b) = b′}. We want to prove that every f ∈ θ−1(C) is surrounded
by a whole open neighbourhood inside θ−1(C) = {f ∈ P (n) : θ(f )(b) = b′}, showing that f is an
interior point of θ−1(C).

By the assumption of the lemma, we can ﬁnd maps h1, . . . , hn ∈ P (1) satisfying θ(hi)(bi) = bi
and having ﬁnite image im(hi) ⊆ A for every index i ∈ {1, . . . , n}. Therefore, the Cartesian product
A′ = Qn
i=1 im(hi) ⊆ An is ﬁnite, too and thus the set Pf = Ta∈A′{f ′ ∈ P (n) : f ′(a) = f (a)} is a
basic open neighbourhood of f in the topology of P . Hence, the result is proved once we establish
that Pf ⊆ θ−1(C).

For this let f ′ be any function in Pf , that is, we assume f ′(a) = f (a) for every a ∈ A′. Thus the
i=1 im(hi), which then implies the equation
n (cid:17). From here we can
, h2 ◦ π(n)

n-ary functions f and f ′ coincide on the ﬁnite set A′ = Qn
f ◦ (cid:16)h1 ◦ π(n)
conclude that θ(f ′)(b) = θ(f )(b) = b′, i.e., f ′ ∈ θ−1(C), as follows:

, . . . , hn ◦ π(n)

n (cid:17) = f ′ ◦ (cid:16)h1 ◦ π(n)

1

, . . . , hn ◦ π(n)

1

, h2 ◦ π(n)

2

2

θ(f )(b) = θ(f )(b1, . . . , bn) = θ(f )(θ(h1)(b1), . . . , θ(hn)(bn))

1

= θ(f )(cid:16)θ(h1)(cid:0)π(n)
= θ(f )(cid:16)θ(h1)(cid:0)θ(cid:0)π(n)
= θ(f ) ◦ (cid:16)θ(h1) ◦ θ(cid:0)π(n)
= θ (cid:16)f ◦ (cid:16)h1 ◦ π(n)

1

n (b)(cid:1)(cid:17)
(b)(cid:1), . . . , θ(hn)(cid:0)π(n)
1 (cid:1)(b)(cid:1), . . . , θ(hn)(cid:0)θ(cid:0)π(n)
1 (cid:1), . . . , θ(hn) ◦ θ(cid:0)π(n)

n (cid:1)(b)(cid:1)(cid:17)
n (cid:1)(cid:17) (b)

, . . . , hn ◦ π(n)

n (cid:17)(cid:17) (b).

Similarly, θ(f ′)(b) = θ (cid:16)f ′ ◦ (cid:16)h1 ◦ π(n)
1
θ(f ′)(b) = θ(f )(b) = b′, as required.

, . . . , hn ◦ π(n)

n (cid:17)(cid:17) (b). From the above equation it follows that

Proving automatic homeomorphicity of P = Pol(Q, ≤) now basically boils down to verifying the

assumptions of the preceding result.

Theorem 5.2. Pol(Q, ≤) has automatic homeomorphicity, meaning that any isomorphism θ from
P = Pol(Q, ≤) to a closed subclone P ′ of OΩ, for a countable set Ω, is a homeomorphism.

Proof. Note that, unlike in the case of the monoid E, where we would have had to prove both
continuity and openness of the given isomorphism θ, here we only need to check continuity, since
openness follows from Proposition 27 of [1], and this avoids the need for proving the analogue of
Lemma 4.4 (though this analogue still holds).

To demonstrate that θ is continuous, we use the machinery from section 4 to provide the as-
sumptions of Lemma 5.1. Note that these properties are determined entirely by the restriction
θ ↾E : P (1) → P ′(1), which is a monoid isomorphism between the unary parts P (1) = E and
E′ := P ′(1) (these are closed monoids because P and Tr(Q), and P ′ and Tr(Ω) are closed sets).
Namely, we have to verify that for every b ∈ Ω we can ﬁnd an endomorphism h ∈ E with ﬁnite
image such that θ(h)(b) = θ ↾E (h)(b) = b. However, this is precisely the content of part (i) of
Lemma 4.4 applied to θ ↾E.

12

6 Automatic homeomorphicity of clones generated by mon-

oids

In this ﬁnal section we show that automatic homeomorphicity results can be lifted from monoids to
the polymorphism clones they generate, under appropriate conditions. Given a submonoid E of the
full transformation monoid Tr(Ω) on a set Ω, there is a least clone hEi on Ω containing E; it may
be formed by including all projections, and then closing up under compositions of functions where
these are deﬁned; it may be explicitly written as Sk∈N\{0}{f ◦ π(k)
: j ∈ {1, . . . , k} ∧ f ∈ E}. This
is of course a rather small subclone of Pol(Ω), so any results obtained about it do not really give
us information about the general situation. Our main result here is that if E ⊆ Tr(Ω) is a closed
transformation monoid which has automatic homeomorphicity and its group of invertible members
acts transitively on Ω, then hEi also has automatic homeomorphicity.

j

Because the deﬁnition of automatic homeomorphicity, as described in section 5, is given for closed

clones we start by recalling that hEi is closed. This result belongs to the folklore of clone theory.

Lemma 6.1. If A is a set, and E ⊆ Tr(A) is a closed transformation monoid, then the clone hEi
is also closed.

Proof. Consider the quaternary relation ρ = {(x, y, z, u) ∈ A4 : x = y ∨ z = u}. We see that
Pol(A, {ρ, ∅}) = hTr(A)i. Since every function in Pol (A, {ρ, ∅}) must preserve the empty rela-
tion, its arity must be larger than zero. If an n-ary (for n > 0) function f ∈ Pol (A, {ρ, ∅}) has
at least two essential arguments, for indices i and j with 1 ≤ i < j ≤ n say, then there are
(a1, . . . , an), (b1, . . . , bn) ∈ An and a′, b′ ∈ A such that the values a, b, c, d ∈ A given by

f (a1, . . . , ai−1, ai, ai+1, . . . , aj−1, aj, aj+1, . . . , an) = a
f (a1, . . . , ai−1, a′, ai+1, . . . , aj−1, aj, aj+1, . . . , an) = b
f (b1, . . . , bi−1, bi, bi+1, . . . , bj−1, bj, bj+1, . . . , bn) = c
f (b1, . . . , bi−1, bi, bi+1, . . . , bj−1, b′, bj+1, . . . , bn) = d

satisfy a 6= b and c 6= d. This means that (a, b, c, d) /∈ ρ, which violates the condition that f
preserves ρ, since (ai, a′, bi, bi), (aj, aj, bj, b′) ∈ ρ. Hence f has at most one essential position, the
ith say (1 ≤ i ≤ n). As f depends at most on its ith position, for every (x1, . . . , xn) ∈ An we
have f (x1, . . . , xn) = f (xi, x2, . . . , xn) = f (xi, xi, . . . , xn) = · · · = f (xi, . . . , xi), which means that
f = g ◦ π(n)
for the unary function g = f ◦ (idA, . . . , idA), and so f ∈ hTr(A)i. The reverse inclusion
i
is trivial.

Now as E is a closed transformation monoid there is a set of ﬁnitary relations Q on A (e.g.
all invariant relations of E) such that E = End(A, Q) = Tr(A) ∩ Pol(A, Q). This implies that
Pol(A, Q ∪ {ρ, ∅}) = Pol(A, Q) ∩ Pol(A, {ρ, ∅}) = Pol(A, Q) ∩ hTr(A)i = hEi, from which it follows
that hEi is a closed clone. Indeed, the inclusion hEi ⊆ Pol(A, Q)∩hTr(A)i is immediate. Conversely,
if f ∈ Pol(A, Q) ∩ hTr(A)i, then there is an arity n > 0, an index i such that 1 ≤ i ≤ n, and a unary
operation g ∈ Tr(A) such that f = g◦π(n)
. It follows that f ◦(idA, . . . , idA) = g, and so g ∈ Pol(A, Q)
since f ∈ Pol(A, Q). As g is unary, g ∈ End(A, Q) = E. It follows that f = g ◦ π(n)

i

i ∈ hEi.

Lemma 6.2. Let E ⊆ Tr(Ω) be a transformation monoid on a countable set A and θ : hEi → OΩ
be a clone homomorphism from hEi into the clone of all operations on a countable set Ω. If the
restriction of θ to its unary part θ ↾E : E → Tr(Ω) is continuous, then θ is continuous.

Proof. In the proof we distinguish two cases. Let (gn)n∈N be a sequence of k-ary operations of hEi
that converges to g ∈ hEi(k) say. We want to prove that limn→∞ θ(gn) = θ(g). Since

hEi = [

k∈N\{0}

{f ◦ π(k)

j

: j ∈ {1, . . . , k} ∧ f ∈ E},

we have gn = fn ◦ π(k)
for all n ∈ N with fn ∈ E and 1 ≤ jn ≤ k (the index jn may not be uniquely
jn
determined in the case that fn is constant, but then we make an arbitrary choice, for instance

13

jn = 1), and g = f ◦ π(k)

j

for some f ∈ E and j such that 1 ≤ j ≤ k. Let us ﬁrst note that

lim
n→∞

fn = lim
n→∞

(gn ◦ (idA, . . . , idA)) = (cid:16) lim
j (cid:17) ◦ (idA, . . . , idA) = f ◦ idA = f

n→∞

= (cid:16)f ◦ π(k)

gn(cid:17) ◦ (idA, . . . , idA) = g ◦ (idA, . . . , idA)

since composition of functions is continuous with regard to the product topology.

The collection {{n ∈ N : jn = t} : 1 ≤ t ≤ k} consists of disjoint subsets of N whose union
covers N. Since this collection is ﬁnite, the set {n ∈ N : jn = t} must be inﬁnite for at least one
t ∈ {1, . . . , k}. By shifting the index of the sequence (gn)n∈N past the largest element of the ﬁnite
members of this collection, we may assume that each of these sets is either inﬁnite or empty. Let
t1, . . . , tℓ be the distinct indices in {1, . . . , k} for which Iν = {n ∈ N : jn = tν} (1 ≤ ν ≤ ℓ) is
inﬁnite. By enumerating Iν in strictly increasing order we get subsequences (nν,i)i∈N ∈ NN such
that Iν = {nν,i : i ∈ N} and thus jnν,i = tν is constant for all i ∈ N. The ﬁrst case we consider is
that g, equivalently f , is a constant map. Then f ◦ π(k)
tν holds for every ν ∈ {1, . . . , ℓ},
and so we can infer that

j = f ◦ π(k)

lim
i→∞

θ(gnν,i) = lim
i→∞
= (cid:16) lim
= θ (cid:16) lim

θ (cid:16)fnν,i ◦ π(k)
θ(fnν,i)(cid:17) ◦ (cid:16) lim
fn(cid:17) ◦ θ (cid:16)π(k)

i→∞

i→∞

n→∞

jnν,i(cid:17) = lim
θ (cid:16)π(k)

θ (cid:16)fnν,i ◦ π(k)
tν (cid:17)(cid:17) †
= θ (cid:16) lim

i→∞

i→∞

tν (cid:17) = θ(f ) ◦ θ (cid:16)π(k)

tν (cid:17) = θ (cid:16)f ◦ π(k)

tν (cid:17) = θ (cid:16)f ◦ π(k)

j (cid:17) = θ(g)

tν (cid:17) = lim

i→∞(cid:16)θ(fnν,i) ◦ θ (cid:16)π(k)

tν (cid:17)(cid:17)

tν (cid:17)
fnν,i(cid:17) ◦ θ (cid:16)π(k)

for each ν such that 1 ≤ ν ≤ ℓ (the equation marked by † follows from the continuity of θ for unary
operations). Now we have a partition of a sequence into a ﬁnite number of subsequences each of
which converges to the same limit θ(g). It follows that limn→∞ θ(gn) = θ(g): for every ε > 0 (and ν
such that 1 ≤ ν ≤ ℓ) we can ﬁnd an index Nν ∈ N such that θ (cid:0)gnν,i(cid:1) has distance less than ε from
θ(g) for all i > Nν. Let N = max{nν,Nν : 1 ≤ ν ≤ ℓ} and consider n > N . Using the partition, we
ﬁnd some ν ∈ {1, . . . , ℓ} and some i ∈ N such that n = nν,i. If i ≤ Nν, then n = nν,i ≤ nν,Nν ≤ N
contradicts n > N , so i > Nν. This means that the distance from θ(gn) = θ(gnν,i) to θ(g) is less
than ε.

t

(x, . . . , x, y, . . . , y) = f (x) 6= f (y) = f ◦ π(k)

The second case of the proof is when f is not constant. We show that ℓ = 1 and t1 = j. In
order to obtain a contradiction, let us assume that there is ν ∈ {1, . . . , ℓ} where t = tν 6= j. No
generality is lost in assuming that t < j. Since f is not constant, there are arguments x, y such
that f ◦ π(k)
(x, . . . , x, y, . . . , y), and the last x occurs in
j (cid:17) > 0. The subsequence
the tth position. Thus f ◦ π(k)
(cid:0)fnν,i(cid:1)i∈N converges to f , and as composition of functions is continuous, the same holds for the
sequence (cid:16)fnν,i ◦ π(k)
. Let us choose i ∈ N
large enough that d(cid:16)fnν,i ◦ π(k)

= (cid:16)fnν,i ◦ π(k)
, f ◦ π(k)

, and so ε = d(cid:16)f ◦ π(k)

2 . By the triangle inequality,

tν (cid:17)i∈N
t (cid:17) < ε

= (cid:16)fnν,i ◦ π(k)

jnν,i(cid:17)i∈N

and f ◦ π(k)

t (cid:17)i∈N

6= f ◦ π(k)

, f ◦ π(k)

j

j

t

t

t

t

ε = d(cid:16)f ◦ π(k)

j

, f ◦ π(k)

t (cid:17) ≤ d(cid:16)f ◦ π(k)
< d(cid:16)f ◦ π(k)

j

j

, fnν,i ◦ π(k)

, fnν,i ◦ π(k)

t (cid:17)
, f ◦ π(k)

t

t (cid:17) + d(cid:16)fnν,i ◦ π(k)
t (cid:17) +

ε
2
tν (cid:17) = d(cid:16)f ◦ π(k)

,

j

j

, fnν,i ◦ π(k)

t (cid:17) > ε
i.e. d(cid:0)g, gnν,i(cid:1) = d(cid:16)f ◦ π(k)
2
for all suﬃciently large i ∈ N. This means that (gn)n∈N cannot converge to g, contrary to our overall
assumption. Therefore, all (distinct) tν have to be equal to j, and thus there can only be one such
tν = t1 = j. This means that for all but ﬁnitely many n ∈ N (which we safely ignored above) we
have jn = j and thus gn = fn ◦ π(k)
for almost all n ∈ N. This enables us to conclude
jn

jnν,i(cid:17) = d(cid:16)f ◦ π(k)

, fnν,i ◦ π(k)

, fnν,i ◦ π(k)

= fn ◦ π(k)

j

j

14

that

lim
n→∞

θ(gn) = lim
n→∞

θ (cid:16)fn ◦ π(k)

j (cid:17) = lim

n→∞(cid:16)θ(fn) ◦ θ (cid:16)π(k)

j (cid:17)(cid:17) ‡

= θ (cid:16) lim

n→∞

j (cid:17)
fn(cid:17) ◦ θ (cid:16)π(k)

= θ(f ) ◦ θ (cid:16)π(k)

j (cid:17) = θ (cid:16)f ◦ π(k)

j (cid:17) = θ(g),

where the equation marked by ‡ holds because of the assumed continuity of θ restricted to unary
operations and the continuity of the composition of operations.

Corollary 6.3. Let A be a countable relational structure and θ : hEnd(A)i → C be a clone iso-
morphism between hEnd(A)i and a closed clone C over a countable set Ω. If the restriction of θ to
its unary part θ ↾End(A) : End(A) → C(1) is continuous, then θ is continuous.

Proof. Let us denote by ι : C → OΩ and ι′ : C(1) → Tr(Ω) the inclusion homomorphisms of C
and C(1) into the full clone and the full transformation monoid on Ω, respectively. By deﬁnition of
the subspace topology on C(1), ι′ is continuous, so ιθ is a clone homomorphism from an essentially
at most unary clone on a countable set into the clone of all operations on the countable carrier set Ω,
whose restriction to the unary part is ι′θ ↾End(A) and hence continuous. Letting E = End(A) in
Lemma 6.2 we deduce that ιθ is continuous; since im(θ) ⊆ C, it follows that θ is continuous, too.

As another consequence of Lemma 6.2, automatic continuity can be lifted from closed transform-

ation monoids to their generated clones.

Corollary 6.4. If A is a countable set, and E ⊆ Tr(A) is a closed transformation monoid with
automatic continuity, then the essentially at most unary clone hEi generated by it inherits this
property.

Proof. By Lemma 6.1, the clone hEi is closed. If θ : hEi → OΩ is a clone homomorphism into the
full clone on a countable set Ω, then its restriction to the unary part is the monoid homomorphism
θ ↾E : E → Tr(Ω), which is continuous by the assumption on E. By Lemma 6.2, θ is continuous.

Lemma 6.5. If A is a countable set, and E ⊆ Tr(A) is a closed transformation monoid which has
automatic homeomorphicity and its group of invertible members G acts transitively on A, then hEi
also has automatic homeomorphicity.

Proof. Let θ : hEi → C be a clone isomorphism between hEi and another closed clone C on a
countable set Ω. Since E has automatic homeomorphicity and the unary part of C is closed—because
C(1) = C ∩ Tr(Ω) and both sets are closed—the restriction θ ↾E : E → C(1) is a homeomorphism. By
Corollary 6.3 we conclude that θ is continuous. To see that it must be open too, we use Proposition 32
from [1], which holds for clone isomorphisms and is applicable here since G acts transitively on A
and θ ↾E is open.

From the previous lemma and Theorems 2.6 and 4.5 we obtain the result mentioned in the

introduction.

Corollary 6.6. hEnd (Q, <)i and hEnd (Q, ≤)i have automatic homeomorphicity.

References

[1] Manuel Bodirsky, Michael Pinsker, and Andr´as Pongr´acz, Reconstructing the topology of clones,

ArXiv: 1312.7699v2, January 2014.

[2] A.M.W. Glass, Ordered permutation groups, London Mathematical Society Lecture Notes in

Mathematics, Cambridge University Press 55, 1981.

[3] James Hyde, The restriction action of Aut(Inj(Q, ≤)) on Aut(Q, ≤) is faithful Personal Com-

munication.

15

[4] Christian Pech and Maja Pech, On automatic homeomorphicity for transformation monoids,

Monatshefte f¨ur Mathematik 179(1), 129–148, 2015.

[5] J.K. Truss, Inﬁnite permutation groups; subgroups of small index, Journal of Algebra 120(2),

494–515, 1989.

16

