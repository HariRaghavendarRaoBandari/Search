Extending Demand Response to Tenants in Cloud Data
Centers via Non-intrusive Workload Flexibility Pricing

Yong Zhan, Student Member, IEEE, Mahdi Ghamkhari, Student Member, IEEE, Du Xu, Member, IEEE,

Shaolei Ren, Member, IEEE, and Hamed Mohsenian-Rad, Senior Member, IEEE

1

6
1
0
2

 
r
a

 

M
8
1

 
 
]

C
D
.
s
c
[
 
 

1
v
6
4
7
5
0

.

3
0
6
1
:
v
i
X
r
a

Abstract—Participating in demand response programs is a
promising tool for reducing energy costs in data centers by
modulating energy consumption. Towards this end, data centers
can employ a rich set of resource management knobs, such as
workload shifting and dynamic server provisioning. Nonetheless,
these knobs may not be readily available in a cloud data center
(CDC) that serves cloud tenants/users, because workloads in
CDCs are managed by tenants themselves who are typically
charged based on a usage-based or ﬂat-rate pricing and often
have no incentive to cooperate with the CDC operator for
demand response and cost saving. Towards breaking such “split
incentive” hurdle, a few recent studies have tried market-based
mechanisms, such as dynamic pricing, inside CDCs. However,
such mechanisms often rely on complex designs that are hard
to implement and difﬁcult to cope with by tenants. To address
this limitation, we propose a novel incentive mechanism that is
not dynamic, i.e., it keeps pricing for cloud resources unchanged
for a long period. While it charges tenants based on a Usage-
based Pricing (UP) as used by today’s major cloud operators,
it rewards tenants proportionally based on the time length that
tenants set as deadlines for completing their workloads. This
new mechanism is called Usage-based Pricing with Monetary
Reward (UPMR). We demonstrate the effectiveness of UPMR
both analytically and empirically. We show that UPMR can
reduce the CDC operator’s energy cost by 12.9% while increasing
its proﬁt by 4.9%, compared to the state-of-the-art approaches
used by today’s CDC operators to charge their tenants.

Keywords—Demand response, monetary reward, split incen-

tive, cloud data center, time-shiftable load, demand delaying.

I. INTRODUCTION

To support the emergence of numerous cloud computing ser-
vices, power-hungry data centers have collectively consumed
38 GW electricity world-wide as of 2012 (an increase of 63%
compared to 2011), placing a surging pressure on operators
to optimize energy management [1]. Further, combined with
the growing electricity prices, energy cost has taken up nearly
15% of data center operator’s total cost of ownership [2].

Consequently, as driven by the increasing popularity of real-
time pricing [3] and peak pricing [4], data center demand re-
sponse, broadly interpreted as reshaping the energy consump-
tion of data centers, has been surfacing as a crucial approach
for saving energy cost [5]. Towards this end, several resource
management knobs, such as workload shifting/scheduling [6]–
[11] have been extensively leveraged to shift workloads to
time periods with lower electricity prices and/or shave peak
power demand to avoid high demand charges. These knobs,

Y. Zhan and D. Xu are with the Key Laboratory of Optical Fiber Sensing
and Communications, University of Electronic Science and Technology of
China, Chengdu, China. M. Ghamkhari, S. Ren, and H. Mohsenian-Rad
are with the Department of Electrical Engineering, University of California,
Riverside, CA, USA. This work was done when Y. Zhan was a Visiting
Student at the Smart Grid Research Lab, University of California at Riverside.

albeit appealing for energy cost saving, often result in some
performance losses. For instance, although delay-tolerant batch
workloads often do not have as stringent delay requirements
as interactive workload, shifting them to time periods with
low electricity prices for cost saving still results in longer
completion time and performance degradation.

While (enterprise) data centers serving internal workloads
may leverage various resource management knobs and trade
performance degradation for energy cost saving or vice versa,
public cloud data center (CDC) operators serving cloud tenants
cannot readily do so, because workloads are managed by
tenants while CDC operators must meet
the rigid service
level agreements (SLAs). Speciﬁcally, tenants in a CDC are
often charged based on their usages of CDC resources [12],
regardless of when they use the cloud resources. Thus, tenants
would simply submit their workloads whenever available and
complete them as soon as possible, even if their workload is
delay-tolerant and can be shifted to later times without much
inconvenience. On the other hand, due to the lack of control of
tenants’ workloads, CDC operators can only passively process
the submitted workloads in the order tenants submit them. As
a consequence, there exists a “split-incentive” hurdle in CDCs:
operators would like to defer some workloads to time periods
with lower electricity prices for energy cost saving, but do not
have control over tenants’ workloads to enforce their wish.

Towards breaking the “split incentive” hurdle, a few recent
studies [4], [9], [13]–[15] have begun to investigate market-
based mechanisms (e.g., dynamic pricing) that provide tenants
with monetary incentives to cooperate with CDC operators for
cost saving. These pricing mechanisms set prices for cloud
resources dynamically,
thereby encouraging tenants to use
cloud resources at times with lower electricity prices such that
the CDC operator can reduce its energy cost, too.

While many of the existing market-based mechanisms are
promising for reducing the CDC’s energy cost and/or lowering
tenants’ cloud costs, they often rely on complex designs, which
may be difﬁcult to implement in practice. For example, [4],
[13] attribute each tenant’s cost based on its contribution to
the overall energy bill, and this requires the CDC operator
reveals to tenants sufﬁcient information about its energy bill
and each tenant’s contribution. In addition, time-dependent
dynamic pricing, as often considered in these prior studies,
result in cost uncertainties/concerns for tenants, who, in order
to opportunistically launch their cloud resources for workload
processing, have to frequently adjust their scheduling decisions
based on real-time price information. This is particularly
unappealing for small/medium tenants who may see their costs
increased due to the lack of required expertise to properly
respond to dynamic pricing or other market mechanisms.

To address the aforementioned limitations of current pricing
approaches [4], [9], [13]–[15], we propose a new and practical
pricing policy, called Usage-based Pricing with Monetary
Reward (UPMR), which keeps pricing for cloud resources
unchanged for a long period yet still being able to exploit
tenants’ workload scheduling ﬂexibilities via rewards. Specif-
ically, while UPMR charges tenants based on a Usage-based
Pricing (UP) as used by today’s major cloud operators, it
rewards tenants proportionally based on the time length that
tenants set as deadlines for completing their workloads.

By using UPMR, tenants with no delay tolerance for their
workloads are not affected, whereas tenants who are willing to
defer their workloads for ﬁnancial compensation are given an
opportunity to reveal their workload scheduling ﬂexibilities,
i.e., by which time their workloads need to be completed.
Thus, on one hand, UPMR is non-intrusive to tenants, and par-
ticipating in UPMR is fully voluntary. On the other hand, the
CDC operator can exploit the scheduling ﬂexibilities provided
by motivated tenants and properly schedule these workloads
for energy cost saving subject to deadline constraints.

To derive UPMR, we will ﬁrst present a detailed model
for the interactions between tenants and the CDC operator,
and then formulate the operator’s (non-convex) problem of
energy cost minimization, which is decomposed into several
convex sub-problems. Using real-world workload traces, we
show that UPMR can effectively reduce the operator’s energy
cost by 12.9% and increase its proﬁt by 4.9%, compared to
state-of-the-art approaches used by today’s CDC operators.

II. RELATED WORK

Optimizing data center energy efﬁciency has attracted great
attention in the past years. For example, “power propor-
tionality” has been investigated in various contexts, such as
dynamically turning on/off servers for interactive workloads
[7], [16], [17], tuning processor speed for online data-intensive
services [18]. Other techniques include energy storage control
in concert with IT resource management [19]–[21], thermal-
aware load scheduling [22], geographic load balancing [23]–
[25], renewable generation proportionality [26], [27], among
others. More recently, there has been a growing interest in
data center demand response [28]. These studies, however, all
assume that data center operators have full control over the
workloads, but this assumption does not hold in CDCs where
workloads are managed by individual tenants.

To enable demand response within CDCs, various market-
based pricing schemes have been recently proposed to align
tenants’ interests with the operator’s, such that
these two
separate parties can cooperate towards a desired goal [4], [9],
[13]–[15]. More speciﬁcally, [4], [15] considered fair energy
cost attribution and split the cost among tenants based on their
individual contributions to the overall energy bill. Similarly,
in [13] the authors proposed to fairly share the energy bill
among tenants by incentivizing them to disclose their work-
load ﬂexibility to the CDC operator. In these studies, the
CDC operator needs to provide to tenants information about
electricity rates as well as the peak power demand, which
may be difﬁcult to implement. Further, tenants’ costs of using

2

cloud resources may become highly unpredictable under these
pricing policies, causing business concerns/inconveniences for
tenants’ budgeting. In [14], the authors proposed dynamic
pricing for cloud resources, propagating the total energy bill
onto tenants’ costs. In this case,
tenants are incentivized
to modulate their workloads based on the real-time price
information provided by the CDC operator and hence need to
periodically adjust their workload scheduling decisions. This
represents a signiﬁcant barrier, especially for small/medium
tenants who do not have the required expertise to do so.

In contrast, UPMR is a practical mechanism that is easy
to implement and uses monetary rewards to extract tenants’
workload scheduling ﬂexibilities, allowing the CDC operator
to manage these workloads accordingly for demand response
and energy cost saving. A key advantage of UPMR, as com-
pared to the existing solutions is that, tenants’ participation is
fully voluntary: only tenants who are interested in trading their
workload deferments for rewards need to provide scheduling
ﬂexibilities, while other uninterested tenants are not affected.

III. SYSTEM MODEL

In this section, we model both cloud tenants’ and the CDC

operator’s decisions, based on a time-slotted system.

A. Cloud Tenants

Tenants with different workloads/jobs naturally have differ-
ent sensitivities to postponing their workloads. For example,
batch workloads such as MapReduce-based tasks can often
tolerate a longer deferment without affecting tenants’ nor-
mal businesses, than user-interactive workloads such as web
search. Here, we classify tenants into I types, each one having
a different sensitivity with respect to workload latency. More
speciﬁcally, we use a revenue loss factor κi ∈ R+
0 to quantify
type-i tenants’ sensitivities to deferring their workloads: the
more sensitive to deferment, the larger κi. For tenants run-
ning interactive applications with no delay tolerance, we set
κi → ∞ and refer to these tenants as inelastic tenants. All
other types of tenants are referred to as elastic tenants for
whom deferring workloads is acceptable to a certain extent.
type-i elastic tenants’ (potential) revenue
losses are nondecreasing and convex in the maximum number
of time slots Di by which their workloads can be deferred.
In practice, tenants’ workloads are often processed prior to
the maximum deferment of Di time slots, and thus Di can
be viewed as the maximum delay tolerance for type-i elastic
tenants. For example, we consider the following formulation to
measure type-i elastic tenants’ revenue losses per Ψ requests1:

Suppose that

Li = κiDi.

(1)

We also use the following reward function to be offered to
type-i tenants per Ψ requests due to their workload ﬂexibility:

γi = ρ log(1 + Di),

(2)

1Our model also applies to any other revenue loss function, provided that

it is nondecreasing and convex over deferment parameter Di.

where the reward factor ρ is always non-negative and the
deferment threshold speciﬁed by tenants should satisfy

in which Dmax ∈ Z+

0 ≤ Di ≤ Dmax,
0 is a ﬁxed positive integer number.

(3)

Tenants’ Decisions: We assume that tenants are rational,
i.e., each tenant makes decision on its deferment threshold Di
for maximizing its net beneﬁt (reward minus revenue loss).
Thus, tenant’s optimization problem can be formulated as

maximize

Di

γi − Li,

s.t., constraint (3),

(4)

where the reward γi and revenue loss Li are given by (2)
and (1), respectively. Note that, although Di should be set as
an integer value due to time-slotted system model, we relax
it to be continuous to simplify the problem (4). Thus, the
optimization problem (4) is convex, whose solution is

Di = max

min

− 1, Dmax

, 0

.

(5)

(cid:18)

(cid:18) ρ

κi

(cid:19)

(cid:19)

B. CDC Operator

The CDC operator earns revenue by serving tenants’ work-
loads and incurs energy cost for workload processing. By using
UPMR, the CDC operator also has a cost of rewards paid to
incentivize workload deferment by elastic tenants.

Revenue: Without loss of generality, we assume that each
request of user will consume the same amount of CDC re-
sources, which includes CPU, memory, storage and bandwidth,
etc. Suppose δ ∈ (cid:60)+
0 per Dollar denotes the price of CDC
resources for processing Ψ requests. τ denotes the amount of
time slots over a billing cycle. We can formulate the revenue
that is earned by the CDC operator over a billing cycle as

Revenue = δ

λi[t]
Ψ

,

(6)

where λi[t] ∈ Z+
are generated by type-i tenants at time slot t.

0 denote the number of service requests that

Reward: We write the total rewards over a billing cycle as

τ(cid:88)

I(cid:88)

t=1

i=1

I(cid:88)

τ(cid:88)

i=1

t=1

Reward =

γi

λi[t]
Ψ

.

(7)

We assume that the CDC operator knows or can estimate2
tenants’ revenue loss factors κi. Thus,
the CDC operator
can calculate tenants’ responses to its offered reward rate
according to (5). By replacing Di in (2) with (5), we get

γi = ρ log

1 + max

min

− 1, Dmax

, 0

.

(8)

(cid:19)

(cid:19)(cid:19)

(cid:18)

(cid:18)

(cid:18) ρ

κi

Wear-and-Tear Cost: The CDC operator incurs a wear-
and-tear cost during operation, e.g., during server on/off and

3

battery charge/discharge cycles, which can be formulated as

τ(cid:88)

t=1

+ won

τ(cid:88)

t=1

Wear = ζ

max{−S[t], 0}

τ(cid:88)

t=1

(9)

mof [t],

mon[t] + wof

where ζ ∈ (cid:60)+
0 ($/KWh) measures the estimated battery wear-
and-tear cost, S[t] (KWh) denotes the energy consumption for
charging the storage system at time slot t, and S[t] < 0 means
that the storage system discharges energy to power up the CDC
as a supplement to grid power. As for parameters mon[t] and
mof [t], they denote the number of physical machines that are
turned on/off at time slot t, respectively. In addition, won ∈
(cid:60)+
0 ($) and wof ∈ (cid:60)+
0 ($) measure the wear-and-tear cost of
machine due to turning on/off machine, respectively.

Energy Cost: Typically, the CDC operator is charged for
electricity by the utility based on two parts: energy charge
and demand charge. Here, energy charge is calculated based
on the amount of energy consumption, while demand charge is
calculated according to the peak demand, e.g., measured over
each 15 minutes interval within a billing cycle [30]. Thus, the
CDC’s energy cost over a billing cycle can be calculated as

τ(cid:88)

J(cid:88)

Bill =

α[t]P [t] +

t=1

j=1

βj
T

max
t∈Aj

P [t],

(10)

where T denotes the length of each time slot (e.g., hour),
P [t] ∈ (cid:60)+
0 (KWh) denotes the energy usage at time slot t,
α[t] ∈ (cid:60) ($ per KWh) denotes the energy price at time slot
t, βj ∈ (cid:60)+
0 ($ per KW) denotes the price of type-j demand
charge,3 and Aj denotes the set of time slots falling into the
type-j demand charge window. The considered energy billing
model is quite general and includes Time-Dependent Pricing
(TDP) as a special case, where the CDC is charged only for
energy consumption based on time-dependent prices.

Energy consumption. The total energy usage of the CDC
can be calculated at each time slot by taking into consideration
the server energy consumption, non-IT energy (captured by
power usage effectiveness, i.e., the ratio of total data center
energy to IT energy), overheads due to turning machines on/off
and the storage capacity of CDC. Thus, we can write
∀t,

(11)
where Epue ∈ [1,∞) denotes power usage effectiveness,
Pm[t] ∈ (cid:60)+
0 (KW) denotes the power of active machines that
are being used, and Po[t] ∈ (cid:60)+
0 (KWh) is the energy overhead
for turning on/off machines at time slot t. As in [32], the power
of active machines is expressed as

P [t] = max (Epue(Pm[t]T + Po[t]) + S[t], 0) ,

Pm[t] = m[t] (Pidle + (Ppeak − Pidle)u[t]) ,

∀t,

(12)

where m[t] ∈ (cid:60)+
0 denotes the number of active machines,
u[t] ∈ [0, 1] denotes the average server utilization, Pidle ∈ (cid:60)+
(KW) and Ppeak ∈ [Pidle,∞) (KW) denote the energy usage
0

2In practice, the CDC operator can learn tenants’ loss factors from experi-

ments or historical data, using, e.g., calibration period of pilot trials [29].

3Utilities may impose multiple demand charges for different time intervals,

e.g., daytime/night or winter/summer demand charge [31].

(cid:80)I

t(cid:88)

(cid:48)
t

of a machine in idle and fully utilized conditions, respectively.
Next, we calculate the amount of active machines by

m[t] =

(mon[t

(cid:48)

] − mof [t

(cid:48)

]) + m[0],

∀t,

(13)

where m[0] ∈ Z+
time 0. We formulate the average server utilization as

=1
0 is the number of switched on machines at

u[t] =

ˆλi[t]

i=1
N m[t]

∀t,

,

(14)

where ˆλi[t] ∈ (cid:60)+
0 is the service requests of type-i tenants
scheduled at time slot t and N ∈ Z+
0 is the (average) number
of service requests that can be hosted by a machine in a time
slot. Here, the number of scheduled requests is modeled as

ˆλi[t] = λi[t] − φi[t] + ηi[t],

∀i, t,

(15)

where φi[t] and ηi[t] denote the deferred requests of type-i
tenants generated and scheduled at time slot t, respectively.

The power usage of turning machines on/off is modeled as

∀t,

(16)

Po[t] = oonmon[t] + oof mof [t],
0 (KWh) and oof ∈ (cid:60)+

where oon ∈ (cid:60)+
0 (KWh) denote the
energy consumption of turning on/off a machine, respectively.
Operational Constraints: Next, we list the constraints that

the CDC operator faces when it makes control decisions.

First, the reward factor and the number of machines that are

turned on/off at each time slot must be non-negative:

ρ ≥ 0,

mon[t] ≥ 0, mof [t] ≥ 0,

∀t.

(17)

(18)

Second, the number of active machines should be large

enough to process requests scheduled at each time slot:

t(cid:88)
(cid:48)
(cid:80)I
(mon[t
i=1(λi[t] − φi[t] + ηi[t])

] − mof [t

=1

t

(cid:48)

(cid:48)

N

]) + m[0] ≥

4

Fourth, φi[t] and ηi[t] satisfy

∀i, t,

0 ≤ φi[t] ≤ λi[t],

ηi[t] ≥ 0,

(22)
(23)
That is, the amount of deferred requests generated at time slot t
must be non-negative and no more than the amount of requests
newly generated at time slot t. Also, the amount of deferred
requests scheduled at time slot t must be non-negative.

∀i, t.

Fifth, considering that the amount of requests generated
from the beginning of a billing cycle up to any time slot must
be no less than the amount of requests that are scheduled
within these periods, we must also have

(cid:48)
(λi[t

] − φi[t

(cid:48)

(cid:48)

] + ηi[t

(cid:48)

],

λi[t

∀i, t,

(24)

]) ≤ t(cid:88)

(cid:48)
t

=1

t(cid:88)

(cid:48)

t

=1

which can be simpliﬁed to be as

(−φi[t

(cid:48)

] + ηi[t

(cid:48)

]) ≤ 0,

∀i, t.

(25)

t(cid:88)

(cid:48)

t

=1

t+(cid:98)Di(cid:99)(cid:88)
t+(cid:98)Di(cid:99)(cid:88)

=1

t

(cid:48)

Last but not least, to ensure that the requests of type-i
tenants generated from the beginning up to the time slot t
should be scheduled no later than time slot t + (cid:98)Di(cid:99), where
(cid:98)·(cid:99) represents a ﬂoor function, we have

(cid:48)
(λi[t

] − φi[t

(cid:48)

(cid:48)
] + ηi[t

(cid:48)

],

λi[t

∀i, t,

(26)

]) ≥ t(cid:88)

(cid:48)

t

=1

which can be simpliﬁed to be as

t+(cid:98)Di(cid:99)(cid:88)

(cid:48)

] +

λi[t

(−φi[t

(cid:48)

] + ηi[t

(cid:48)

]) ≥ 0,

∀i, t.

(27)

(cid:48)

t

=1

=t+1

(cid:48)
t
That is, the CDC cannot defer tenants’ requests beyond their
deferment thresholds. Note that, ∀t > τ, λi[t] = 0, φi[t] = 0
and ηi[t] ≥ 0, which indicates that the CDC may schedule
some of tenants’ requests at time slot in the next billing cycle
without violation of the thresholds speciﬁed by the tenants.

∀t,

,

(19)

IV. UPMR PRICING ALGORITHM: A PROFIT

MAXIMIZATION APPROACH

A. Problem Formulation

which ensures that the average utilization as shown in (14) is
always no greater than 1.

Third, if the CDC is equipped with an on-site energy storage
unit, then the energy storage unit’s charge and discharge rates
should be limited by the charger inverter’s ratings:

− loutT ≤ S[t] ≤ linT,
0 (KW) and lin ∈ (cid:60)+

∀t,
where lout ∈ (cid:60)+
0 (KW) denote the
energy storage unit’s maximum discharge and charge rates,
respectively. The amount of energy stored in the storage unit
should be non-negative and not exceed its storage capacity:

(20)

(cid:48)

] + S[0] ≤ Cs,

S[t

∀t,

(21)

0 ≤ t(cid:88)

(cid:48)

t

=1

where S[0] ∈ (cid:60)+
Cs ∈ (cid:60)+

0 (KWh) is the storage capacity.

0 (KWh) is the stored energy at time 0 and

We ﬁrst formulate the CDC operator’s proﬁt over a billing

cycle as its revenue minus its various expenses:

Proﬁt = Revenue − Reward − Wear − Bill,

(28)
where Revenue, Reward, Wear and Bill are deﬁned by (6)-
(16). In this paper, we assume that the CDC operator optimizes
its decisions at the beginning of each billing cycle with the
assumption that tenants demands can be perfectly predicted.
We leave online optimization under demand uncertainty as
future work. Here, we seek to solve the following problem:

Maximize

ρ,mon[t],mof [t],

S[t],φi[t],ηi[t]
Subject to

(28)

(17) − (23), (25), (27).

(29)

Problem (29) is not convex caused by the deﬁnition of the
reward rate (8) of objective function of (29) and constraint
(27) and hence difﬁcult to solve.

Algorithm 1 The Decomposition Method
Require:

5

r
Solution(r) (Optimal solution of problem (35) at loop r)

(Loop times)

1: r = 1.
2: Lb = 0.
3: while 1 do
4:
5:
6:

Calculate upper bound of ρ via (30)-(32).
Obtain a sub-domain of ρ as in (33).
Build the corresponding sub-optimization problem (35).

return maxr{Solution(r)}.

Solve problem (35).
Save Solution(r).
if Ub= ∞ then

7:
8:
9:
10:
11:
12:
13:
14: end while

end if
Lb=Ub.
r = r + 1.

B. Decomposition Method

Next, we propose a decomposition method to tackle the
difﬁculty in solving (29). Speciﬁcally, we decompose problem
(29) into several sub-problems, each corresponding to a sub-
domain of ρ. The details are presented in Algorithm 1.

We divide problem (29) iteratively as follow:
• Step 1: Initializing the lower bound of sub-domain of ρ,
• Step 2: From (5), calculate (cid:98)Di(cid:99) in constraint (27)

i.e., Lb, by letting Lb = 0 based on constraint (17).

corresponding to Lb, i.e., for each i, set
− 1, Dmax

DLb

max

min

i =

(cid:18)

(cid:18)Lb

κi

(cid:19)

(cid:19)(cid:23)

, 0

.

(30)

• Step 3: Setting the upper bound of sub-domain of ρ as

Ub =

mini∈ϑ{(DLb

If ϑ = ∅,
i + 2)κi}, Otherwise.

(31)

Here, the domain ϑ is deﬁned as

ϑ = {i ∈ {1,··· , I}|Lb < (Dmax + 1)κi}.

(32)
• Step 4: Obtaining a new sub-domain of ρ as deﬁned by

Lb ≤ ρ ≤ Ub − ,

(33)

(cid:22)
(cid:40)∞,

where  denotes a small positive number approaches 0.
Then, replacing (cid:98)Di(cid:99) in (27) by constant DLb
that can
be calculated by (30) and obtain a new afﬁne constraint

i

i(cid:88)

t+DLb

(cid:48)

t

=t+1

i(cid:88)

t+DLb

(cid:48)

t

=1

(cid:48)

] +

λi[t

(−φi[t

(cid:48)

(cid:48)
] + ηi[t

]) ≥ 0,

∀i, t.

(34)
Next, build the corresponding sub-optimization problem

Maximize

ρ,mon[t],mof [t],

S[t],φi[t],ηi[t]
Subject to

(28)

(18) − (23), (25), (30) − (34).

(35)

(a)

(b)

Fig. 1.
traces [33] b) energy price of Ameren [34].

Examples for data traces that we used in this paper: a) workload

TABLE I

SIMULATION CASES

Name
UP
UPS
UPMR
UPMRS

Pricing Policy

UP
UP

UPMR
UPMR

Demand Delaying

No
No
Yes
Yes

Storage Capability

No
Yes
No
Yes

• Step 5: Problem (35) is not convex. However, the opti-
mum value of optimization variable ρ in problem (35) is
ρ = Lb. It is straightforward to see that, substitution of
ρ = Lb in the deﬁnition of reward rate (8) of objective
function of problem (35) gives a convex program that can
be solved via convex tools such as CVX [33].
• Step 6: If Ub < ∞, update Lb by letting Lb=Ub and go
to Step 2 to traverse another sub-problem corresponding
to another sub-domain of ρ. If Ub = ∞, we have
traversed all sub-domain of ρ,
i.e., all possible sub-
optimization problems. Thus, we can ﬁnd the global
optimal solution of the original problem (29) among the
optimal solutions of these sub-optimization problems.

i

, ∀ρ ∈ [Lb, Ub − ], ∀i.

Theorem 1: (cid:98)Di(cid:99) = DLb
The proof of Theorem 1 is given in Appendix A. From
Theorem 1, in each loop in Algorithm 1, we can replace (cid:98)Di(cid:99)
and build an afﬁne constraint (34)
in constraint (27) by DLb
at step 4.

i

Theorem 2: The optimal value of optimization variable ρ

in problem (35) equals Lb.

The proof of Theorem 2 can be found in Appendix B. From
Theorem 2, we can substitute ρ in problem (35) by Lb and
build a convex program at step 5 in Algorithm 1.

A. Setup

V. CASE STUDY

We consider a CDC serving three types of tenants: type-1
tenants are delay-sensitive (i.e., inelastic) while type-2 and
type-3 tenants are elastic. The demands of delay-sensitive
users are based on Youtube U.S. trafﬁc from January 1, 2014
to January 31, 2014 [33]. The demands of type 2 and 3
users are constructed based on GMaps and GMail U.S. trafﬁc
from January 1, 2014 to January 31, 2014, respectively [33].
Figure 1(a) shows a snapshot of these workload traces that
are used in the simulation. Here, elastic workloads constitute
approximately 50% of the overall workloads.
Let the billing cycle be 30 days and T = 1 hour. Therefore,
τ = 30 × 24 = 720. Let Ψ = 10000, Dmax = 24, κ1 = ∞,

024NormalizedTraffic(/hour)GmailGmapsYoutube1st	Jan	2014	2nd	Jan	2014	3rd	Jan	2014	4th	Jan	2014	00.20.4Electricityprice($/KWh)TimeDependingPrice1st	Jan	2014	11st	Jan	2014	21st	Jan	2014	31st	Jan	2014	6

(a)

(b)

(c)

Fig. 2. Comparison among UP, UPS, UPMR and UPMRS under peak pricing: a) Normalized proﬁt gain and energy bill of CDC, b) Energy usage of UP
and UPMR, c) Energy usage of UPS and UPMRS.

(a)

(b)

(c)

Fig. 3. Comparison among UP, UPS, UPMR and UPMRS under TDP: a) Normalized proﬁt gain and energy bill of CDC, b) Energy usage of UP and UPMR,
c) Energy usage of UPS and UPMRS.

κ2 = 0.1 and κ3 = 0.11. Let N = 20, Epue = 1.2, Pidle =
0.1 KW, Ppeak = 0.2 KW, oon = 0.02 KWh and oof = 0.01
KWh. Let m[0] = 0 and S[0] = 0 KWh. Let won = $0.003
and wof = $0.002 as in [35].

In addition, we set the CDC’s energy storage capacity Cs,
such that it can power up CDC entirely at its peak power
consumption up to 30 minutes. Both charge and discharge rates
are set to be Cs KW. Let ζ = $0.32 per KWh, corresponding
to a 1Ah lead-acid battery at 12V as mentioned in [36], which
costs 2$ and can stand 1300 recharge cycles at 40% of depth of
discharge. In this paper, we evaluate UPMR under four cases,
which are illustrated in Table I.

B. Under Peak Pricing

We now evaluate UPMR under a peak pricing scheme. In
particular, the CDC’s energy cost includes both energy charge
and demand charge, where α[t] = $0.05207 per KWh and
βj = $15.59 per KW based on electric rates of industrial
power service offered by South Carolina Electric and Gas [37].
Figure 2(a) shows the CDC operator’s normalized proﬁt gain
and energy cost with respect to the maximum proﬁt gain and
energy bill among the four cases, respectively. By utilizing
energy storage, the proﬁt gain can be enhanced by 1.1%, while
the energy bill can be reduced by 2.5% when comparing with
UP. Further, by employing UPMR without utilizing the energy
storage system, the proﬁt gain can be increased by 4.9% and
the energy bill can be reduced by 12.9% when comparing
with UP. Thus, UPMR can improve CDC’s proﬁt gain and
reduce the energy bill more signiﬁcantly when energy storage
is not utilized than when it is. Additionally, UPMR can obtain
nearly the same proﬁt gain and energy reduction as UPMRS,
indicating that CDCs employing UPMR do not need to utilize
energy storage for power management.

Figure 2(b) and 2(c) show the detail of normalized energy
usage of UP, UPS, UPMR and UPMRS, with respect to the
maximum energy usage. We see that UPMR can effectively
smooth the CDC’s energy consumption. By comparing UPMR
and UPMRS, we see that utilizing energy storage can also
further but slightly smooth CDC’s energy consumption.

C. Under Time-Dependent Pricing

We now turn to the evaluation of UPMR under TDP.
Speciﬁcally, we consider that the CDC is charged through TDP
based on energy consumption, where the prices are represented
by the prices of Ameren real time price from January 1, 2014
to January 31, 2014 [34] as shown in Figure 1(b).

Figure 3 compares the results for UP, UPS, UPMR and
UPMRS under proﬁt maximization and TDP. We see that,
under TDP, the CDC can obtain less proﬁt gain improvement
than the one under electricity rates of peak pricing via demand
response. Speciﬁcally, CDC has less incentive to perform
demand response under TDP. Utilizing the energy storage
usually cannot greatly improve the CDC’s proﬁt or reduce
its energy bill. The reason is that, in most cases, the wear-
and-tear cost of battery is higher than the extra proﬁt that can
be gained from charging/discharging the energy storage under
TDP. Also, under TDP, the CDC can still effectively increase
CDC’s proﬁt while reducing its energy bill via UPMR.

VI. CONCLUSION

We proposed a simple yet effective pricing policy, called
UPMR, which, on top of the commonly-applied usage-based
pricing policy, includes a reward component offered to ten-
ants to allow a CDC operator to defer their workloads. For
maximizing the CDC operator’s proﬁt through UPMR, we

0.9510.9610.9981.0001.0000.9750.8710.8660.80.91UPUPSUPMRUPMRSNormalized	  ResultProfitEnergy	  Bill00.20.40.60.810240480720Normalized	  Usage	  Time	  SlotUPUPMR00.20.40.60.810240480720Normalized	  UsageTime	  SlotUPSUPMRS0.9940.9951.0001.0001.0000.9920.9520.9440.940.960.981UPUPSUPMRUPMRSNormalized	  ResultProfitEnergy	  Bill00.20.40.60.810240480720Normalized	  Usage	  Time	  SlotUPUPMR00.20.40.60.810240480720Normalized	  UsageTime	  SlotUPSUPMRSpresented an effective and low-complexity decomposition-
based algorithm to optimize the reward rate. With real-world
workload traces, we evaluated UPMR in terms of maximizing
the CDC’s proﬁt and reducing its energy cost, against UP (a
commonly-used pricing policy in today’s CDCs). Our results
showed that UPMR can obtain 4.9% more proﬁt gain and
12.9% more energy bill reduction without utilizing the energy
storage system.

APPENDIX A

PROOF OF THEOREM 1

Considering that (cid:98)Di(cid:99) is nondecreasing over ρ, Theorem 1

holds if and only if

(cid:98)Di(cid:99)|ρ=Ub− = DLb

(36)
We separately prove (36) when Lb ≥ maxi{(Dmax +
1)κi} and Lb < maxi{(Dmax + 1)κi}. Firstly, if Lb ≥
maxi{(Dmax + 1)κi}, then from (31), we have

∀i.

,

i

Ub = ∞.

Next, from (30), we get

DLb

i = Dmax,

∀i.

From (5) and (37), we get

(37)

(38)

(cid:98)Di(cid:99)|ρ=Ub− = Dmax,

∀i.

(39)
(36) holds when Lb ≥

from (38) and (39),

Thus,
maxi{(Dmax + 1)κi}.
When Lb < maxi{(Dmax + 1)κi}, we have
i + 2)κi}.

{(DLb

Ub = min
i∈ϑ

(40)

In this case, we prove the correctness of (36) by four steps:
Step 1: For all i ∈ ϑ, from (40), we have

(41)

i + 2)κi,

∀i ∈ ϑ.

Ub ≤ (DLb
Bring (41) into (5), we have

From (30), we ensure that DLb

(cid:1) , 0(cid:1)(cid:5) .
(cid:98)Di(cid:99)|ρ=Ub− ≤(cid:4)max(cid:0)min(cid:0)DLb
(cid:1) ≥ 0. Combine it with (42), we get
min(cid:0)DLb
(cid:98)Di(cid:99)|ρ=Ub− ≤(cid:4)min(cid:0)DLb
i + 1 − (cid:5) .
≤(cid:4)DLb
(cid:4)DLb
i + 1 − (cid:5) = DLb

i + 1 − , Dmax
(cid:1)(cid:5)

Next, from (30), we ensure that DLb

. Combine it with (43), we ensure

i + 1 − , Dmax

(42)
In this case,

i + 1 − , Dmax

is integer. In this case,

≥ 0.

(43)

i

i

i

(cid:98)Di(cid:99)|ρ=Ub− ≤ DLb

i

,

∀i ∈ ϑ.

(44)

Step 2: For all i /∈ ϑ, from (30) and (32), we have DLb
i =
Dmax, ∀i /∈ ϑ. From (5), we have (cid:98)Di(cid:99)|ρ=Ub− ≤ Dmax, ∀i.
Therefore,

(cid:98)Di(cid:99)|ρ=Ub− ≤ DLb
i
Combine (44) and (45), we ensure

,

∀i /∈ ϑ.

(cid:98)Di(cid:99)|ρ=Ub− ≤ DLb

i

,

∀i.

(45)

(46)

Step 3: Let

(cid:48)
i

= arg min
i∈ϑ

{(DLb

i + 2)κi}.

From (40), we have

Ub = (DLb

(cid:48) + 2)κi
i

(cid:48) .

7

(47)

(48)

(cid:48) ∈ ϑ, from (32), we have Lb ∈ [0, (Dmax + 1)κi

(cid:48) ).
(cid:48) = 0. Combine it with (48),

(cid:48) ), from (30), DLb

i

Since i
If Lb ∈ [0, 2κi
we have

Ub = 2κi

(cid:48) > Lb.

If Lb ∈ [2κi
Combine it with (48), we have

(cid:48) , (Dmax + 1)κi

(cid:48) ), from (30), DLb

(49)
(cid:48) − 1(cid:99).

(cid:48) = (cid:98) Lb

κ
i

i

(cid:19)
(cid:19)

+ 2

(cid:48)

κi

(cid:18)(cid:22) Lb
(cid:18)(cid:18) Lb

(cid:48)
κi

(cid:48)
κi

(cid:23)
(cid:19)

− 1

− 1

Ub =

>

+ 1

(cid:48)

κi

(50)

> Lb.

Combining (49) and (50), we ensure that Ub > Lb. Meanwhile,
since (cid:98)Di(cid:99) is nondecreasing over ρ, we have
∀i.

(51)
Step 4: From (46) and (51), (36) always holds when Lb <
maxi{(Dmax + 1)κi}, too.

(cid:98)Di(cid:99)|ρ=Ub− ≥ DLb

,

i

APPENDIX B

PROOF OF THEOREM 2

We notice that, the only part of the objective function of
problem (35) that involves ρ is the deﬁnition of the reward rate
(8). Meanwhile, (8) involves no variable other than ρ. Also,
the only constraint of problem (35) that involves ρ is (33),
which involves no other constraint except ρ. Therefore, the
problem (35) can be decomposed in two separate optimization
problems, among which the ﬁrst one is to minimize the Reward
term deﬁned by (7) and (8), subject to the constraints (30)-
(33). The optimal value of ρ, in this decomposed optimization
problem is ρ = Lb, since the Reward term deﬁned by (7) and
(8) is a non-decreasing function of ρ.

REFERENCES

[1] A. Venkatraman, “Global census shows datacentre power demand grew

63% in 2012,” Computer Weekly, Oct 2012.

[2] A. Greenberg, J. Hamilton, D. A. Maltz, and P. Patel, “The cost of a
cloud: Research problems in data center networks,” SIGCOMM Comput.
Commun. Rev., vol. 39, pp. 68–73, Jan 2009.

[3] A.-H. Mohsenian-Rad, V. Wong, J. Jatskevich, R. Schober, and
A. Leon-Garcia, “Autonomous demand-side management based on
game-theoretic energy consumption scheduling for the future smart
grid,” IEEE Trans. on Smart Grid, vol. 1, pp. 320–331, Dec 2010.

[4] C. Wang, B. Urgaonkar, G. Kesidis, U. V. Shanbhag, and Q. Wang, “A
case for virtualizing the electric utility in cloud data centers,” in Proc.
of USENIX HotCloud, Philadelphia, PA, Jun 2014.

[5] A. Wierman, Z. Liu, I. Liu, and H. Mohsenian-Rad, “Opportunities and
challenges for data center demand response,” in Proc. of IEEE IGSC,
Dallas, TX, Nov 2014.

[6] Z. Liu, A. Wierman, Y. Chen, B. Razon, and N. Chen, “Data center
demand response: Avoiding the coincident peak via workload shifting
and local generation,” Performance Evaluation, vol. 70, pp. 770–791,
Oct 2013.

[7] M. Lin, A. Wierman, L. Andrew, and E. Thereska, “Dynamic right-
sizing for power-proportional data centers,” in Proc. of IEEE INFOCOM,
Shanghai, China, Apr 2011.

8

[32] J. Li, Z. Bao, and Z. Li, “Modeling demand response capability by
internet data centers processing batch computing jobs,” IEEE Trans. on
Smart Grid, vol. 6, pp. 737–747, Mar 2015.

[33] “Browse real-time trafﬁc to google products and services.” http://www.

google.com/transparencyreport/trafﬁc/explorer.

[34] “Real time prices - ameren.” https://www2.ameren.com/RetailEnergy/

RealTimePrices.

[35] H. Qian and D. Medhi, “Server operational cost optimization for cloud
computing service providers over a time horizon,” in Proc. of USENIX
Hot-ICE, Boston, MA, Mar 2011.

[36] V. Kontorinis, J. Sampson, L. E. Zhang, B. Aksanli, H. Homayoun, T. S.
Rosing, and D. M. Tullsen, “Battery provisioning and associated costs
for data center power capping,” tech. rep., UCSD, 2012.

[37] “SCE&G electric

rates.”

https://www.sceg.com/for-my-business/

manage-my-service/rates.

[8] K. Le, J. Zhang, J. Meng, R. Bianchini, Y. Jaluria, and T. Nguyen,
“Reducing electricity cost through virtual machine placement in high
performance computing clouds,” in Proc. of IEEE SC, Seatle, WA, Nov
2011.

[9] C. Wang, B. Urgaonkar, Q. Wang, and G. Kesidis, “A hierarchical
demand response framework for data center power cost optimization
under real-world electricity pricing,” in Proc. of IEEE MASCOTS, Paris,
France, Sep 2014.

[10] S. Ren, Y. He, and F. Xu, “Provably-efﬁcient job scheduling for energy
and fairness in geographically distributed data centers,” in Proc. of IEEE
ICDCS, Macau, China, Jun 2012.

[11] H. Xu and B. Li, “Reducing electricity demand charge for data centers
with partial execution,” in Proc. of ACM e-Energy, Cambridge, UK, Jun
2014.

[12] A. Li, X. Yang, S. Kandula, and M. Zhang, “Cloudcmp: comparing
public cloud providers,” in Proc. of ACM IMC, Melbourne, Australia,
Nov 2010.

[13] V. Ishakian, R. Sweha, A. Bestavros, and J. Appavoo, “Cloudpack*
exploiting workload ﬂexibility through rational pricing,” in Proc. of
Springer Middleware, Montreal, Canada, Dec 2012.

[14] Y. Zhan, M. Ghamkhari, D. Xu, and H. Mohsenian-Rad, “Propagating
electricity bill onto cloud tenants: Using a novel pricing mechanism.”
in Proc. of IEEE GLOBECOM, San Diego, CA, Dec 2015.

[15] N. Nasiriani, C. Wang, G. Kesidis, B. Urgaonkar, L. Y. Chen, and
R. Birke, “On fair attribution of costs under peak-based pricing to cloud
tenants,” in Proc. of IEEE MASCOTS, Atlanta, GA, Sep 2015.

[16] B. Guenter, N. Jain, and C. Williams, “Managing cost, performance,
and reliability tradeoffs for energy-aware server provisioning,” in Proc.
of IEEE INFOCOM, Shanghai, China, Apr 2011.

[17] A. Gandhi, M. Harchol-Balter, R. Raghunathan, and M. A. Kozuch,
“Autoscale: Dynamic, robust capacity management for multi-tier data
centers,” ACM Trans. on Computer Systems, vol. 30, pp. 1–26, Nov
2012.

[18] D. Meisner, C. M. Sadler, L. A. Barroso, W.-D. Weber, and T. F.
Wenisch, “Power management of online data-intensive services,” in
Proc. of ACM ISCA, San Jose, CA, Jun 2011.

[19] S. Govindan, D. Wang, A. Sivasubramaniam, and B. Urgaonkar, “Lever-
aging stored energy for handling power emergencies in aggressively
provisioned datacenters,” in Proc. of ACM ASPLOS XVII, London, UK,
Mar 2012.

[20] R. Urgaonkar, B. Urgaonkar, M. J. Neely, and A. Sivasubramaniam,
“Optimal power cost management using stored energy in data centers,”
in Proc. of ACM SIGMETRICS, San Jose, CA, Jun 2011.

[21] D. Wang, C. Ren, A. Sivasubramaniam, B. Urgaonkar, and H. Fathy,
“Energy storage in datacenters: what, where, and how much?,” in Proc.
of ACM SIGMETRICS, London, UK, Jun 2012.

[22] Q. Tang, S. Gupta, and G. Varsamopoulos, “Thermal-aware task schedul-
ing for data centers through minimizing heat recirculation,” in Proc. of
IEEE CLUSTER, Austin, TX, Sep 2007.

[23] H. Mohsenian-Rad and A. Leon-Garcia, “Energy-information transmis-
sion tradeoff in green cloud computing,” in Proc. of IEEE GLOBECOM,
Miami, FL, Dec 2010.

[24] Z. Liu, M. Lin, A. Wierman, S. Low, and L. Andrew, “Greening
geographical load balancing,” IEEE/ACM Trans. on Networking, vol. 23,
pp. 657–671, Apr 2015.

[25] L. Rao, X. Liu, L. Xie, and W. Liu, “Minimizing electricity cost:
Optimization of distributed internet data centers in a multi-electricity-
market environment,” in Proc. of IEEE INFOCOM, San Diego, CA, Mar
2010.

[26] M. Ghamkhari and H. Mohsenian-Rad, “Energy and performance man-
agement of green data centers: A proﬁt maximization approach,” IEEE
Trans. on Smart Grid, vol. 4, pp. 1017–1025, Jun 2013.

[27] M. Ghamkhari and H. Mohsenian-Rad, “Optimal integration of renew-
able energy resources in data centers with behind-the-meter renewable
generators,” in Proc. of IEEE ICC, Ottawa, Canada, June 2012.

[28] Y. Li, D. Chiu, C. Liu, L. Phan, T. Gill, S. Aggarwal, Z. Zhang, B. T.
Loo, D. Maier, and B. McManus, “Towards dynamic pricing-based
collaborative optimizations for green data centers,” in Proc. of IEEE
ICDEW, Brisbane, QLD, Apr 2013.

[29] S. Ha, S. Sen, C. Joe-Wong, Y. Im, and M. Chiang, “Tube: time-
dependent pricing for mobile data,” in Proc. of ACM SIGCOMM,
Helsinki, Finland, Aug 2012.

[30] A. Oudalov, R. Cherkaoui, and A. Beguin, “Sizing and optimal operation
of battery energy storage system for peak shaving application,” in Proc.
of IEEE Powertech, Lausanne, Switzerland, Jul 2007.

[31] http://www.pge.com/.

