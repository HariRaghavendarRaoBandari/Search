6
1
0
2

 
r
a

M
7

 

Analysis of a Double Kruskal Theorem

Timothy Carlson

The Ohio State University, Columbus, OH 43210 USA

email: carlson@math.ohio-state.edu

 
 
]

.

O
L
h
t
a
m

[
 
 

1
v
0
0
9
1
0

.

3
0
6
1
:
v
i
X
r
a

Abstract. The strength of an extension of Kruskal’s Theorem [4] to certain pairs
of cohabitating trees is calibrated showing that it is independent of the theory
Π1

1 − CA0 or, equivalently, KPℓ0.

This paper is a sequel to Carlson [2] where we considered whether families
of cohabitating trees are wqo under inf preserving embeddings. We found
that when considering families of three trees, the natural candidates are not
wqo. A result of Laver [5] places strong restrictions on families of pairs
of cohabitating trees which are wqo by showing that the family of pairs of
cohabitating linear orderings is not wqo.

The following concepts arise naturally in the author’s work in proof

theory.

A structure

is a double forest if

(X, ≤1, ≤2)

• Both (X, ≤1) and (X, ≤2) are ﬁnite forests (i.e. ﬁnite partial orderings

in which the set of predecessors of any element is linearly ordered).

• For all a, b ∈ X,

• For all a, b, c ∈ X,

a≤2b =⇒ a≤1b

a≤1b≤1c and a≤2c =⇒ a≤2b

The height of a nonempty double forest (X, ≤1, ≤2) is the height of the
forest (X, ≤2) i.e. the natural number n such that the size of the longest

1

chain is n + 1. If we strengthen the ﬁrst condition in the deﬁnition of double
forest by requiring that (X, ≤1) and (X, ≤2) are trees (i.e.
forests with a
minimum element, called the root), then we call (X, ≤1, ≤2) a double tree.
Assume that (Q, (cid:22) ) is a quasiordering i.e. reﬂexive and transitive. Re-
call that (Q, (cid:22) ) is a well quasiordering if (Q, (cid:22) ) has no bad sequences
(where an inﬁnite sequence q0, q1, . . . , qn, . . . is bad iﬀ it is not the case that
there are i < j such that qi (cid:22) qj).

The two theorems below follow from the stronger results from Carlson
[2] where the collection of double trees is replaced by the collection of pure
patterns of order 2.

Theorem. Assume n is a natural number. The collection of double trees
of height at most n is wqo under inf preserving embeddings.

While the full collection of double trees is not wqo under embeddings,

they are wqo under a weaker notion.
1, ≤∗
into X ∗ is a covering if for i = 1, 2

Let (X, ≤1, ≤2) and (X ∗, ≤∗

2) be double forests. An injection h of X

a ≤i b =⇒ h(a) ≤∗

i h(b)

for all a, b ∈ X.

Double Kruskal Theorem. The collection of ﬁnite double trees is wqo
under coverings.

We will consider the strength of several variants of the theorems above.
In particular, our investigation will show that the Double Kruskal Theorem
is equivalent over ACA0 to the uniform Π1
1 −CA0
and is independent over Π1
1 − CA0 (or, equivalently, KPℓ0). Our approach
is similar to that taken in Simpson [1]. In particular, we will make use of a
system of ordinal notations due to W. Buchholz.

1 reﬂection principle for Π1

While we will reference the formal theories RCA0, WKL0, ACA0, IDn,
Π1
1 − CA0 and KPℓ0 along with various notions from proof theory, the ﬁrst
three sections which include the key results, Theorem 3.9 and Corollary 3.12,
can be read without any specialized knowledge. For the applications in the
last two sections, we assume enough familiarity with RCA0 to recognize
that the proofs in earlier sections can be carried out in RCA0 and that,
except where stated otherwise, the arguments in the last two sections can
also be carried out in RCA0. Each case were we go beyond RCA0, a result
from the literature will be referenced. The reader will only need to know

2

that the theories RCA0, WKL0, ACA0 and Π1
1 − CA0 are successively
increasing in strength and that IDn implies the ﬁrst order part of ACA0.
Simpson [9] is our reference for RCA0.

1 Buchholz Notations

In [1], Buchholz deﬁnes the ψ-functions and appeals to them to deﬁne a
system of ordinal notations. We will review those notations in this section.
Fix a sequence D0, D1, . . . , Dn, . . . , Dω of formal symbols. We will also

treat 0 as a formal symbol in the following deﬁnition.

Deﬁnition 1.1 Deﬁne a set T of formal terms and a subset P of T induc-
tively by the following clauses.

(T1) 0 ∈ T .

(T2) If a0, . . . , an ∈ P where n ≥ 1 then (a0, . . . , an) ∈ T .

(T3) If u ≤ ω and a ∈ T then Dua ∈ P (and, hence, Dua ∈ T ).

The elements of P are called principal terms. The order of a principal
term Dua is u. For a = (a0, . . . , an) ∈ T with 1 ≤ n, deﬁne the order of a
to be the order of a0. Also deﬁne the order of 0 to be 0. For a ∈ T , write
ord(a) for the order of a.

The parentheses and commas are to be treated as formal symbols in the
deﬁnition of T and P though we will also use (a0, . . . , an) to represent the
sequence with components a0, . . . , an at times.

In [1], the elements of T are interpreted as ordinals using the ψ-functions.
We will not need this interpretation here, but we mention that the symbol 0
represents the ordinal 0, (a0, . . . , an) represents the ordinal which is the sum
of the ordinals represented by the ai and Dua represents the application of
ψu to the ordinal represented by a.

Notice that by focusing on the subscripts of the symbols Du which occur
in an element a of T , a can be seen as a ﬁnite planar forest whose nodes
are tagged by ordinals u with u ≤ ω (0 can be seen as the empty forest).
The following ordering on T can then be seen as the natural generalization
of the lexicographic ordering on sequences of ordinals bounded by ω.

Deﬁnition 1.2 The binary relation ≺ on T is deﬁned inductively by the
following clauses:

3

(≺1) For b ∈ T , 0 ≺ b iﬀ b 6= 0.

(≺2) For a, b ∈ T and u, v ≤ ω, Dua ≺ Dvb iﬀ either u < v or both u = v

and a ≺ b.

(≺3) Assume a, b ∈ T .

(a) If a ∈ P and b = (b0, . . . , bn) where 1 ≤ n then a ≺ b iﬀ a (cid:22) b0

(i.e. a ≺ b0 or a = b0).

(b) If a = (a0, . . . , am) where 1 ≤ m and b ∈ P then a ≺ b iﬀ a0 ≺ b.
(c) If a = (a0, . . . , am) and b = (b0, . . . , bn) where 1 ≤ m, n then

a ≺ b iﬀ one of the following holds

(i) m < n and ai = bi for i ≤ m.
(ii) There exists i ≤ n, m such that aj = bj for j < n and ai ≺ bi.

We will sometimes identify elements of T with sequences of elements of

P as follows:

• 0 is identiﬁed with the empty sequence ().

• For u ≤ ω and a ∈ T , Dua is identiﬁed with the sequence (Dua).

• For 1 ≤ n < ω and a0, · · · , an ∈ P , the formal term (a0, . . . , an) is

identiﬁed with the sequence (a0, . . . , an).

Under this identiﬁcation, the ordering on T agrees with the lexicographic
ordering derived from the ordering above restricted to P .

The relation ≺ is easily seen to be a strict linear ordering of T . Moreover,

if a, b ∈ T and ord(a) < ord(b) then a ≺ b.

The interpretation of elements of T as ordinals mentioned above is not
an injection. Therefore, ≺ is not the ordering inherited from the ordinals.
In fact, one easily sees that ≺ is not a well-ordering. These facts will not be
used later.

We will restrict ≺ to a subset OT of T below.

Deﬁnition 1.3 For u ≤ ω, Gua is deﬁned for a ∈ T inductively so that

(G1) Gu0 = ∅.

(G2) If n ≥ 1 and a0, . . . , an ∈ P then

Gu(a0, . . . , an) = Gua0 ∪ · · · ∪ Guan

4

(G3) If v ≤ ω and a ∈ T then

GuDva = (∅

if v < u,
{a} ∪ Gua if u ≤ v.

Deﬁnition 1.4 The set OT of ordinal terms is deﬁned inductively by

(OT1) 0 ∈ OT .

(OT2) If n ≥ 1, a0, . . . , an ∈ OT are principal terms and an (cid:22) · · · (cid:22) a0 then

(a0, . . . , an) ∈ OT .

(OT3) If u ≤ ω and a ∈ OT with Gua ≺ a then Dua ∈ OT .

For u ≤ ω, OT (u) is the collection of ordinal terms a such that v < u
whenever Dv occurs in a.

Clearly, if a ∈ OT and u ≤ ω then Gua ⊆ OT .
Notice that if (a0, . . . , an) ∈ OT then ord(a0) ≥ · · · ≥ ord(an).

2 Monotone Double Forests and Collapsing

In this section, we consider double forests whose nodes are tagged by natural
numbers so as to descend along ≤1. We will also deﬁne a preliminary ver-
sion of collapsing functions, analogues of the ψ-functions, on certain ﬁnite
sequences of such tagged double forests.

Deﬁnition 2.1 A monotone double forest is a pair (P, δ) where P is a
double forest and δ maps |P|, the underlying set for P, into ω such that

and

x ≤P

1 y =⇒ δ(x) ≥ δ(y)

x ≤P

2 y =⇒ δ(x) = δ(y)

Deﬁne M 2F to be the collection of monotone double forests. Let M 2T be
the collection of elements (P, δ) of M 2F such that (|P|, ≤P
1 ) is a tree. For
x ∈ |P|, the order of x in (P, δ) is δ(x). For (P, δ) ∈ M 2T , the root of
(P, δ) is the minimal element of ≤P
1 and the order of (P, δ), ord((P, δ)), is
the order of the root.

5

Notice that any chain in ≤P

2 must consist of elements all of which have

the same order.

We deﬁne notions like embedding and isomorphism between elements of

M 2F as usual.

When T = (P, δ) ∈ M 2F , we will often write |T|, ≤T

1 , ≤T

2 and δT for

|P|, ≤P

1 , ≤P

2 and δ respectively.

Deﬁnition 2.2 Assume Ti = (Pi, δi) ∈ M 2F for i = 1, 2. We deﬁne a
function h from |T1| into |T2| to be a covering of T1 into T2 if h is a
covering of P1 into P2 and

δ1(x) ≤ δ2(h(x))

for all x ∈ |T1|. We deﬁne T1 (cid:22) c T2 if there is a covering of T1 into T2.

Notice that when T = (P, δ) ∈ M 2T has order 0, δ must be identically
0 and we can identify T with P. In this way, the collection of elements of
M 2T of order 0 is identiﬁed with the collection of double forests P where
≤P
1 is a tree. Moreover, our two notions of covering coincide under this
identiﬁcation.

We will eventually deﬁne an element T(a) of M 2T for each principal
a ∈ OT (ω). For this, we will want to deﬁne collapsing operations which
interpret the symbols Du for u < ω. The ﬁrst step of this deﬁnition is to
deﬁne a basic collapsing operation which adds a new root below a sequence
of elements of M 2T of the same positive order and reduces the order by 1.

Deﬁnition 2.3 Assume u ∈ ω and T1, . . . , Tn ∈ M 2T have order u + 1.
If T1, . . . , Tn are pairwise disjoint, deﬁne coll(T1, . . . , Tn) to be a structure
((X, ≤1, ≤2), δ) which satisﬁes the following conditions.

1. X = |T1| ∪ · · · ∪ |Tn| ∪ {r} where r 6∈ |T1| ∪ · · · ∪ |Tn|.

2. Assume 1 ≤ i ≤ n and x ∈ |Ti|. For k = 1, 2 and all y ∈ X, x ≤k y

iﬀ x ≤Ti

k y.

3. For all y ∈ X, r≤1y.

4. For all y ∈ X, r ≤2 y iﬀ either y = r or there exists i such that

1 ≤ i ≤ n, y ∈ |Ti| and δTi (y) = u + 1.

5. For all i with 1 ≤ i ≤ n and all x ∈ |Ti|, δ(x) = min{δTi (x), u}.

6. δ(r) = u.

6

If T1, . . . , Tn are not pairwise disjoint, deﬁne

coll(T1, . . . , Tn) = coll(S1, . . . , Sn)

where S1, . . . , Sn are chosen to be pairwise disjoint, Si
and S1 = T1.

∼= Ti for i = 1, . . . , n

Since we will mainly be concerned with elements of M 2F up to isomor-
phism, the choice of r and the choice of S1, . . . , Sn in the above deﬁnition
are not important. The condition S1 = T1 is a technical convenience.
It
could be dropped without changing the isomorphism type of the resulting
structure.

Deﬁnition 2.4 For T ∈ M 2F and x ∈ |T|, deﬁne Tx to be the substructure
of T whose universe is the collection of y ∈ |T| such that x ≤T

1 y.

Lemma 2.5 Assume u < ω and T1, . . . , Tm ∈ M 2T are pairwise disjoint
and have order u + 1.

1. coll(T1, . . . , Tn) is an element of M 2T of order u.

2. Assume 1 ≤ i ≤ m. If coll(T1, . . . , Tn) = (P, δ) and Ti = (Pi, δi) then

Pi is a substructure of P.

3. If 1 ≤ i ≤ m and x ∈ |Ti| has order at most u in Ti then

coll(T1, . . . , Tm)x = Tx
i

Proof. Straightforward noticing that if T ∈ M 2T has order u + 1 then
δT(x) ≤ u + 1 for all x ∈ |T| and the collection of x with δT(x) = u + 1 is
closed downward in ≤T
QED
1 .

Deﬁnition 2.6 Assume T1, . . . , Tm ∈ M 2F are pairwise disjoint. Deﬁne
⊕(T1, . . . , Tm) to be the usual disjoint union ((X, ≤1, ≤2), δ) described by
the following conditions.

1. X = |T1| ∪ · · · ∪ |Tm|

2. ≤1 =≤T1

3. ≤2 =≤T1

1 ∪ · · · ∪ ≤Tm
2 ∪ · · · ∪ ≤Tm

1

2

4. δ = δT1 ∪ · · · ∪ δTm

7

Lemma 2.7 If T1, . . . , Tm ∈ M 2F are pairwise disjoint then ⊕(T1, . . . , Tm) ∈
M 2F .

Proof. Clear.

QED

Lemma 2.8 Assume u < ω, T1, . . . , Tm, S1, . . . , Sn ∈ M 2T have order u +
1 and both sequences T1, . . . , Tm and S1, . . . , Sn are pairwise disjoint.
If
coll(T1, . . . , Tm) (cid:22) c coll(S1, . . . , Sn) then either

⊕(T1, . . . , Tm) (cid:22) c ⊕ (S1, . . . , Sn)

or there exist j with 1 ≤ j ≤ n and x ∈ |Sj| of order u such that

coll(T1, . . . , Tm) (cid:22) c Sx
j

Proof. Write A1 for coll(T1, . . . , Tm) and A2 for coll(S1, . . . , Sm). Let ri be
the root of Ai for i = 1, 2. Let h be a covering of A1 into A2.

Case 1. r2 ≤A2
We claim that a covering of ⊕(T1, . . . , Tm) into ⊕(S1, . . . , Sn) is obtained

2 h(r1).

by restricting h.

Assume 1 ≤ i ≤ m and x ∈ |Ti|. Let j be such that h(x) ∈ |Sj|. We
must show δTi (x) ≤ δSj (h(x)). Since h is a covering of A1 into A2, δA1(x) ≤
δA2 (h(x)). By the deﬁnition of coll, this is equivalent to min{δTi (x), u} ≤
min{δSj (h(x)), u}. If δTi(x) ≤ u, this immediately implies the desired in-
equality. So, we may assume δTi(x) = u + 1. By deﬁnition of A1, r1 ≤A1
2 x.
Since h is a covering, h(r1) ≤A2
2 h(r1)
in this case, r2 ≤A2

2 h(x). Since we are assuming r2 ≤A2

2 h(x). By deﬁnition of A2, δSj (h(x)) = u + 1.

The rest of the proof that the restriction of h is a covering follows from

part 2 of Lemma 2.5.

Case 2. r2 6≤A2
We will show x = h(r1) witnesses the second disjunct in the conclusion

2 h(r1).

of the lemma.

Since r2 6≤A2

2 h(r1), there exists j such that h(r1) ∈ |Sj| and, moreover,
δSj (h(r1)) ≤ u. Since h is a covering and r1 has order u in A1, h(r1) has
order at least u in A2. Equivalently, u ≤ min{δSj (h(r1)), u}. Therefore,
u ≤ δSj (h(r1)) establishing that δSj (h(r1)) = u.

2

. Since
by part 3 of
QED

Since h is a covering of A1 into A2, h is a covering of A1 into Ah(r1)

h(r1) is an element of Sj of order at most u, Ah(r1)
Lemma 2.5.

2

= Sh(r1)

j

8

For u < ω, we want to deﬁne the collapsing operation Ψu on any sequence
T1, . . . , Tn ∈ M 2T with ord(T1) ≥ · · · ≥ ord(Tn). We will refer to such
sequences as being order descending. The following deﬁnition deals with the
case when ord(Ti) > u for all i.

Deﬁnition 2.9 Assume u ∈ ω and T1, . . . , Tn ∈ M 2T is order descending
with ord(Tn) > u. Inductively on ord(T1) − u deﬁne

Ψu(T1, . . . , Tn) = coll(Ψu+1(T1, . . . , Ti), Ti+1, . . . , Tn)

where i is maximal such that either i = 0 or ord(Ti) > u + 1.

Notice that ord(Ti+1) = · · · = ord(Tn) = u + 1 in the notation of the

deﬁnition.

In the case where i = 0, the interpretation of the deﬁnition is

Ψu(T1, . . . , Tn) = coll(T1, . . . , Tn)

In the case where i = n, the interpretation of the deﬁnition is

Ψu(T1, . . . , Tn) = coll(Ψu+1(T1, . . . , Tn))

Lemma 2.10 If u < ω and T1, . . . , Tn ∈ M 2T is order descending with
ord(Tn) > u then Ψu(T1, . . . , Tn) is an element of M 2T of order u.

Proof. Simple induction on ord(T1) − u using part 1 of Lemma 2.5. QED

While we will not use the following lemma directly, it is helpful in un-

derstanding Ψu(T1, . . . , Tn) in case ord(Tn) > u.

Lemma 2.11 Assume u, v < ω, T1, . . . , Tn ∈ M 2T is order descending,
v = ord(T1), ord(Tn) > u and

Ψu(T1, . . . , Tn) = ((X, ≤1, ≤2), δ)

There exist disjoint S1, . . . , Sn such that Si ∼= Ti for i = 1, . . . , n and distinct
ru+1, ru+2, . . . , rv ∈ X − (|S1| ∪ · · · ∪ |Sn|) such that

1. X = |S1| ∪ · · · ∪ |Sn| ∪ {ru+1, ru+2 . . . , rv}

2. Assume 1 ≤ i ≤ n and x ∈ |Si|. For all y ∈ X, x≤1y iﬀ x ≤Si

1 y.

3. Assume u < w ≤ v. For all y ∈ X, rw≤1y iﬀ either y = rt for some t

with w ≤ t ≤ v or y ∈ |Si| for some i such that ord(Si) ≥ w.

9

4. Assume 1 ≤ i ≤ n and x ∈ |Si|. For all y ∈ X, x ≤2 y iﬀ x ≤Si

2 y.

5. Assume u < w ≤ v. For all y ∈ X, rw ≤2 y iﬀ either y = rt for some

t with w ≤ t ≤ v or y ∈ |Si| for some i with δSi(y) ≥ w.

6. Whenever 1 ≤ i ≤ n and x ∈ |Si|, δ(x) = min{δSi (x), u}.

7. For i = u + 1, u + 2, . . . , v, δ(ri) = u.

8. Ψu(T) ∈ M 2T has order u.

Proof. Tedious but straightforward induction on v − u.

QED

In the statement of the lemma, rv, . . . , ru+2, ru+1 are the new roots ob-
tained by successivly applying coll. When visualizing Ψu(T1, . . . , Tn) with
respect to ≤1 one might view the chain

ru+1 <2 ru+2 <2 · · · <2 rv

(which is closed downward with respect to ≤1) as the spine with |Si| branch-
ing away from the spine at rw where w is the order of Si.

We will need one more operation before completing the deﬁnition of
Ψu.
It will also add a new root with a speciﬁed label below a collection
of elements of M 2T . Notice that the ﬁrst three conditions are the same as
those in Deﬁnition 2.3.

Deﬁnition 2.12 Assume Ti ∈ M 2T for i = 1, . . . , n and u < ω.
If
T1, . . . , Tn are pairwise disjoint, deﬁne expu(T1, . . . , Tn) to be a structure
((X, ≤1, ≤2), δ) which satisﬁes the following conditions.

1. X = |T1| ∪ · · · ∪ |Tn| ∪ {r} where r 6∈ |Ti| for i = 0, . . . , n.

2. Assume 1 ≤ i ≤ n and x ∈ |Ti|. For k = 1, 2 and all y ∈ X, x ≤k y

iﬀ x ≤Ti

k y.

3. For all y ∈ X, r≤1y.

4. For all y ∈ X, r ≤2 y iﬀ y = r.

5. Assume 1 ≤ i ≤ n. For all x ∈ |Ti|, δ(x) = δTi (x).

6. δ(r) = u.

When T1, . . . , Tn are not pairwise disjoint, deﬁne expu(T1, . . . , Tn) to be
∼=
expu(S1, . . . , Sn) for some pairwise disjoint S1, . . . , Sn ∈ M 2T such that Si
Ti for i = 1, . . . , n.

10

Lemma 2.13 Assume u < ω and T1, . . . , Tn ∈ M 2T are pairwise disjoint
of order at most u.

1. expu(T1, . . . , Tn) is an element of M 2T of order u.

2. For i = 1, . . . , n, Ti is a substructure of expu(T1, . . . , Tn).

3. If 1 ≤ i ≤ m and x ∈ |Ti| then expu(T1, . . . , Tm)x = Tx
i .

Proof. Straightforward.

QED

We are now ready to complete the deﬁnition of Ψu.

Deﬁnition 2.14 Assume u < ω, T1, . . . , Tn ∈ M 2T is order descending
and ord(Tn) ≤ u. Deﬁne

Ψu(T1, . . . , Tn) = expu(Ψu(T1, . . . , Ti), Ti+1, . . . , Tn)

where i is maximal such that either i = 0 or ord(Ti) > u.

In case i = 0, the interpretation of the deﬁnition is

Ψu(T1, . . . , Tn) = expu(T1, . . . , Tn)

3 Reducing Ordinal Terms to Double Trees

In this section, we will deﬁne T(a) ∈ M 2T for each principal a ∈ OT (ω) so
that

T(a) (cid:22)c T(b) =⇒ a (cid:22) b

This will allow us to reduce arbitrary elements of OT (ω) to double trees in
an analagous way.

We ﬁrst need to make some observations about the notations from Sec-

tion 1.

Lemma 3.1 If Dua ∈ OT and u ≤ v then Dva ∈ OT .

Proof. Assume Dua ∈ OT and u ≤ v. Clearly, Gvb ⊆ Gub for any b ∈ T .
Since Gva ⊆ Gua ≺ a, we see Dva ∈ OT .
QED

Lemma 3.2 Assume Du(a1, . . . , an) ∈ OT . If 1 ≤ m < n then Du(a1, . . . , am) ∈
OT .

11

Proof. Arguing by contradiction, there exists (b1, . . . , bk) ∈ Gu(a1, . . . , am)
with (a1, . . . , am) (cid:22) (b1, . . . , bk). Since Gu(a1 . . . , am) = Gua1 ∪ · · · ∪ Guam ⊆
Gua1 ∪ · · · ∪ Guan = Gu(a1, . . . , an), we have (b1, . . . , bk) ∈ Gu(a1, . . . , an).
Since Du(a1, . . . , an) ∈ OT , this implies (b1, . . . , bk) ≺ (a1, . . . , an). Since
(a1, . . . , am) (cid:22) (b1, . . . , bk) ≺ (a1, . . . , an), we conclude that m ≤ k and
ai = bi for 1 ≤ i ≤ k. Therefore, (a1, . . . , am, bm+1, . . . , bk) is a subterm
of (a1, . . . , am) – contradiction.
QED

The following deﬁnition is from [1].

Informally, the collection of u-
subterms of a ∈ T is the collection of subterms of a which are not in the
scope of some Dv for v < u.

Deﬁnition 3.3 Assume u ≤ ω. For a ∈ T , deﬁne the collection of u-
subterms of a inductively by the following clauses.

1. The only u-subterm of 0 is 0.

2. Assume a = Dvb where b ∈ T and v < u. The only u-subterm of a is

a.

3. Assume a = Dvb where b ∈ T and u ≤ v. For c ∈ T , c is a u-subterm

of a iﬀ either c = a or c is a u-subterm of b.

4. Assume a = (b0, . . . , bn) where n ≥ 1. For c ∈ T , c is a u-subterm of

a iﬀ either c = a or c is a u-subterm of bi for some i ≤ n.

Notice that for a ∈ T , the elements of Gua are those b ∈ T such that

Dvb is a u-subterm of a for some v ≥ u.

Lemma 3.4 Assume Dua ∈ OT . If b is a u-subterm of Dua of order u
then b (cid:22) Dua.

Proof. Assume b is a u-subterm of Dua of order u. If b = Dua we are done,
so we may assume b 6= Dua. This assumption implies b is a u-subterm of
a. There exists c ∈ OT such that b = Duc. By the comment preceding the
lemma, c ∈ Gua. Since c ∈ Gua ≺ a, Duc ≺ Dua.
QED

For the following deﬁnition, we identify Dua with Du(a) when a is a

principal ordinal term.

Deﬁnition 3.5 Deﬁne T(a) ∈ M 2T for principal a ∈ OT (ω) inductively so
that |T(Du0)| = {r} for some r where r has order u and

T(Du(a1, . . . , an)) = Ψu(T(a1), . . . , T(an))

12

for Du(a1, . . . , an) ∈ OT with (a1, . . . , an) 6= 0.

Lemma 3.6 ord(T(a)) = ord(a) for principal a ∈ OT (ω).

Proof. Immediate from the deﬁnition of T(a).

QED

Lemma 3.7 Assume that a = Du(a1, . . . , am) ∈ OT (ω).

1. If ord(am) ≤ u then

T(a) = expu(T(Du(a1, . . . , ai)), T(ai+1), . . . , T(am))

where i is maximal such that either i = 0 or ord(ai) > u.

2. If ord(am) > u then

T(a) = coll(T(Du+1(a1, . . . , ai)), T(ai+1), . . . , T(am))

where i is maximal such that either i = 0 or ord(ai) > u + 1.

Proof. The lemma follows immediately from the previous deﬁnition and
Deﬁnitions 2.9 and 2.14 with similar interpretations of the equations e.g.
the equation in part 2 is to be interpreted as

T(a) = coll(T(a1), . . . , T(am))

in case i = 0.

QED

Lemma 3.8 Assume a ∈ OT (ω) is principal. Suppose v < ω and let X
be the collection of x ∈ |T(a)| of order v. If x is a minimal element of X
with respect to ≤
then there exists a principal v-subterm b of a of order
v such that T(a)x ∼= T(b).

T(a)
1

Proof. We will argue by induction on the cardinality of |T(a)| for principal
a ∈ OT (ω).

Suppose a ∈ OT (ω) is principal and the lemma holds with a replaced
by b whenever b ∈ OT (ω) is principal and card(T(b)) < card(T(a)). Also,
suppose v < ω, X is the collection of elements of |T(a)| of order v and x is
a minimal element of X with respect to ≤

.

Let u be the order of a. Since x has order v in T(a), we have v ≤ u. If
v = u then x is the root of T(a) and we can take b = a in the conclusion of
the lemma. Therefore, we may assume v < u.

T(a)
1

13

The assumption that v < u implies that a 6= Du0. Therefore, a =

Du(a1, . . . , am) for some (a1, . . . , am) ∈ OT (ω).

Case 1. ord(am) ≤ u.
Let i be maximal such that either i = 0 or ord(ai) > u. By part 1 of

Lemma 3.7,

T(a) = expu(T(Du(a1, . . . , ai)), Ti+1, . . . , Tm)

for some Ti+1, . . . , Tm ∈ M 2T such that T(Du(a1, . . . , ai)), Ti+1, . . . , Tm are
∼= T(ak) for i + 1 ≤ k ≤ m. Since v < u, either
pairwise disjoint and Tk
x ∈ |T(Du(a1, . . . , ai))| or x ∈ |Tk| for some k with i + 1 ≤ k ≤ m.

We ﬁrst consider the subcase where x ∈ |T(Du(a1, . . . , ai))|. By the in-
duction hypothesis, there is a v-subterm b of Du(a1, . . . , ai) of order v such
that T(Du(a1, . . . , ai))x ∼= T(b). By part 3 of Lemma 2.13, T(Du(a1, . . . , ai))x =
T(a)x so that T(a)x ∼= T(b). Since v < u, b is a v-subterm of aj for some j
with 1 ≤ j ≤ i. This implies that b is a v-subterm of a.

The proof of the subcase where x ∈ |T(ak)| for some k with i+1 ≤ k ≤ m

is similar.

Case 2. ord(am) > u.
Let i be maximal such that either i = 0 or ord(ai) > u + 1. By part 2 of

Lemma 3.7,

T(a) = coll(T(Du+1(a1, . . . , ai)), Ti+1, . . . , Tm)

for some Ti+1, . . . , Tm ∈ M 2T such that T(Du+1(a1, . . . , ai)), Ti+1, . . . , Tm
∼= T(ak) for i + 1 ≤ k ≤ m. Since v < u, either
are pairwise disjoint and Tk
x ∈ |T(Du+1(a1, . . . , ai))| or x ∈ |Tk| for some k with i + 1 ≤ k ≤ m.

The rest of the proof is analgous to Case 1 using part 3 of Lemma 2.5
QED

instead of part 3 of Lemma 2.13.

Assume (a1, . . . , am), (b1, . . . , bn) ∈ OT and p : {1, . . . , m} → {1, . . . , n}.
In the proof of the following theorem, we will use the following observation:

If for i = 1, . . . , m

ai (cid:22) bp(i)

and whenever there exists j 6= i such that p(j) = p(i)

then

ai 6= bp(i)

(a1, . . . , am) (cid:22) (b1, . . . , bn)

14

Of course, this applies generally to descending sequences in lexicograph-
ical orderings. Moreover, if p is not injective then the conclusion can be
strengthened to (a1, . . . , am) ≺ (b1, . . . , bn).

Theorem 3.9 Assume a, b ∈ OT (ω) are principal.
a (cid:22) b.

If T(a) (cid:22)c T(b) then

Proof. We will argue by induction on the cardinality of |T(b)| with a sub-
sidiary induction on the cardinality of |T(a)|.

Assume a, b ∈ OT (ω) are principal and the conclusion of the lemma
holds when replacing a and b by principal a′, b′ ∈ OT (ω) whenever ei-
ther card(|T(b′)|) < card(|T(b)|) or both card(|T(b′)|) = card(|T(b)|) and
card(|T(a′)|) < card(|T(a)|).

Assume T(a) (cid:22) c T(b). We must show a (cid:22) b.
Since T(a) (cid:22) c T(b), we have ord(a) = ord(T(a)) ≤ ord(T(b)) = ord(b).
If ord(a) < ord(b) then a ≺ b and we are done. So, we may assume ord(a) =
ord(b). Let u be the common value.

Since T(Du0) consists of a single element of order u, it follows easily from
T(a) (cid:22) c T(b) that a (cid:22) b if a or b is Du0 (notice also that card(T(Duc)) >
1 whenever c ∈ OT (ω) and c 6= 0). Therefore, we may assume a =
Du(a1, . . . , am) and b = Du(b1, . . . , bn). It suﬃces to show (a1, . . . , am) (cid:22) (b1, . . . , bn)
in order to establish a (cid:22) b.

We will consider four cases depending on whether u < ord(am) and

whether u < ord(bn).

Case 1. u < ord(am), ord(bn).
Let i be maximal such that either i = 0 or ai > u + 1 and let j be

maximal such that either j = 0 or bj > u + 1. By part 2 of Lemma 3.7,

T(a) = coll(T(Du+1(a1, . . . , ai)), Ti+1, . . . , Tm)

for some Ti+1, . . . , Tm ∈ M 2T such that Tk
T(Du+1(a1, . . . , ai)), Ti+1, . . . , Tm are pairwise disjoint. Also,

∼= T(ak) for i + 1 ≤ k ≤ m and

T(b) = coll(T(Du+1(b1, . . . , bj)), Sj+1, . . . , Sn)

for some Sj+1, . . . , Sn ∈ M 2T such that Sk
T(Du+1(b1, . . . , bn)), Sj+1, . . . , Sn are pairwise disjoint.

∼= T(bk) for j + 1 ≤ k ≤ n and

We will deﬁne A to be T(Du+1(a1, . . . , ai)) in case i 6= 0 and deﬁne B to

be T(Du+1(b1, . . . , bj)) in case j 6= 0.

By Lemma 2.8, the three subcases which follow are exhaustive.

15

Subcase 1.1. There exists x ∈ |B| (so j 6= 0) of order u such that

T(a) (cid:22) c Bx.

Without loss of generality, x is minimal among the elements of B of
1 . By Lemma 3.8, Bx ∼= T(c) for some u-subterm
order u with respect to ≤B
c of Du+1(b1, . . . , bj) of order u. By the induction hypothesis, a (cid:22) c. By
deﬁnition, c must be a u-subterm of (b1, . . . , bj) implying it is a u-subterm
of b = Du(b1, . . . , bn). By Lemma 3.4, c (cid:22) b (in fact, c ≺ b) implying a (cid:22) b.

Subcase 1.2. There exists k with j + 1 ≤ k ≤ n and x ∈ |T(bk)| of

order u such that T(a) (cid:22) c T(bk)x.

Similar to the argument for Subcase 1.1, a (cid:22) c for some u-subterm c of
bk of order u. Since bk is a u-subterm of b, c is a u-subterm of b. By Lemma
3.4, c (cid:22) b implying a (cid:22) b.

Subcase 1.3. ⊕(A, Ti+1, . . . , Tm) (cid:22) c ⊕ (B, Sj+1, . . . , Sn).
We ﬁrst consider the case when i = 0 so that A is undeﬁned and
ord(a1) = · · · = ord(am) = u + 1.
If j > 0 then ord(b1) > u + 1 im-
plying a1 ≺ b1 and, hence, (a1, . . . , am) ≺ (b1, . . . , bn). So, we may assume
j = 0. Let h be a covering which witnesses the assumption of the sub-
case. Notice that for each k with 1 ≤ k ≤ m there exists p(k) such that h
maps |Tk| into |S
p(k)|. By the induction hypothesis, ak (cid:22) bp(k). Moreover,
if there exists l 6= k with p(l) = p(k) then h cannot map Tk onto S
p(k)
∼= T(ak)
(since Tl is also mapped into S
∼= T(bp(k)), we have T(ak) 6= T(bp(k))
has smaller cardinality than Sp(k)
which implies ak 6= bp(k)). By the observation preceding the theorem,
(a1, . . . , am) (cid:22) (b1, . . . , bn).

p(k)) implying ak ≺ bp(k) (since Tk

We now consider the case when i > 0 and A is deﬁned.
If (a1, . . . , ai) ≺ (b1, . . . , bj) then, since ai+1 has order u + 1 if it exists,

(a1, . . . , am) ≺ (b1, . . . , bn). So, we may assume (b1, . . . , bj) (cid:22) (a1, . . . , ai).

We begin by showing (a1, . . . , ai) (cid:22) (b1, . . . , bj) which implies (a1, . . . , ai) =

(b1, . . . , bj).

The assumption of this subcase implies there is a covering of A into
one of B, Sj+1, . . . , Sn. This implies Du+1(a1, . . . , ai) (cid:22) Du+1(b1, . . . , bj) or
Du+1(a1, . . . , ai) (cid:22) bk for some k with j +1 ≤ k ≤ n by the induction hypoth-
esis. Our immediate goal is equivalent to Du+1(a1, . . . , ai) (cid:22) Du+1(b1, . . . , bj),
so assume Du+1(a1, . . . , ai) (cid:22) bk where j+1 ≤ k ≤ n. Since bk has order u+1,
it has the form Du+1c for some c ∈ OT (ω). Since Du+1(a1, . . . , ai) (cid:22) Du+1c,
(a1, . . . , ai) (cid:22) c. Clearly, c ∈ Gub implying c ≺ (b1, . . . , bn). Therefore,
(a1, . . . , ai) ≺ (b1, . . . , bn) which implies (a1, . . . , ai) (cid:22) (b1, . . . , bj) (since bj+1
has order u + 1 if it exists).

16

Since (a1, . . . , ai) = (b1, . . . , bj) which implies A = B, a covering wit-
nessing the hypothesis of this subcase can easily be modiﬁed to map |A|
onto |B| thus witnessing ⊕(Ti+1, . . . , Tm) (cid:22) c ⊕ (Tj+1, . . . , Tn). By an
argument similar to that in the ﬁrst paragraph of this subcase, we see
(ai+1, . . . , am) (cid:22) (bj+1, . . . , bn). Combined with (a1, . . . , ai) = (b1, . . . , bj),
we conclude (a1, . . . , am) (cid:22) (b1, . . . , bn).

Case 2. ord(am) ≤ u < ord(bn).
If ord(a1) ≤ u then a1 ≺ b1 implying (a1, . . . , am) ≺ (b1, . . . , bn). So,
we may assume ord(a1) > u. Let i be maximal such that ord(ai) >
u. We have T(a) = expu(T(Du(a1, . . . , ai)), T(ai+1), . . . , T(am))). Since
T(Du(a1, . . . , ai)) is a substructure of T(a), the restriction of a covering of
T(a) into T(b) is a covering of T(Du(a1, . . . , ai)) into T(b) which is not onto.
The induction hypothesis implies that Du(a1, . . . , ai) ≺ b = Du(b1, . . . , bn).
Therefore, (a1, . . . , ai) ≺ (b1, . . . , bn). Since ord(ai+1) ≤ u if i + 1 ≤ m,
(a1, . . . , am) ≺ (b1, . . . , bn).

Case 3. ord(bn) ≤ u < ord(am).
Let j be maximal such that j = 0 or ord(bj) > u. By part 1 of Lemma

3.7, T(b) = expu(T(Du(b1, . . . , bj)), T(bj+1), . . . , T(bn)).

Since ord(am) > u, T(a) is obtained by an application of coll. Therefore,
letting r1 be the root of T(a), there is x ∈ T(a) such that r ≤
x and
r 6= x. Since T(b) is obtained by an applicaton of expu, letting r2 be the root
of T(b), there is no x ∈ T(b) such that r2 ≤
x and r2 6= x. Therefore,
no covering of T(a) into T(b) maps r1 to r2. Since T(a) (cid:22) c T(b), either
T(a) (cid:22) c T(Du(b1, . . . , bi)) or T(a) (cid:22) c T(bk) for some k with j + 1 ≤ k ≤ n.
In the former case, the induction hypothesis implies a (cid:22) Du(b1, . . . , bi) ≺ b.
In the latter case, the induction hypothesis implies a (cid:22) bk ≺ b (since bk is a
u-subterm of b of order at most u).

T(a)
2

T(b)
2

Case 4. ord(am), ord(bn) ≤ u.
Let i be maximal such that either i = 0 or ai > u and let j be maximal

such that either j = 0 or bj > u. By part 1 of Lemma 3.7,

T(a) = expu(T(Du(a1, . . . , ai)), Ti+1, . . . , Tm)

for some Ti+1, . . . , Tm ∈ M 2T such that Tk
T(Du(a1, . . . , ai)), Ti+1, . . . , Tm are pairwise disjoint. Also,

∼= T(ak) for i + 1 ≤ k ≤ m and

T(b) = expu(T(Du(b1, . . . , bj)), Sj+1, . . . , Sn)

17

for some Sj+1, . . . , Sn ∈ M 2T such that Sk
T(Du(b1, . . . , bn)), Sj+1, . . . , Sn are pairwise disjoint.

∼= T(bk) for j + 1 ≤ k ≤ n and

We will deﬁne A to be T(Du(a1, . . . , ai)) in case i 6= 0 and deﬁne B to

be T(Du(b1, . . . , bj)) in case j 6= 0.

The assumption that T(a) (cid:22) c T(b) implies

⊕(A, Ti+1, . . . , Tm) (cid:22) c ⊕ (B, Sj+1, . . . , Sn)

The rest of the argument for this case is similar to that for Subcase 1.3 and
is omitted.
QED

We will need the following operation transforming sequences of double
forests into a double tree by adding an element which becomes a simultane-
ous root.

Deﬁnition 3.10 Assume P1, . . . , Pm are pairwise disjoint double forests.
Deﬁne ρ(P1, . . . , Pm) to be a structure (X, ≤1, ≤2) which satisﬁes the fol-
lowing conditions.

1. X = |P1| ∪ · · · ∪ |Pn| ∪ {r} where r 6∈ |Pi| for i = 0, . . . , n.

2. Assume 1 ≤ i ≤ n and x ∈ |Pi|. For k = 1, 2 and all y ∈ X, x ≤k y

iﬀ x ≤Pi

k y.

3. For k = 1, 2 and all y ∈ X, r ≤k y.

If P1, . . . , Pm are double forests which are not pairwise disjoint then de-
ﬁne ρ(P1, . . . , Pm) to be ρ(Q1, . . . , Qm) where Q1, . . . , Qm are chosen to be
pairwise disjoint and so that Qi

∼= Pi for i = 1, . . . , m.

Lemma 3.11 If P1, . . . , Pm are double forests then ρ(P1, . . . , Pm) is a dou-
ble tree.

Proof. Clear.

QED

Corollary 3.12 Assume a = (a1, . . . , am) and b = (b1, . . . , bn) are in OT (ω)
and have order 0. If ρ(T(a1), . . . , T(am)) (cid:22) c ρ(T(b1), . . . , T(bn)) then a (cid:22) b.

Proof. Recall that we have identiﬁed elements of M 2F of order 0 with
double forests.

Assume ρ(T(a1), . . . , T(am)) (cid:22) c ρ(T(b1), . . . , T(bn)).
There are pairwise disjoint T1, . . . , Tm with Ti

∼= T(ai) for i = 1, . . . , m
such that ρ(T(a1), . . . , T(am)) = ρ(T1, . . . , Tm). There are pairwise disjoint

18

S1, . . . , Sn with Sj ∼= T(bj) for j = 1, . . . , n such that ρ(T(b1), . . . , T(bn)) =
ρ(S1, . . . , Sn). Let h be a covering of ρ(T1, . . . , Tm) into ρ(S1, . . . , Sn). The
restriction of h is clearly a covering of ⊕(T1, . . . , Tm) into ⊕(S1, . . . , Sn). We
can now argue as in Subcase 1.3 of Theorem 3.9.

For 1 ≤ i ≤ m, there exists p(i) such that h maps |Ti| into |S

p(i)|. By
Theorem 3.9, ai (cid:22) bp(i). Moreover, if 1 ≤ i, j ≤ n, i 6= j and p(i) = p(j)
p(i)| implying ai 6= bp(j). By the observation
then h cannot map |Ti| onto |S
preceding Theorem 3.9, a (cid:22) b.
QED

4 From WQO to WO

The previous sections provide the means to prove the following theorem
along with several variations. Recall that the proofs in the previous two
sections can be carried out in RCA0. Except where speciﬁed otherwise, the
arguments in this section and the next can also be formalized in RCA0.

Theorem 4.1 (RCA0) If the collection of double trees is wqo under cov-
ering then {a ∈ OT : a ≺ D0Dω0} is well-ordered by ≺.

The proof of the theorem will use the following lemma.

Lemma 4.2 Assume a ∈ OT .

1. If D0a ∈ OT and ord(a) ≤ n < ω then D0a ∈ OT (n + 1).

2. If n is a natural number and a ≺ D0Dn+10 then ord(a) = 0 and

a ∈ OT (n + 1).

3. If a ≺ D0Dω0 then ord(a) = 0 and a ∈ OT (ω).

Proof. Notice that b ≺ Dn+10 iﬀ ord(b) ≤ n for all b ∈ OT . A straightfor-
ward induction shows that for all b ∈ OT , if ord(b) ≤ n and each element of
G0b has order at most n then b ∈ OT (n + 1).

For part 1, assume D0a ∈ OT and ord(a) ≤ n < ω. Since D0a ∈
OT , G0a ≺ a implying each element of G0a has order at most n. By the
observation in the previous paragraph, a ∈ OT (n + 1) implying D0a ∈
OT (n + 1).

For part 2, suppose a ≺ D0Dn+10 where n < ω. Since 0 ∈ OT (n + 1),
we may assume a 6= 0. We must have ord(a) = 0. If a = (a1, . . . , am) where
1 < m, it suﬃces to show ai ∈ OT (n + 1) for i = 1, . . . , m. Therefore, we
may assume a is a principal term. Since ord(a) = 0, a = D0b for some b.

19

Since D0b = a ≺ D0Dn+10, b ≺ Dn+10 implying ord(b) ≤ n. By part 1,
a = D0b ∈ OT (n + 1).

A similar argument establishes part 3.

QED

Proof of Theorem 4.1. Assume the collection of double trees is wqo un-
der covering. Suppose a0, a1, . . . , ai, . . . is an inﬁnite sequence of elements
of {a ∈ OT : a ≺ D0Dω0}. We must ﬁnd i < j such that ai (cid:22) aj. By part
3 of Lemma 4.2, ord(ai) = 0 and ai ∈ OT (ω) for all i < ω. We may assume
ai 6= 0 for all i < ω (if ai = 0 then ai (cid:22) ai+1). For i < ω, deﬁne Ti as follows.
There are principal b1, . . . , bk such that ai = (b1, . . . , bk) (allowing the possi-
bility k = 1). Since ord(ai) = 0, we must have ord(bj) = 0 for j = 1, . . . , k.
Hence, T(bj) has order 0 for j = 1, . . . , k. Let Ti = ρ(T(b1), . . . , T(bk)). By
Lemma 3.11, each Ti is a double tree. By assumption, there are i < j such
that Ti (cid:22) c Tj. By Corollary 3.12, ai (cid:22) aj.
QED

Assume Q = (Q, ≤) is a quasiordering. We will write W QO(Q) to
indicate that Q is a wqo. We will write P RW QO(Q) to indicate there are
no primitive recursive bad sequences in Q.

When Q is a linear ordering, Q is a well-ordering iﬀ W QO(Q) and Q has
no primitive recursive descending sequences iﬀ P RW QO(Q). In this case,
we write W O(Q) for W QO(Q) and P RW O(Q) for P RW QO(Q).

When a ∈ OT , X is the set of b ∈ OT such that b ≺ a and α = o(a)
(where the operation a 7→ o(a) is deﬁned in [1]), we will write W O(α) and
P RW O(α) for W O((X, (cid:22) )) and P RW O((X, (cid:22) )) respectively. The follow-
ing calculations are from [1]: o(D0Dω0) = ψ0Ωω, o(D0Dn+10) = ψ0εΩn+1
for 1 ≤ n < ω and o(D0D10) = ε0.

The reader unfamiliar with [1] may simply view the notations W O(α)

and P RW O(α) from the previous paragraph as abbreviations.

We will write DT C for the partial ordering of double trees under cov-
ering. For n ∈ ω, DT C(n) is the restriction of DT C to the collection of
double trees of height at most n. We write T C for partial ordering of ﬁnite
trees under covering (where coverings between trees are deﬁned analagously
to coverings between double forests i.e. a covering preserves order upward).

Lemma 4.3 DT C(1) is isomorphic to T C.

Proof. Notice that for any (X, ≤1, ≤2) ∈ DT (1), x ≤2 y iﬀ x is the root
of (X, ≤1, ≤2) for all x, y ∈ X. This implies that the map (X, ≤1, ≤2) 7→
(X, ≤1) from DT C(1) to T C is a bijection.

Suppose P1 = (X1, ≤1

1, ≤1

2) are double trees with
roots r1 and r2 respectively. Clearly, if h : X1 → X2 is a covering of P1

2) and P2 = (X2, ≤2

1, ≤2

20

into P2 then it is also a covering of (X1, ≤1
1). Now suppose
h : X1 → X2 is a covering of (X1, ≤1
1). A simple argument
shows that if we modify h by mapping r1 to r2 the result is a covering of P1
into P2.
QED

1) into (X2, ≤2

1) into (X2, ≤2

Theorem 4.4 (RCA0)

1. W QO(DT C) =⇒ W O(ψ0Ωω)

2. For 1 ≤ n < ω, W QO(DT C(n + 1)) =⇒ W O(ψ0εΩn+1)

3. W QO(T C) =⇒ W O(ε0)

4. P RW QO(DT C) =⇒ P RW O(ψ0Ωω)

5. For 1 ≤ n < ω, P RW QO(DT C(n + 1)) =⇒ P RW O(ψ0εΩn+1)

6. P RW QO(T C) =⇒ P RW O(ε0)

We remark that the proofs for parts 3 and 6 are fairly direct and require

little of the development of the previous sections.

The functions deﬁned on OT , M 2T or M 2F in the previous two sections
are of low complexity (after making natural choices to be explicit regarding
outputs when necessary). This is clear from the deﬁnitions along with the
descriptive lemmas. For our present purposes, we only need to notice they
are primitive recursive.

Lemma 4.5 If 0 6= a ∈ OT (ω), ord(a) = 0 and n is maximal such that Dn
occurs in a then ρ(T(a1), . . . , T(ak)) is a double tree of height n + 1

Proof. For T ∈ M 2F , deﬁne the height of T to be the largest number of the
form v + k where there is a chain in ≤T
2 of size k + 1 all of whose elements
have order v. Notice that if T has order 0 then this deﬁnition of height
agrees with our previous deﬁnition: the largest m such there is a chain in
≤T

2 of size m + 1.

Claim. If T1, . . . , Tm ∈ M 2T is order descending and u < ω then the
height of Ψu(T1, . . . , Tm) is the maximum of u and the heights of Ti for
i = 1, . . . , n.

Straightforward induction on the cardinality of Ψu(T1, . . . , Tm) noticing
that coll may increase the sizes of chains but reduces the corresponding
order and expu does not increase the sizes of chains and preserves order
while adding a new root of order u.

21

Claim 2. For all principal a ∈ OT (ω), if n is maximal such that Dn

occurs in a then the height of T(a) is n.

The claim follows from the previous claim by a straightforward induction

noting that the height of T(Du0) is u for u < ω.

The lemma follows immediately from Claim 2 noting that ρ increases
QED

height by 1.

Proof of Theorem 4.4. Part 1 is simply a restatement of Theorem 4.1
using abbreviated notation. The proofs of parts 2 through 6 follow the same
lines with slight modiﬁcations.

For part 2, modify the proof of Theorem 4.1 by using part 2 of Lemma
4.2 rather than part 3 and using the previous lemma to see that the double
trees Ti have height at most n + 1.

For part 3, notice the proof of part 2 also works for n = 0 to show
W QO(DT C(1)) implies that {a ∈ OT : a ≺ D0D10} is well-ordered i.e.
W O(ε0). Part 3 now follows from the fact DT C(1) is isomorphic to T C.

To prove parts 4 through 6, modify the proofs of parts 1 through 3 respec-
tively by noticing that if a0, a1, . . . , ai, . . . is a primitive recursive sequence
then so is T0, T1, . . . , Ti, . . ..
QED

Assume Q = (Q, ≤Q) is a quasiordering. Given a norm q 7→ ||q|| from
Q into ω, we will write LW QO(Q), (as in [8]), to indicate there is no bad
sequence q0, q1, . . . , qi, . . . such that the sequence ||q0||, ||q1||, . . . , ||qi||, . . . of
natural numbers is bounded by a linear function. As observed in [8], when
{q ∈ Q :
||q|| ≤ n} is ﬁnite for all n ∈ ω, LW QO(Q) is equivalent, in
WKL0, to the following Π0
2 statement: ∀c ∈ ω ∃k ∈ ω such that if q0, . . . , qk
are elements of Q with ||qi|| ≤ c · (i + 1) for i = 0, . . . , k then there exist
i < j such that qi ≤Q qj. We will use this latter statement as our oﬃcial
deﬁnition of LW QO(Q) in RCA0.

When Q is a linear ordering, we will write LW O(Q) for LW QO(Q).
We will ﬁx norms on M 2F and OT such that ||T|| is the cardinality of

|T| for T ∈ M 2F and ||a|| is the length of a for a ∈ OT .

Theorem 4.6

1. (RCA0) For 1 ≤ n < ω, LW QO(DT C(n + 1)) =⇒ LW O(ψ0εΩn+1)

2. (RCA0) LW QO(T C) =⇒ LW O(ε0)

3. (ACA0) For 1 ≤ n < ω, LW QO(DT C(n+1)) =⇒ P RW O(ψ0εΩn+1)

4. (ACA0) LW QO(T C) =⇒ P RW O(ε0)

22

5. (ACA0) LW QO(DT C) =⇒ P RW O(ψ0Ωω)

We remark that LW O(ψ0Ωω) is false. Consider the descending sequences

D0Dn+10, D0Dn0, . . . , D0D10 where all the terms have length 3.

The proof of the theorem will use the following lemma.

Lemma 4.7 Assume n < ω. If a ∈ OT (n + 1) is principal then ||T(a)|| ≤
(n + 1) · ||a||.

Proof. Compare the following claim to Lemma 2.11.

Claim. If T1, . . . , Tk ∈ M 2T is order descending where u < ord(Tk)

then

||Ψu(T1, . . . , Tk)|| = ||T1|| + · · · + ||Tk|| + (ord(T1) − u)

The proof of the claim is a straightforward induction on ord(T1) − u

using Deﬁnition 2.9.

The claim implies that if T1, . . . , Tk ∈ M 2T is order descending and

ord(T1) ≤ n then

||Ψu(T1, . . . , Tk)|| ≤ ||T1|| + · · · + ||Tk|| + (n + 1)

This follows immediately from the claim if u < ord(Tk). Otherwise, use the
claim and refer to Deﬁnition 2.14.

The lemma now follows by induction on a ∈ OT (n + 1).

QED

Proof of Theorem 4.6. For part 1, assume 1 ≤ n < ω. Once again, the
proof is similar to the proof of Theorem 4.1.

Suppose c > 0. There exists k < ω such that for all double trees
T0, . . . , Tk of height at most n + 1 with ||Ti|| ≤ (n + 2) · c · (i + 1) for
i = 0, . . . , k, there exists i < j such that Ti (cid:22) cTj. Assume ai ≺ D0Dn+10
with ||ai|| ≤ c · (i + 1) for i = 0, . . . , k + 1. By part 2 of Lemma 4.2,
ai ∈ OT (n + 1) and ord(ai) = 0 for i = 0, . . . , k + 1. We will show there
exist i < j such that ai (cid:22) aj. We may assume ai 6= 0 for i ≤ k.

For i = 0, . . . , k, deﬁne Ti as follows. There exist principal b1, . . . , bm ∈
OT (n + 1) such that ai = (b1, . . . , bm) (allowing the possibility m = 1). Let
Ti = ρ(T(b1), . . . , T(bm)). Using the previous lemma, for i ≤ k

||Ti|| = ||T(b1)|| + · · · + ||T(bm)|| + 1

≤ (n + 1) · ||b1|| + · · · + (n + 1) · ||bm)|| + 1
= (n + 1) · (||b1|| + · · · + ||bm||) + 1
≤ (n + 1) · ||ai|| + 1
≤ (n + 2) · ||ai||
≤ (n + 2) · c · (i + 1)

23

By choice of k, there exist i < j such that Ti (cid:22) cTj. By Corollary 3.12,
ai (cid:22) aj.

The argument for part 1 also works for n = 0 to show LW QO(DT (1))

implies LW O(ε). Since T C ∼= DT C(1) by Lemma 4.3, part 2 follows.

Parts 3 and 4 follow from parts 1 and 2 using Theorem 3.5 from [8],
having assumption ACA0, which has as special cases that LW O(ψ0εΩn+1)
implies P RW O(ψ0εΩn+1) for 1 ≤ n < ω and LW O(ε0) implies P RW O(ε0).
For part 5, assume LW QO(DT C). By part 3, P RW O(ψ0εΩn+1) when-
ever 1 ≤ n < ω. Since D0Dn+10 (n ∈ ω) is coﬁnal in D0Dω0 by part 3 of
Lemma 4.2, this implies P RW O(ψΩω).
QED

5 Applications: Strength and Independence

For a theory T and a collection of formulas Φ, the uniform Φ reﬂection
principle for T is the collection of formulas formalizing the statements

For every natural number n, if ϕ(n) is provable in T then ϕ(n) is true.

where ϕ is a formula in Φ with at most one free variable.

Generally, a proof-theoretic analysis of a theory T showing that the
ordinal of T is α also shows, though possibly not stated explicitly, that the
following are provable in ACA0:

(∗) W O(α) is equivalent to the uniform Π1

1 reﬂection principal for T.

(∗∗) P RW O(α) is equivalent to the uniform Π0

2 reﬂection principal for T.

In particular, (∗) and (∗∗) hold for Π1
1 − CA0 and ψ0Ωω as well as IDn
and ψ0εΩn+1 when 1 ≤ n < ω (see [6]). Rathjen and Weiermann [7] gave
an ordinal analysis providing an appropriate instance of (∗) to calibrate the
strength of Kruskal’s Theorem.

Theorem 5.1

1. (ACA0) W QO(DT C) is equivalent to the uniform Π1

1 reﬂection prin-

cipal for Π1

1 − CA0.

2. (ACA0) The following are equivalent.

(a) P RW QO(DT C)

(b) LW QO(DT C)
(c) The uniform Π0

2 reﬂection principal for Π1

1 − CA0.

24

The ﬁnal section of [2] establishes that the Double Kruskal Theorem fol-
1 reﬂection

lows from RCA0 with the additional assumption of the uniform Π1
principal for KPℓ0. The proof is based on showing that

(†) For all n ∈ ω, W QO(DT C(n)) is provable in KPℓ0.

follows from RCA0. The proof of Theorem 5.1 will use a variant which says

(∗ ∗ ∗) For all n ∈ ω, W QO(DT C(n)) is provable in Π1

1 − CA0.

follows from RCA0. This is not surprising since KPℓ0 is a conservative ex-
tension of Π1
1 − CA0 (e.g. see Chapter 7 of [9], especially Exercise VII.3.36).
In fact, the proof that (†) follows from RCA0 also shows, with only cosmetic
changes, that (∗ ∗ ∗) follows from RCA0.

We will also need the following observations.

Lemma 5.2

1. W QO(DT C) ⇐⇒ ∀n W QO(DT C(n))

2. P RW QO(DT C) ⇐⇒ ∀n P RW QO(DT C(n))

3. LW QO(DT C) ⇐⇒ ∀n LW QO(DT C(n))

Proof. The forward direction of each part is obvious. The reverse directions
use the following claim.

Claim. Assume P and Q are double trees. If the height of Q is at least

||P|| − 1 then P (cid:22) c Q.

Assume the height of Q is at least ||P|| − 1. Suppose P = (X, ≤1, ≤2)
and Q = (Y, (cid:22) 1, (cid:22) 2). Let C be a chain in (Y, (cid:22) 2) of size ||P|| and extend
≤1 to a linear ordering ≤′
1 of X. Let h map X into C so as to preserve order
between ≤′

1 and (cid:22) 2. Clearly, h is a covering of P into Q.

To prove the reverse direction of part 1, assume W QO(DT C(n)) for all
n ∈ ω and let P0, . . . , Pi, . . . be an inﬁnite sequence of double trees. We will
show there are i < j such that Pi (cid:22) c Pj. By the claim, we may assume the
height of Pi is less than ||P0|| − 1 for all i ≥ 1. By W QO(DT C(n)) where
n = ||P0|| − 2, there must be i, j ∈ ω with 1 ≤ i < j such that Pi (cid:22) c Pj.

The proof of the reverse direction of part 2 is identical except we assume
P RW QO(DT C(n)) for all n and P0, . . . , Pi, . . . is a primitive recursive se-
quence of double trees.

To prove the reverse direction of part 3, assume LW QO(DT C(n)) for
all n ∈ ω. Suppose c > 0. There exists k ∈ ω such that for any sequence

25

Q0, . . . , Qk of double trees of height less than c − 1 with ||Qi|| ≤ 2c(i + 1)
for i = 0, . . . , k there exist i < j such that Qi (cid:22) c Qj. Suppose P0, . . . , Pk+1
is a sequence of double trees with ||Pi|| ≤ c(i + 1) for i = 0, . . . , k + 1. By
assumption, ||P0|| ≤ c. By the claim, we may assume the height of Pi+1 is
less than ||P0|| − 1 and, hence, less than c − 1 for i = 0, . . . , k. Consider the
sequence Pi+1 (i = 0, . . . , k) and notice ||Pi+1|| ≤ c(i + 2) ≤ 2c(i + 1) for
i = 0, . . . , k. By the choice of k, there exist i < j such that Pi+1 (cid:22) c Pj+1.
QED

Proof of Theorem 5.1. We use the instances of (∗) and (∗∗) with T =
Π1

1 − CA0 and α = ψ0Ωω.

The forward direction of part 1 follows from the fact that W QO(DT C)

implies W O(ψ0Ωω) (part 1 of Theorem 4.4) and (∗).

1 − CA0. By (∗ ∗ ∗), Π1

For the reverse direction of part 1, we assume the uniform Π1

1 reﬂection
principal for Π1
1 − CA0 ⊢ W QO(DT C(n)) for each
n ∈ ω. Since W QO(DT C(n)) is clearly equivalent to a Π1
1 statement, this
implies W QO(DT C(n)) for all n ∈ ω. By part 1 of the previous lemma, we
have W QO(DT C).

For part 2, we will show (a) ⇔ (c) and (b) ⇔ (c).
The implication (a) ⇒ (c) follows from the fact that P RW QO(DT C)

implies P RW O(ψ0Ωω) (part 4 of Theorem 4.4) and (∗∗).

The implication (b) ⇒ (c) follows from the fact that LW QO(DT C)

implies P RW O(ψ0Ωω) (part 5 of Theorem 4.6) and (∗∗).

The proofs that (c) implies (a) and (b) are similar to the proof of the
2 reﬂection principal for

reverse direction of part 1. Assume the uniform Π0
Π1

1 − CA0 ⊢ W QO(DT C(n)) for each n ∈ ω.

1 − CA0. By (∗ ∗ ∗), Π1

To prove (a), notice that Π1

1 − CA0 ⊢ P RW QO(DT C(n)) for n ∈ ω
(since it is provable in RCA0 and, hence, in Π1
1 −CA0 that W QO(DT C(n))
implies P RW QO(DT C(n))). Since P RW QO(DT C(n)) is equivalent to a
Π0
2 statement, this implies P RW QO(DT C(n)) holds for all n ∈ ω. By part
2 of the previous lemma, we have P RW QO(DT C).

The proof of (b) is similar. Notice that Π1

for n ∈ ω (since it is provable in WKL0 and, hence, in Π1
W QO(DT C(n)) implies LW QO(DT C(n))). Since LW QO(DT C(n)) is equiv-
alent to a Π0
By part 3 of the previous lemma, we have LW QO(DT C).

2 statement, this implies LW QO(DT C(n)) holds for all n ∈ ω.

1 − CA0 ⊢ LW QO(DT C(n))
1 − CA0 that

The previous theorem also holds when DT C is replaced by T C and
1 − CA0 is replaced by ACA0. One can use (∗) and (∗∗) with α = ε0 and

Π1

QED

26

replace DT C(n) by the collection of trees of height at most n in the proof
above, but a direct proof avoids many of the diﬃculties in earlier sections.
We remark that the proposition that T C is wqo under covering follows from
the bounded version of Kruskal’s Theorem.

Corollary 5.3 (RCA0) If Π1
nor LW QO(DT C) is provable in Π1
provable in Π1

1 − CA0.

1−CA0 is consistent then neither P RW QO(DT C)

1 −CA0 and, hence, W QO(DT C) is not

Proof. By part 2 of the theorem and G¨odel’s Incompleteness Theorem.
QED

Theorem 5.4 Assume 1 ≤ n < ω.

1. (ACA0) P RW QO(DT C(n + 1)) implies the uniform Π0

2 reﬂection

principal for IDn.

2. (ACA0) LW QO(DT C(n + 1)) implies the uniform Π0

2 reﬂection prin-

cipal for IDn.

Proof. We use the instance of (∗∗) with T = IDn and α = ψ0εΩn+1.

Part 1 follows from the fact that P RW QO(DT C(n+1)) implies P RW O(ψ0εΩn+1)

(part 5 of Theorem 4.4) and (∗∗).

Part 2 follows from the fact that LW QO(DT C(n+1)) implies P RW O(ψ0εΩn+1)

(part 3 of Theorem 4.6) and (∗∗).

QED

We expect that the converses of the parts of the previous theorem also

hold establishing the analogue of part (b) of Theorem 5.1.

Corollary 5.5 Assume 1 ≤ n < ω.
(RCA0) If IDn is consistent then neither P RW QO(DT C(n+1)) nor LW QO(DT C(n+
1)) is provable in IDn.

Proof. By the theorem and G¨odel’s Incompleteness Theorem.

QED

The results of this section concerning LW QO(Q) when Q is one of T C,
DT C(n + 1) or DT C open the door to questions in the area of phase tran-
sition as developed by A. Weiermann.

REFERENCES

1. W. Buchholz, A new system of proof-theoretic ordinal functions, An-

nals of Pure and Applied Logic 32 (1986), pp. 195-207.

27

2. T. Carlson, Generalizing Kruskal’s Theorem to pairs of cohabitating

trees, Archive for Mathematical Logic 55 (2016), pp. 37-48.

3. G. J¨ager, Theories for Admissible Sets: A Unifying Approach

to Proof Theory, Bibliopolis, Napoli, 1986, v + 167 pages.

4. J. B. Kruskal, Well-quasi-ordering, the tree theorem, and Vazsonyi’s
conjecture, Transactions of the American Mathematical Society 95
(1960), pp. 210-225.

5. R. Laver, Well-quasi-orderings and sets of ﬁnite sequences, Mathemat-
ical Proceedings of the Cambridge Philosophical Society 79 (1976), pp.
1-10.

6. M. Rathjen, M. Toppel and A. Weiermann, Ordinal analysis, proof-

theoretic reductions and conservativity, in preparation.

7. M. Rathjen and A. Weiermann, Proof-theoretic investigations on Kruskal’s

theorem, Annals of Pure and Applied Logic 60 (1993), pp. 49-88.

8. S. G. Simpson, Nonprovability of certain combinatorial properties of
ﬁnite trees, Harvey Friedman’s Research on the Foundations of
Mathematics, (L. A. Harrington, M. D. Morley, A. Scedrov, and S.
G. Simpson, editors), North-Holland, Amsterdam, 1985, pp. 87-117.

9. S. G. Simpson, Subsystems of Second Order Arithmetic, 2nd
Edition, Perspectives in Logic, Cambridge University Press, Cam-
bridge, GBR, 2010, xvi + 444 pages.

28

