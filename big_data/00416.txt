SCATTERING DIAGRAMS, HALL ALGEBRAS AND STABILITY

CONDITIONS

TOM BRIDGELAND

In memory of Kentaro Nagao

Abstract. To any quiver with relations we associate a consistent scattering diagram taking
values in the motivic Hall algebra of its category of representations. We show that the chamber
structure of this scattering diagram coincides with the natural chamber structure in an open
subset of the space of stability conditions on the associated triangulated category. In the three-
dimensional Calabi-Yau situation, when the relations arise from a potential, we can apply an
integration map to give a consistent scattering diagram taking values in a tropical vertex group.

6
1
0
2

 
r
a

M
1

 

 
 
]

.

G
A
h
t
a
m

[
 
 

1
v
6
1
4
0
0

.

3
0
6
1
:
v
i
X
r
a

1. Introduction

The concept of a scattering diagram has emerged from the work of Kontsevich and Soibelman
[15], and Gross and Siebert [9], on the Strominger-Yau-Zaslow approach to mirror symmetry.
Scattering diagrams, and the associated combinatorics of broken lines, have been used recently
by Gross, Hacking, Keel and Kontsevich [7] to settle several important conjectures about cluster
algebras. The aim of this paper is to explain some very general connections between spaces of
stability conditions and scattering diagrams. In particular, we explain the relationship between
the scattering diagram associated to an acyclic quiver Q, and the wall-and-chamber structure of
the space of stability conditions on the associated CY3 triangulated category. Our longer-term
goal is to better understand the geometrical relationship between cluster varieties and spaces of
stability conditions.

It turns out that to give a categorical description of the scattering diagram one does not need
to use triangulated categories. In fact, for the most part, we work in the abelian category of
representations of a ﬁxed quiver with relations (Q, I), and use King’s notion of θ–stability. Our
starting point is the observation that the walls in the scattering diagram correspond precsiely
to the values of the weight vector θ for which there exist nonzero θ–semistable representations.
To fully specify the scattering diagram we must ﬁrst ﬁx a graded Lie algebra. For the most
general and abstract form of our result this is deﬁned using the motivic Hall algebra [2, 10, 12, 16]
of the category of representations of (Q, I). In the Calabi-Yau threefold case, when the relations
arise from a potential, we can then apply an integration map to produce a scattering diagram
taking values in a much simpler Lie algebra spanned as a vector space by the dimension vectors
of non-zero representations of Q. We feel that the story becomes clearer by working ﬁrst in the
Hall algebra and using the CY3 assumption only when absolutely necessary.

1

2

TOM BRIDGELAND

Much of what we do here builds on earlier work of Reineke [19], Gross and Pandharipande
[8], Kontsevich and Soibelman [15, 16], Nagao [18], Keller [13] and Gross, Hacking, Keel and
Kontsevich [7]. The main novelties in our approach are the introduction of the Hall algebra
scattering diagram associated to an arbitrary quivers with relations, and the link with spaces
of stability conditions on triangulated categories explained in Section 7. Although simple, this
second point is likely to be crucial in unravelling the connection between spaces of stability
conditions and cluster varieties.

The rest of the Introduction contains a more detailed description of our results. For simplicity
we will only consider here the scattering diagrams associated to quivers with potential taking
values in the Lie algebra of functions on a Poisson torus, leaving the more general construction
of Hall algebra scattering diagrams to the body of the paper.

1.1. Scattering diagrams. We begin by giving a rough idea of the notion of a scattering
diagram:
for further details the reader is referred to Section 2. Fix a ﬁnitely-generated free
abelian group N and set

M = HomZ(N, Z).

Let us also ﬁx a Z-basis (e1, · · · , ek) of N and deﬁne N + ⊂ N to be the cone consisting of
positive integral combinations of these elements. Consider a graded Lie algebra g = Ln∈N + gn

and the pro-nilpotent Lie algebra

ˆg = Yn∈N +

gn

obtained by completing g with respect to the grading. There is an associated pro-unipotent
algebraic group ˆG with a bijective exponential map

exp : ˆg → ˆG

deﬁned formally by the Baker–Campbell–Hausdorﬀ formula.

Given this data, a scattering diagram D consists of a collection of codimension one closed

subsets

d ⊂ MR = M ⊗Z R

known as walls, together with associated elements ΦD(d) ∈ ˆG. Each wall is a convex cone in the
hyperplane n⊥ ⊂ MR deﬁned by some primitive vector n ∈ N +, and the corresponding element
ΦD(d) ∈ ˆG is then required to lie in the subgroup
exp(cid:0)Mk>0

gkn(cid:1) ⊂ ˆG.

The support supp(D) ⊂ MR of a scattering diagram D is deﬁned to be the union of its walls.

A scattering diagram D is called consistent if for any suﬃciently general path γ : [0, 1] → MR,

the ordered product

ΦD(γ) = Y ΦD(di)±1 ∈ ˆG,

SCATTERING DIAGRAMS, HALL ALGEBRAS AND STABILITY CONDITIONS

3

corresponding to the sequence of walls di crossed by γ, depends only on the endpoints of γ.
Two scattering diagrams D1 and D2 taking values in the same graded Lie algebra g are called
equivalent if one has

ΦD1(γ) = ΦD2(γ),

for any suﬃciently general path γ : [0, 1] → MR. An important fact proved by Kontsevich and
Soibelman [15] is that equivalence classes of consistent scattering diagrams are in bijection with
elements of the group ˆG. We explain the proof of this in Section 3.

1.2. Stability scattering diagram. Let Q be a quiver without vertex loops or oriented 2-
cycles. We call such quivers 2-acyclic. Let V (Q) denote the set of vertices of Q. We set
N = ZV (Q) and denote the canonical basis by (ei)i∈V (Q) ⊂ N . We take N + ⊂ N to be the cone
of positive linear combinations of the basis vectors ei, and set N ⊕ = N ∪ {0}.

The negative of the skew-symmetrized adjacency matrix of Q deﬁnes a skew-symmetric form

h−, −i : N × N → Z.

The monoid algebra C[N ⊕] then becomes a Poisson algebra with bracket

{xn1, xn2} = hn1, n2i · xn1+n2.

We deﬁne the Lie algebra g to be the subspace C[N +] equipped with this Poisson bracket.

Suppose now that our quiver Q is equipped with a ﬁnite potential W ∈ CQ. By deﬁnition W
is a ﬁnite linear combination of cycles in Q. Let J(Q, W ) be the corresponding Jacobi algebra,
and let

A = mod J(Q, W )

be its category of ﬁnite-dimensional left modules. Any object E ∈ A has an associated dimension
vector d(E) ∈ N ⊕. Given a vector θ ∈ MR we always write θ(E) in place of the more cumbersome
θ(d(E)). An object E ∈ A is said to be θ-semistable if

(i) θ(E) = 0,
(ii) every subobject A ⊂ E satisﬁes θ(A) 6 0.

King [14] proved that there is a quasi-projective moduli scheme M (d, θ) parameterizing θ–
stable representations of J(Q, W ) of dimension vector d. Joyce [11] showed how to deﬁne
associated rational numbers J(d, θ) ∈ Q which we call Joyce invariants. We will explain how
to deﬁne these invariants in Section 11: they are uniquely determined by their wall-crossing
properties, together with the formula

J(d, θ) = e(M (d, θ)) ∈ Z,

which holds when d ∈ N ⊕ is primitive and θ ∈ d⊥ is general. Here e(X) denotes the Euler
number of a complex variety X equipped with the classical topology.

Theorem 1.1. Let Q be a 2-acyclic quiver with ﬁnite potential W . There is a consistent
scattering diagram D taking values in the Lie algebra g such that

4

TOM BRIDGELAND

(a) the support of D consists of those maps θ ∈ MR for which there exist nonzero θ-semistable

objects in A,

(b) the wall-crossing automorphism at a general point of the support of D is

ΦD(d) = exp(cid:18) Xd∈θ⊥

J(d, θ) · xd(cid:19) ∈ ˆG.

We refer to the scattering diagram of Theorem 1.1 as the stability scattering diagram for the

pair (Q, W ). It is unique up to equivalence.

1.3. Examples: Kronecker quivers. As an illustration let us consider the case of a gener-
alized Kronecker quiver Q with two vertices V (Q) = {1, 2} and p > 1 arrows, all going from
vertex 1 to vertex 2. We necessarily have W = 0 and the category A is just the usual category of
ﬁnite-dimensional representations of Q. The resulting stability scattering diagrams are of course
well-known (see for example [8]).

The lattice N = Z⊕2 has a basis e1, e2 indexed by the vertices of Q. Taking dimension
vectors gives an identiﬁcation d : K0(A) → N , under which the class [Si] ∈ K0(A) of the simple
representation at the vertex i is mapped to the basis vector ei. The stability scattering diagram
then lives in MR = R2 with co-ordinates yi = θ(Si). For 1 6 p 6 3 this scattering diagram is
illustrated in Figure p.

The Lie algebra g is the ideal (x1, x2) ⊂ C[x1, x2] equipped with the restriction of the Poisson

bracket

hx1, x2i = −kx1x2.

Similarly ˆg = (x1, x2) ⊂ C[[x1, x2]]. Given a vector d ∈ N , deﬁne an automorphism of C[[x1, x2]]
preserving the ideal ˆg by the formula

Φd(xn) = xn · (1 + xd)hd,ni

Consider ﬁrst the case p = 1 when Q is the A2 quiver. This has ﬁnite representation type,

and the category A has three indecomposable objects: S1, S2 and an extension

0 −→ S2 −→ E −→ S1 −→ 0.

The scattering diagram has a wall for each of these objects. The object S1 is θ-stable precisely
if y1 = θ(S1) = 0: this is the vertical axis on the diagram. Similarly the object S2 is θ-stable on
the horizontal axis y2 = 0. The object E is θ-stable precisely if θ(E) = 0 and θ(S2) < 0: this is
the wall y1 + y2 = 0 and y2 < 0. The diagram is consistent because of the pentagon identity

Φ(0,1) ◦ Φ(1,0) = Φ(1,0) ◦ Φ(1,1) ◦ Φ(0,1).

The case p = 2 is the original Kronecker quiver. This is of tame representation type and has
inﬁnitely many indecomposable representations: unique indecomposables of dimension vector
(n, n − 1) and (n − 1, n) for each n > 1 and a P1 family of indecomposables for each dimension

SCATTERING DIAGRAMS, HALL ALGEBRAS AND STABILITY CONDITIONS

5

Φ(1,0)

Φ(0,1)

Φ(0,1)

Φ(1,1)

Φ(1,0)

Figure 1. The scattering diagram for the A2 quiver: there are three walls cor-
responding to the three indecomposable representations.

Φ(1,0)

Φ(0,1)

..

..

Figure 2. The scattering diagram for the Kronecker quiver: the walls corre-
spond to the dimension vectors of the indecomposable representations.

Φ(1,0)

Φ(0,1)

..

..

Figure 3. The scattering diagram for a generalized Kronecker quiver with 3
arrows: there is a region in which the walls are dense.

vector (n, n). Each of these dimension vectors deﬁnes a wall of the scattering diagram. The
basic relation in this case is

Φ(0,1) ◦ Φ(1,0) = Φ(1,0) ◦ Φ(2,1) ◦ Φ(3,2) ◦ · · · Φ−2

(1,1) ◦ · · · ◦ Φ(2,3) ◦ Φ(1,2) ◦ Φ(0,1).

Note that the right hand side makes perfect sense as an automorphism of C[[x1, x2]] because for
any k > 0 only ﬁnitely many terms act non-trivially on the quotient C[x1, x2]/(x1, x2)k.

6

TOM BRIDGELAND

For p > 3 the quiver Q is of wild representation type and the picture becomes much more
complicated. In particular, there is a region of the scattering diagram in which the walls are
dense.

1.4. Stability conditions and walls of type II. The scattering diagram we associate to a
quiver with potential is closely related to the wall-and-chamber structure on the space of stability
conditions of the corresponding CY3 triangulated category.

Let (Q, W ) be a 2-acyclic quiver with ﬁnite potential. For simplicity we shall assume that
the Jacobi algebra J(Q, W ) is ﬁnite-dimensional. Let D denote the bounded derived category of
the Ginzburg algebra of the pair (Q, W ). It is a CY3 triangulated category with a distinguished
bounded t-structure whose heart is equivalent to the abelian category A = mod J(Q, W ).

We let Stab(D) denote the space of stability conditions on D satisfying the support property.

It is a complex manifold. The forgetful map

Z : Stab(D) → MC

sending a stability condition (Z, P) to its central charge Z : N → C is a local homeomorphism.
There is a wall-and-chamber structure (although in general the walls are dense) such that the
heart of the stability condition is constant in a given chamber. These walls are usually known as
walls of type II to distinguish them from walls where objects of a given ﬁxed class can become
stable or unstable.

We consider the open subset C(A) ⊂ Stab(D) of nearby stability conditions: by deﬁnition
these are stability conditions for which all Harder-Narasimhan factors of objects of A have phases
in the open interval (−1, 1).

Theorem 1.2. The map Im Z : C(A) → MR is surjective. Moreover

(a) stability conditions in the same ﬁbre of Im Z have the same heart;
(c) the support of the stability scattering diagram is precisely the image of the union of all

type II walls in C(A) under the map Im Z.

Thus in each connected component of the complement of the closure of the support of the
stability scattering diagram there is a well-deﬁned heart in D. This heart is easily seen to be of
ﬁnite-length, and the classes of its simple objects form a basis of N = K0(D). Viewed in terms
of the original basis (ei), these are precisely the c-vectors of cluster theory. As pointed out by
Nagao [18], from this point of view the sign-coherence condition of c-vectors is immediate.

1.5. Framed quiver moduli. Instead of using the Joyce invariants J(d, θ) we can also de-
scribe the stability scattering diagram using Euler numbers of moduli spaces of framed quiver
representations. These spaces are generalizations of those studied by Engel and Reineke [5].

Fix a class m ∈ M + and form a new quiver Q⋆ extending Q, by adjoining a new vertex ⋆ and
adding m(ei) arrows from vertex ⋆ to vertex i. The potential W induces a potential on Q⋆ in

SCATTERING DIAGRAMS, HALL ALGEBRAS AND STABILITY CONDITIONS

7

the obvious way. We let

N ⋆ = ZV (Q⋆) = ZV (Q) ⊕ Z = N ⊕ Z, M ⋆ = HomZ(N ⋆, Z) = M ⊕ Z.

Given a dimension vector d ∈ N , we deﬁne d⋆ = (d, 1) ∈ N ⋆. Given θ ∈ MR and d ∈ N there is
a unique lift θ⋆ ∈ M ⋆

R such that θ⋆(d⋆) = 0.

There is a coarse moduli scheme M ss(d⋆, θ⋆) for θ⋆-semistable representations of the Jacobi
algebra J(Q⋆, W ⋆). This moduli scheme is ﬁne providing that θ does not lie on one of the
ﬁnitely many hyperplanes n⊥ for dimension vectors n ∈ N + of smaller total dimension than d.
For arbitrary θ ∈ MR we set

F (d, m, θ) := M ss(d⋆, (θ − ǫδ)⋆)

0 < ǫ ≪ 1.

When W = 0 and θ(d) = 0 this moduli space coincides with the smooth quiver moduli space of
[5]. We denote its Euler characteristic by K(d, m, θ).

Theorem 1.3. Let (Q, W ) be a 2-acyclic quiver with ﬁnite potential and D the corresponding
stability scattering diagram. Then the adjoint action of ΦD(d) ∈ G at a general point of the
support of D is

xn 7→ xn · Yi∈V (Q)

(cid:18) Xd∈θ⊥

K(d, e∗

i , θ) · xd(cid:19)hei,ni

,

where (e∗

i )i∈V (Q) ⊂ M denotes the dual basis to (ei)i∈V (Q) ⊂ N .

In the case when Q is acyclic (and hence W = 0) we can use Theorem 1.5 below to identify
the stability scattering diagram with a purely combinatorial object called the cluster scattering
diagram. Theorem 1.3 then essentially coincides with Reineke’s result [19, Theorem 2.1] as
stated in [7, Proposition 8.28].

1.6. Theta functions. The theta functions deﬁned by a scattering diagram are of crucial im-
portance in the applications to cluster varieties described in [7]. They are deﬁned abstractly in
terms of the wall-crossing automorphisms of the scattering diagram, but can also be interpreted
in terms of counts of combinatorial objects called broken lines.

In general, theta functions are indexed by a lattice element m ∈ M . In this paper we only

consider the functions ϑm(−) for elements lying in the positive cone

M + = {m ∈ M : m(n) > 0 for all n ∈ N +}.

To deﬁne these functions, consider the commutative Poisson algebra

B = C[N ⊕] ⊗C C[M ] = C[x1, · · · , xn][z±1

1 , · · · , z±1
n ],

{xn1, xn2} = hn1, n2i · xn1+n2,

{xn, zm} = m(n) · xnzm,

{zm1, zm2 } = 0.

8

TOM BRIDGELAND

The Lie algebra g = C[N ] is a Lie subalgebra of B so acts on it by derivations. Completing
everything with respect to the N ⊕-grading and exponentiating, we get an action of the group
ˆG by algebra automorphisms of

ˆB = C[[x1, · · · , xn]][z±1

1 , · · · z±1
n ].

Given a consistent scattering diagram D as above we can deﬁne for each m ∈ M + a theta

function

ϑm : MR \ supp(D) → ˆB,

ϑm(θ) = ΦD(γ)(zm),

where γ : [0, 1] → MR is any suﬃciently general path from an arbitrary point θ+ ∈ M +
R to
the point θ. The following result is closely related to Nagao’s proof of the Caldero-Chapoton
formula, although we do not explain the precise link here. More on this will appear in Man-Wai
Cheung’s thesis [4].

Theorem 1.4. Let (Q, W ) be a 2-acyclic quiver with ﬁnite potential and D the corresponding
stability scattering diagram. Then for m ∈ M + and θ ∈ MR \ supp(D) there is an identity

ϑm(θ) = zm · Xd∈N ⊕

K(d, m, θ) · xd.

We leave for future research the problem of ﬁnding a similar moduli-theoretic description of

the theta function ϑm(−) for general m ∈ M .

1.7. Cluster scattering diagram. Let Q be a 2-acyclic quiver and consider the Lie algebra
g = C[N +] as above. Let D be an arbitrary scattering diagram taking values in g. Any wall d
of D is contained in a hyperplace n⊥ for a unique primitive element n ∈ N +. We say that d is
incoming if it contains the vector

θn = h−, ni ∈ M.

Kontsevich and Soibelman proved that a consistent scattering diagram taking values in g is
uniquely speciﬁed up to equivalence by its set of incoming walls and their associated wall-
crossing automorphisms.

Consider the consistent scattering diagram in g whose only incoming walls are the hyperplanes

di = e⊥

i with associated elements

ΦD(di) = exp(cid:18)Xn>1

xnei

n2 (cid:19) ∈ ˆG.

It is this scattering diagram which plays a key role in [7]. We call it the the cluster scattering
diagram of Q, since the adjoint action of ΦD(di) is given by the cluster transformation

xn 7→ xn · (1 + xei)hei,ni.

SCATTERING DIAGRAMS, HALL ALGEBRAS AND STABILITY CONDITIONS

9

It seems an interesting question to determine for which quivers the cluster scattering diagram
can be realised as a stability scattering diagram for some appropriate choice of potential W .
One result we have along these lines is

Theorem 1.5. If Q is acyclic (and hence W = 0) then the stability scattering diagram for
(Q, W ) is equivalent to the cluster scattering diagram associated to Q.

Acknowledgements. I am very grateful to Arend Bayer, Mark Gross, Paul Hacking, Sean
Keel and Alastair King for useful conversations on the subject of this paper.

2. Scattering diagrams

In this section we introduce basic deﬁnitions concerning scattering diagrams. We have to use
a slightly diﬀerent framework to that of [7] because the assumption that the group associated to
a wall is abelian need not hold in the general context in which we shall be working. Unproved
assertions concerning convex rational polyhedral cones can be found in [6, Section 1.2].

2.1. Let N ∼= Z⊕n be a free abelian group of ﬁnite rank. Set

M = HomZ(N, Z), MR = M ⊗Z R.

Let N + ⊂ N be a subset for which there exists δ ∈ M with

N + = {n ∈ N : δ(n) > 0}.

Then N + is closed under addition, but 0 /∈ N . We use the notation N ⊕ = N + ∪ {0} for the
corresponding monoid. We also consider the dual cone

M +

R = {θ ∈ MR : θ(n) > 0 for all n ∈ N +},

and introduce notation

M + = M +

R ∩ M, M ⊕ = M + ∪ {0}, M −

R := −M +
R .

2.2. We ﬁx an N +-graded Lie algebra

(1)

g = Mn∈N +

gn,

[gn1, gn2] ⊂ gn1+n2.

We shall often consider the case when the Lie algebra g is nilpotent. There is then a correspond-
ing algebraic group G with a bijective map

(2)

exp : g → G.

If we use this map to identify G with g then the product on G is given by the Baker-Campbell-
Hausdorﬀ formula.

10

TOM BRIDGELAND

2.3. By a cone in MR we shall always mean a convex, rational, polyhedral cone, i.e. a subset
of the form

p

Xi=1

σ = (cid:8)

λimi : λi ∈ R>0(cid:9), m1, · · · , mp ∈ M.

Any such cone has a dual description as an intersection of half-spaces:

σ = (cid:8)θ ∈ MR : θ(ni) > 0 for 1 6 i 6 q(cid:9), n1, · · · , nq ∈ N.

The codimension of a cone is the codimension of the subspace of MR it spans. We refer to
codimension 1 cones as walls and denote them by the symbol d.

A face of a cone σ is a subset of the form

σ ∩ n⊥ = {θ ∈ σ : θ(n) = 0},

where n ∈ N satisﬁes θ(n) > 0 for all θ ∈ σ. Any face of a cone is itself a cone. Any intersection
of faces of a given cone is also a face.

2.4. A cone complex in MR is a ﬁnite collection S = {σi : i ∈ I} of cones, such that

(a) any face of a cone in S is also a cone in S,

(b) the intersection of any two cones in S is a face of each.

The support of a cone complex is the closed subset

supp(S) = [σ∈S

σ ⊂ MR.

2.5. Example. Fix a ﬁnite subset P ⊂ N + and consider partitions

P = P+ ⊔ P0 ⊔ P−

into disjoint subsets, with P0 non-empty. To each such partition there is a cone

σ(P+, P0, P−) = (cid:8)θ ∈ MR : θ(n) = 0 for n ∈ P0 and ± θ(n) > 0 for n ∈ P±(cid:9) ⊂ MR.

The set of cones obtained from all such partitions of P is a cone complex S(P ) in MR.

2.6.

If σ ⊂ MR is a cone then we deﬁne a Lie subalgebra

g(σ) = Mn∈N +∩σ⊥

gn ⊂ g,

where σ⊥ ⊂ N is the set of elements orthogonal to all elements of σ. Of course g(σ) depends
only on the subspace of MR spanned by σ.

Deﬁnition 2.1. A g-complex D = (S, φ) is a cone complex S in MR equipped with a choice
φ(d) ∈ g(d) for each wall d ∈ S.

SCATTERING DIAGRAMS, HALL ALGEBRAS AND STABILITY CONDITIONS

11

The essential support of a g-complex D = (S, φ) is the subset

suppess(D) = [d∈S:φ(d)6=0

d ⊂ supp(S).

2.7. Let D = (S, φ) be a g-complex. We say that a smooth path γ : [0, 1] → MR is D-generic
if

(a) the endpoints γ(0) and γ(1) do not lie in the essential support of D,

(b) γ does not meet any cones of S of codimension > 1,

(c) all intersections of γ with walls of S are transversal.

It follows that there is a ﬁnite set of points 0 < t1 < · · · < tk < 1 for which γ(ti) lies in the
essential support of D, and at each of these points ti there is a unique wall di ∈ S such that
γ(ti) ∈ di.

2.8. Assume that the Lie algebra g is nilpotent. Given a g-complex D = (S, φ) and a wall
d ∈ S we can then deﬁne the element

ΦD(d) = exp φ(d) ∈ G.

Given any D-generic path γ : [0, 1] → MR we can form the product

ΦD(γ) = ΦD(dk)ǫk · ΦD(dk−1)ǫk−1 · · · ΦD(d2)ǫ2 · ΦD(d1)ǫ1 ∈ G,

where ǫi ∈ {±1} is the negative of the sign of the derivative of γ(t)(n) at t = ti.

Deﬁnition 2.2.

(a) We call two g-complexes D1 and D2 equivalent if, for any path γ : [0, 1] →

MR which is both D1-generic and D2-generic, we have

ΦD1(γ) = ΦD2(γ).

(b) A g-complex D is called consistent if for any two D-generic paths γi with the same

endpoints we have

ΦD(γ1) = ΦD(γ2).

2.9. Return now to the case of an arbitrary N +-graded Lie algebra g. For each k > 0 there is
an ideal

g>k = Mδ(n)>k

gn,

and a nilpotent N +-graded Lie algebra g6k = g/g>k. We denote the corresponding unipotent
algebraic group by G6k. For i < j there are canonical homomorphisms

(3)

πji : g6j → g6i,

πji : G6j → G6i.

We also consider the pro-nilpotent Lie algebra and the corresponding pro-unipotent algebraic
group

ˆg = lim
←−

g6k,

ˆG = lim
←−

G6k.

12

TOM BRIDGELAND

Taking the limits of the maps (2) gives a bijection exp : ˆg → ˆG.

In general, if f : g → h is a homomorphism of N +-graded Lie algebras and D = (S, φ) is

2.10.
a g-complex, then there is an induced h-complex

Applying this to the maps (3) we can make the following deﬁnition.

f∗(D) = (S, f ◦ φ).

Deﬁnition 2.3. A ˆg-complex D is a sequence of g6k-complexes Dk for k > 1 such that for any
i < j the g6i complexes πji

∗ (Dj) and Di are equivalent.

Let D = (Dk)k>1 be a ˆg-complex. We set

supp(D) = [k>1

supp(Dk),

suppess(D) = [k>1

suppess(Dk).

We say that D is consistent if each g6k-complex Dk is consistent. We say that D is equivalent to
another ˆg-complex D′ = (D′
k are equivalent.

k)k>1 if for all k > 1 the g6k-complexes Dk and D′

2.11. Scattering diagrams are deﬁned in [7] under the assumption that for any n ∈ N + the
sub-Lie algebra

ghni = Mk>0

gkn ⊂ g

is abelian. In the next section we shall prove that when this assumption holds there is a natural
bijection between equivalence classes of scattering diagrams in the sense of [7] and equivalence
classes of ˆg-complexes as deﬁned above. In the rest of the paper we shall therefore use the terms
ˆg-complex and scattering diagram interchangeably.

3. Reconstruction result

In this section we reproduce Kontsevich and Soibelman’s proof that scattering diagrams in g
up to equivalence correspond to elements of the group G. Although our framework is slightly
diﬀerent to that of [16] or [7], there is nothing new here, and all non-trivial statements (and
their proofs) are due to Kontsevich and Soibelman.

3.1. Continuing with the notation of the last section, let us suppose for the moment that the
Lie algebra g is nilpotent. Suppose that D = (S, φ) is a consistent g-complex. If θ1, θ2 ∈ MR lie
outside the essential support of D then there is a well-deﬁned element

ΦD(θ1, θ2) ∈ G

obtained as ΦD(γ) for any path γ from θ1 to θ2. Note that we always have

suppess(D) ∩ M ±

R = ∅.

SCATTERING DIAGRAMS, HALL ALGEBRAS AND STABILITY CONDITIONS

13

Indeed, if d ∈ S is a wall then φ(d) 6= 0 implies that d ⊂ n⊥ for some n ∈ N +, but then
M ±

R ∩ d = ∅. Thus any g-complex D has a well-deﬁned element

ΦD = ΦD(θ+, θ−) ∈ G

obtained as ΦD(γ) for a D-generic path γ from a point θ+ ∈ M +

R to a point θ− ∈ M −
R .

3.2. Given θ ∈ MR we can deﬁne Lie subalgebras of g

g±(θ) = Mn∈N +:±θ(n)>0

gn

and

g0(θ) = Mn∈N +:θ(n)=0

gn.

There is then a decomposition

(4)

g = g−(θ) ⊕ g0(θ) ⊕ g+(θ).

In the case that g is nilpotent we can consider the corresponding unipotent group G, and
subgroups

G⋆(θ) := exp g⋆(θ) ⊂ G,

⋆ ∈ {+, −, 0}.

The decomposition (4) implies that every element g ∈ G has a unique decomposition

(5)

g = g+ · g0 · g− with g± ∈ G±(θ) and g0 ∈ G0(θ).

This deﬁnes projection maps (not group homomorphisms) Πθ

⋆ : G → G⋆(θ).

3.3. The following result shows that we can reconstruct all the the wall-crossing automorphisms
of a g-complex from the single element ΦD.

Lemma 3.1. Assume that g is nilpotent and let D = (S, φ) be a g-complex. Then for any wall
d ∈ S and any θ in the relative interior of d we have the relation

ΦD(d) = Πθ

0 (ΦD).

Proof. We can ﬁnd an S-generic straight-line path γ : [0, 1] → MR connecting M +
intersecting d. Let

R to M −

R and

be the points for which θi = γ(ti) lies on some wall di. In particular d = dp for some unique
1 6 p 6 k. We set θ = θp ∈ d. The deﬁnition of the path-ordered product gives

0 < t1 < · · · < tk < 1

ΦD = ΦD(dk) · · · ΦD(dp) · · · ΦD(d1).

For each wall di there is a unique primitive element ni ∈ N + such that di ⊂ n⊥
i . For i > p
the value of θ(ni) lies between γ(0)(ni) > 0 and θi(ni) = 0, and hence g(di) ⊂ g+(θ). Similarly
when i < p we have g(di) ⊂ g−(θ). Thus we conclude that

ΦD(di) ∈ 


G+(θ)
G0(θ)
G−(θ)

if i > p
if i = p
if i < p.

14

TOM BRIDGELAND

The claim then follows from the uniqueness of the decomposition (5).

(cid:3)

Note that it follows that the equivalence class of a g-complex D is determined by the element

ΦD ∈ G.

3.4. Let us assume that there is a ﬁnite subset P ⊂ N + such that

(6)

g = Mn∈P

gn.

This implies in particular that g is nilpotent. Consider the corresponding cone complex S =
S(P ) described in Section 2.5. If d ∈ S is a wall then for any point θ in the relative interior
of d the decomposition (4) is constant, and moreover satisﬁes g0(θ) = g(d). Given an element
g ∈ G we can therefore deﬁne a g-complex D(g) = (S, φ) by taking

ΦD(g)(d) = Πθ

0 (g),

where θ ∈ d is any point in the relative interior of d.

Lemma 3.2. The g-complex D(g) is consistent and satisﬁes ΦD(g) = g.

Proof. The claim follows immediately from the statement that if γ : [0, 1] → MR is any D(g)-
generic path from θ1 to θ2 then

ΦD(g)(γ) = Πθ2

+ (g)−1 · Πθ1

+ (g) = Πθ2

− (g) · Πθ1

− (g)−1.

To prove this note that it is enough to check it for a path crossing a single wall d. On the wall
we have a decomposition g = g+ · g0 · g− as in (5) with

g0 = ΦD(g)(d) = ΦD(g)(γ).

On the two sides of the wall g0 becomes an element of either G+(θ) or G−(θ). Thus the
decompositions (5) on the two sides of the wall have just two terms, and are (g+ · g0) · g− and
g+ · (g0 · g−) respectively. Comparing these gives the result.
(cid:3)

3.5. The results of the last two sections together give

Proposition 3.3. Suppose that g has a ﬁnite decomposition (6). Then the map D 7→ ΦD
deﬁnes a bijection between equivalence classes of consistent g-complexes and elements of the
group G.
(cid:3)

Consider now a general N +-graded Lie algebra g, and let D = (Dk)k>1 be a ˆg-complex.
Given two points θ1, θ2 ∈ MR lying outside the essential support of D, the associated elements
ΦDk(θ1, θ2) ∈ G6k are easily checked to be compatible with the group homomorphisms πi,j.
Taking the limit therefore gives an associated element

ΦD(θ1, θ2) ∈ ˆG.

SCATTERING DIAGRAMS, HALL ALGEBRAS AND STABILITY CONDITIONS

15

R we get a well-deﬁned element ΦD ∈ ˆG. Since an
In particular, taking θ1 ∈ M +
equivalence class of ˆg-complexes is nothing but a compatible sequence of equivalence classes of
G6k-complexes, we immediately have

R and θ2 ∈ M −

Proposition 3.4. The map D 7→ ΦD deﬁnes a bijection between equivalence classes of consistent
ˆg-complexes and elements of the group ˆG.

(cid:3)

It follows that ˆg-complexes up to equivalence coincide with scattering diagrams up to equiv-

alence as deﬁned in [7].

4. Representations of quivers

This section contains basic deﬁnitions and results concerning representations of quivers with
relations. These are all of course well-known but it is not so easy to ﬁnd good references for the
material on moduli stacks.

4.1. A quiver is a ﬁnite oriented graph speciﬁed by sets (V (Q), A(Q)) of vertices and arrows
respectively, and source and target maps s, t : A(Q) → V (Q). We write CQ for the path algebra
of Q, and CQ>k ⊂ CQ for the subspace spanned by paths of length > k. For our purposes a
quiver with relations is a pair (Q, I), where Q is a quiver, and I ⊂ CQ>2 is a two-sided ideal
spanned by linear combinations of paths of length at least 2. We denote by

A = rep(Q, I) = mod CQ/I

the abelian category of ﬁnite-dimensional representations of the pair (Q, I), or equivalently
ﬁnite-dimensional left modules for the quotient algebra CQ/I. There is a group homomorphism

sending a representation to its dimension vector. We set

d : K0(A) → ZV (Q)

N = ZV (Q), M = HomZ(N, Z).

We denote by (ei)i∈V (Q) ⊂ N the canonical basis indexed by the vertices of Q. We deﬁne δ ∈ M
to be the element for which δ(E) = dimC(E) for any representation E ∈ A. There is a positive
cone

N + = {n ∈ N : δ(n) > 0} ⊂ N

which is spanned by the basis elements ei, and consists of dimension vectors of nonzero objects
of A. We use the notation M +, MR, N ⊕ etc as in Section 2.1.

4.2. There is an algebraic stack M parameterizing all objects of the category A. It is deﬁned
formally as a ﬁbered category over the category of schemes as follows. The objects of M over a
scheme S are pairs (E, ρ) where E is a locally-free OS-module of ﬁnite rank, and

ρ : CQ/I → EndS(E)

16

TOM BRIDGELAND

is an algebra homomorphism. If (E ′, ρ′) is another object of M lying over a scheme S′, then a
morphism

(E ′, ρ′) → (E, ρ)

in M lying over a morphism of schemes f : S′ → S is an isomorphism of OS-modules θ : f ∗(E) →
E ′ which intertwines the maps ρ and ρ′. Here we have taken the usual step of choosing, for each
morphism of schemes, a pullback of every coherent sheaf on its target. The intertwining condition
is that for any a ∈ CQ/I there is a commuting diagram

f ∗(E)

f ∗(ρ(a))
−−−−−→ f ∗(E)

θy

E ′

θy

ρ′(a)
−−−−→ E ′

The stack axioms follow easily from the corresponding statements for the stack of locally-free
sheaves. We prove that M is algebraic in the next subsection.

4.3. The following statement is extremely well-known, but one does not often ﬁnd a treatment
in the language of stacks, so we brieﬂy indicate a proof.

Lemma 4.1. The stack M splits as a disjoint union

(7)

M = ad∈N ⊕

Md

of open and closed substacks Md parameterizing representations of a ﬁxed dimension vector.
Each of these substacks can be presented as a quotient of an aﬃne variety by an aﬃne algebraic
group.

Proof. The usual equivalence of categories between modules for the algebra CQ/I and repre-
sentations of (Q, I) extends to show that the groupoid M(S) can be equivalently described in
terms of representations of Q in locally-free OS-modules. Thus an S-valued point of M can
be taken to consist of locally-free OS-modules Vi for each vertex i ∈ V (Q) and morphisms
ρ(a) : Vs(a) → Vt(a) for each arrow a ∈ A(Q), such that the relations in I are satisﬁed. The ﬁrst
statement then follows from the fact that the rank of each sheaf Vi is locally constant on S.

Let us now ﬁx a dimension vector d ∈ N ⊕ and deﬁne the algebraic group

GL(d) = Yi∈V (Q)

GL(di).

Consider an S-valued point of the substack Md. Taking the frame bundles associated to the
vector bundles Vi deﬁnes a principal GL(d) bundle π : P (S) → S. Pulling back the represen-
tation (Vi, ρa) to P (S), the bundles Vi become canonically trivialised and the representation

SCATTERING DIAGRAMS, HALL ALGEBRAS AND STABILITY CONDITIONS

17

corresponds to a map from P (S) to the closed subvariety

Rep(d) ⊂ Ya∈A(Q)

HomC(Cds(a), Cdt(a))

cut out by the given relations. In this way one sees that

Md

∼= [Rep(d)/ GL(d)],

where GL(d) acts on Rep(d) by gauge transformations

(gi)i∈V (Q) · (φa)a∈A(Q) = (g−1

t(a) · φa · gs(a))a∈A(Q).

We leave the reader to ﬁll in the details of this argument.

(cid:3)

It follows in particular from this that M is an Artin stack, locally of ﬁnite-type over C and

with aﬃne diagonal.

4.4. We shall also need the stack M(2) of short exact sequences in A. The objects of M(2)
over a scheme S consist of objects (Ei, ρi) of M(S) for i = 1, 2, 3, together with morphisms α, β
of OS-modules which intertwine the maps ρi, and form a short exact sequence

(8)

0 −→ E1

α−→ E2

β

−→ E3 −→ 0

of OS-modules. Given another such object deﬁned by objects (E ′
i) of M(S′) and morphisms
α′, β′, a morphism between them lying over f : S′ → S is given by a commuting diagram of
morphisms of OS′-modules

i, ρ′

0 −−−−→ f ∗(E1)

f ∗(α)
−−−−→ f ∗(E2)

f ∗(β)
−−−−→ f ∗(E3) −−−−→ 0

θ1y

θ2y

θ3y

0 −−−−→ E ′
1

3 −−−−→ 0
in which vertical arrows are isomorphisms intertwining the actions of ρi, ρ′
axioms follow easily from those for M.

−−−−→ E ′

α′

−−−−→ E ′
2

β′

i as before. The stack

4.5. There is a diagram of morphisms of stacks

(9)

M(2)

b−−−−→ M

(a1,a2)yM × M

where a1, a2 and b send a short exact sequence (8) to the objects E1, E3 and E2 respectively.

Lemma 4.2.

(a) The morphism (a1, a2) is of ﬁnite type.

(b) The morphism b is representable and proper.

18

TOM BRIDGELAND

Proof. We prove (b) ﬁrst. Suppose f : S → M is a morphism with S a scheme. It corresponds
to a pair (E, ρ) as before. The objects of the ﬁbre product stack S ×M M(2) over a scheme
f : T → S are short exact sequences of locally-free OT -modules
0 −→ E1 −→ f ∗(E) −→ E3 −→ 0

such that f ∗(ρ(a))(E1) ⊂ E1 for all a ∈ CQ/I. This is represented by a closed subset of the
relative Grassmannian of the sheaf E over S. To prove (a) note that

(a1, a2)−1(Md1 × Md2) = b−1(Md1+d2).

This stack is of ﬁnite type since both the stack Md1+d2 and the morphism b are. It follows that
the morphism (a1, a2) is also of ﬁnite type.
(cid:3)

Lemma 4.2 (b) implies that M(2) is an algebraic stack, since pulling back an atlas for M
gives an atlas for M(2). Note also that the morphism (a1, a2) is not representable. The ﬁbre
over a point of M × M corresponding to a pair of representations (E1, E3) is the quotient stack

[Ext1(E3, E1)/ Hom(E3, E1)],

with the action of the vector space HomA(E3, E1) being the trivial one. See [2, Proposition 6.2]
for a proof of this fact (which we shall not explicitly use in what follows).

5. Motivic Hall algebras

To construct a suitable Lie algebra for our scattering diagram we consider motivic Hall al-
gebras as introduced by Joyce [10]. The construction we need is reviewed in detail in [2] in
the case of categories of coherent sheaves on smooth projective varieties, and only very minor
modiﬁcations are required for the case of categories of representations of quivers with relations.
Motivic Hall algebras of quiver representations were also used by Nagao [18].

5.1. Let M be an Artin stack, locally of ﬁnite type over C and with aﬃne stabilizers. There
is a 2-category of algebraic stacks over M. Let St/M denote the full subcategory consisting of
objects

(10)

f : X → M

for which X is of ﬁnite type over C and has aﬃne stabilizers.

Deﬁnition 5.1. Let K(St/M) be the free abelian group with basis given by isomorphism classes
of objects of St/M, modulo the subgroup spanned by relations

(a) for every object (10), and every closed substack Y ⊂ X with complementary open

substack U = X \ Y ⊂ M, a relation

[X

f

−→ M] = [Y

f |Y−→ M] + [U

f |U−→ M].

SCATTERING DIAGRAMS, HALL ALGEBRAS AND STABILITY CONDITIONS

19

(b) for every object (10), and every pair of morphisms

h1 : Y1 → X,

h2 : Y2 → X

which are locally-trivial ﬁbrations in the Zariski topology with the same ﬁbres, a relation

[Y1

g◦h1−→ S] = [Y2

g◦h2−→ S].

For (b) we recall that a morphism of stacks is said to be a locally-trivial ﬁbration in the Zariski
topology if it is representable, and if any pullback to a scheme is a locally-trivial ﬁbration of
schemes in the Zariski topology.

5.2. We shall frequently use the following simple observation. Suppose we have a commutative
diagram

X1

g

/ X2

M

✺✺✺✺✺✺

f1

✠✠✠✠✠✠

f2

with X1, X2 algebraic tacks of ﬁnite type over C with aﬃne stabilizers as above. Suppose also
that the morphism of stacks g induces an equivalence at the level of C-valued points. Then we
have an equality

[X1

f1−→ S] = [X2

f2−→ S],

in the group K(St /M). See [2, Sections 2–3] for more details. The basic point is that given any
such morphism g, one can stratify the stacks Xi by locally-closed substacks so that g becomes
an isomorphism on each substack.

5.3. The group K(St/M) has the structure of a K(St/C)-module, deﬁned by setting

[X] · [Y

f

−→ M] = [X × Y

f ◦π2−→ M]

and extending linearly. There is a unique ring homomorphism

Υ : K(St/C) −→ C(t)

which takes the class of a smooth projective variety over C (considered as a representable stack)
to the Poincar´e polynomial

Υ([X]) =

2d

Xi=0

dimC H i(Xan, C) · ti ∈ C[q].

Here Xan denotes X considered as a compact complex manifold, and H i(Xan, C) denotes singular
cohomology. We can therefore consider

(11)

KΥ(St /M ) = K(St /M) ⊗K(St /C) C(t).


/

20

TOM BRIDGELAND

More concretely, this is the C(t) vector space with basis the isomorphism classes of objects (10)
as above, modulo the relations (a)–(b) of Deﬁnition 5.1 and the extra relations

[X × Y

f ◦π2−→ M] = Υ([X]) · [Y

f

−→ M]

The resulting vector space is what Joyce [10, Section 4.3] denotes SF(M, Υ, C(t)).

5.4. The abelian group K(St /M) becomes a ring when equipped with the convolution product
coming from the diagram (9). Explicitly this product is given by the rule

[X1

f1−→ M] ∗ [X2

f2−→ M] = [Z b◦h−→ M],

where h is deﬁned by the following Cartesian square

Z

h−−−−→ M(2)

b−−−−→ M

y

X1 × X2

(a1,a2)

y

f1×f2−−−−→ M × M

We refer the reader to [2, Section 4] for more details. The convolution product is easily seen to
be K(St /C)-linear and so also deﬁnes an algebra structure on the C(t)-vector space KΥ(St /M).
We denote the resulting C(t)-algebra by H(Q, I).

5.5. Let us consider the general situation of a graded algebra

A = Mn∈N ⊕

An,

An1 · An2 ⊂ An1+n2.

For each k > 1 we can consider the ideal A>k = ⊕δ(n)>k An,, and the corresponding quotient
A6k = A/A>k. Taking the limit of the obvious maps gives the algebra

ˆA = lim
←−

A6k.

The subspace g = A>0 ⊂ A is a Lie algebra under commutator bracket. The corresponding
completion ˆg = ˆA>0 is a pro-nilpotent Lie algebra under commutator bracket. As usual, we
denote the corresponding pro-unipotent group by ˆG.

5.6. Continuing the notation from Section 5.5, we recall the following standard facts.

(i) There is an embedding

φ : ˆG ֒→ ˆA

which sends an element exp(x) ∈ ˆG to the element of ˆA obtained by taking the expo-
nential of x ∈ ˆg inside the algebra ˆA. The Baker-Campbell-Hausdorﬀ formula ensures
that

φ(g1 · g2) = φ(g1) · φ(g2).

SCATTERING DIAGRAMS, HALL ALGEBRAS AND STABILITY CONDITIONS

21

Thus we can identify ˆG with the subset 1 + ˆA>0 ⊂ ˆA.

(ii) Exponentiating the adjoint action of ˆg on ˆA gives an action of ˆG by algebra automor-

phisms on ˆA. Under the embedding φ, this corresponds to conjugation:

exp(x)(a) := exp [x, −](a) = φ(x) · a · φ(x)−1.

We now apply these general ideas to the Hall algebra H(Q, I).

5.7. The decomposition (7) induces a grading

(12)

H(Q, I) = Md∈N ⊕

H(Q, I)d.

where H(Q, I)d = KΥ(St /Md). We deﬁne the Lie subalgebra

gHall := H(Q, I)>0.

Note that M0 = Spec(C) is a point, and the identity of the algebra H(Q, I) is represented

by the symbol

Applying the general statements of the last two subsections gives a completed algebra ˆH(Q, I)

1 = (cid:2)M0 ⊂ M(cid:3).

with a Lie subalgebra

ˆgHall := ˆH(Q, I)>0 ⊂ ˆH(Q, I),

and a corresponding pro-unipotent group ˆGHall, with an identiﬁcation

(13)

ˆGHall

∼= 1 + ˆH(Q, I)>0 ⊂ ˆH(Q, I).

5.8. Suppose given a morphism of stacks

f : X → M

such that X has aﬃne stabilizers but is not necessarily of ﬁnite-type over C. Suppose instead
that for any d ∈ N ⊕, the closed and open substack Xd := f −1(Md) is of ﬁnite type. Then the
induced morphisms

f6k : [δ(d)6k

Xd −→ M

deﬁne compatible elements of the truncations H(Q, I)6k, and so we obtain an element of the
completed Hall algebra, which we abusively denote

[X

f
−→ M] ∈ ˆH(Q, I).

This element can be identiﬁed via (13) with an element of the group ˆGHall precisely if the map
f0 : X0 → M0 is an isomorphism.

22

TOM BRIDGELAND

5.9. Recall that H(Q, I) is an algebra over the ﬁeld C(t). Let

(14)

Hreg(Q, I) ⊂ H(Q, I)

denote the C[t, t−1]–submodule generated by symbols (10) with X a variety. Note that by
deﬁnition Hreg(Q, I) is a free C[t, t−1]-module.

Theorem 5.2. The subset (14) is closed under the convolution product on H(Q, I) and is
therefore a C[t, t−1]-algebra. Moreover the quotient

is commutative.

Hsc(Q, I) = Hreg(Q, I)(cid:14) (t2 − 1)Hreg(Q, I)

Proof. This is proved exactly as in [2, Theorem 5.1]. Note that the Poincar´e polynomial of the
aﬃne line is Υ(L) = t2.

(cid:3)

This result has two closely related consequences:

(i) The Poisson bracket on H(Q, I) deﬁned by

(15)

{a, b} = (t2 − 1)−1 · [a, b].

induces a Poisson bracket on the subring Hreg(Q, I).

(ii) The subspace

(16)

greg := (t2 − 1)−1 · Hreg(Q, I)>0 ⊂ gHall = H(Q, I)>0

is a Lie subalgebra.

Note that Hreg(Q, I)>0 viewed as a Lie algebra via its Poisson bracket is isomorphic to the

Lie algebra greg via the map x 7→ (t2 − 1)−1 · x.

5.10. Continuing with the notation of the last section, we can pass to completions and deﬁne
a Lie algebra

ˆgreg := (t2 − 1)−1 · ˆHreg(Q, I)>0 ⊂ ˆH(Q, I)>0.

The corresponding pro-unipotent group ˆGreg ⊂ ˆGHall has an identiﬁcation
ˆGreg = exp(cid:0)(t2 − 1)−1 · ˆHreg(Q, I)>0(cid:1) ⊂ 1 + ˆH(Q, I)>0.

In Section 11 we shall make use of the following deep theorem of Joyce.

(17)

Theorem 5.3 (Joyce). For any θ ∈ MR the element of ˆG ⊂ ˆH(Q, I) deﬁned by the inclusion
of the open substack of θ-semistable objects

corresponds via the identiﬁcation (17) to an element 1ss(θ) ∈ ˆGreg.

The reader can consult [3, Section 6.3] for precise references for this result.

Mss(θ) ⊂ M

SCATTERING DIAGRAMS, HALL ALGEBRAS AND STABILITY CONDITIONS

23

6. The Hall algebra scattering diagram

In this section we construct a canonical scattering diagram associated to the category of ﬁnite-
dimensional representations of a quiver with relations. It takes values in the Lie algebra gHall
deﬁned in the last section. The walls correspond to choices of weights θ ∈ MR for which there
exist nonzero θ-semistable representations.

6.1. Let (Q, I) be a quiver with relations as in Section 4.1 and take notation as deﬁned there.
The following deﬁnition is due to King [14].

Deﬁnition 6.1. Given θ ∈ MR, an object E ∈ A is said to be θ-semistable if

(i) θ(E) = 0,
(ii) every subobject A ⊂ E satisﬁes θ(A) 6 0.

For k > 1 we deﬁne A6k ⊂ A to be the full subcategory consisting of representations of total

dimension 6 k. We deﬁne a subset

Wk = (cid:8)θ ∈ MR : there exist θ-semistable objects 0 6= E ∈ A6k(cid:9) ⊂ MR.

The following result implies in particular that Wk ⊂ MR is closed.

Lemma 6.2. There is a cone complex Sk in MR such that

Wk = supp(Sk).

Proof. First consider the ﬁnite subset

P = {n ∈ N + : δ(n) 6 k} ⊂ N +,

and the corresponding cone complex S(P ) of Example 2.5. Note that in the relative interior
of each cone of S(P ) the question of the semistability of any given object of A6k is constant.
Thus we can deﬁne a subcomplex consisting of those cones which support nonzero semistable
objects in A6k. The support of this subcomplex is precisely Wk.
(cid:3)

6.2. Given θ ∈ MR we deﬁne a stability function Z : K0(A) → C by the formula

Z(E) = −θ(E) + iδ(E).

Note that if 0 6= E ∈ A then Z(E) ∈ H lies in the upper half-plane, and we can deﬁne the phase
of E by

φ(E) = (1/π) arg Z(E).

We then deﬁne an object 0 6= E ∈ A to be Z-semistable if every nonzero subobject A ⊂ E
satisﬁes φ(A) 6 φ(E). The usual argument shows that if E1, E2 ∈ A are Z-semistable with
phases φ1, φ2 respectively then

(18)

φ1 > φ2 =⇒ HomA(E1, E2) = 0.

Note that a nonzero object E ∈ A is θ-semistable precisely if it is Z-semistable with phase 1/2.

24

TOM BRIDGELAND

It is an elementary fact that every nonzero object E ∈ A has a unique Harder-Narasimhan

ﬁltration

whose factors Fi = Ei/Ei−1 are Z-semistable with descending phase:

0 = E0 ⊂ E1 ⊂ · · · ⊂ Em−1 ⊂ Em = E,

φ(F1) > φ(F2) > · · · > φ(Fm).

For any interval I ⊂ (0, 1) we deﬁne P(I) ⊂ A to be the full additive subcategory consisting of
objects all of whose Harder-Narasimhan factors Fi have phases in I. In particular, if φ ∈ (0, 1)
then P(φ) = P({φ}) denotes the subcategory of Z-semistable objects of phase φ.

6.3. Fix an element θ ∈ MR and consider the stability function Z as in the last section.

Lemma 6.3. For any interval I ⊂ (0, 1) there is an open substack MI (θ) ⊂ M parameterising
representations of (Q, I) lying in the full subcategory P(I) ⊂ A.

Proof. It is enough to prove the same statement for the stack Md parameterising representations
of a ﬁxed dimension vector d ∈ N ⊕. There are then only ﬁnitely many elements n ∈ N ⊕
occurring as possible dimension vectors of subobjects. Thus it is enough to know that for any
n ∈ N ⊕ there is an open substack of Md parameterizing representations having no subobject
of type n. Consider the diagram (9) and the closed substack a−1
1 (Mn). The result then follows
from the properness of the morphism b.
(cid:3)

Note that the zero object of A lies in the category P(I) for any interval I. Thus MI (θ)∩M0 =

M0. As in Section 5.8, the substack of Lemma 6.3 deﬁnes an element

1I (θ) = [MI (θ) ⊂ M] ∈ ˆGHall ⊂ ˆH(Q, I).

A particular case of this corresponding to the interval I = { 1

2 } is

1ss(θ) = [Mss(θ) ⊂ M] ∈ ˆGHall.

In the case of the interval I = (0, 1) we use the notation

1A = 1(0,1) = [M id−→ M] ∈ ˆGHall.

This should not be confused with the identity element 1 = [M0 ⊂ M].

6.4. The existence and uniqueness of the Harder-Narasimhan ﬁltration gives rise to an im-
portant identity in the Hall algebra H(Q, I). It is this identity that is responsible for the link
between stability conditions and scattering diagrams.

Proposition 6.4. Fix θ ∈ MR and take an interval I ⊂ (0, 1) which is a disjoint union of
intervals I1, I2. Suppose that I1 > I2 in the obvious sense. Then there is an identity

1I (θ) = 1I1(θ) ∗ 1I2(θ) ∈ ˆGHall.

SCATTERING DIAGRAMS, HALL ALGEBRAS AND STABILITY CONDITIONS

25

Proof. The result follows immediately from the statement that for any interval I ⊂ (0, 1) there
is an identity

(19)

1I (θ) = Yφ∈I

1φ(θ) ∈ ˆH(Q, I),

where the product over phases is taken in descending order. Note that the right hand side of
(19) makes good sense because for a ﬁxed k > 1 there are only ﬁnitely many φ ∈ I for which
there exists a nonzero semistable object in A6k of phase φ. Thus when projected to H(Q, I)6k,
all but ﬁnitely many factors are the identity.

To prove (19) let us indeed project it to H(Q, I)6k, where it takes the form

(20)

1I (θ) = 1φ1(θ) ∗ 1φ2(θ) ∗ · · · 1φr (θ),

for some ﬁnite sequence of possible phases φ1 > φ2 > · · · > φr. Recall that the r-fold product in
the Hall algebra is given by convolution using the stack M(r) parameterizing objects of rep(Q, I)
equipped with an r-step ﬁltration (see [2, Lemma 4.4]). The right hand side of (20) is therefore
represented by the open substack N ⊂ M(r) consisting of ﬁltered objects which when pulled
back to any C-valued point give a ﬁltration by semistable objects of the given phases φi. Since
any object in P(I)∩A6k has a unique such ﬁltration (the Harder-Narasimhan ﬁltration extended
to length r by inserting zero factors), it follows that the obvious map of stacks

N ∩ b−1(M6k) → MI (θ) ∩ M6k

forgetting the ﬁltrations induces an equivalence on C-valued points. The identity then follows
from the remark of Section 5.2.
(cid:3)

6.5. The following result gives the fundamental link between stability conditions and scattering
diagrams.

Theorem 6.5. There is a consistent scattering diagram D in MR taking values in gHall and
with the following properties:

(a) The support consists of those elements θ ∈ MR for which there exist nonzero θ-semistable

objects in A.

(b) The wall-crossing automorphism at a general point θ ∈ d ⊂ supp(D) is

ΦD(d) = 1ss(θ) ∈ ˆGHall.

Proof. Lemma 6.4 shows that for any θ ∈ (0, 1) we have a relation in ˆGHall

(21)

1A = 1
(

1
2 ,1)

(θ) ∗ 1ss(θ) ∗ 1

(0,

(θ).

1
2 )

Let us ﬁx k > 1 and consider the nilpotent Lie algebra g = gHall,6k and the corresponding
unipotent group G = GHall,6k. It is easy to see that, using the notation of Section 3.1, for any

26

TOM BRIDGELAND

phase φ ∈ (0, 1) we have

G+(θ)
G0(θ)
G−(θ)

π6k(1ss(φ)) ∈ 

0(1A) = 1ss(θ), Πθ

(θ), Πθ

if φ > 1
2
if φ = 1
2
if φ < 1
2 .

Equation (21) therefore gives identities

(22)

Πθ

+(1A) = 1
(

1
2 ,1)

−(1A) = 1

(θ).

1
2 )

(0,

The general construction of Section 3 then gives a consistent scattering diagram satisfying (b).
Passing to a subcomplex as in the proof of Lemma 6.2 we can ensure that it also satisﬁes (a). (cid:3)

The scattering diagram of Theorem 6.5 is is clearly unique up to equivalence. We call it
the Hall algebra scattering diagram of (Q, I). By construction, the corresponding element of
Proposition 3.4 is

ΦD = 1A ∈ ˆGHall.

Note that Joyce’s result Theorem 5.3 is precisely the statement that the stability scattering
diagram takes values in the Lie subalgebra greg ⊂ gHall.

It is interesting and useful to relate our Hall algebra scattering diagram to a certain torsion

6.6.
pair in A deﬁned by an element θ ∈ MR.

Lemma 6.6. For each θ ∈ MR there is a torsion pair (T (θ), F(θ)) ⊂ A deﬁned by setting

T (θ) = P( 1

2 , 1) = {E ∈ A : any quotient object E ։ Q satisﬁes θ(Q) > 0},

F(θ) = P(0, 1

2 ] = {E ∈ A : any subobject A ⊂ E satisﬁes θ(A) 6 0}.

Proof. Recall that a torsion pair is a pair of full subcategories T , F ⊂ A such that

(a) if T ∈ T and F ∈ F then HomA(T, F ) = 0.
(b) for any E ∈ A there is a short exact sequence

with T ∈ T and F ∈ F.

0 −→ T −→ E −→ F −→ 0

These properties both follow immediately from the existence of Harder-Narasimhan ﬁltrations
and the identity (18) above.
(cid:3)

Note that if we are only interested in representations of total dimension 6 k then the subcat-
egories T (θ) and F(θ) are constant in MR \ Wk. Moreover, at a point of Wk, these categories
remain unchanged if we fall oﬀ the wall in the −δ direction:

(23)

T (θ − ǫδ) ∩ A6k = T (θ) ∩ A6k, F(θ − ǫδ) ∩ A6k = F(θ) ∩ A6k,

0 < ǫ ≪ 1.

We shall use the obvious notation

1T (θ) = 1
(

1
2 ,1)

(θ) ∈ ˆGHall,

1F (θ) = 1

(0,

1
2 ]

(θ) ∈ ˆGHall.

SCATTERING DIAGRAMS, HALL ALGEBRAS AND STABILITY CONDITIONS

27

It follows from (22), and the proof of Lemma 3.2, that if θ1, θ2 ∈ MR both lie outside the essential
support of D then

(24)

ΦD(θ1, θ2) = 1T (θ2)−1 ∗ 1T (θ1) = 1F (θ2) ∗ 1F (θ1)−1 ∈ ˆGHall.

Further connections between the Hall algebra scattering diagram and the above torsion pair will
appear in the next section.

7. Nearby stability conditions

Let (Q, I) be a quiver with relations and A = rep(Q, I) its category of representations. In
this section we explain the relationship between the walls of the Hall algebra scattering diagram
described in Section 6, and the walls of the second kind in the space of stability conditions on
any triangulated category D in which A occurs as the heart of a bounded t-structure. Readers
unfamiliar with triangulated categories can safely skip this section, together with Sections 8.5
below. The material of this section is very much inspired by the work of Nagao [18, Section 4].
For simplicity we assume throughout that the algebra CQ/I is ﬁnite-dimensional: this is
to avoid having to distinguish nilpotent representations from ﬁnite-dimensional ones. We ﬁx
notation as in Section 4.1. In particular A is the abelian category of representations of a quiver
with relations (Q, I).

7.1. Let us ﬁx a triangulated category D equipped with a bounded t-structure whose heart is
equivalent to A. The most obvious choice is to take the standard t-structure on the bounded
derived category Db(A) but it may be useful to allow other possibilities. As with any bounded
t-structure, the inclusion functor gives an identiﬁcation

N = K0(A) = K0(D).

In particular, any object E ∈ D has a well-deﬁned dimension vector d(E) ∈ N .

Given θ ∈ MR we deﬁne a new bounded t-structure by tilting A with respect to the torsion

pair of Lemma 6.6. Explicitly, its heart

consists of objects E ∈ D such that

A(θ) = hF(θ)[1], T (θ)i ⊂ D

H −1

A (E) ∈ F(θ), H 0

A(E) ∈ T (θ) and H i

A(E) = 0 otherwise.

The inclusion functor again gives a canonical identiﬁcation

(25)

K0(A(θ)) = K0(D) = N.

Recall that the support of the Hall algebra scattering diagram is the subset

W = [k>1

Wk = {θ ∈ MR : there exist θ-semistable objects 0 6= E ∈ A} ⊂ MR.

We denote its closure by ¯W ⊂ MR.

28

TOM BRIDGELAND

7.2. We refer to the connected components of the complement MR \ ¯W as chambers.

Lemma 7.1. Suppose that C ⊂ MR \ ¯W is a chamber. Then

(a) the heart A(θ) ⊂ D is independent of θ ∈ C and has ﬁnite length.

(b) the subcategory A(θ) has ﬁnitely many simple objects Ti up to isomorphism, and their

classes form a basis of N .

(c) for each i there is a sign ǫ(i) ∈ {±1} such that ǫ(i) · [Ti] ∈ N +.

Proof. Suppose θ lies in the interior of MR \ W. The torsion pair (T (θ), F(θ)) is constant in
MR \ W so we can ﬁnd φ ∈ MQ with A(φ) = A(θ). Clearing denominators this means that we
can ﬁnd φ ∈ M which is strictly positive on all nonzero elements of A(θ). It follows that there
can be no inﬁnite descending or ascending chains and so A(θ) has ﬁnite length. This proves (a).
The classes of a complete set of non-isomorphic simple objects Ti ∈ A(θ) trivially form a basis
for K0(A(θ)). Under the identiﬁcation (25) this corresponds to a basis of N , so in particular
there are only ﬁnitely many Ti. This gives (b).

For (c), note that the heart A ⊂ D is the tilt of the heart A(θ) ⊂ D with respect to the
torsion pair (F(θ)[1], T (θ)). Since Ti ∈ A(θ) is simple it must be either torsion or torsion-free.
Thus we either have Ti ∈ T (θ) or Ti[−1] ∈ F(θ). Taking ǫ(i) = +1 or −1 respectively it follows
that ǫ(i) · [Ti] ∈ N +.
(cid:3)

In the context of quivers with potential and cluster theory, the classes [Ti] ∈ N ∼= ZV (Q) of
part (b) are known as the c–vectors corresponding to the chamber C; the statement of part (c)
then goes under the name of known of sign-coherence.

7.3. We shall now consider stability conditions on the triangulated category D. We always
impose the support condition: there should exist K > 0 such that for all semistable objects
there is an inequality

|Z(E) > K · kd(E)k,

where k · k is some ﬁxed norm on NR. It follows from general theory that the set of such stability
conditions forms a complex manifold Stab(D), and that the forgetful map

Stab(D) → MC

sending a stability condition (Z, P) to its central charge Z : N → C is a local homeomorphism.
A wall of type II in Stab(D) is deﬁned to be the locus where a ﬁxed object 0 6= E ∈ D lies
in the subcategory P(0). The union of these walls is often dense in Stab(D). Note that in the
complement of the closure of the union of these walls, the heart P(0, 1] of the stability condition
is locally constant.

Deﬁnition 7.2. We say that a stability condition σ = (Z, P) ∈ Stab(D) is nearby A if the
condition A ⊂ P(−1, 1) holds.

SCATTERING DIAGRAMS, HALL ALGEBRAS AND STABILITY CONDITIONS

29

The following terminology is due to Keller [13]. We write C(A) ⊂ Stab(D) for the subset of

stability conditions nearby A.

Lemma 7.3. The subset C(A) ⊂ Stab(D) is open.

Proof. The condition is just that each of the simple objects Si ∈ A satisﬁes −1 < φ−(Si) 6
φ+(Si) < 1. Since the functions φ±(E) are continuous on Stab(D) and there are only ﬁnitely
many of the Si this is an open condition.
(cid:3)

7.4. Consider the continuous map

sending a stability condition to the imaginary part of its central charge.

F : C(A) → MR,

F (Z, P) = Im Z,

Proposition 7.4. The following statements hold:

(a) The map F is surjective.

(b) If σ ∈ C(A) satisﬁes F (σ) = θ ∈ MR then σ has heart A(θ) ⊂ D. In particular, stability

conditions in a given ﬁbre of F all have the same heart.

(c) If σ ∈ C(A) satisﬁes F (σ) = θ ∈ MR then P(0) ⊂ D is the subcategory of θ-semistable
objects in A. In particular, the subset W ⊂ MR is the image of the union of the walls of
type II in C(A) under the map F .

Proof. To prove surjectivity we use the action of the universal cover ]GL+(2, R) of the group
GL+(2, R) on the space of stability conditions [1, Section 8]. This group can be thought of as
the set of pairs (T, f ), where f : R → R is an increasing map with f (φ + 1) = f (φ) + 1, and
T : C → C is an orientation-preserving R-linear isomorphism, such that the induced maps on

S1 = R/2Z = C∗/R>0

are the same. There is a right action of this group on Stab(D) in which a pair (T, f ) maps a
stability condition σ = (Z, P) to the stability condition σ′ = (Z ′, P ′), where Z ′ = T ◦ Z and
P ′(f (φ)) = P(φ). Consider the element

T = (cid:18) 1

−1 1(cid:19) ∈ GL+(2, R).

0

It lifts uniquely to an element (T, f ) ∈ ]GL+(2, R) such that f (0, 1) ⊂ (− 1
2 , 1). For any θ ∈ MR
there is a stability condition σ on D with heart A and central charge Z = (δ − θ) + iδ. Applying
the element (T, f ) gives a stability condition σ′ = (Z ′, P ′) such that A = P(0, 1) ⊂ P(− 1
2 , 1)
and Im(Z ′) = θ. This proves (a).

To prove (b) take a nearby stability condition σ = (Z, P) ∈ C(A). There is a torsion pair

(T , F) ⊂ A given by

T = A ∩ P(0, 1), F = A ∩ P(−1, 0].

30

TOM BRIDGELAND

It is a tautology that B = P(0, 1] is the tilt of A with respect to this torsion pair.
Indeed
F[1] ⊂ B and T ⊂ B so the tilted heart is contained in B, and hence, by a standard argument,
is equal to it. Let θ = Im Z = F (σ). We claim that T = T (θ) and F = F(θ). Indeed, any
object E ∈ T lies in P(0, 1) so satisﬁes θ(E) > 0. Similarly, any E ∈ F lies in P(−1, 0] so
satisﬁes θ(E) 6 0. Since T and F are closed under quotient and subobjects respectively (this is
true for any torsion pair) this implies that T ⊂ T (θ) and F ⊂ F(θ). It follows easily that these
inclusions are equalities, which proves (b).

To prove (c) we take notation as in the last paragraph and prove that an object E ∈ D
lies in P(0) precisely if it lies in A and is θ-semistable. Suppose ﬁrst that E ∈ P(0). Since
E[1] ∈ B = P(0, 1], there is a short exact sequence

0 −→ X[1]

f

−→ E[1]

g

−→ Y −→ 0

in B with X ∈ F and Y ∈ T . But then Y ∈ P(0, 1) which implies that g = 0. Hence
E = X ∈ F ⊂ A. Since F = F(θ) and θ(E) = 0 it follows that E is θ-semistable. Conversely, if
E ∈ A is θ-semistable, then E ∈ F(θ) so that E ∈ B[−1] = P(−1, 0] and the fact that θ(E) = 0
implies that E ∈ P(0).
(cid:3)

8. Framed representations

In this section we consider representations of quivers equipped with framings, i.e. maps from
a ﬁxed projective module. In particular, we introduce certain ﬁne moduli schemes which are
generalizations of the moduli spaces studied by Engel and Reineke [5], and will be used in Section
10 to describe theta functions associated to the stability scattering diagrams of Section 6.

8.1. Let (Q, I) be a quiver with relations. We take notation as in Section 4.1. Elements of
the cone M ⊕ correspond bijectively with isomorphism classes of ﬁnitely-generated projective
representations of (Q, I). We use the symbol P (m) to denote a ﬁnitely-generated projective
representation with class m ∈ M ⊕. We have

(26)

dimC HomCQ/I(P (m), E) = m(d(E))

for any representation E ∈ rep(Q, I). The isomorphism classes of indecomposable projective
representations of (Q, I) are indexed by the vertices of Q: under the above correspondence they
map to the dual basis elements e∗

i ∈ M ⊕.

Let P be a ﬁnitely-generated projective representation of (Q, I). We introduce the category
repP (Q, I) of P -framed representations of (Q, I). The objects are deﬁned to be representations
E ∈ rep(Q, I) equipped with a framing map ν : P → E. A morphism between two such P -
framed representations is a morphism of the underlying representations which intertwines the
framing maps.

SCATTERING DIAGRAMS, HALL ALGEBRAS AND STABILITY CONDITIONS

31

8.2. We can give another description of the category repP (Q, I) as follows. Let the class of P
be m ∈ M ⊕ and form a new quiver Q⋆ containing Q as a subquiver, by adjoining a new vertex
⋆ and, for each i ∈ V (Q), and adding m(ei) arrows from vertex ⋆ to vertex i. The two-sided
ideal of relations I ⊂ CQ generates a two-sided ideal I ⋆ ⊂ CQ⋆. Let

(27)

rep(Q⋆, I ⋆)1 ⊂ rep(Q⋆, I ⋆)

be the subcategory whose objects are representations having the one-dimensional vector space C
at the vertex ⋆, and whose morphisms are morphisms of representations which have the identity
map id : C → C at the vertex ⋆.

Lemma 8.1. There is an equivalence of categories

repP (Q, I) ∼= rep(Q⋆, I ⋆)1.

In particular, isomorphism classes of repP (Q, I) are in bijection with isomorphism classes of
rep(Q⋆, I ⋆) having a one-dimensional vector space at the extending vertex.

Proof. Take E ∈ rep(Q, I) and let Ei be the vector space at vertex i ∈ V (Q). There is a
canonical isomorphism

HomCQ/I (Pi, E) ∼= Ei.

Choosing an identiﬁcation P = ⊕P ⊕m(ei)

i

we obtain a canonical isomorphism

HomCQ/I (P, E) ∼= Mi∈V (Q)

E⊕m(ei)

i

.

The vector space on the right parameterizes precisely the data required to extend E to a repre-
sentation of (Q⋆, I ⋆) with C at the extending vertex.
(cid:3)

The important point for us will be that framed representations of (Q, I) can be viewed as
representations of the extended quiver (Q⋆, I ⋆). But when it comes to considering moduli stacks
we must be careful: the subcategory (27) is not full, and a framed representation can have
no non-trivial automorphisms (this happens for example if the framing map ν is surjective),
whereas a representation of (Q⋆, I ⋆) always has at least a C∗ group of automorphisms.

8.3. Fix a class m ∈ M ⊕ and consider again the corresponding extended quiver with relations
(Q⋆, I ⋆). We let

N ⋆ := ZV (Q⋆) = ZV (Q) ⊕ Z = N ⊕ Z,

M ⋆ := HomZ(N ⋆, Z) = M ⊕ Z.

For any dimension vector d ∈ N we deﬁne d⋆ = (d, 1) ∈ N ⋆. Given θ ∈ MR and d ∈ N there is
a unique lift θ⋆ ∈ M ⋆

R such that θ⋆(d⋆) = 0. Explicitly we have

θ⋆ = (θ, −θ(d)) ∈ M ⊕ Z.

We denote by M ss(d⋆, θ⋆) the coarse moduli scheme of θ∗-semistable representations of (Q⋆, I ⋆)
of dimension vector d⋆.

32

TOM BRIDGELAND

Lemma 8.2. The moduli scheme M ss(d⋆, θ⋆) is ﬁne providing θ does not lie in the subset
Wk ⊂ MR of Section 6.1, where k = δ(d) is the total dimension of d.

Proof. Since the dimension vector d⋆ ∈ N ⋆ is clearly primitive, the moduli space will be ﬁne
providing that there are no strictly θ⋆-semistable objects [14, Prop. 5.3]. Suppose

0 −→ A −→ E −→ B −→ 0

is a short exact sequence in rep(Q⋆, I ⋆) such that E has dimension vector d⋆ = (d, 1). Then
either A or B has dimension vector of the form (d′, 0). Thus if E is strictly θ⋆-semistable, it must
have a θ⋆-stable factor S of dimension vector (d′, 0). Then S is a non-zero θ-stable representation
of (Q, I) and hence θ ∈ Wk.
(cid:3)

The proof of Lemma 8.2 shows that M ss(d⋆, θ⋆) is constant as θ varies in MR \ Wk. For a

general point of θ ∈ MR we set

F (d, m, θ) = M ss(d⋆, (θ − ǫδ)⋆),

0 < ǫ ≪ 1.

Since δ does not lie in Wk, this is always a ﬁne moduli scheme. We set

F (m, θ) = Gd∈N ⊕

F (d, m, θ).

There is an obvious morphism r : F (m, θ) → M sending a semistable representation of (Q⋆, I ⋆)
to the representation of (Q, I) obtained by restriction.

8.4. Let P be a ﬁnitely-generated projective representation of (Q, I) with class m ∈ M ⊕ and
ﬁx a class θ ∈ MR. The following result shows that the moduli scheme F (m, θ) can be viewed
as parameterizing P -framed representations of (Q, I) of a particular type.

Lemma 8.3. Under the correspondence of Lemma 8.1, a framed representation ν : P → E of
dimension vector d ∈ N ⊕ corresponds to a point of F (d, m, θ) precisely if

(a) E ∈ F(θ),

(b) coker(ν) ∈ T (θ).

Proof. The deﬁnition of F (d, m, θ) together with (23) shows that we can assume that θ does
It remains to show that a (Q⋆, I ⋆) representation E⋆
not lie in Wk ⊂ MR where k = δ(d).
of dimension vector d⋆ is θ⋆-semistable, precisely if the corresponding framed representation
(E, ν) of (Q, I) satisﬁes E ∈ F(θ) and coker(ν) ∈ T (θ). Consider a short exact sequence of
representations of (Q⋆, I ⋆)

0 −→ A⋆ −→ E⋆ −→ B⋆ −→ 0.

There are two possibilities: either A⋆ or B⋆ has dimension vector (n, 0) for some n ∈ N , and
hence is a representation of (Q, I) extended by zero.

In the ﬁrst case A⋆ is a representation A of (Q, I) extended by zero. Moreover, A is a (Q, I)-
subrepresentation of E. Conversely, any subrepresentation A ⊂ E can be extended by zero to

SCATTERING DIAGRAMS, HALL ALGEBRAS AND STABILITY CONDITIONS

33

give a subrepresentation A⋆ ⊂ E⋆. Then A⋆ destabilizes E⋆ precisely if θ(A) > 0. Since θ /∈ Wk
this in fact implies θ(A) > 0. But the existence of such a subrepresentation A ⊂ E is precisely
the condition that E /∈ F(θ).

In the second case B⋆ is a representation B of (Q, I) extended by zero. We therefore obtain
a surjective map of (Q, I)-representations g : E → B. But the fact that this extends to a map
E⋆ → B⋆ forces the composite g ◦ ν to be zero. Conversely, when g ◦ ν = 0, any map g extends
uniquely to g⋆ : E⋆ → B⋆. We conclude that quotients E⋆ ։ B⋆ of dimension vector (0, n)
correspond to quotients B of coker(ν) of dimension vector n. We can destabilize E⋆ in this
way precisely if we can ﬁnd such a B with θ(B) 6 0. This is equivalent to the condition that
coker(ν) /∈ T (θ).
(cid:3)

8.5. We ﬁnish this section by giving yet another interpretation of the framed quiver moduli
spaces F (d, m, θ), this time in terms of the tilted hearts of Section 7. This result will not be used
later, and can be safely skipped. For simplicity we shall assume that CQ/I is ﬁnite-dimensional
so that all ﬁnitely-generated projective representations lie in the category A = rep(Q, I).

Given θ ∈ MR we can consider the corresponding torsion sequence

with R(m, θ) ∈ T (θ) and U (m, θ) ∈ F(θ). Also introduce the shifted heart

0 −→ R(m, θ) −→ P (m) −→ U (m, θ) −→ 0

B(θ) = A(θ)[−1] = hF(θ), T (θ)[−1]i ⊂ D.

Note that U (m, θ) ∈ B(θ).

Proposition 8.4. There is a natural bijection between points of the scheme F (d, m; θ) and
isomorphism classes of pairs (E, µ) where

(a) E ∈ B(θ) is an object of class [E] = d ∈ N ,
(b) µ : U (m, θ) → E is a surjection in B(θ).

Proof. This follows easily from Lemma 8.3. Given a pair (E, µ) as in the statement, we can
form a short exact sequence in B(θ)

0 −→ K −→ U (m, θ) −→ E −→ 0

Now take the associated long exact sequence in cohomology with respect to the t-structure with
heart A. This shows that E = H 0
A(E) and hence that E ∈ F(θ). Moreover, the cokernel
of µ, viewed as a map in A, is the object H 1
A(K) ∈ T (θ). Composing with the surjection
P (m) → U (m, θ) we get a map ν : P (m) → E in the category A whose cokernel lies in T (θ).

For the converse, suppose given a map ν : P (m) → E in A such that E ∈ F(θ) and whose
cokernel lies in T (θ). Since R(m, θ) ∈ T (θ) this factors via P (m) ։ U (m, θ) and hence induces
a map µ : U (m, θ) → E. If µ is not surjective in B(θ) we can ﬁnd a surjection q : E ։ Q such
that q ◦ µ = 0. The long exact sequence in A-cohomology as above then implies that Q ∈ F(θ).
This then contradicts coker(ν) ∈ T (θ).
(cid:3)

34

TOM BRIDGELAND

It can often happen that the category B(θ) is equivalent to a category of the form rep(Q′, I ′)
for some new quiver (Q′, I ′). In that case, the proof of Prop. 8.4 can easily be extended to show
that the scheme F (d, m, θ) is a quiver Grassmannian.

9. Stacks of framed representations

In this section we consider stacks parameterizing framed representations of the various kinds
considered in Section 1.5. We then prove some important identities relating the corresponding
elements of the motivic Hall algebra. Throughout (Q, I) is a ﬁxed quiver with relations and P
is a ﬁnitely-generated projective representation of (Q, I) with class m ∈ M ⊕.

9.1. We begin by introducing the stack MP of P -framed representations of (Q, I). The reader
is advised to ﬁrst recall the deﬁnition of the stack M from Section 4.2.

For each scheme S over C we ﬁrst consider the quasi-coherent OS -module

PS := P ⊗C OS

with the induced action of CQ/I. This is just the pullback of the representation P via the
projection S → Spec(C) exactly as in the deﬁnition of the stack M, except that since P may
be inﬁnite-dimensional in general, the resulting locally-free sheaf may have inﬁnite rank.

The objects of the stack MP over a scheme S consist of an object (E, ρ) of M(S) together
with a morphism of quasi-coherent sheaves ν : PS → E which intertwines the actions of CQ/I
on PS and E. Given another object (E ′, ρ′, ν′) lying over a scheme S′, a morphism in MP

(E ′, ρ′, ν′) → (E, ρ, ν)

lying over a morphism f : S′ → S is deﬁned to be an isomorphism of OS -modules θ : f ∗(E) → E ′
intertwining the maps ρ and ρ′ as in the deﬁnition of the stack M, with the further condition
that this isomorphism commutes with the OS-module maps ν, ν′ in the obvious way.

We leave it to the reader to check the stack conditions, which follow easily from those for M.

There is an obvious morphism of stacks q : MP → M obtained by forgetting the framings.

Lemma 9.1. Restricted to the open and closed subset Md ⊂ M, the map q is a vector bundle
of rank m(d).

Proof. Let S be a scheme and f : S → Md an S-valued point corresponding to a representation
(E, ρ) of (Q, I) over S. Pulling the morphism q back to S gives a stack SP → S whose T -valued
points consist of a morphism g : T → S and a framing of g∗(E, ρ). Now by the argument of
Lemma 8.1, the set of such framings coincides with the set of sections of the sheaf g∗(V) on T ,
where

V = Mi∈V (Q)

E ⊕m(i)
i

Note that V is a locally-free sheaf on T of rank m(d). It follows that the stack SP is represented
by the total space of the associated vector bundle, which proves the result.
(cid:3)

SCATTERING DIAGRAMS, HALL ALGEBRAS AND STABILITY CONDITIONS

35

9.2. Globalising Lemma 8.3 we would like to identify the scheme F (m, θ) with an open substack
of MP . There are two slightly tricky issues to understand ﬁrst:

(i) Let M⋆

1 denote the stack of representations of the extended quiver (Q⋆, I ⋆) having a
one-dimensional representation at the extending vertex. A family version of Lemma 8.1
(see also the proof of Lemma 9.1) gives a morphism of stacks MP → M⋆
1. However,
because of the discrepancy in automorphism groups referred to in Section 8.2 this is not
an isomorphism, but rather a C∗-bundle.

(ii) We wish to deﬁne an open substack of MP whose points parameterize framed objects
ν : P → E for which E ∈ F(θ) and coker(ν) ∈ T (θ). However, when working with
objects of MP over a general scheme S, there is no reason to expect the cokernel of the
framing map ν : PS → E to be locally-free and hence deﬁne an object of M(S). So the
deﬁnition of such a substack is problematic.

The ﬁrst issue does not in fact cause a problem, since the scheme F (m, θ) is also a C∗-bundle
1 for the usual reason that moduli stacks of stable

over the corresponding open substack of M⋆
objects are C∗-gerbes over the corresponding moduli schemes.
To deal with the second issue we deﬁne a new stack M′

P in the same way as MP but
imposing the condition that the cokernel of the framing map ν should be locally-free. The
obvious morphism M′
P → MP is then an equivalence on C-valued points, so that from the
point-of-view of the motivic Hall algebra the two stacks are interchangeable.

9.3. The stack M′

P has two obvious morphisms

p : M′

P → M,

q : M′

P → M.

The second forgets the framing map ν : PS → E as before, whereas the ﬁrst takes the cokernel
of ν. Given θ ∈ MR we deﬁne an open substack

M′

P (F(θ)) = M′

P ∩ q−1(F(θ)), M′

P (T (θ), F(θ)) = M′

P (F(θ)) ∩ p−1(T (θ))

The following is a moduli-theoretic version of Lemma 8.3.

Lemma 9.2. There is a morphism of stacks

which induces an equivalence on C-valued points.

M′

P (T (θ), F(θ)) −→ F (m, θ)

Proof. We have morphisms of stacks M′
1. So given an S-valued point of the stack
M′
P (T (θ), F(θ)) we obtain a family of (Q⋆, I ⋆) representations over S. Lemma 8.3 shows that
these in fact deﬁne a family of stable representations, and thus give rise to a map S → F (m, θ).
This deﬁnes the required morphism. Lemma 8.3 again shows that it is an equivalence on C-
valued points.
(cid:3)

P → MP → M⋆

36

TOM BRIDGELAND

9.4. Let us again ﬁx an element θ ∈ MR. Using the remark of Section 5.8, we obtain elements

1P
F (θ) = [M′

P (F(θ))

q

−→ M],

F (m, θ) = [F (m, θ)

r−→ M],

in the completed Hall algebra ˆH(Q, I).

Lemma 9.3. In the algebra ˆH(Q, I) there is an identity

1P
F (θ) = F (m, θ) ∗ 1F (θ).

Proof. By Lemma 9.2 we can replace F (m, θ) by the stack M′
P (T (θ), F(θ)). The product on
the right of the identity is then represented by a stack X whose objects over a scheme S consist
of short exact sequences

0 −→ E1

α−→ E2

β

−→ E3 −→ 0

of families of quiver representations over S, together with a framing ν : PS → E1 whose cokernel
is locally-free. We also insist that restricted to any C-valued point, all representations lie in
F(θ), and the cokernel of ν lies in T (θ). Sending such an object to the family E2 equipped with
the framing α ◦ ν deﬁnes a morphism of stacks

h : X → M′

P (F(θ)).

The identity will follow if we show that h induces an an equivalence on C-valued points. To
prove this, note that given an element E ∈ F(θ) and a framing ν : P → E, there is a unique
short exact sequence

(28)

0 −→ A

f

−→ E

g

−→ B −→ 0

such that A, B ∈ F(θ), the composite g ◦ ν = 0, and the induced map ν : P → A has cokernel
in T (θ). Indeed, the quotient B is obtained uniquely as the torsion-free part of coker(ν).
(cid:3)

Let us introduce further elements of ˆH(Q, I) as follows.

1P
ss(θ) = [M′

P ∩ q−1(Mss(θ))

q
−→ M], Fss(m, θ) = [F (m, θ) ∩ r−1(Mss(θ))

r−→ M].

The following is an easy consequence of Lemma 9.3.

Lemma 9.4. In the algebra ˆH(Q, I) there is an identity

1P
ss(θ) = Fss(m; θ) ∗ 1ss(θ).

Proof. Note that if E ∈ F(θ) then E is θ-semistable precisely if θ(E) = 0. Thus given a short
exact sequence (28) with all objects in F(θ) then

θ(E) = 0 ⇐⇒ θ(A) = θ(B) = 0.

The identity then follows in the same way as Lemma 9.3 or by simply restricting the identity of
Lemma 9.3 to the substack of representations whose dimension vectors are orthogonal to θ. (cid:3)

SCATTERING DIAGRAMS, HALL ALGEBRAS AND STABILITY CONDITIONS

37

10. Theta functions

The theta functions deﬁned by a scattering diagram are of crucial importance in the applica-
tions to cluster varieties described in [7]. In the case of the stability scattering diagram, we can
describe some of these theta functions in terms of generating functions for Euler characteristics
of the framed quiver moduli introduced in Section 8. The general case is left for future research.

10.1. We begin by considering the following abstract set-up. Take a ﬁnite-rank free abelian
group N with a positive cone N + ⊂ N as in Section 2.1 and use notation as deﬁned there. Now
take A to be an N ⊕-graded Poisson algebra

A = Mn∈N ⊕

An, An1 · An2 ⊂ An1+n2,

{An1, An2} ⊂ An1+n2.

For each k > 1 we can consider the Poisson ideal A>k = ⊕δ(n)>k An, and the corresponding
quotient A6k = A/A>k. Taking the limit of the obvious maps gives a Poisson algebra

ˆA = lim
←−

A6k.

The subspace g = A>0 ⊂ A is a Lie algebra under the Poisson bracket. The corresponding
completion ˆg = ˆA>0 is a pro-nilpotent Lie algebra. As usual, we denote the corresponding
pro-unipotent group by ˆG.

10.2. We shall also need to equip the vector space B = A ⊗C C[M ] with the structure of an
N ⊕ graded Poisson algebra in such a way that the inclusions

A ֒→ B,

a 7→ a ⊗ 1,

C[M ] ֒→ B,

zm 7→ 1 ⊗ zm

are maps of graded Poisson algebras (we equip the algebra C[M ] with the trivial Poisson bracket
and consider all elements to have degree 0). The same completion process then gives a Poisson
algebra

ˆB = ˆA ⊗C C[M ].

Since ˆA as a subalgebra of ˆB closed under Poisson bracket, the Lie algebra ˆg = ˆA>0 acts on
B by derivations via a(b) = {a, b}. Exponentiating gives an action of the group ˆG by Poisson
algebra automorphisms of ˆB:

(29)

exp(x)(b) = exp{x, −}(b).

This is the action we will use to deﬁne our theta functions.

38

TOM BRIDGELAND

10.3. Example. Let N be a ﬁnite rank free abelian group with a skew-symmetric form

h−, −i : N × N → Z.

Also ﬁx a basis (e1, · · · , en) and let N + ⊂ N be the positive cone spanned by the ei. Let A be
the monoid algebra

C[N ⊕] = Mn∈N ⊕

C · xn,

and equip it with the Poisson bracket

{xn1, xn2} = hn1, n2i · xn1+n2.

We take B to be the commutative tensor product algebra B = C[N ⊕] ⊗C C[M ] with

{xn, zm} = m(n) · xn · zm,

{zm1, zm2 } = 0.

Writing xi = xei and zi = ze∗

i we have

A = C[x1, · · · , xn], B = C[x1, · · · , xn][z±1

1 , · · · , z±1
n ].

Completing with respect to the N ⊕-grading gives Poisson algebras

ˆA = C[[x1, · · · , xn]],

ˆB = C[[x1, · · · , xn]][z±1

1 , · · · , z±1
n ].

This is the relevant context for the stability and cluster scattering diagrams described in the
Introduction.

10.4. Example. Take a quiver with potential (Q, I) and take A to be the Hall algebra

A = H(Q, I) = Md∈N ⊕

H(Q, I)d,

over C(t). We deﬁne an algebra structure on B = A ⊗C C[M ] extending that on the subalgebras
A and C[M ] by setting

We equip the algebras A and B with the scaled commutator bracket

ad ∗ zm = t2m(n) · zm ∗ ad,

ad ∈ H(Q, I)d.

{a, b} = (t2 − 1)−1 · [a, b]

as in (15). In particular, we have

{ad, zm} =

t2m(n) − 1

t2 − 1

· ad ∗ zm,

{zm1 , zm2 } = 0.

This is the context relevant to the stability scattering diagram.

Note that as in Section 5.9, the subspace g = A>0 viewed as a Lie algebra via its Pois-
son bracket is isomorphic to the Lie algebra gHall via the map x 7→ (t2 − 1)−1 · x. Thus the
corresponding group ˆG can be identiﬁed with ˆGHall.

SCATTERING DIAGRAMS, HALL ALGEBRAS AND STABILITY CONDITIONS

39

10.5. Returning to the general context of Sections 10.1–2, let D = (Dk)k>1 be a scattering
diagram in g = A>0. Recall the associated elements ΦD(θ1, θ2) ∈ ˆG from Section 3.1. For each
m ∈ M we deﬁne1 a theta function

by using the action of the group ˆG on the algebra ˆB, and writing

ϑm : MR \ supp(D) −→ ˆB

ϑm(θ) = ΦD(θ+, θ)(zm),

for an arbitrary element θ+ ∈ M +
R .

Consider composing ϑm with the projection π : ˆB → B6k. The result extends to a function

ϑm : MR \ supp(Dk) −→ B6k

which is constant on each connected component of the domain. On crossing a generic point
of a wall d ∈ Dk in the positive direction, the theta function changes by the action of the
corresponding wall-crossing automorphism:

Note also that by deﬁnition ϑm(θ) = zm for all θ ∈ M +
R .

ϑm(θ) 7→ ΦDk (d)(cid:0)ϑm(θ)(cid:1) ∈ B6k.

10.6. Consider the case of the Hall algebra scattering diagram of Theorem 6.5. Thus we
take A = H(Q, I) equipped with the Poisson bracket (15) and consider the extended algebra
B = A ⊗C C[M ] as in Section 10.4.

Theorem 10.1. Let D be the Hall algebra scattering diagram for the pair (Q, I) and ﬁx m ∈ M ⊕.
Then there is an identity

ϑm(θ) = zm · F (m, θ) ∈ ˆB.

Proof. Take an element m ∈ M ⊕. Note that by (24) the Hall algebra scattering diagram satisﬁes

ϑm(θ) = ΦD(θ+, θ)(zm) = 1F (θ)(zm) ∈ ˆB.

The Lie algebra of the group ˆGHall can be identiﬁed with A>0 equipped with the Poisson bracket
of Section 10.4. Alternatively it can be identiﬁed with A>0 equipped with the commutator
bracket. These two identiﬁcations diﬀer by a factor of (t2 − 1). Using the second identiﬁcation
we see that as in Section 5.6, the action of the element 1F (θ) ∈ ˆGHall on ˆB is by conjugation.
But Lemmas 9.1 and 9.3 show that there is an identity in ˆB

1F (θ) · zm = zm · t2m(n) · 1F (θ) = zm · 1P

F (θ) = zm · F (m, θ) ∗ 1F (θ).

This proves the result.

(cid:3)

1Theta functions can also be deﬁned for more general classes m ∈ M [7, Section 3] but we shall not consider

those here since we are unable to provide a moduli-theoretic description for them.

40

TOM BRIDGELAND

A very similar proof gives an alternative description of the wall-crossing automorphisms of

the Hall algebra scattering diagram.

Theorem 10.2. Let D be the Hall algebra scattering diagram for the pair (Q, I). Then the
action of ΦD(d) on ˆB at a general point of the support of D satisﬁes

zm 7→ zm ·h aθ(d)=0

F (d, m, θ) → Mi.

Proof. Apply the proof of Theorem 10.1 replacing Lemma 9.3 with Lemma 9.4.

(cid:3)

11. Quivers with potential: the CY3 case

In this section we consider the three-dimensional Calabi-Yau situation, when Q is a 2-acyclic
quiver with ﬁnite potential W . We apply a homomorphism of Lie algebras to the Hall algebra
scattering diagram of Section 6 to obtain a more concrete scattering diagram which we call the
stability scattering diagram of the pair (Q, W ).

There is another scattering diagram associated to Q which we call the cluster scattering
diagram associated to Q. It was ﬁrst introduced by Kontsevich and Soibelmnan and plays a
vital role in the recent work of Gross, Hacking, Keel and Kontsevich [7]. We show that when Q
is acyclic this scattering diagram coincides with the stability scattering diagram.

11.1. Let (Q, I) be a quiver with relations as in Section 4.1. We now assume that the relations
I ⊂ CQ are deﬁned by a polynomial potential

I = (∂aW : a ∈ A(Q)) ⊂ CQ.

We always assume that Q is 2-acyclic which implies that the potential W ∈ CQ>3 is a ﬁnite
sum of cycles of length > 3. The quotient algebra CQ/I is called the Jacobi algebra of the pair
(Q, W ). Deﬁne a skew-symmetric form

h−, −i : N × N → Z

by setting hei, eji = aji − aij, where aij is the number of arrows in Q from vertex i to vertex
j. In the case that the category A = rep(Q, I) is CY3 this will coincide with the Euler form on
N = K0(A) but it is not necessary to assume this.

Exactly as in Section 10.3 we deﬁne a Poisson bracket on A = C[N ⊕] by setting

{xn1, xn2} = hn1, n2i · xn1+n2.

The following crucial result allows us to transport statements in the Hall algebra into state-

ments in the much simpler algebra C[N ⊕].

Theorem 11.1. There is a homomorphism of N ⊕-graded Poisson algebras

I : Hreg(Q, W ) → C[N ⊕],

I([f : X → Md]) = e(X) · xd,

SCATTERING DIAGRAMS, HALL ALGEBRAS AND STABILITY CONDITIONS

41

where e(X) denotes the Euler characteristic of the ﬁnite-type complex scheme X equipped with
the analytic topology.

Proof. The version of this statement for Hall algebras of coherent sheaves on Calabi-Yau three-
folds is the special case of [2, Theorem 5.1] corresponding to the constant constructible function
1 : M → Z. Exactly the same proof works in the case of Hall algebras of quiver representations.
The important point to note is that for any pair of objects E, F ∈ A, the diﬀerence

(cid:0) dimC HomA(E, F ) − dimC Ext1

A(E, F )(cid:1) −(cid:0) dimC HomA(F, E) − dimC Ext1

A(F, E)(cid:1),

is given by the form h[E], [F ]i. This is because we can consider A as the heart of a bounded t-
structure in a CY3 triangulated category, namely the bounded derived category of the Ginzburg
algebra, and the above expression is the Euler form of this category.
(cid:3)

11.2. As usual the subspace A>0 = C[N +] is a Lie algebra g under Poisson bracket. The
homomorphism I of Theorem 11.1 immediately induces homomorphisms

I : ˆgreg → ˆg,

I : ˆGreg → ˆG

of the corresponding pro-nilpotent Lie algebras and pro-unipotent groups. We remarked in
Section 6.5 that the Hall algebra scattering diagram takes values in the Lie subalgebra greg ⊂
gHall. Applying the Lie algebra homomorphism I therefore gives a scattering diagram in g.

Theorem 1.1 now follows immediately from Theorem 6.5. Recall that according to Theorem

5.3, the substack of θ-semistable objects of A deﬁnes an element

1ss(θ) ∈ ˆGreg ⊂ ˆGHall.

Applying the group homomorphism I gives a corresponding element of ˆG. Explicitly this takes
the form

I(1ss(θ)) = exp(cid:0) Xd∈N +

J(d, θ) · xd(cid:1),

where the numbers J(d, θ) ∈ Q are what we referred to in the introduction as Joyce invariants.
They are deﬁned to be the Euler characteristics of the elements ǫ(d, θ) ∈ Hreg(Q, I)d appearing
in the decomposition

1ss(θ) = exp(cid:16)(t2 − 1)−1 · Xd∈N +

ǫ(d, θ)(cid:17)

corresponding to the identiﬁcation (13).

11.3. We now introduce extended Poisson algebras

Breg = Hreg(Q, I) ⊗C C[M ], B = C[N ⊕ ⊗C C[M ],

exactly as in Sections 10.3 and 10.4. Comparing the products and Poisson brackets, and noting
that the map I sends t to 1 it is clear that I extends to give a Poisson algebra map

I : Breg → B,

42

TOM BRIDGELAND

and a similar map on completions. Applying this to Theorem 10.1 gives Theorem 1.3.

Applying the map I to Theorem 10.2 shows that the action of ΦD(d) on ˆB at a general point

of a wall d ⊂ D satisﬁes

(30)

zm 7→ zm · Xθ(d)=0

K(d, m, θ) · xd.

A trivial but important observation is that for any n ∈ N , the element

xn · Yi∈V (Q)

zhn,eii
i

∈ B

is invariant under the action of ˆG, because for any d ∈ N

hd, ni + Xi∈V (Q)

e∗
i (d) · hn, eii = hd, ni + hn, di = 0.

It follows that the action of an element of ˆG on ˆB is determined by its action on the elements
zi. Applying this observation to (30) gives Theorem 10.2.

11.4. Let Q be a 2-acyclic quiver and take notation as above. Let D be an arbitrary scattering
diagram taking values in g. Any wall d of D is contained in a hyperplace n⊥ for a unique
primitive element n ∈ N +. We say that d is incoming if it contains the vector

θn = h−, ni ∈ M.

Kontsevich and Soibelman proved that a consistent scattering diagram taking values in g is
uniquely speciﬁed up to equivalence by its set of incoming walls and their associated wall-
crossing automorphisms. A particular case of this is

Theorem 11.2 (Kontsevich-Soibelman). For any quiver Q there is a consistent scattering di-
agram D taking values in g such that the only incoming walls are the hyperplanes di = e⊥
i , with
associated wall-crossing automorphisms

ΦD(di) = exp(cid:18)Xn>1

xnei

n2 (cid:19) ∈ ˆG.

This scattering diagram is unique up to equivalence.

(cid:3)

A simple calculation shows ΦD(di) acts on ˆB via the cluster transformation

(31)

zm 7→ zm · (1 + xei)m(ei).

We call this scattering diagram the cluster scattering diagram associated to the quiver Q.

SCATTERING DIAGRAMS, HALL ALGEBRAS AND STABILITY CONDITIONS

43

11.5. To prove Theorem 1.5 we must give a categorical description of incoming walls.

Deﬁnition 11.3. We say that an object E ∈ A is self-stable if it is θ-stable for the weight

θ = h−, Ei ∈ M.

An equivalent condition is that for every non-trivial short exact sequence

0 −→ A −→ E −→ B −→ 0

the inequality hA, Bi < 0 holds.

We will call a quiver with potential (Q, W ) genteel if the only self-stable objects in A are of

the form Si for some vertex i ∈ V (Q).

Lemma 11.4. If (Q, W ) is genteel then the stability scattering diagram is equivalent to the
cluster scattering diagram.

Proof. For any quiver with potential let us use (30) to compute the wall-crossing automorphism
in the stability scattering diagram at a generic point of the wall e⊥
i . Fix m ∈ M ⊕ and set
d = k · ei. The extended quiver Q⋆ corresponding to m has mi = m(ei) extra arrows from the
extended vertex ⋆ to the vertex i. At a general point θ ∈ e⊥
it is then easy to see that the
i
framed moduli space F (d, m, θ) is isomorphic to the Grassmannian of d-dimensional quotients
of an mi-dimensional space. Thus we have

Φdi(zm) = zm ·Xk>0

e(Grk,mi)xkei = zm ·

mi

Xk=0

(cid:18)mi
k (cid:19)xkei = zm · (1 + xei)mi,

exactly as in (31). If (Q, W ) is genteel then by deﬁnition there are no other incoming walls. (cid:3)

11.6. The proof of Theorem 1.5 is completed by the following simple lemma.

Lemma 11.5. Suppose Q is acyclic and hence W = 0. Then (Q, W ) is genteel.

Proof. The acyclic assumption means that we can label the vertices of Q in such a way that

i < j =⇒ aji = dimC Ext1

A(Sj, Si) = 0.

In particular this means that if i < j then hei, eji = aji − aij < 0. Consider a stability function
Z such that φ(Si) < φ(Sj) whenever i < j. Then it is easy to see by induction on the total
dimension that the only semistable objects are of the form S⊕m

.

i

Clearly any simple object is self-stable since it has no proper subobjects. Suppose 0 6= E ∈ A
is indecomposable but not simple. Then E has a non-trivial Harder-Narasimhan ﬁltration with
respect to the stability function Z, which means we can ﬁnd 1 6 k < n and a short exact
sequence

0 −→ A −→ E −→ B −→ 0

44

TOM BRIDGELAND

such that the stable factors of A are a subset of the simples Sk+1, · · · , Sn, and the stable factors
of B are a subset of the simples S1, · · · , Sk. This implies that hB, Ai < 0 and hence E is not
self-stable.
(cid:3)

It seems an interesting question to determine which quivers have genteel potentials. One can
check for example that the triangular quiver with potential W = abc is genteel. Note though
that this is mutation-equivalent to an acyclic quiver.

References

[1] T. Bridgeland, Stability conditions on triangulated categories, Ann. of Math. (2) 166 (2007), no. 2, 31–345.

[2] T. Bridgeland, An introduction to motivic Hall algebras, Adv. Math. 229 (2012), no. 1, 102–138.

[3] T. Bridgeland, Hall algebras and curve-counting invariants, J. Amer. Math. Soc. 24 (2011), no. 4, 969–998.
[4] M.-W. Cheung, PhD thesis, UCSD, to appear (2016/17).

[5] J. Engel and M. Reineke, Smooth models of quiver moduli, Math. Z. 262 (2009), no. 4, 817–848.

[6] W. Fulton, Introduction to toric varieties, Annals of Mathematics Studies, 131, Princeton University Press,

Princeton, NJ, 1993. xii+157 pp.

[7] M. Gross, P. Hacking, S. Keel and M. Kontsevich, Canonical bases for cluster algebras, arxiv 1411.1394.

[8] M. Gross and R. Pandharipande, Quivers, curves, and the tropical vertex. Port. Math. 67 (2010), no. 2,

211–259.

[9] M. Gross and B. Siebert, From aﬃne geoemtry to complex geometry, Annals of Mathematics, 174, (2011),

1301–1428.

[10] D. Joyce, Conﬁgurations in abelian categories. II. Ringel-Hall algebras. Adv. Math. 210 (2007), no. 2,

635–706.

[11] D. Joyce, Conﬁgurations in abelian categories. IV. Invariants and changing stability conditions. Adv. Math.

217 (2008), no. 1, 125–204.

[12] D. Joyce and Y. Song, A theory of generalized Donaldson-Thomas invariants. Mem. Amer. Math. Soc. 217

(2012), no. 1020, iv+199 pp.

[13] B. Keller, On cluster theory and quantum dilogarithm identities. Representations of algebras and related

topics, 85–116, EMS Ser. Congr. Rep., Eur. Math. Soc., Z¨urich, 2011.

[14] A.D. King, Moduli of representations of ﬁnite dimensional algebras. Quart. J. Math. Oxford Ser. (2) 45

(1994), no. 180, 515–530.

[15] M. Kontsevich and Y. Soibelman, Aﬃne structures and non-Archimedean analytic spaces. The unity of

mathematics, 321–385, Progr. Math., 244, Birkh¨auser Boston, Boston, MA, 2006.

[16] M. Kontsevich and Y. Soibelman, Stability structures, motivic Donaldson-Thomas invariants and cluster

transformations, arxiv 0811.2435.

[17] M. Kontsevich and Y. Soibelman, Wall-crossing structures in Donaldson-Thomas invariants, integrable
systems and Mirror Symmetry, Homological mirror symmetry and tropical geometry, 197–308, Lect. Notes
Unione Mat. Ital., 15, Springer, Cham, 2014.

[18] K. Nagao, Donaldson-Thomas theory and cluster algebras. Duke Math. J. 162 (2013), no. 7, 1313–1367.

[19] M. Reineke, Poisson automorphisms and quiver moduli. J. Inst. Math. Jussieu 9 (2010), no. 3, 653–667.

