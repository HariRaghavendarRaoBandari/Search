6
1
0
2

 
r
a

 

M
5
1
 
 
]

.

R
G
h
t
a
m

[
 
 

1
v
4
5
7
4
0

.

3
0
6
1
:
v
i
X
r
a

Universal groups for right-angled buildings

Tom De Medts, Ana C. Silva and Koen Struyve∗

March 16, 2016

Abstract

In 2000, M. Burger and S. Mozes introduced universal groups acting on
trees with a prescribed local action. We generalize this concept to groups
acting on right-angled buildings. We show that, when the right-angled
building is thick and irreducible of rank at least 2 and each of the local
permutation groups is transitive and generated by its point stabilizers,
the corresponding universal group is a simple group.

When the building is locally ﬁnite, these universal groups are com-
pactly generated totally disconnected locally compact groups, and we
describe the structure of the maximal compact open subgroups of the
universal groups as a limit of generalized wreath products.

Contents
Introduction

Organization of the paper
Acknowledgment
1 Preliminaries

. . . . . . . . . . . . . . . . . . . . . . . . . . .
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
1.1 Buildings
Subdirect products . . . . . . . . . . . . . . . . . . . . . . . . . . . .
1.2
1.3 Generalized wreath products . . . . . . . . . . . . . . . . . . . . . . .

2 Right-angled buildings

Projections and parallel residues

. . . . . . . . . . . . . .
2.1 Reduced words in right-angled Coxeter groups
. . . . . . . . . . . . . . . . . . . . .
2.2
2.3 Tree-walls and wings . . . . . . . . . . . . . . . . . . . . . . . . . . .
. . . . . . . . . . . . . . . . . . . .
2.4 Colorings in right-angled buildings
. . . . . . . . . . . . . . . . . . . . . . . . .
2.4.1
2.4.2 Weak legal colorings . . . . . . . . . . . . . . . . . . . . . . .
. . . . . . . . . . . . . . . . . . . . .
2.4.3
2.5 Directed right-angled buildings . . . . . . . . . . . . . . . . . . . . . .

Directed legal colorings

Legal colorings

3 Universal group of a right-angled building

3.1 Deﬁnition . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
3.2 Basic properties . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
. . . . . . . . . . . . . . . .
Extending elements of the universal group
3.3
Subgroups of U with support on a single wing . . . . . . . . . . . . . . .
3.4
3.5 Normal subgroups of the universal group . . . . . . . . . . . . . . . . .
Simplicity of the universal group . . . . . . . . . . . . . . . . . . . . .
3.6

4 Maximal compact open subgroups of U

4.1 A description of Uc0 as iterated semidirect products . . . . . . . . . . . .
. .
4.2 A description of the w-sphere stabilizers as generalized wreath products

References

2
3
3
4
4
5
6
8
8
13
15
18
19
20
22
23
27
27
28
31
34
36
38
40
41
44
47

∗Authors’ address: Ghent University, Department of Mathematics, Krijgslaan 281–S22,
9000 Gent, Belgium. E-mail addresses: Tom.DeMedts@UGent.be, ana.fcd.silva@gmail.com,
kstruy@gmail.com. Corresponding author: Tom De Medts.

1

Introduction

In 2000, Marc Burger and Shahar Mozes introduced universal groups acting on
regular locally ﬁnite trees with a prescribed local action [BM00]. More precisely,
if F ≤ Sym(d) is a ﬁnite transitive permutation group of degree d, and T is the
regular tree of degree d, then the universal group U (F ) is the largest possible
vertex-transitive subgroup of Aut(T ) such that the induced local action around
any vertex is permutationally isomorphic to F .

In this paper, we will generalize this notion to the setting of right-angled
buildings. A right-angled building is a building for which the underlying Coxeter
diagram contains only 2’s and ∞’s, i.e., the corresponding Coxeter group W with
generating set S of involutions only contains relations of the form sisj = sjsi
for some pairs i 6= j, but no other relations. This makes the combinatorics
of the building behave very much like trees, while at the same time provid-
ing a much larger class of examples. One similarity is the fact that, given a
right-angled Coxeter group (W, S), there is, for each collection of cardinalities
(qs)s∈S, a unique right-angled building of type (W, S) such that each s-panel
contains exactly qs chambers, as was shown by Frédéric Haglund and Frédéric
Paulin [HP03]. (Such a result is not true at all for buildings in general.) A
more systematic study of combinatorial properties of right-angled buildings was
initiated by Anne Thomas and Kevin Wortman in [TW11] and continued by
Pierre-Emmanuel Caprace in [Cap14], and we rely on their results.

Generalizing the concept of universal groups from trees to right-angled build-
ings involves a careful analysis of colorings in right-angled buildings. We found
it useful to introduce the concept of a directed right-angled building, which gives
a systematic way to describe the unique right-angled building with given valen-
cies, unfolding from one particular chamber in the building.

In [TW11], Thomas and Wortman introduced the notion of a tree-wall for
general right-angled buildings, following an idea of Marc Bourdon [Bou97], who
introduced a similar notion for the right-angled Fuchsian case. An important
concept in our study of the right-angled buildings is the tree-wall tree (associated
to a generator s ∈ S); see Deﬁnition 2.38 below. This will allow us to deﬁne a
distance between tree-walls of the same type, which will be useful for inductive
arguments.

We will also make extensive use of the notion of wings, introduced in [Cap14],
following an idea from [TW11, Proposition 6].
In particular, this will allow
us to express a property for groups acting on right-angled buildings which is
similar to Tits’ independence property (P) for groups acting on trees [Tit70]; see
Proposition 3.15.

The full automorphism group of a thick locally ﬁnite semi-regular right-
angled building ∆ is a totally disconnected locally compact (t.d.l.c.) group
with respect to the permutation topology. The universal group for a thick
locally ﬁnite semi-regular right-angled building (with respect to a set of ﬁnite
transitive permutation groups) is always a chamber-transitive closed subgroup
of Aut(∆), and so it is itself a t.d.l.c. group which is compactly generated.

Caprace has shown that if ∆ is thick, semi-regular and irreducible (but not
necessarily locally ﬁnite), then the subgroup of type-preserving automorphisms
is, in fact, an (abstractly) simple group [Cap14, Theorem 1.1]. We will show
that, when each of the local permutation groups is generated by its point stabi-

2

lizers, the universal group is again a simple group. To prove this result, we will
use the independence property mentioned above. Our approach is somewhat
diﬀerent from Caprace’s approach, and in particular, our methods also give a
simpler proof of his result.

Compactly generated (topologically) simple t.d.l.c. groups are of interest
since they provide the building blocks for a large class of t.d.l.c. groups; see
[CM11, Theorem C]. We investigate the structure of the maximal compact open
subgroups of our universal groups. We will provide explicit descriptions of
the stabilizers of spheres of radius n around a ﬁxed chamber, and also of the
stabilizers of w-spheres, i.e., sets of elements at a ﬁxed Weyl distance w from
a given chamber. In both cases, we obtain a description either as an iterated
semidirect product, or at once as a generalized wreath product.

Organization of the paper

In Section 1, we introduce the necessary notions from the theory of buildings,
and we recall some facts about subdirect products and wreath products in group
theory.

Section 2 is devoted to right-angled buildings. We ﬁrst study the combina-
torics of right-angled Coxeter groups; this gives rise, in particular, to a useful
pair of “Closing Squares Lemmas” (Lemmas 2.9 and 2.10) in right-angled build-
ings. We then have a closer look at parallel residues (a concept introduced
by Tits [Tit92, p. 277] and studied in the context of right-angled buildings
in [Cap14]), after which we focus on tree-walls and wings, and introduce the
tree-wall trees mentioned above. Section 2.4 then deals with diﬀerent types
of colorings in right-angled buildings (legal colorings, weak legal colorings and
directed legal colorings), and in Section 2.5 we introduce directed right-angled
buildings, which will be useful later in our study of the maximal compact open
subgroups.

We are then fully prepared to introduce the universal groups for right-angled
buildings in Section 3. After showing a handful of basic properties of these
groups, we prove that we can extend the local action on a residue of the building
to an element of the universal group (Proposition 3.14). Then we prove that any
non-trivial normal subgroup of U contains subgroups with support on a single
wing with respect to a tree-wall (Proposition 3.20); this will turn out to be one
of the key points to prove the simplicity of the universal group (Theorem 3.24).
In the ﬁnal Section 4, we assume the building to be locally ﬁnite, and we
describe the structure of the maximal compact open subgroups of U . Our main
results in that section are Theorem 4.7 and Proposition 4.11. It turns out to
be very useful to use the notion of generalized wreath products with respect to
a suitably chosen partial order.

Acknowledgment

The idea of deﬁning universal groups for right-angled buildings is due to Pierre-
Emmanuel Caprace. We are grateful to him for sharing his idea with us.

This research was supported by the project “Automorphism groups of lo-
cally ﬁnite trees” (G011012), Research Foundation, Flanders, Belgium (F.W.O.-
Vlaanderen).

3

1 Preliminaries

1.1 Buildings

We will follow the combinatorial approach to buildings, described, for instance,
in [Wei09], from which we will silently adopt the deﬁnitions, notations and
conventions. In particular, if (W, S) is a Coxeter system, then a building ∆ of
type (W, S) is an edge-colored graph, the vertices of which are the chambers
of the building, where two vertices are connected by an edge with label s ∈ S
if they are s-adjacent, i.e., if the two vertices lie in the same s-panel (so the
s-panels of ∆ are complete subgraphs). If c and d are s-adjacent chambers, we
write c s∼ d.

The group of type-preserving automorphisms of ∆ will be denoted by Aut(∆).
We can equip Aut(∆) with the permutation topology, deﬁned by choosing as a
neighborhood basis of the identity, the family of pointwise stabilizers of ﬁnite
subsets of Ch(∆), i.e., a neighborhood basis of the identity is given by

{Aut(∆)(F ) | F is a ﬁnite subset of Ch(∆)}.

It follows that a sequence (gi)i∈N of elements of Aut(∆) has a limit g ∈ Aut(∆)
if and only if for every chamber c ∈ Ch(∆) there is a number N (possibly
depending on c) such that gn.c = g.c for every n ≥ N . One could also use
the property above describing convergence of sequences as a deﬁnition of the
topology and then we think of the permutation topology as the topology of
pointwise convergence. If we think of Ch(Γ) as having the discrete topology
and the elements of Aut(∆) as maps Ch(∆) → Ch(∆), then the permutation
topology is the same as the compact-open topology.

With the deﬁnition of the permutation topology, we can characterize the
open subgroups in Aut(∆). A subgroup G ≤ Aut(∆) is open if and only if there
is a ﬁnite subset F of Ch(∆) such that Aut(∆)(F ) ⊆ G.

In the case where ∆ is locally ﬁnite, the group Aut(∆) is Hausdorﬀ, locally
compact and totally disconnected; see, for example, [Woe91, Lemma 1] and
[AT08, Corollary 3.1.12].

We will use the following notation throughout the paper. Let Σ be a Coxeter
diagram with vertex set S and let (W, S) be a Coxeter system of type Σ with
set of generators S. For each pair s, t ∈ S, we let mst be the corresponding
entry of the Coxeter matrix, i.e., mst is the order of the element st ∈ W .

Deﬁnition 1.1. A Σ-elementary operation is an operation of one of the follow-
ing two types:

(1) Delete a subword of the form ss.

(2) Given s, t ∈ S with s 6= t and mst < ∞, replace an alternating subword

st · · · of length mst by the alternating word ts · · · of length mst.

We call a word Σ-reduced if it cannot be shortened by any ﬁnite sequence of the
operations (1) and (2) above.

For Coxeter groups there is a solution for the word problem.

Lemma 1.2 ([Bro98, Section 3C]). Let (W, S) be a Coxeter system with Coxeter
diagram Σ.

4

1. A word is reduced if and only if it is Σ-reduced.

2. If w1 and w2 are reduced words, then they represent the same element
if and only if w1 can be transformed into w2 by applying a sequence of
elementary operations of type (2).

Let ∆ be a building of type Σ and let δ : Ch(∆) × Ch(∆) → W denote the
Weyl distance. We consider a gallery distance between chambers in a building
as in [TW11].

Deﬁnition 1.3. The gallery distance is deﬁned in Ch(∆) as

dW (c, c′) = l(δ(c, c′)),

i.e., the length of a minimal gallery between the chambers c and c′.

For a ﬁxed chamber c0 ∈ Ch(∆) we deﬁne the spheres at a ﬁxed gallery

distance from c0,

and the balls

S(c0, n) = {c ∈ Ch(∆) | dW (c0, c) = n},

B(c0, n) = {c ∈ Ch(∆) | dW (c0, c) ≤ n}.

Deﬁnition 1.4.

1. Fix a chamber c0 of ∆ and let R be a residue in ∆
containing c0. Let G ≤ Aut(∆) be a group of automorphisms of ∆. We
denote by Gc0 the stabilizer of the chamber c0 in the group G. Moreover,
FixG(R) will denote the ﬁxator of R in G, i.e., the set of elements g ∈ G
such that g.c = c for all c ∈ Ch(R). In particular FixG(R) is subgroup
of Gc0.

2. Let G ≤ Aut(∆) be a group of automorphisms of ∆, and let B be any
subset of Ch(∆). Then we write G|B for the permutation group induced
on B, i.e. G|B := StabG(B)/ FixG(B).

Deﬁnition 1.5. A set of chambers C of ∆ is called combinatorially convex (or
just convex) if for every pair c, c′ ∈ C, every minimal gallery from c to c′ is
entirely contained in C.

1.2 Subdirect products

In Section 4, we will encounter groups that are subdirect products of generalized
wreath products. We brieﬂy recall the notion of a subdirect product in this
section, and explain generalized wreath products in the next section.

Deﬁnition 1.6. Let G1, . . . , Gn be groups. A subdirect product of the groups
G1, . . . , Gn is a subgroup P ≤ G1 × · · · × Gn of the direct product such that for
each i ∈ {1, . . . , n}, the canonical projection P → Gi is surjective.

Example 1.7. Let G be a group acting faithfully on a set S, and let

S = S1 ⊔ S2 ⊔ · · · ⊔ Sn

be a decomposition of S into G-invariant subsets, i.e., each set Si is a union of
orbits for the action of G on S. Then we get corresponding homomorphisms

αi : G → Sym(Si).

5

Let Gi = Im(αi), and deﬁne a new homomorphism

ε : G → G1 × · · · × Gn : g 7→(cid:0)α1(g), . . . , αn(g)(cid:1).

Then ε is injective, hence G ∼= ε(G) ≤ G1 × · · · × Gn, and by deﬁnition, ε(G)
surjects onto each Gi. Hence we have realized G as a subdirect product of
G1 × · · · × Gn.

1.3 Generalized wreath products

The compact open subgroups of the universal groups for locally ﬁnite trees have
the structure of an iterated wreath product [BM00, p. 143]. In the situation of
locally ﬁnite right-angled buildings, we will describe the structure of the compact
open subgroups in Section 4 below. In order to describe these subgroups, we will
require a more general description of groups arising as intersections of distinct
wreath products.

The approach we take to these groups, called generalized wreath products, is
the one described by Gerhard Behrendt in [Beh90]. His most general deﬁnition
of a generalized wreath product requires the notion of a so-called systematic
subset of a set X (see [Beh90, Section 2]), but we will not need this concept
because we will only be dealing with ﬁnite posets (see the comment on top of
p. 260 of loc. cit.).

Deﬁnition 1.8.

1. An equivalence system (X, E) is a pair consisting of a set
X and a set E of equivalence relations on X. The automorphism group of
(X, E) is the set of all permutations of the set X which leave the relations
in E invariant, i.e.,

Aut(X, E) = {g ∈ Sym(X) | x ∼ y ⇐⇒ g.x ∼ g.y

for all x, y ∈ X and for all ∼ ∈ E}.

2. Let (S, ≺) be a poset (i.e., a partially ordered set1). For each s ∈ S, let

Gs be a permutation group acting on a set Xs. Let X =Qs∈S Xs be the

direct product of the sets {Xs}s∈S.
For each s ∈ S, we deﬁne two equivalence relations on X as follows. For
each pair of tuples x, y ∈ X we deﬁne

x s∼ y ⇐⇒ xt = yt for all t ≻ s.
x ≃s y ⇐⇒ xt = yt for all t (cid:23) s.

We let E = { s∼| s ∈ S} ∪ {≃s| s ∈ S} be the set of all these equivalence
relations. We deﬁne the generalized wreath product G = X–WRs∈SGs as

G = {g ∈ Aut(X, E) |

for each x ∈ X and s ∈ S there is gs,x ∈ Gs

such that (g.y)s = gs,x.ys for all y ∈ X with y s∼ x}.

We note that X–WRs∈SGs is indeed a group, with (g−1)s,x = (gs,g−1.x)−1
and (gh)s,x = gs,h.x hs,x.

1All partial orders occurring in this paper are strict partial orders, i.e., binary relations
that are irreﬂexive, transitive and antisymmetric. When ≺ is a (strict) partial order, we write
(cid:22) for the corresponding non-strict partial order.

6

Remark 1.9. If ≺ is the empty partial order, then we get a direct product
of the groups Gs. If the poset S is a chain, then we get the iterated wreath
product of the groups Gs with its imprimitive action, as in [DM96, Section 2.6]
(sometimes also called the complete wreath product).

In the most general case where we will apply this construction, it will, in
fact, be possible to view the generalized wreath product as an intersection of
wreath products acting on the same product set; see Remark 4.12 below.

In our study of the compact subgroups of the universal group it will be useful
to consider certain quotients of generalized wreath products. That is what we
will do now. We retain the notation of the previous paragraphs.

Deﬁnition 1.10. A subset I of the poset (S, ≺) is called an ideal of S if for
every s ∈ I and t ∈ S, t (cid:22) s implies t ∈ I. We deﬁne a new equivalence relation
on X as

x ∼I y ⇐⇒ xs = ys for all s 6∈ I.
As before, let G = X–WRs∈SGs. We consider its subset

D(I) = {g ∈ G | x ∼I g.x for all x ∈ X}.

Proposition 1.11 ([Beh90, Proposition 7.1]). Let I be an ideal of S. Then
D(I) is a normal subgroup of G.

The group D(I) can also be described as a generalized wreath product; see
[Beh90, Theorem 7.2]. We will describe such a generalized wreath product in
the case that |I| = 1. Let r ∈ S such that I = {r} is an ideal of S; then t 6≺ r
for all t ∈ S. We will write D(r) rather than D({r}). For any subset T ⊆ S, let

Proposition 1.12. Let (S, ≺) be a poset, and let I = {r} be an ideal of S. Let

pT denote the projection map pT : X →Qs∈T Xs deﬁned by x 7→ (xs)s∈T .
dr =Qt≻r |Xt| (where dr = 1 if there are no t ≻ r). Then D(r) is isomorphic

to the direct product of dr copies of Gr. In particular, if the sets Xs are ﬁnite,
then

|D(r)| = |Gr|dr .

Proof. This follows from [Beh90, Theorem 7.2]. Notice that the general state-
ment from loc. cit. requires the deﬁnition of an additional partial order, which
is empty in our case.

Lemma 1.13. Let (S, ≺) be a poset, let I = {r} be an ideal of S and let
S′ = S \ {r}. Let H s = Gs for all s ∈ S′, let H r = 1 and consider the group

H = X–WRs∈SH s ≤ G.

Then G = D(r) ⋊ H.

Proof. Let X ′ = Qs∈S ′ Xs and X = Xr × X ′, and consider the generalized

wreath product

G′ = X ′–WRs∈S ′Gs.

Since {r} is an ideal of S, the group D(r) is a normal subgroup of G by Propo-
sition 1.11.

Consider two elements x1 = (xr, x′) and x2 = (yr, x′) of the set X = Xr ×X ′.
Since r 6≻ s for all s ∈ S′ (because {r} is an ideal of S), we have x1 ≃s x2 for

7

all s ∈ S′. Therefore, by deﬁnition of G (see Deﬁnition 1.8), we obtain that
(g.x1)s = (g.x2)s for all s ∈ S′ and all g ∈ G.

Consider the projection map pS ′ : X → X ′. Then this projection induces a
homomorphism ρ : G → G′ deﬁned by (ρ(g).x′)s = (g.(xr, x′))s, for s ∈ S′ and
for any xr ∈ Xr (the choice of the element of Xr is irrelevant by the observation
in the previous paragraph). Notice that the kernel of ρ is precisely D(r).

Observe now that for any h ∈ G′, the element id × h belongs to G.

In
particular, ρ is surjective, the map σ : G′ → G : h 7→ id × h is a section for ρ
and im(σ) = H. We conclude that G = D(r) ⋊ H.

2 Right-angled buildings

We now present the deﬁnition of right-angled Coxeter groups and right-angled
buildings, and from now on, we will assume that we are always in the right-
angled case, unless otherwise stated.

Deﬁnition 2.1. A Coxeter group W is called right-angled if the entries of the
Coxeter matrix are 1, 2 and ∞. In other words, the group W can be described
as

W = h{si}i∈I | (sisj)mij i,

with mij ∈ {2, ∞} for all i 6= j and mii = 1 for all i ∈ I.

In this case, we call the Coxeter diagram Σ of W a right-angled Coxeter diagram.
A right-angled building ∆ is a building of type Σ, where Σ is a right-angled

Coxeter diagram.

Theorem 2.2 ([HP03, Proposition 1.2]). Let (W, S) be a right-angled Coxeter
group and (qs)s∈S be a family of natural numbers with qs ≥ 2. There exists a
right-angled building of type (W, S) such that for every s ∈ S, each s-panel has
size qs. This building is unique, up to isomorphism.

This was proved for the right-angled Fuchsian case in [Bou97]. According to
Haglund and Paulin [HP03] this result was proved by M. Globus and was also
known by M. Davis, T. Januszkiewicz and J. Światkowski.

A right-angled building with prescribed thickness in the panels, as described

in Theorem 2.2, is called a semi-regular building.

Theorem 2.3 (Theorem 1.1 in [Cap14]). Let ∆ be a thick semi-regular building
of right-angled type (W, S). Assume that (W, S) is irreducible and non-spherical.
Then the group Aut(∆) of type-preserving automorphisms of ∆ is abstractly
simple and acts strongly transitively on ∆.

2.1 Reduced words in right-angled Coxeter groups

The elementary operations from Deﬁnition 1.1 become easier to describe in
right-angled Coxeter groups since the generators either commute or are not re-
lated. To be concrete, let (W, S) be a right-angled Coxeter system with Coxeter
diagram Σ and set of generators S = {si | i ∈ I}. We deﬁne a Σ-elementary
operation as an operation of the following two types:

8

(1) Delete a subword of the form ss, with s ∈ S.

(2) Replace a subword st by ts if mts = 2.

A word in the free monoid MS is then reduced if it cannot be shortened by a
sequence of Σ-elementary operations. Moreover, by Lemma 1.2, two reduced
words represent the same element of W if and only if one can be obtained from
the other by a sequence of elementary operations of type (2).

We observe that if w1 is a reduced word with respect to Σ and w2 is a word
obtained from w1 by applying one Σ-elementary operation of type (2), then
w2 is also a reduced word and w1 and w2 represent the same element of W .
Furthermore, the words w1 and w2 only diﬀer in two consecutive letters that
have been switched, let us say,

w1 = s1 · · · srsr+1 · · · sℓ and w2 = s1 · · · sr+1sr · · · sℓ, with |srsr+1| = 2 in Σ.

If σ ∈ Sym(ℓ) then we denote by σ.w1 the word obtained by permuting the
letters in w1 according to the permutation σ, i.e.,

σ.w1 = sσ(1) · · · sσ(r)sσ(r+1) · · · sσ(ℓ).

Hence, if w1 and w2 are as above and σ = (r r + 1) ∈ Sym(ℓ), then σ.w1 = w2.

Deﬁnition 2.4. Let w = s1 · · · sℓ be a reduced word in MS with respect to a
right-angled Coxeter diagram Σ. Let σ = (i i + 1) be a transposition in Sym(ℓ),
with i ∈ {1, . . . , ℓ − 1}. We call σ a w-elementary transposition if si and si+1
commute in W .

In this way, we can associate an elementary transposition to each Σ-elementary

operation of type (2). By Lemma 1.2, two reduced words w and w′ represent
the same element of W if and only if

w′ = (σn · · · σ1).w,

where each σi is a (σi−1 · · · σ1).w-elementary transposition,

i.e., if w′ is obtained from w by a sequence of elementary transpositions.

Deﬁnition 2.5. If w is a reduced word of length ℓ with respect to Σ, then we
deﬁne

Rep(w) = {σ ∈ Sym(ℓ) | σ = σn · · · σ1, where each σi is a

(σi−1 · · · σ1).w-elementary transposition}.

The set Rep(w) is formed by the permutations of ℓ letters which give rise
to reduced representations of w, according to the relations in the right-angled
Coxeter diagram Σ.

Deﬁnition 2.6. Let w = s1 · · · sℓ be a reduced word of length ℓ in MS with
respect to Σ. Let Sw = {1, . . . , ℓ}. We deﬁne a new partial order “≺w” on Sw
as follows:

i ≺w j ⇐⇒ σ(i) > σ(j) for all σ ∈ Rep(w).

9

Note that i ≺w j implies that i > j. The fact that the order is reversed will
be useful in Section 4.2 when we will describe certain compact open subgroups
as generalized wreath products.

Observation 2.7. Let w = s1 · · · si · · · sj · · · sℓ be a reduced word in MS with
respect to a right-angled Coxeter diagram Σ.

1. Let σ ∈ Rep(w) such that σ can be written as a product of elemen-
tary transpositions σn · · · σ1. Then for each k ∈ {1, . . . , n}, the word
(σk · · · σ1).w is also a reduced representation of w.

2. If σ1 is a w-elementary transposition switching two generators si and sj
and σ2 is a σ1.w-elementary transposition switching two generators si′ and
sj′ with {i, j} ∩ {i′, j′} = ∅ then σ2 is also a w-elementary transposition.

3. If |sisj| = ∞ in Σ, then j ≺w i.

4. If j 6≺w i then by (3), |sisj| = 2, and moreover, for each k ∈ {i + 1, . . . , j −

1}, either |sisk| = 2 or |sjsk| = 2 (or both).

5. Let sr and sr+1 be consecutive letters in w. Then |srsr+1| = 2 if and only

if r + 1 6≺w r.

The next lemma describes some conditions on the existence and structure of

distinct reduced representations of elements in right-angled Coxeter groups.

Lemma 2.8. Let (W, S) be a right-angled Coxeter system with Coxeter dia-
gram Σ. Let w = w1sr · · · stw2 be a reduced word in MS with respect to Σ. If
t 6≺w r then there exist two reduced representations of the word w of the form

w1 · · · srst · · · w2

and w1 · · · stsr · · · w2,

i.e. one can exchange the positions of sr and st using only elementary operations
on the generators of the set {sr, sr+1, . . . , st−1, st}, without touching the preﬁx
w1 and the suﬃx w2.

Proof. We will prove the result by induction on the number N of letters be-
tween sr and st.
If N = 0 then w = w1srstw2, and the result follows from
Observation 2.7(4).

Assume by induction hypothesis that if N ≤ n the result holds. Consider
w = w1sr · · · stw2 with N = n + 1, i.e., with n + 1 letters between sr and st in
w, and let σ ∈ Rep(w) such that σ(t) < σ(r).

If |srsr+1| = 2 then (r r + 1) ∈ Rep(w) and

w = (r r + 1).w = w1sr+1sr · · · stw2

is a reduced representation of w with N = n letters between sr and st. Moreover
the permutation σ ◦ (r r + 1) ∈ Rep(w) satisﬁes the conditions of the lemma.
Thus the result follows from the induction hypothesis.

Assume now that |srsr+1| = ∞. By Observation 2.7(4) we have |sr+1st| = 2.
Furthermore from Observation 2.7(3) we obtain that σ(r) < σ(r + 1). Hence
σ(t) < σ(r + 1) and we can apply the induction hypothesis to the generators

10

sr+1 and st since the number of letters between them is less than or equal to n.
Thus we obtain that

w′ = w1sr · · · sr+1st · · · w2

and w∗ = w1sr · · · stsr+1 · · · w2

are reduced representations of w.

Let α ∈ Rep(w) such that α.w = w∗. The number of letters between sr and
st in w∗ is less than or equal to n and therefore we can apply the induction
hypothesis to w∗ with σ ◦ α−1 ∈ Rep(w∗) and we obtain that

w1 · · · srst · · · w2

and w1 · · · stsr · · · w2

are two reduced representations of w∗ and hence of w.

We will now present two results that can be used in right-angled buildings to
modify minimal galleries using the commutation relations of the Coxeter group.
We will refer to these results as the “Closing Squares Lemmas” (see also Figure 1
below).

Lemma 2.9 (Closing Squares 1). Let c0 be a ﬁxed chamber in a right-angled
building ∆. Let c1, c2 ∈ S(c0, n) and c3 ∈ S(c0, n + 1) such that

c1

t∼ c3

and

c2

s∼ c3

for some s 6= t. Then |st| = 2 in Σ and there exists c4 ∈ S(c0, n − 1) such that

c1

s∼ c4

and c2

t∼ c4.

Proof. Let w1 and w2 be reduced representations of δ(c0, c1) and δ(c0, c2), re-
spectively. Then w1t and w2s are two reduced representations of δ(c0, c3) and
thus w1t = w2s in W ; hence |st| = 2. Furthermore, l(w1s) < l(w1) and thus
l(w1s) = n − 1. Let c4 be the chamber in S(c0, n − 1) that is s-adjacent to c1.
Then w1st = w1ts = w2ss = w2 in W . Therefore c4

t∼ c2.

Lemma 2.10 (Closing Squares 2). Let c0 be a ﬁxed chamber in a right-angled
building ∆. Let c1, c2 ∈ S(c0, n) and c3 ∈ S(c0, n − 1) such that

c1

s∼ c2

and

c2

t∼ c3

for some s 6= t. Then |st| = 2 in Σ and there exists c4 ∈ S(c0, n − 1) such that

c1

t∼ c4

and c3

s∼ c4.

Proof. Let w1 and w2 be reduced representations of δ(c0, c1) and δ(c0, c2). As
c1 and c2 are s-adjacent and are both in S(c0, n), we know that w1 = w2 =
s1 · · · sn−1s in W . Let v1 ∈ S(c0, n− 1) be the chamber s-adjacent to c1 (and c2)
at Weyl distance s1 · · · sn−1 from c0.

Applying Lemma 2.9 to v1 and c3 we obtain v2 ∈ S(c0, n − 2) such that

v2

t∼ v1

and v2

s∼ c3.

Furthermore |st| = 2 in Σ. Since there is a minimal gallery of type ts between v2
and c1, there must be one of type st. Hence there is a chamber c4 ∈ S(c0, n − 1)
that is t-adjacent to c1 and s-adjacent to v2. Since v2 is s-adjacent to c3 and
to c4, we conclude that c3 and c4 are s-adjacent.

11

c1

t

s

c3

n + 1

c1

s

c2

s

t

c2

n

n − 1

c4
...

c0

n

t

c3

n − 1

t

c4

s
...

c0

(a) Lemma 2.9

(b) Lemma 2.10

Figure 1: Closing squares

As a consequence of the closing squares lemmas, we are able to transform

minimal galleries into “concave” minimal galleries.

Lemma 2.11. Let c1 and c2 be two chambers in ∆. There exists a minimal
gallery γ = (v0, . . . , vℓ) in ∆ between c1 = v0 and c2 = vℓ such that there are
numbers 0 ≤ j ≤ k ≤ ℓ satisfying the following:

1. dW (c0, vi) < dW (c0, vi−1) for all i ∈ {1, . . . , j};

2. dW (c0, vi) = dW (c0, vi−1) for all i ∈ {j + 1, . . . , k};

3. dW (c0, vi) > dW (c0, vi−1) for all i ∈ {k + 1, . . . , ℓ}.

Proof. Let (v0, . . . , vℓ) be a minimal gallery from c1 to c2 in ∆. We will essen-
tially prove the result by closing squares whenever possible.

Let h(γ) := Pℓ

dW (c0, vi) be the “total height” of the gallery w.r.t. c0.
Observe that the gallery γ is of the required form if and only if it does not
contain length 2 subgalleries of any of the following form:

i=0

(a) (a, b, c) with dW (c0, a) = r, dW (c0, b) = r + 1, dW (c0, c) = r;

(b) (a, b, c) with dW (c0, a) = r, dW (c0, b) = r + 1, dW (c0, c) = r + 1;

(c) (a, b, c) with dW (c0, a) = r + 1, dW (c0, b) = r + 1, dW (c0, c) = r.
Indeed, the exclusion of galleries of type (a) and (b) says that once we start
going up, we have to continue going up, and the exclusion of galleries of type
(a) and (c) says that once we stop going down, we can never go down again.

We will now show that if γ contains a length 2 subgallery of any of these
forms, then we can replace γ by another minimal gallery γ′ from c1 to c2 for
which h(γ′) < h(γ). Since h(γ) is a natural number, this process has to stop
eventually, and we will be left with a minimal gallery of the required form.

If we have a subgallery of type (a), then we can apply Lemma 2.9 to replace
b by some chamber b′ with dW (c0, b′) = r − 1. If we have a subgallery of type
(b) or type (c), then we can apply Lemma 2.10 to replace b by some chamber
b′ with dW (c0, b′) = r. In all cases, we have replaced one chamber in γ by a
chamber which is closer to c0, and hence we have indeed decreased the value of
h(γ), as claimed.

12

Corollary 2.12. Let c0 be a ﬁxed chamber in ∆. If c1, c2 ∈ B(c0, n), then there
exists a minimal gallery from c1 to c2 inside B(c0, n).

Proof. This follows directly from Lemma 2.11.

2.2 Projections and parallel residues

Let Σ be a right-angled Coxeter diagram with vertex set S and let (W, S) be
the Coxeter system of type Σ with set of generators S = (si)i∈I . Let ∆ be a
right-angled building of type Σ.

Deﬁnition 2.13. Let c be a chamber in ∆ and R be a residue in ∆. The
projection of c on R is the unique chamber in R that is closest to c and it is
denoted by projR(c).

The next fact is usually called the gate property and can be found, for

instance, in [AB08, Proposition 3.105].

Proposition 2.14 (Gate property). Let c be a chamber in ∆ and R be a residue
in ∆. For any chamber c′ in R, there is a minimal gallery from c to c′ passing
through projR(c), and such that the subgallery from projR(c) to c′ is contained
in R.

Next we present applications of the projection map that will be useful for
us later on. The ﬁrst shows how the projections to panels are related to the
structure of the Coxeter diagram of the building.

Lemma 2.15. Let c0 be a ﬁxed chamber of ∆ and let s ∈ S. Let c1 ∈ S(c0, n)
(c) = c2 ∈ S(c0, n + 1) then c2 is
and c ∈ B(c0, n + 1) \ Ch(Ps,c1). If projPs,c1
t-adjacent to some c3 ∈ S(c0, n) with t 6= s and st = ts in W .

Proof. By Lemma 2.11 we can take a concave minimal gallery between c1 and
c2. Let w = s1 · · · sℓ be the corresponding reduced representation of δ(c, c2).
Let v1 be the chamber sℓ-adjacent to c2 that is at Weyl distance s1 · · · sn−1
from c. We have dW (c0, c2) ≥ dW (c0, v1).
We know that sℓ 6= s because projPs,c1

(c) = c2 and hence l(w) < l(ws). If
v1 ∈ S(c0, n) then the result follows from Lemma 2.9. If v1 ∈ S(c0, n + 1) then
the desired adjacency follows from Lemma 2.10.

The next result will allow us, in the case of semi-regular right-angled build-
ings, to extend a permutation of an s-panel to an automorphism of the whole
building in a useful way.

Proposition 2.16 ([Cap14, Proposition 4.1]). Let ∆ be a semi-regular right-
angled building of type Σ. Let s ∈ S and P be an s-panel. Given any permutation

conditions:

α ∈ Sym(Ch(P)) there is eα ∈ Aut(∆) stabilizing P satisfying the following two
1. eα|Ch(P) = α;
2. eα ﬁxes all chambers of ∆ whose projection to P is ﬁxed by α.

Our last application of the projection map gives a consequence of combina-

torial convexity (cf. Deﬁnition 1.5), in terms of the projection map.

13

Proposition 2.17 ([Cap14, Section 2]). If a set of chambers C is combinatori-
ally convex then for every c ∈ C and every residue R of ∆ with Ch(R) ∩ C 6= ∅
we have projR(c) ∈ C.

Proof. Let c1 ∈ Ch(R) ∩ C and c ∈ C. We know that there is a minimal gallery
from c to c1 passing through projR(c). As C is combinatorially convex the result
follows.

If R1 and R2 are two residues, then

projR1 (R2) = {projR1 (c) | c ∈ Ch(R2)}

is the set of chambers of a residue contained in R1. This is again a residue
(cf. [Cap14, Section 2]) and the rank of projR1 (R2) is bounded above by the
ranks of both R1 and R2.

We ﬁnally collect some facts from [Cap14] about parallelism of residues.

Deﬁnition 2.18. Two residues R1 and R2 are called parallel if projR1 (R2) = R1
and projR2(R1) = R2.

In particular, if P1 and P2 are two parallel panels, then the chamber sets of
P1 and P2 are mutually in bijection under the respective projection maps (cf.
[Cap14, Section 2]).

Lemma 2.19 ([Cap14, Lemma 2.2]). Let J1, J2 ⊂ S be two disjoint subsets
with [J1, J2] = 1. Let c ∈ Ch(∆). Then

Ch(RJ1∪J2,c) = Ch(RJ1,c) × Ch(RJ2,c),

and for i ∈ {1, 2}, the canonical projection map Ch(RJ1∪J2,c) → Ch(RJi,c)
coincides with the restriction of projRJi ,c to Ch(RJ1∪J2,c). In particular, any
two Ji-residues contained in RJ1∪J2,c are parallel.

Lemma 2.20 ([Cap14, Lemma 2.5]). Let P1 and P2 be panels in ∆. If there
are two chambers of P2 having distinct projections on P1, then P1 and P2 are
parallel.

Deﬁnition 2.21. Let J ⊆ S. We deﬁne the set

J ⊥ = {t ∈ S \ J | ts = st for all s ∈ J}.

If J = {s} then we denote the set J ⊥ by s⊥.

Proposition 2.22 ([Cap14, Proposition 2.8]). Let ∆ be a right-angled building
of type (W, S).

1. Any two parallel residues have the same type.

2. Let J ⊆ S. Given a residue R of type J, a residue R′ is parallel to R if
and only if R′ is of type J and R and R′ are both contained in a common
residue of type J ∪ J ⊥.

Proposition 2.23 ([Cap14, Corollary 2.9]). Let ∆ be a right-angled building.
Then parallelism of residues is an equivalence relation.

14

2.3 Tree-walls and wings

We want to describe the equivalence classes of parallelism of panels in right-
angled buildings.
It turns out that these classes are the so called tree-walls,
initially deﬁned in [Bou97] and taken over in [TW11]. Each tree-wall separates
the building into combinatorially convex components, which will be called wings
as in [Cap14]. At the end of this section, we will deﬁne a distance between tree-
walls of the same type, which will be useful for our inductive arguments later
on.

We will assume from now on (and until the end of the paper) that ∆
is a semi-regular right-angled building with prescribed thickness of the
panels given by a set of cardinal numbers (qs)s∈S (see Theorem 2.2).

Deﬁnition 2.24. Let s ∈ S. An s-tree-wall in ∆ is an equivalence class of
parallel s-panels of ∆.

By some slight abuse of notation, we will write Ch(T ) for the set of all
chambers contained in some s-panel belonging to the s-tree-wall T , and we will
refer to these chambers as the chambers of T .

Using Proposition 2.22 we know exactly how to describe the tree-walls in a

right-angled building.

Corollary 2.25. Let ∆ be a right-angled building of type (W, S) and let s ∈ S.
Then two s-panels P1 and P2 belong to the same s-tree-wall if and only if they
are both contained in a common residue of type s ∪ s⊥.

In other words, the s-tree-walls are the sets of s-panels contained in a residue

of type s ∪ s⊥.

Corollary 2.26. Let T be an s-tree-wall in ∆, let P be an s-panel in T , and
let R be the residue of type s ∪ s⊥ containing P. Then Ch(T ) = Ch(R).

Corollary 2.27 ([TW11, Corollary 3]). The following possibilities for tree-walls
in ∆ can occur:

1. An s-tree-wall is reduced to a panel if and only if hs⊥i is trivial.

2. An s-tree-wall is ﬁnite but not reduced to a panel if and only if hs⊥i is

ﬁnite but non-trivial.

3. An s-tree-wall is inﬁnite if and only if hs⊥i is inﬁnite.

Example 2.28.

1. Let W = hs, t | s2 = t2 = 1i. Let ∆ be a right-angled
building of type W . Then ∆ is a tree. The s-tree-walls are the s-panels
and the t-tree-walls are the t-panels of ∆.

2. Let W = hs, t, q | s2 = t2 = q2 = (st)2 = 1i and let ∆ be a right-angled

building of type W .

• The q-tree-walls are the sets of q-panels of ∆.
• The s-tree-walls are the sets of s-panels in a common residue of type

{s, t} in ∆.

15

• The t-tree-walls are the sets of t-panels in a common residue of type

{s, t} in ∆.

By Corollary 2.26, we can deﬁne projections on tree-walls.

Deﬁnition 2.29. Let s ∈ S, let T be an s-tree-wall of ∆, and let c ∈ Ch(∆).
We deﬁne the projection of c on T as projT (c) := projR(c), where R is the
residue of type s ∪ s⊥ containing the s-panels of T .

Lemma 2.30. Let s ∈ S, let T be an s-tree-wall of ∆, let c ∈ Ch(∆) and let
c2 ∈ Ch(T ). Let w1 and w2 be reduced representations of δ(c, projT (c)) and
δ(projT (c), c2), respectively. Then w1w2 is a reduced representation of δ(c, c2).

Proof. This follows immediately from the gate property (Proposition 2.14).

Each s-tree-wall yields a partition of the building into qs combinatorially
convex components, which are called wings. We deﬁne wings in a building and
present some results that connect wings, projections and tree-walls.

Deﬁnition 2.31. Let c ∈ Ch(∆) and s ∈ S. Then the set of chambers

Xs(c) = {x ∈ Ch(∆) | projPs,c(x) = c}

is called the s-wing of c.

Notice that if P is any s-panel, then the set of s-wings of each of the qs

diﬀerent chambers of P forms a partition of Ch(∆) into qs subsets.

We note that we deﬁned wings with respect to panels only since it is suﬃcient
for our purposes. However, this concept can be generalized to residues of any
type; see [Cap14].

Proposition 2.32 ([Cap14, Proposition 3.2]). In a right-angled building, wings
are combinatorially convex.

The next lemma is proved in [Cap14, Lemma 3.1] for general residues.

Lemma 2.33. Let s ∈ S and T be an s-tree-wall. Let P1 and P2 be s-panels
of T , and let c1 ∈ P1 and c2 ∈ P2. Then Xs(c1) = Xs(c2) if and only if
c2 = projP2 (c1), i.e., if and only if c1 ∈ Xs(c2).

In particular, projection between parallel s-panels induces an equivalence

relation on Ch(T ).

Proposition 2.34. Let P1, P2 and P3 be s-panels in a common s-tree-wall. Let
c1 ∈ P1, c2 = projP2(c1) and c3 = projP3 (c1). Then projP3 (c2) = c3.

Proof. By Lemma 2.33, c2 = projP2 (c1) implies Xs(c1) = Xs(c2), and c3 =
projP3 (c1) implies Xs(c1) = Xs(c3). Hence Xs(c2) = Xs(c3), and therefore
projP3 (c2) = c3.

By Lemma 2.33, it makes sense to deﬁne a partition of Ch(∆) into s-wings

with respect to an s-tree-wall.

16

Deﬁnition 2.35. Let s ∈ S and T be an s-tree-wall. Let P be an arbitrary
s-panel of T . Then P induces a partition

{Xs(c) | c ∈ P}

of Ch(∆) into qs subsets, which we call the partition of Ch(∆) into s-wings with
respect to T . By Lemma 2.33, this partition is independent of the choice of P
in T .

We will now study the interaction between diﬀerent s-tree-walls.

Deﬁnition 2.36. Let s ∈ S and let T1 and T2 be two s-tree-walls in ∆. We
deﬁne the set

projT1(T2) = {projT1(c) | c ∈ T2}.

Proposition 2.37. Let s ∈ S and let T1 and T2 be distinct s-tree-walls. Let
c2 ∈ projT2(T1) and c1 = projT1(c2). Let w be a reduced representation of
δ(c1, c2). Then the following hold.

1. If t ∈ S with |ts| ≤ 2 then l(tw) = l(wt) = l(w) + 1.

2. c2 = projT2(c1).

3. Ch(T1) ⊆ Xs(c2).

4. If c′

Proof.

(c′

2) = c2.

2 ∈ projT2 (T1) then projPs,c2
1. Let t ∈ S such that |ts| ≤ 2. Let c be a chamber t-adjacent to c1
(and hence c ∈ Ch(T1)). Since c1 = projT1(c2), we can apply the gate
property (Proposition 2.14) to ﬁnd a minimal gallery from c to c2 passing
through c1, of type tw. In particular, l(w) < l(tw).
Since c2 ∈ projT2(T1), there is a chamber d ∈ T1 such that projT2 (d) = c2.
Let w1 be a reduced representation of δ(d, c1). By the gate property again,
w1w is a reduced representation of δ(d, c2). Let e be a chamber t-adjacent
to c2 (and therefore in Ch(T2)). The gate property w.r.t. projT2(d) = c2
now implies that l(w1wt) > l(w1w) and hence l(wt) > l(w) as well.

2. By the gate property, w can be written as w1w2 where w2 is a reduced
representation of the subgallery from projT2(c1) to c2 inside T2. Hence
|ts| ≤ 2 for all t ∈ w2. By Statement 1 we get l(w2) = 0 and thus
c2 = projT2(c1).

3. Let c ∈ Ch(T1) and let w1 ∈ W be a reduced representation of δ(c, c1). By
Lemma 2.30, w1w is a reduced representation of δ(c, c2). By Statement 1,
l(w1w) < l(w1ws), and it follows that projPs,c2

(c) = c2.

4. By Statement 3, Ch(T1) ⊆ Xs(c2) and Ch(T1) ⊆ Xs(c′

2). Since the s-wings
with respect to T2 form a partition of Ch(∆) (see Deﬁnition 2.35), this
implies Xs(c2) = Xs(c′

2) = c2 by Lemma 2.33.

2), and hence projPs,c2

(c′

We ﬁnish this section by deﬁning a distance between tree-walls of the same

type.

17

Deﬁnition 2.38. Let s ∈ S. Let V1 be the set of all s-tree-walls of ∆ and let
V2 be the set of all residues of type S \ {s} of ∆. Consider the bipartite graph
Γs with vertex set V1 ⊔ V2, where an s-tree-wall T ∈ V1 is adjacent to a residue
R ∈ V2 if and only if Ch(T ) ∩ Ch(R) 6= ∅.

The graph Γs will be called the tree-wall tree of type s.

Notice that each s-tree-wall T in Γs has precisely qs neighbors, corresponding
to each of the residues of type S \ {s} lying in a distinct part of the partition of
Ch(∆) induced by the s-wings with respect to T (see Deﬁnition 2.35).

Moreover, if there is a minimal path T1 − R1 − · · · − R2 − T2 in Γs and
c1 ∈ Ch(T1) ∩ Ch(R1) and c2 ∈ Ch(T2) ∩ Ch(R2), then c2 ∈ projT2 (T1) and
c1 ∈ projT1(T2). Therefore Proposition 2.37 then implies that Ch(T2) ⊆ Xs(c1)
and Ch(T1) ⊆ Xs(c2).

Proposition 2.39. Let s ∈ S. The tree-wall tree Γs is a tree.

Proof. The graph Γs is connected. Therefore it is enough to show that there
are no cycles in Γs. If there were a non-trivial cycle in Γs, say

T1 − R1 − T2 − · · · − Rn − T1,

then the chambers of T2 would be contained in two distinct s-wings with respect
to T1, namely the ones corresponding to R1 and Rn, which is a contradiction.
We conclude that Γs is a tree.

Deﬁnition 2.40. Let s ∈ S and let T1 and T2 be two s-tree-walls. We deﬁne
the s-tree-wall distance, denoted by distT W , as

distT W (T1, T2) =

1
2

distΓs(T1, T2),

where distΓs(T1, T2) denotes the discrete distance in the tree-wall tree of type s.

2.4 Colorings in right-angled buildings

In this section we will deﬁne diﬀerent types of colorings of the chambers of semi-
regular right-angled buildings. These colorings will be necessary to deﬁne the
universal group later in Section 3. We will use the following notation throughout
the section.

Let (W, S) be a right-angled Coxeter system with Coxeter diagram Σ with
vertex set I and set of generators S = {si}i∈I. Let (qs)s∈S be a set of cardinal
numbers with qs ≥ 2 for all s ∈ S. Let ∆ be the unique right-angled building
of type (W, S) with parameters (qs)s∈S (see Theorem 2.2). For each s ∈ S, let
Ys be a set of cardinality qs; we will refer to Ys as the set of s-colors.

Deﬁnition 2.41. Let s ∈ S. A map hs : Ch(∆) → Ys is called an s-coloring of
∆ if

(C) for every s-panel P there is a bijection between the colors in Ys and the

chambers in P.

18

2.4.1 Legal colorings

Deﬁnition 2.42. Let s ∈ S. An s-coloring hs : Ch(∆) → Ys is called a legal
s-coloring if it satisﬁes

(L) for every S \ {s}-residue R and for all c1, c2 ∈ Ch(R), hs(c1) = hs(c2).

In particular, if Pt is a t-panel then for every s ∈ S \ {t} one can consider
the s-color of the panel Pt, denoted by hs(Pt), since all the chambers in Pt have
the same s-color. Similarly, if T is a t-tree-wall with |st| = ∞ in Σ, then by
Corollary 2.25, hs(c1) = hs(c2) for all c1, c2 ∈ Ch(T ), and hence the color hs(T )
is well-deﬁned.

Proposition 2.43. Let c0 ∈ Ch(∆) and (h1
legal colorings of ∆. Then there exists c ∈ Ch(∆) such that h1
all s ∈ S.

s)s∈S and let (h2

s)s∈S be two sets of
s(c0) for

s(c) = h2

Proof. We will prove the result recursively. For each s ∈ S, let Ps,c0 be the
s-panel that contains c0. By the deﬁnition of a legal coloring, we know that
there exists c1 ∈ Ps,c0 such that h1
t (c0) for
all t 6= s. Repeating this procedure for each s ∈ S we ﬁnd a chamber c such
that h1

s(c0). Moreover, h1

t (c1) = h1

s(c1) = h2

s(c0) for all s ∈ S.

s(c) = h2

Proposition 2.44. Let (h1
Let c0, c′
g ∈ Aut(∆) such that g.c0 = c′

0 ∈ Ch(∆) such that h1

s)s∈S and (h2

s)s∈S be two sets of legal colorings of ∆.
s(c0) for all s ∈ S. Then there exists

0) = h2

s(c′
0 and h2

s = h1

s ◦ g, for all s ∈ S.

Proof. Consider the set

Gn = {g ∈ Aut(∆) | c′

0 = g.c0 and h1

s ◦ g|B(c0,n) = h2

s|B(c0,n) for all s ∈ S}.

We will recursively construct a sequence of elements gi (i ∈ N) such that for
every i ∈ N, we have gi ∈ Gi, and if j ∈ N is larger than i, then gi and gj agree
on the ball B(c0, i).

Since Aut(∆) is chamber-transitive, G0 is non-empty and we can pick a

g0 ∈ G0 at random.

Let us assume that we already have constructed automorphisms gi for every
i ≤ n with the right properties. In particular gn.c0 = c′
s(c)
for all c ∈ B(c0, n). Therefore without loss of generality we can assume that
c′
0 = c0 and that

s ◦ gn(c) = h2

0 and h1

h1
s(c) = h2

s(c) for all s ∈ S and for all c ∈ B(c0, n).

(∗)

We will construct an element gn+1 of Gn+1 by modifying gn (which now acts
trivially on B(c0, n)) step by step along S(c0, n + 1).

Let v ∈ S(c0, n) and ﬁx some s ∈ S. Let αs be the permutation of the cham-
s(αs(c)) for all c ∈ Ps,v. By Proposition 2.16,

bers of Ps,v such that h2

s(c) = h1

chambers of ∆ whose projection on Ps,v is ﬁxed by αs.

and let d = projPs,v (c). If d ∈ B(c0, n), then d is ﬁxed by αs, and this already

αs extends to an automorphismfαs such thatfαs stabilizes Ps,v and ﬁxes all the
We claim thateαs ﬁxes B(c0, n+ 1)\ Ch(Ps,v). Let c ∈ B(c0, n+ 1)\ Ch(Ps,v),
implies that c is ﬁxed byfαs.

19

Suppose now that d ∈ S(c0, n + 1). By Lemma 2.15 there exists v′ ∈ S(c0, n)
such that d is t-adjacent to v′ with t 6= s (and ts = st in W ). The deﬁnition of
a legal coloring together with (∗) now implies

h1
s(d) = h1

s(v′) = h2

s(v′) = h2

s(d),

so αs must ﬁx d. Hence the automorphismfαs ﬁxes c also in this case.
We have thus constructed, for each s ∈ S, an automorphismfαs ∈ Aut(∆),
with the property that all elements of B(c0, n + 1) that are moved by fαs are

contained in S(c0, n + 1) ∩ Ps,v. We now vary s, and we consider the element

αv =Ys∈Sfαs ∈ Aut(∆)

where the product is taken in an arbitrary order. Even though the element αv
might depend on the chosen order, its action on B(c0, n + 1) does not, since the

disjoint.

sets of chambers of B(c0, n + 1) moved by the elements fαs for distinct s, are

Now we have an automorphism αv, for each chamber v ∈ S(c0, n), ﬁxing
B(c0, n + 1) \ S(v, 1). Next, we want to vary v along S(c0, n). We claim that if
v1, v2 ∈ S(c0, n) then αv1 and αv2 restricted to B(c0, n+1) have disjoint support.
The only case that remains to be checked is when S(v1, 1) and S(v2, 1) have a
chamber c ∈ S(c0, n + 1) in common; we want to show that both αv1 and αv2
ﬁx c.

By Lemma 2.9, there are s 6= t in W (with st = ts) such that c s∼ v1
and c t∼ v2. By the deﬁnition of a legal coloring together with (∗), we have
h1
t (c) = h1
t (v1) = h2
t (c). Therefore αv2 (c) = ]αv2,t(c) must ﬁx c.
Similarly h1
s(c), and so αv1 ﬁxes c. This proves our claim, and hence
αv1 and αv2 restricted to B(c0, n+1) have disjoint support for any two chambers
v1 and v2 in S(c0, n).

t (v1) = h2
s(c) = h2

We can now consider the product

gn+1 = Yv∈S(c0,n)

αv = Yv∈S(c0,n) Ys∈S gαv,s ∈ Aut(∆),

where the product is again taken in an arbitrary order. By the previous para-
graph, the action of gn+1 on B(c0, n + 1) is independent of the chosen order, and

s(c) = h1

s(c) = h1

the sets of chambers of B(c0, n + 1) moved by distinct elements gαv,s are disjoint.
Since every gαv,s has the property that h2
s(gαv,s(c)) for all c ∈ Ps,v,

s(gn+1(c)) for all c ∈ S(c0, n + 1), and therefore

we conclude that h2
gn+1 ∈ Gn+1.

So we have extended the g ∈ Gn to an element gn+1 in Gn+1 agreeing
with gn on the ball B(c0, n). The sequence g0, g1, . . . obtained by repeating
this procedure hence converges to an element g ∈ Aut(∆) (with respect to the
permutation topology). From the construction and the deﬁnition of the sets Gi,
the automorphism g has the desired properties.

2.4.2 Weak legal colorings

We deﬁne a weaker version of the legal colorings of Deﬁnition 2.42. The goal
will be to prove later that these two types of colorings play a similar role in the
deﬁnition of the universal group.

20

Deﬁnition 2.45. Let s ∈ S. An s-coloring hs is called a weak legal s-coloring
if the following holds:

(W) if P1 and P2 are two s-panels in a common s-tree-wall then for all c ∈ P1,

we have hs(c) = hs(projP2 (c)).

A legal coloring is in particular a weak legal coloring. Conversely, the re-

striction of a weak legal coloring to a tree-wall is a legal coloring.

Lemma 2.46. Let s ∈ S. A weak legal s-coloring restricted to an s-tree-wall T
is a legal coloring of Ch(T ).

Proof. If c1, c2 ∈ Ch(T ) are two t-adjacent chambers with t ∈ S \ {s} then
(c2) = c1. Hence
c1 and c2 lie in distinct parallel s-panels of T and projPs,c1
hs(c1) = hs(c2).

Deﬁnition 2.47. Let s ∈ S and let G ≤ Sym(Ys). Two s-colorings h1
s and
h2
s are said to be G-equivalent if for every s-panel P there is g ∈ G such that
h1
s|P = g ◦ h2

s|P.

Proposition 2.48. Let s ∈ S and G ≤ Sym(Ys) be a transitive permutation
group. Then every weak legal s-coloring is G-equivalent to some legal s-coloring.

Proof. Let hs be a weak legal coloring of ∆. We want to show that there is a
legal coloring hℓ

s that is G-equivalent to hs.

Let c0 be a ﬁxed chamber of ∆. We will deﬁne hℓ

s recursively using the

s-tree-wall distance. Let T0 = Ts,c0. For each chamber c ∈ Ch(T0), deﬁne

hℓ
s(c) = hs(c) = idG ◦ hs(c);

by Lemma 2.46, the restriction of hℓ
Assume that we have deﬁned hℓ

s to Ch(T0) is a legal coloring.
s for all chambers of every s-tree-wall of
∆ at tree-wall distance ≤ n from T0. Let T2 be an s-tree-wall at tree-wall
distance n + 1 from T0. By Proposition 2.39 there is a unique s-tree-wall T1
at tree-wall distance 1 from T2 that is at tree-wall distance n from T0. By our
s is already deﬁned for all chambers of T1. Pick some
recursion assumption, hℓ
d ∈ projT2(T1), and let c1 = projT1(d). Fix a g ∈ G such that g ◦ hs(d) = hℓ
s(c1)
(which exists by transitivity) and deﬁne

hℓ
s(c) = g ◦ hs(c), for all c ∈ Ch(T2).

That is, we set hℓ
s-colors on each s-panel of T2.

s(d) = hℓ

s(c1) and carry out the same permutation of the

We claim that

s(d′) = hℓ
hℓ

for all d′ ∈ projT2(T1).

(∗)

(c′

1 = projT1 (d′); then by Proposition 2.37(2) we have
So let d′ ∈ projT2(T1) and c′
d = projT2(c1). Hence from Proposition 2.37(4) we obtain that projPs,d (d′) = d
1) = c1. Since hs is a weak legal coloring, we have hs(d) = hs(d′),
and projPs,c1
s(d′). Moreover, since we already know that
and hence by construction hℓ
s is a legal coloring on T1, we also have hℓ
hℓ
s(c1) = hℓ
s(c1)
and g is ﬁxed in each tree-wall, we conclude that hℓ
1), proving the
claim (∗).

s(c′
s(d′) = hℓ

1). Since hℓ

s(d) = hℓ

s(d) = hℓ

s(c′

s(cid:0)projT1(d′)(cid:1)

21

With this procedure, we recursively deﬁne the map hℓ

s for all the chambers

of ∆. It is obvious that hℓ

s is a coloring of the chambers of ∆.

We will show that hℓ

s is a legal coloring. So let c1 and c2 be chambers in a
residue R of type S \ {s}; we have to show that hℓ
s(c2). Since residues
are combinatorially convex, the minimal galleries from c1 to c2 do not contain
(c2) = c1. Let T1 and T2 be the
s-adjacent chambers; in particular, projPs,c1
s-tree-walls of c1 and c2, respectively. If T1 coincides with T2 then we know that
hs(c1) = hs(c2) and thus hℓ
s(c2), where g ∈ Gs
was the permutation used to deﬁne hℓ

s(c1) = g ◦ hs(c1) = g ◦ hs(c2) = hℓ

s(c1) = hℓ

s in T1 = T2.

If T1 6= T2 then T1 and T2 are both adjacent to the vertex in the s-tree-wall
tree Γs that corresponds to the residue R. Thus distT W (T1, T2) = 1. Assume
without loss of generality that n = distT W (T0, T1) = distT W (T0, T2) − 1, where
T0 is the s-tree-wall containing the base chamber c0. Then T1 is the unique
s-tree-wall at tree-wall distance n from T0 that is at tree-wall distance 1 from T2.
Therefore hℓ

s has been deﬁned on T2 using the coloring in T1.

Let d′ = projT2(c1), and let c′

1 = projT1(d′). By the gate property (Propo-
1 and d′, and
sition 2.14), there is a minimal gallery from c1 to c2 through c′
1 and from d′ to c2 are completely contained in T1
the subgalleries from c1 to c′
and T2, respectively. Since these galleries do not contain s-adjacent chambers
s(c′
because c1 and c2 are contained in R of type S \ {s}, we have hℓ
1)
s(d′), and hence
and hℓ
s is a legal coloring, and by construction it
hℓ
s(c1) = hℓ
is Gs-equivalent to hs.

s(c2). Finally, by (∗), we also have hℓ

s(c2). We conclude that hℓ

s(d′) = hℓ

s(c1) = hℓ

1) = hℓ

s(c′

2.4.3 Directed legal colorings

In this section we deﬁne a particular set of weak legal colorings. As before, let
Ys (for each s ∈ S) be the set of s-colors. We additionally assume that each
such set Ys contains a distinguished element 1s, or shortly 1 if no confusion can
arise.

The key point of directed colorings is to get a set of colorings such that in
every s-panel P, the chamber of P closest to a ﬁxed chamber has s-color 1. This
will be particularly useful for studying chamber stabilizers.

Proposition 2.49. Let s ∈ S and let c0 ∈ Ch(∆). Let hs be a weak legal
s-coloring of ∆ and G ≤ Sym(Ys) be a transitive permutation group.

Then there exists a weak legal s-coloring fs of ∆ which is G-equivalent to hs,

such that fs(projP (c0)) = 1s for every s-panel P.

Proof. For each chamber c ∈ Ch(∆), let T (c) be the unique s-tree-wall contain-
ing c. For each s-tree-wall T , we ﬁx an element gT ∈ G such that

gT(cid:0)hs(projT (c0))(cid:1) = 1;

notice that such an element exists because G is transitive. We now deﬁne a
coloring fs : Ch(∆) → Ys by

fs(c) := gT (c)(hs(c))

for all c ∈ Ch(∆).

Let P be an arbitrary s-panel, and let c = projP (c0); we claim that fs(c) = 1.
Indeed, let T be the s-tree-wall containing P, and let c1 = projT (c0). Then

22

projPs,c1

(c) = c1, so hs(c) = hs(c1), and hence

fs(c) = gT (hs(c)) = gT (hs(c1)) = 1.

Next, we claim that fs is a weak legal s-coloring. Indeed, ﬁx some s-tree-wall
T ; then by deﬁnition, gT induces the same permutation on each s-panel of T .
Since hs is a weak legal s-coloring, it satisﬁes property (W) from Deﬁnition 2.45
for each s-tree-wall T , and hence the same holds for fs; we conclude that also
fs is a weak legal s-coloring.

Deﬁnition 2.50. Let s ∈ S. A weak legal s-coloring as in Proposition 2.49 is
called a directed legal s-coloring of ∆ with respect to c0.

In other words, if fs is a weak legal s-coloring and c0 ∈ Ch(∆) then fs
is called a directed legal s-coloring with respect to c0 if for every chamber
c ∈ Ch(∆) at Weyl distance w from c0 with l(w) < l(ws), we have fs(c) = 1.
Observation 2.51. By deﬁnition, one can construct a weak legal coloring on
any right-angled building ∆. Proposition 2.49 then implies that, given a cham-
ber c in ∆, there exists a directed legal coloring of ∆ with respect to c.

2.5 Directed right-angled buildings

In this section we want to describe each right-angled building in a standard way.
This will be useful for the study of the maximal compact open subgroups of the
universal group in Section 4.

We will construct a right-angled building with a directed coloring by means
of reduced words in the Coxeter group and the set of colors, providing us with
a concrete model for the objects we work with.

Deﬁnition 2.52. Let (W, S) be a right-angled Coxeter system with set of gen-
erators S = {si}i∈I and Coxeter diagram Σ. For each s ∈ S, let Ys be a set
with cardinality qs (with qs ≥ 2) with a distinguished element 1. We deﬁne an
edge-colored graph ∆D as follows.

The vertex set of ∆D is

Ch(∆D) =((cid:18)s1

α1

s1 · · · sn is a reduced word in MS w.r.t. Σ,
αi ∈ Ys \ {1} for each i ∈ {1, . . . , n}

)

(where we allow n to be zero, yielding the empty matrix), modulo the equiva-
lence relation deﬁned by

sn

· · ·

· · · αn(cid:19)(cid:12)(cid:12)(cid:12)(cid:12)(cid:12)
(cid:18)s1

· · ·

α1

sn

· · · αn(cid:19) ∼(cid:18)s′

1
α′
1

s′
· · ·
n
· · · α′

n(cid:19)

if there exists a σ ∈ Rep(s1 · · · sn) such that

sσ(1) · · · sσ(n) = s′

1 · · · s′

n and ασ(j) = α′

j, for all j ∈ {1, . . . n},

1 · · · s′

i.e., s′
n is obtained from s1 · · · sn by performing elementary operations of
type (2). (We are denoting the vertex set of ∆D by Ch(∆D) because we will
prove later that ∆D is a right-angled building. We will already call the elements
of Ch(∆D) chambers.)

We will now deﬁne adjacency in this graph. Let c =(cid:18)s1

arbitrary chamber; then the neighbors of c are:

α1

sn

· · ·

· · · αn(cid:19) be an

23

sn

· · ·

· · · αn αn+1(cid:19). In this case, we

sn+1

α1
declare c and c′ to be sn+1-adjacent.

1. all chambers of the form c′ = (cid:18)s1
2. all chambers of the form c′ =(cid:18)s1
3. the unique chamber c′ = (cid:18)s1

and c′ to be sn-adjacent.

· · ·

α1

n takes any
value in Ys \ {1, αn}. In this case, we declare c and c′ to be sn-adjacent.

α1

sn−1

· · ·
sn
· · · αn−1 α′

n(cid:19), where α′

sn−1

· · · αn−1(cid:19). In this case, we declare c

Proposition 2.53. The edge-colored graph ∆D is a chamber system with index
set S and with prescribed thickness (qs)s∈S. Let s ∈ S, and let P be an s-panel
of ∆D. Then the chambers of P are of the form

(cid:26)(cid:18)s1

α1

sn

· · ·

· · · αn(cid:19)(cid:27) ∪(cid:26)(cid:18)s1

α1

s

sn

· · ·

· · · αn αs(cid:19)(cid:12)(cid:12) αs ∈ Ys \ {1}(cid:27) .

Proof. It is clear from the deﬁnition of s-adjacency that the relation “s-adjacent
or equal” is an equivalence relation on the set of chambers of ∆D, hence ∆D
is a chamber system. The equivalence classes of this relation are precisely the
s-panels, which are therefore of the required form. Clearly, each s-panel has
cardinality |Ys| = qs.

Now we want to deﬁne colorings on the chamber system ∆D.

Deﬁnition 2.54. Let ∆D be as in Deﬁnition 2.52, and let s ∈ S. We deﬁne

Fs : Ch(∆D) → Ys as follows. Let c =(cid:18)s1

α1

sn

· · ·

· · · αn(cid:19) be a chamber of ∆D.

1. If l(s1 · · · sns) > l(s1 · · · sn), then Fs(c) := 1.

2. If l(s1 · · · sns) < l(s1 · · · sn), there exists a σ ∈ Rep(s1 · · · sn) such that

sσ(n) = s, i.e.,

s1 · · · sn = sσ(1) · · · sσ(n−1)s in W .

Then

Fs(c) = Fs(cid:18)sσ(1)

ασ(1)

· · ·

sσ(n)

· · · ασ(n)(cid:19) := ασ(n) ∈ {2, . . . , qs}.

We call Fs the standard s-coloring of ∆D.

Our next goal is to prove that given a semi-regular right-angled building ∆
with a set of directed legal colorings with respect to a ﬁxed chamber, one can
construct a color-preserving isomorphism to ∆D (equipped with its standard
colorings). In particular, a pair consisting of a right-angled building and a set
of directed legal colorings is unique up to isomorphism.

Proposition 2.55. Let ∆ be a right-angled building of type (W, S) with param-
eters (qs)s∈S, and let (fs)s∈S be a set of directed colorings of ∆ with respect to
a ﬁxed chamber c0 ∈ Ch(∆). Let ∆D be the corresponding chamber system as in
Deﬁnition 2.52, and let (Fs)s∈S be its standard s-colorings as in Deﬁnition 2.54.
Then there is an isomorphism ψ : ∆ → ∆D such that fs(c) = Fs(ψ(c)) for
all s ∈ S and all c ∈ Ch(∆). In particular, ∆D is a right-angled building of type
(W, S), with thickness (qs)s∈S.

24

Proof. We start by setting ψ(c0) = ( ) ∈ Ch(∆D). Let c ∈ Ch(∆) be arbitrary,
and let w = s1 · · · sn be a reduced word in MS representing δ(c0, c) and let γ =
(c0, c1, . . . , cn) be the minimal gallery of type s1 · · · sn connecting the chambers
c0 and cn = c. Then we deﬁne

ψ(c) =(cid:20)(cid:18) s1

fs1 (c1)

· · ·
· · ·

sn

fsn (cn)(cid:19)(cid:21)∼

.

We claim that ψ is well-deﬁned, i.e. that it is independent of the choice of
the reduced representation of w. Let w′ be another reduced representation of
δ(c0, c). We know that there is a σ ∈ Rep(w) such that σ.w = w′ and moreover
that σ can be written as a product of elementary transpositions σ = σk · · · σ1
such that σi is a σi−1 · · · σ1.w-elementary transposition, for all i ∈ {1, . . . , n}.

Let i ∈ {1, . . . , n}. Consider the reduced words w1 = σi−1 · · · σ1.w and
w2 = σi.w1. These two words only diﬀer in two generators rj and rj+1 which
are switched by σi. Let γ1 = (e0, . . . , en) and γ2 = (d0, . . . , dn) be the minimal
galleries between c0 = e0 = d0 and c = en = dn corresponding to the word w1
and w2 respectively.

We now prove that the colors frt(et) and frt(dσi(t)) agree for all t ∈ {0, . . . , n}.
Note that the galleries γ1 and γ2 diﬀer only in the chamber ej, and that σi is a
transposition switching j and j + 1. Therefore we only need to check t = j and
t = j + 1. We have

ej−1

rj∼ ej

rj+1∼ ej+1 and ej−1 = dj−1

rj+1∼ dj

rj∼ dj+1 = ej+1.

As (fs)s∈S is a set of direct colorings with respect to c0 we infer that frj (ej) =
frj (dj+1) = frj (dσi(j)) and frj+1 (ej+1) = frj+1(dj ) = frj+1 (dσi(j+1)), which
implies that the colors indeed agree.

From this we deduce that

which allows us to conclude that

fr1(d1)

frn(en)(cid:19) ∼(cid:18)
fs(cn)(cid:19) ∼(cid:18) sσ(1)

sn

fsσ(1) (c′
1)

w2
· · ·

· · ·
· · ·

frn (dn)(cid:19) ,
n)(cid:19) ,

sσ(n)
fsσ(n) (c′

fr1(e1)

w1
· · ·

(cid:18)
(cid:18) s1

· · ·
· · ·

fs1(c1)

0, . . . , c′

n) is the minimal gallery between c0 and c corresponding to w′.
where (c′
This proves that ψ is independent of the choice of the reduced representation
of w and in particular that it is well deﬁned.

Next, we claim that ψ is color-preserving, i.e. that fs(c) = Fs(ψ(c)) for all
s ∈ S and all c ∈ Ch(∆). Let c be a chamber of ∆ at Weyl distance w from
c0, and s1 · · · sn a reduced word in MS with respect to Σ representing w. By
construction of ψ and deﬁnition of Fsn, we have fsn(c) = Fsn (ψ(c)).

Let s ∈ S \ {sn}.

If l(s1 · · · sn) < l(s1 · · · sns), then by deﬁnition of a
directed coloring and FS we have fs(c) = 1 and Fs(ψ(c)) = 1. If l(s1 · · · sn) >
l(s1 · · · sns), then we could have picked a reduced representation s1 · · · sn of w
where sn = s, which reduces the problem to a previous case.

Next, we show that ψ is a bijection. It is clear from the deﬁnition that ψ
It remains to prove that it is injective. Let c1, c2 ∈ Ch(∆) be

is surjective.

25

distinct chambers. If c1 and c2 are at distinct Weyl distances from c0 then by
deﬁnition ψ(c1) 6= ψ(c2).

2, where vi

Assume that s1 · · · sn is a reduced representation of the Weyl distance from
c0 to both c1 and c2. Let i be the minimal number in {1, . . . , n} such that
j, for j ∈ {1, 2}, is the unique chamber in ∆ at Weyl distance
vi
1 6= vi
1 = vi−1
s1 · · · si from c0 and at Weyl distance sn · · · si+1 from cj. Then vi−1
,
2
2).
which means that vi
1) 6= fsi(vi
This implies, by deﬁnition of the map ψ, that ψ(c1) 6= ψ(c2). Therefore ψ is a
bijection.

2 are in the same i-panel of ∆. So fsi(vi

1 and vi

Finally, we show that ψ is a homomorphism.

If c1 and c2 are s-adjacent

chambers in ∆, for s ∈ S, then

1. either c1 is at Weyl distance s1 · · · sn from c0 and c2 is at Weyl distance
s1 · · · sns from c0, or vice-versa. Then by deﬁnition of ψ and the deﬁnition
of adjacency in ∆D, the chamber ψ(c1) is s-adjacent to ψ(c2).

2. or c1 and c2 are both at Weyl distance s1 · · · sns from c0 and fs(c1) 6=
fs(c2). Again we conclude that ψ(c1) is s-adjacent to ψ(c2), this time by
the second point of the deﬁnition of adjacency in ∆D.

This shows that ψ is an isomorphism from ∆ to ∆D respecting the set of color-
ings (fs)s∈S, proving the proposition.

Deﬁnition 2.56. We call the building ∆D the directed right-angled building of
type (W, S) with prescribed thickness (qs)s∈S.

Remark 2.57. The directed legal coloring Fs is not a legal s-coloring unless s
commutes with all elements of S (in which case every weak legal s-coloring is a
legal s-coloring by Lemma 2.46).

Proposition 2.58. Let ∆ be the directed right-angled building of type (W, S)
with prescribed thickness (qr)r∈S. Let s ∈ S and ﬁx an s-tree-wall T in ∆. Let
g be a permutation of Ys \ {1}.

Consider the following map gT on the set of chambers of ∆. Let c be a

chamber represented by the matrix

(cid:18)s1

α1

sn

· · ·

· · · αn(cid:19) .

If there is an i ∈ {1, . . . , n} such that si = s and the chambers represented by

then gT maps c to the chamber represented by

α1

α1

· · ·

si−1

· · · αi−1(cid:19) and (cid:18)s1
(cid:18)s1
(cid:18)s1

· · ·
si−1
· · · αi−1

α1

si

· · ·

· · · αi(cid:19) are in T ,
· · · αn(cid:19) .

· · ·

sn

s

si+1
g(αi) αi+1

(2.1)

(2.2)

If there is no such i, then gT ﬁxes c.

Then the map gT constructed in this way is an automorphism of ∆. More-

over, if g, h are two permutations of Ys \ {1}, then gT hT = (gh)T .

26

Proof. Notice that there can be at most one index i with si = s for which (2.1)
holds, since s1 · · · sn is a reduced word and T is an s-tree-wall.

We start by showing that gT is well deﬁned, i.e., that our description of gT is
independent of the representation of the chamber c. Assume that c is represented
as in the statement of the proposition. It suﬃces to look at equivalence by a
single elementary transposition; so assume that there is a j ∈ {1, . . . , n−1} such
that sj and sj+1 commute. The only non-trivial cases are when condition (2.1)
is satisﬁed and either j = i or j = i − 1. Assume that j = i (the other case can
then be handled analogously); so si = s commutes with si+1.

Note that the chambers represented by

(cid:18)s1

α1

· · ·

si−1

· · · αi−1 αi+1(cid:19) and (cid:18)s1

si+1

α1

· · ·

si−1

· · · αi−1 αi+1 αi(cid:19)

si+1

si

are still contained in Ch(T ) by Corollary 2.25. The image under gT of c using its
representation obtained by applying the elementary transposition is therefore
represented by

(cid:18)s1

α1

si−1

· · ·
si+1
· · · αi−1 αi+1

si

si+2
g(αi) αi+2

sn

· · ·

· · · αn(cid:19) ,

which is an equivalent representation of the image as in (2.2). This proves that
the map gT is indeed well deﬁned.

In order to show that gT is a homomorphism of ∆, we have to show that
t-panels are mapped to t-panels, for all t ∈ S. However, this is now immediately
clear from the description of a t-panel in Proposition 2.53.

Finally observe that each gT is invertible, with inverse (g−1)T ; this implies

that gT is an automorphism of ∆. The last statement is also clear.

3 Universal group of a right-angled building

The goal of this section is to extend the concept of universal groups deﬁned for
regular trees by Burger and Mozes to the more general setting of right-angled
buildings. These groups will depend on the choice of a transitive permutation
group for each s ∈ S.

3.1 Deﬁnition

Let (W, S) be a right-angled Coxeter system with Coxeter diagram Σ with index
set I and set of generators S = {si}i∈I. For all s ∈ S, let qs be a cardinal
number and Ys be a set of size qs. Consider the right-angled building ∆ of type
(W, S) with parameters (qs)s∈S, which is unique up to isomorphism (see [HP03,
Proposition 1.2]).

Deﬁnition 3.1. For each s ∈ S, let Gs ≤ Sym(Ys) be a transitive permutation
group and hs : Ch(∆) → Ys be a (weak) legal coloring of ∆. We deﬁne the
universal group of ∆ with respect to the groups (Gs)s∈S as

U = U ((Gs)s∈S)

= {g ∈ Aut(∆) | (hs|Ps,gc ) ◦ g ◦ (hs|Ps,c)−1 ∈ Gs, for all s ∈ S,

all s-panels Ps, and for all chambers c ∈ Ps},

27

where Ps,c is the s-panel containing c ∈ Ch(∆).

If the group Gs equals Sym(Ys), for all s ∈ S, then U is the group Aut(∆)
of all type preserving automorphisms of the right-angled building since we are
assuming that the groups Gs are transitive.

Lemma 3.2. For each s ∈ S, let (hs)s∈S and (h′
colorings. Then the universal groups constructed using (hs)s∈S and (h′
coincide.

s)s∈S be two Gs-equivalent
s)s∈S

Proof. Let g ∈ U hs be an element of the universal group constructed with the
coloring hs. Let c ∈ Ch(∆) and P be the s-panel of c. By deﬁnition we know
that hs ◦ g ◦ (hs)−1|P ∈ Gs. Further, since hs and h′
s are Gs-equivalent colors
we know that hs|P = g1 ◦ h′
s|Ps,gv with g1, g2 ∈ Gs.
Thus

s|P and hs|Ps,gv = g2 ◦ h′

hs ◦ g ◦ (hs)−1|P = g2 ◦ h′

s ◦ g ◦ (h′

s)−1 ◦ g−1

1 |P ∈ Gs,

which implies that h′
group U h′
obtain that the two universal groups coincide.

s constructed using h′

s ◦ g ◦ (h′

s)−1|P ∈ Gs. Hence g is an element of the universal
s. Exchanging the colorings in the reasoning, we

This lemma implies, in view of Proposition 2.48, that in the deﬁnition of the
universal group restricting to legal colorings, weak legal colorings or directed
legal colorings with respect to a ﬁxed chamber, all being Gs-equivalent (see
Proposition 2.48 and Observation 2.51), all yield the same universal group.

Remark 3.3. The deﬁnition of a universal group for a right-angled building
also makes sense when the groups Gs are not transitive. For instance, if the
groups Gs are all trivial and ∆ is locally ﬁnite, then U is a lattice in Aut(∆)
since it acts freely and cocompactly on ∆. However, only when all groups Gs are
transitive, the universal group will be chamber transitive, which is a property
we will need very often.

3.2 Basic properties

In this section we gather some basic properties concerning universal groups for
right-angled buildings.

We start by looking at the action on panels.

Deﬁnition 3.4. Let H ≤ Aut(∆) and P be a panel of ∆. We deﬁne the local
action of H at the panel P as the permutation group formed by restricting the
action of H{P} (the setwise stabilizer of P in H) to the panel P.

Lemma 3.5. The local action of the universal group U on an s-panel (s ∈ S)
is isomorphic to the transitive group Gs.

Proof. Consider some chamber c and pick an r ∈ S. The chambers in the r-
panel P := Pr,c containing c are parametrized by Yr via the coloring. From the
deﬁnition of the universal group it is immediate that the local action on the
r-panel is a subgroup of Gr.

We will now show that this local action is in fact Gr. Let gr ∈ Gr. Let c′
s)s∈S the set of legal
◦ hr and

be the chamber in P with color gr ◦ hr(c). Denote by (h′
colorings obtained from (hs)s∈S by replacing the coloring hr by g−1

r

28

leaving the other colorings unchanged. Note that h′
r is again a legal coloring, as
it will still satisfy the deﬁning property (L) of legal colorings. As hs(c) equals
h′
s(c′) for every s ∈ S, we can apply Proposition 2.44 to ﬁnd an automorphism
g ∈ Aut(∆) mapping c to c′.

The automorphism g acts locally as the identity for t-panels where t ∈ S\{r},
and as gr on r-panels. Hence g is an element of the universal group and it has
the desired action on the panel Pr,c, whence the claim.

Assume that the set Ys contains an element called 1, and let Gs

0 be the

stabilizer of this element in Gs.

Proposition 3.6. Let ∆ be the directed right-angled building with prescribed
thickness (qr)r∈S (see Deﬁnition 2.56) and base chamber c0. Consider the uni-
versal group U with respect to the standard colorings (fs)s∈S of ∆ directed with
respect to c0. Let T be an s-tree wall of ∆.

For each g ∈ Gs

0, let gT be as in Proposition 2.58. Then {gT | g ∈ Gs

0} is a
subgroup of U ﬁxing the chambers of the s-wing with respect to T containing the
chamber c0. This subgroup acts locally as Gs
0 on each s-panel of the tree-wall T .
Proof. Let g ∈ Gs
0 and let gT ∈ Aut(∆) be as in Proposition 2.58. We will
ﬁrst prove that gT is an element of the universal group U . Let P be a t-panel
for some t ∈ S. It is clear that the automorphism gT ﬁxes the colorings of the
chambers in P unless t = s.

Assume that t = s. In the case that P is a panel in the s-tree-wall T , we
0. If P 6∈ T , then this permutation of the colors

have fs|gT .P ◦ gT ◦ fs|P = g ∈ Gs
is the identity in Gs. Hence gT ∈ U .

Next, we prove that gT ﬁxes the wing Xs(projT (c0)). Let

c =(cid:18)s1

α1

sn

· · ·

· · · αn(cid:19)

be a chamber in Xs(projT (c0)), so that projT (c) = projT (c0). If there were an
i ∈ {1, . . . , n} such that si = s and

then

α1

(cid:18)s1
projT (c) =(cid:18)s1

α1

α1

· · ·

· · ·

si

si−1

· · · αi−1(cid:19) and (cid:18)s1
· · · αi−1 αi(cid:19) 6=(cid:18)s1

· · · αi(cid:19) are in T ,
· · · αi−1(cid:19) = projT (c0),

si−1

si−1

· · ·

· · ·

s

α1

which is a contradiction; hence there is no such i, and therefore gT ﬁxes c by
deﬁnition.

By the last statement of Proposition 2.58, the set G = {gT | g ∈ Gs

0} forms

a group. By construction, G acts locally as Gs

0 on each s-panel of T .

We will prove in the following proposition that diﬀerent choices of legal
colorings give rise to conjugate subgroups of Aut(∆); this will allow us to omit
an explicit reference to the colorings in our notation for the universal groups.

Proposition 3.7 (Properties of U ). Let ∆ be a right-angled building with pre-
scribed thickness (qs)s∈S. Let U be the universal group of ∆ with respect to the
ﬁnite transitive permutation groups (Gs ≤ Sym(Ys))s∈S. Then the following
hold.

29

1. The subgroup U ⊂ Aut(∆) is independent of the choice of the set of legal

colorings up to conjugacy.

2. U is a closed subgroup of Aut(∆).

3. U is a chamber-transitive subgroup of Aut(∆).

4. U is universal for (Gs)s∈S, i.e., if H is a closed chamber-transitive sub-
group of Aut(∆) for which the local action in the s-panels is permutation-
ally isomorphic to the group Gs, for all s ∈ S, then H is conjugate in
Aut(∆) to a subgroup of U .

5. If ∆ is locally ﬁnite, then U is compactly generated.

Proof.

1. Let (h1

s)s∈S and (h2

s)s∈S be distinct sets of legal colorings. We
want to show that the universal groups U 1 and U 2 deﬁned using the
legal colorings (h1
s)s∈S, respectively, are conjugate in Aut(∆).
By Proposition 2.44 we know that there exists g ∈ Aut(∆) such that
h2
s = h1

s ◦ g for all s ∈ S. If a ∈ U 2, we know that

s)s∈S and (h2

h2
s ◦ a ◦ (h2

s)−1 ∈ Gs ⇐⇒ h1

s ◦ g ◦ a ◦ g−1 ◦ (h1

s)−1 ∈ Gs,

for all s ∈ S.

Hence ag ∈ U 1 and U 1 and U 2 are conjugate in Aut(∆).

2. To prove Statement 2, we will show that Aut(∆) \ U is open. Consider
a ∈ Aut(∆) \ U . Then there exists s ∈ S, an s-panel Ps and v ∈ Ps such
that

hs|Ps,av ◦ a ◦ (hs|Ps,v )−1 6∈ Gs.

But then the set {a′ ∈ Aut(∆) | a′|Ps,v = a|Ps,v } is contained in Aut(∆)\U
and it is a coset of the stabilizer of Ps,v. Hence Aut(∆) \ U is open.

3. Next we show that U is a chamber-transitive group. Since ∆ is connected,
it is enough to prove the result for two adjacent chambers. Let v1 and v2
be two adjacent chambers (vertices) in the building ∆, i.e. there exists an
s ∈ S such that v1 and v2 are in the same s-panel P. By Lemma 3.5, the
action of U{P} on P is isomorphic to the group Gs. Since Gs is assumed
to be transitive, there is an element in Gs mapping v1 to v2. Hence there
is an element g ∈ U such that gv1 = v2. Thus U is a chamber-transitive
subgroup of Aut(∆).

4. Now we prove that the group U is universal. Let H be a closed chamber-
transitive subgroup of Aut(∆) for which the local action in the s-panels is
permutationally isomorphic to the group Gs, for all s ∈ S. We will con-
struct weak legal colorings (hs)s∈S such that H is a subgroup of U hs, i.e.,
the universal group deﬁned using the set of weak legal colorings (hs)s∈S.
Let us ﬁx c0 ∈ Ch(∆) and s ∈ S. We choose a bijection h0
s : Ps,c0 → Ys
such that

s ◦ H{Ps,c0 } ◦ (h0
h0

= Gs,
where H{Ps,c0 } is the setwise stabilizer of Ps,c0 in H.
Let T0 = Ts,c0. For each s-panel P in the s-tree-wall T0 we deﬁne

s)−1|Ps,c0

hs(c) = h0

s(projPs,c0

(c)), for every c ∈ P.

30

With this procedure we have colored with a color from Ys all the vertices in
T0. Further, since the chambers of parallel panels are in bijection through
the projection map, we have hs◦H|P◦(hs|P )−1 = Gs for each panel P of T0.
Assume that the coloring hs is deﬁned in the s-tree-walls of ∆ at tree-wall
distance smaller or equal to n − 1 from T0.
Let T be an s-tree-wall at tree-wall distance n from T0. Fix c ∈ Ch(T ).
s )−1 = Gs.
Deﬁne a bijection hn
and for all chambers v ∈ Ch(T ) we deﬁne

s : Ps,c → Ys such that hn

s ◦ H{Ps,c} ◦ (hn

hs(v) = hn

s (projPs,c (v)).

In this fashion we color all the chambers of the building with the colorings
(hs)s∈S. Now we have to prove that hs is a weak legal coloring, for each
s ∈ S It is clear that hs is a coloring since it was deﬁned as a bijection in a
panel of each s-tree-wall and parallel panels in T are in bijection through
the projection map.
To prove that hs is a weak legal coloring, let P1 and P2 be s-panels in
a common s-tree-wall T . Let c1 ∈ P1 and c2 = projP2 (c1). Let c =
projP (c1), where P is the s-panel of T that was used to deﬁne hs in the
recursive process. Then, by Proposition 2.34, projP (c2) = c and hence
hs(c1) = hs(c) = hs(c2). Thus hs is a weak legal coloring.
Further, if g ∈ H then hs ◦ g ◦ (hs|P )−1 ∈ Gs for every s-panel P and every
s ∈ S, by the construction of the weak legal colorings (hs)s∈S. Therefore
H is a subgroup of U hs. Hence U is the largest vertex-transitive closed
subgroup of Aut(∆) which acts locally as the groups (Gs)s∈S.

5. Finally, we prove that U is compactly generated when ∆ is locally ﬁnite.
Since U is chamber-transitive, its action on the chambers of ∆ has only
one orbit. Let c ∈ Ch(∆). We know that the group Uc is a compact
open subgroup of U by the deﬁnition of the permutation topology. Let
{v1, . . . , vn} be the set of chambers of ∆ adjacent to c. For each vi, there
exists an element gi ∈ U such that givi = c. Let G = {g1, . . . , gn}.
Let g ∈ U . We claim that there exists some g′ ∈ hSi such that g′gc = c.
This is proved by induction on the discrete distance from c to gc.
If
dist(c, gc) = 1 it follows from the deﬁnition of the set G. Assume that the
claim holds if dist(c, gc) ≤ n. If dist(c, gc) = n + 1, let γ = (c, v, . . . , gc)
be a minimal gallery from c to gc. We have dist(c, v) = 1 therefore there
is g ∈ G such that gv = c. As dist(v, gc) = n we have dist(c, ggc) = n.
Hence there exists g∗ ∈ hGi such that g∗ggc = c and g∗g ∈ hGi. But then
g∗gg ∈ Uc. So we conclude that the compact subset Uc ∪ G generates the
group U .

3.3 Extending elements of the universal group

Let ∆ be a right-angled building of type (W, S) with parameters (qs)s∈S. For
each s ∈ S, let hs : Ch(∆) → Ys be a legal coloring and let Gs ≤ Sym(Ys) be a
transitive permutation group. Consider the universal group U of ∆ with respect
to the groups (Gs)s∈S.

31

Deﬁnition 3.8. If B is a connected subset of the building ∆ containing c0, and
T is an s-tree-wall of the building such that B is not entirely in one wing of T ,
we say that B crosses T . Let c be the projection of c0 on such a tree-wall T .
We call the Weyl distance δ(c, c0) the distance between c0 and T .

Before proceeding we mention the following technical lemma.

Lemma 3.9 ([Cap14, Lemma 5.3]). Let n > 0 be an integer, let C, W be sets
and δ : C n → W be a map. Let G denote the group of all permutations g ∈
Sym(C) such that δ(g.x1, . . . , g.xn) = δ(x1, . . . , xn) for all (x1, . . . , xn) ∈ C n.
Let moreover (Vs)s∈S be a collection of groups indexed by a set S, and for all
s ∈ S, let ϕs : Vs → G be an injective homomorphism such that for all s 6= r,
the subgroups ϕ(Vs) and ϕ(Vr) have disjoint supports. Then there is a unique
homomorphism

ϕ : Yr∈S

Vr → G

such that ϕs ◦ ιs = ϕs for all s ∈ S, where ιs : Vs →Qr∈S Vr is the canonical

inclusion.

Let us now consider, for a ﬁxed w ∈ W and s ∈ S the collection Tw,s of
s-tree-walls at distance w from c0 (note that this collection may be empty).
For each tree-wall T ∈ Tw,s we have, by Proposition 3.6, a subgroup H of the
0 on each s-panel of T ,
universal group U , acting faithfully and locally like Gs
and ﬁxing the chambers in the wing of T containing c0.

Note that these subgroups for diﬀerent tree-walls in Tw,s have disjoint sup-
ports. To see this, consider two diﬀerent tree-walls T1 and T2 in Tw,s. The s-wing
with respect to T1 containing c0 contains every s-wing with respect to T2, except
the one containing c0 (which can be seen from the s-tree-wall tree), implying
that the supports are indeed disjoint. Hence we can apply Lemma 3.9 and
consider the action of the product of these subgroups of the universal group
(one for each tree-wall in Tw,s), which we denote with slight abuse of notation

byQTw,s

0.
Gs

Lemma 3.10. Let ∆ be a semi-regular right-angled building of type (W, S) with
parameters (qs)s∈S. Fix a chamber c0 of ∆. Let K be a connected subset of W
(as a Coxeter complex) containing the identity. Let B be the set of chambers c
in Ch(∆) such that δ(c0, c) ∈ K.

s ∈ S, w ∈ W such that B crosses the tree-walls in Tw,s+

Then

Gs

0(cid:27)(cid:12)(cid:12)(cid:12)(cid:12)(cid:12)(cid:12)

*(cid:26)YTw,s
Proof. Note that the subgroupsQTw,s

is a dense subgroup of Uc0|B.

Gs

0 ﬁx the chamber c0 and stabilize the

set B, so we may consider these to be subgroups of Uc0|B.

We ﬁrst prove the result for ﬁnite K by induction on the size of K. If |K| = 1

then K = {id} and B = {c0}, hence Uc0|B is trivial.

Assume now by induction hypothesis that the result holds for every K of
size n ≤ N . Let K ⊂ W be a connected subset of N + 1 elements containing
the identity. Let w ∈ K be such that K \ {w} is still connected. (This is always

32

possible, for instance by picking a vertex of valency one in a spanning tree of K.)
Let

K1 = K \ {w} and A1 = {c ∈ Ch(∆) | δ(c0, c) ∈ K1}.

Let g ∈ Uc0|B ﬁxing A1 and let c ∈ B \ A1. Note that B \ A1 consists exactly
of those chambers at Weyl distance w from c0.

As K is connected, we know that there exists a w1 ∈ K1 which is s-adjacent
to w for some s ∈ S. Hence c is s-adjacent to some c1 ∈ A1. Note that g
stabilizes the s-panel P of c and c1. Let T be the s-tree-wall containing P, and
let w2 be its distance to c0.

If T is already crossed in A1 then A1 contains chambers in the same s-wing
of the tree-wall T as c. So this wing is stabilized, and as the s-panel containing
c is also stabilized, we can conclude that g ﬁxes the chamber c.

If T was not crossed by A1 then, as g ﬁxes c1, it acts on the s-panel P as
an element of Gs
0 (see Lemma 3.5). Repeating this reasoning for each possible
chamber c at Weyl distance w from c0, we conclude that that g is contained in
0 considered as subgroup of Uc0|B. By the induction hypothesis any
element g1 ∈ Uc0|A1 is in the desired conditions, and every element h ∈ Uc0|B
can be written as a product g ◦ g1 with g and g1 as before. Hence we conclude
that the statement of the lemma holds for K, and hence for every ﬁnite K.

QTw2 ,s

Gs

If K is inﬁnite then we can approximate K by a sequence (K1, K2, . . . ) of
ﬁnite connected subsets of K containing the identity, and such that for every
n, there is an N such that Ki agrees with K on the ball of radius n around the
identity in W for every i > N . Let (A1, A2, . . . ) be the corresponding sets of
chambers in ∆. The group Uc0|B is then the inverse limit of the groups Uc0|Ai,
which are each a quotient of Uc0|B. As the statement holds for each of these
quotients, and the fact that we take the closure, we conclude that the statement
holds for every K, ﬁnite or inﬁnite.

Deﬁnition 3.11. Let J ⊆ S and R be a residue of type J in ∆. We deﬁne

U (R) := {g ∈ Aut(R) | (hs|Ps,gc ) ◦ g ◦ (hs|Ps,c )−1 ∈ Gs, for all s ∈ J

and for all chambers c ∈ Ch(R) }.

In particular, U = U (∆).

Lemma 3.12. Let R be a J-residue containing c0 for some J ⊆ S. With the
same notation as above, Uc0|Ch(R) and Uc0(R) acting on Ch(R) are permuta-
tionally isomorphic.

Proof. We consider both groups as subgroups of the symmetric group acting on
Ch(R).

Gs

and s ∈ J.

We observe that Ch(R) corresponds to the set of chambers at distance w for
some w ∈ WJ , the parabolic subgroup of W with set of generators J ⊆ S. As
WJ is a connected subset of W (as Coxeter complex), we can apply Lemma 3.10
and obtain that Uc0(∆)|Ch(R) is the closure of its subgroup generated by the
0 (regarded as subgroups of Sym(Ch(R))) such that w ∈ WJ

groups QTw,s
Uc0(R) is the closure of the subgroup generated by the same QTw,s

On the other hand, the residue R is, in its own right, a right-angled building
of type (WJ , J), to which we may apply the same Lemma 3.10, yielding that
0 where

w ∈ WJ and s ∈ J.

Gs

33

We therefore conclude that Uc0|Ch(R) and Uc0(R) have the same action on

Ch(R).

Lemma 3.13. Let R be a J-residue of ∆, then the groups U (∆)|Ch(R) and
U (R) acting on Ch(R) are permutationally isomorphic.

Proof. It is clear that U (∆)|Ch(R) ⊆ U (R). Let g be an arbitrary element of
U (R) and let c0 a chamber in R. We want to prove that there exists a g′ in the
stabilizer of R in U (∆) with the same action as g on Ch(R).

As U (∆) is chamber-transitive there exists an h ∈ U (∆) such that h.c0 =
g.c0. Note that h necessarily stabilizes the residue R. The automorphism h−1◦g
ﬁxes the chamber c0, hence we may apply Lemma 3.12 and conclude that there
exists an element g0 with the same action as h−1 ◦ g on Ch(R). This yields that
g′ := h ◦ g0 has the same action as g on Ch(R), proving the lemma.

Another way to state Lemma 3.13 is as follows.

Proposition 3.14. Let J ⊆ S and R be a residue of type J in ∆. Let g ∈ U (R).

Then g extends to an elementeg ∈ U .

Proof. This follows directly from Lemma 3.13.

3.4 Subgroups of U with support on a single wing

The wings of tree-walls (see Deﬁnition 2.31) are the analogues of half-trees in
trees in the more general setting of right-angled buildings. Subgroups of the
universal group U which have support on a single wing will play a crucial role
in what follows. Concretely, for s ∈ S and c ∈ Ch(∆), let

Vs(c) = {g ∈ U | g.v = v for all v 6∈ Xs(c)}.

The subgroup Vs(c) ﬁxes the chamber c and stabilizes its s-panel. In [Cap14,
Section 5] similar subgroups are deﬁned in the whole group of type preserving
automorphisms of a right-angled building.

The next few results demonstrate the importance of these subgroups of the
In particular, the following proposition generalizes the well
universal group.
known independence property for groups acting on trees. (To be precise, it is
a slight variation of the independence property, since an s-tree-wall in a tree
corresponds to a star around a vertex in the tree.)

Proposition 3.15. Let c ∈ Ch(∆) and s ∈ S. Let T be the s-tree-wall of c.
Then

Vs(d).

FixU (T ) = Yd∈Ps,c
Proof. We start by showing that Qd∈Ps,c

Vs(d) is a subgroup of the ﬁxator
FixU (T ). Let d ∈ Ps,c. Given x ∈ Ch(T ), we deduce from Lemma 2.33 that
Vs(d) ﬁxes all chambers of s-panel Ps,x diﬀerent from the projection of d to that
panel. Hence Vs(d) ﬁxes Ps,x. This proves that Vs(d) is contained in FixU (T ).
As the supports of each of the the subgroups Vs(d) are disjoint, we can apply
Vs(d) as a subgroup of the universal group and

Lemma 3.9 and considerQd∈Ps,c

FixU (T ) in particular.

34

In order to show the other inclusion, pick an element g ∈ FixU (T ). Let d
be an arbitrary chamber in the s-panel Ps,c. Consider the permutation gd of
Ch(∆) deﬁned as

gd : Ch(∆) → Ch(∆) : x 7→(cid:26) g.x if x ∈ Xs(d),

otherwise.

x

By the proof of Proposition 5.2 in [Cap14] we know that gd is a type preserving
automorphism of ∆. Clearly gd ﬁxes the tree-wall T , therefore it preserves
projections to the s-panels in the tree-wall. Hence it also preserves the s-wings
with respect to the s-panel of c. Now we have to show that it is an element of
the universal group, i.e., we have to prove that

ht ◦ gd ◦ (ht|Pt,x)−1 ∈ Gt, for all t ∈ S and for all x ∈ Ch(∆).

We observe that for any panel P not in the tree-wall T , P is not parallel
to Ps,c. Hence projPs,c(P) is a chamber by Lemma 2.20. Therefore either
Ch(P) ⊆ Xs(d) or Ch(P) ⊆ Ch(∆) \ Xs(d).

Let P be a t-panel for some t ∈ S.

If P is in the tree-wall T or in one
of its wings diﬀerent from Xs(d), then P is ﬁxed by gd so the permutation
ht ◦ gd ◦ (ht|P )−1 is the identity, therefore it is in Gt.
If P ∈ Xs(d) then
gd.x = g.x for all v ∈ Ch(P), so gd is in the universal group as g is.

We conclude that gd is an element of FixU (R) and by construction also of
Vs(d),

Vs(d). Moreover, the tuple (gd)d∈Ps,c, which is an element of Qd∈Ps,c
coincides with g. Therefore g ∈Qd∈Ps,c

Lemma 3.16. Let s ∈ S and c1, c2 be two s-adjacent chambers in an s-panel P.
Let g ∈ U , and let s1 · · · sn be a reduced representation of δ(c2, g.c1). Assume
that

Vs(d).

(1) there exists an i ∈ {1, . . . , n} such that |sis| = ∞, and

(2) projP (g.c1) = c2 and projPs,g.c1

(c2) = g.c1.

h = [x, g] = xgx−1g−1.

Then for each h ∈Qd∈Ch(P)\{c1,c2} Vs(d), there exists an x ∈ U such that
Proof. Let V0 =Qd∈Ch(P)\{c1,c2} Vs(d). We know that V0 is subgroup of U . For
For each n ≥ 0 the support of Vn is contained inSd∈Ch(Pn)\{cn

2 = gn(c2) and Vn = gnV0g−n.

2 } and m > n we have

2 } Xs(d). Given

d ∈ Ch(Pn) \ {cn

Pn = gn(P), cn

1 = gn(c1), cn

each n > 0 let

1 , cn

1 ,cn

d ∈ Xs(cm

1 ) and cm

1 6∈ Xs(d)

because projP (g.c1) = c2 and projs,g.c1(c2) = g.c1. Thus Xs(d) ⊂ Xs(cm
[Cap14, Lemma 3.4]. Similarly, Xs(e) ⊂ Xs(cn
2 ) for e ∈ Ch(Pm) \ {cm
This implies that the sets

1 ) by
1 , cm
2 }.

[

d∈Ch(Pn)\{cn

1 ,cn
2 }

[

d∈Ch(Pm)\{cm

1 ,cm
2 }

Xs(d)

Xs(d)

and

35

of U . Moreover gVng−1 = Vn+1.

are disjoint. This means that, for m > n ≥ 0, Vm and Vn have disjoint support.

Lemma 3.9 now implies that the direct product V = Qn≥0 Vn is a subgroup

Given h ∈ V0, let xn = gnhg−n. Then the tuple x = (xn)n≥0 is an element
of the product V ≤ U and so is the commutator [x, g]. We observe that the
commutator [x, g] ﬁxes cn

2 for all n ≥ 0.

1 and cn

Furthermore, denoting by yn the n-th component of an element y ∈ V

according to the decomposition V =Qn≥0 Vn we have [x, g]n = xn(gx−1g−1)n

for all n ≥ 0. Hence [x, g]0 = h and [x, g]n = xngx−1
Therefore [x, g] = h, which proves the lemma.

n−1g−1 = xnx−1

n = 1.

3.5 Normal subgroups of the universal group

We are now in a position to study the normal subgroups of the universal group.
For this we need the notion of an s-hyperbolic element.

Deﬁnition 3.17. For every s ∈ S, any automorphism of the right-angled
building ∆ also induces an automorphism of the s-tree-wall tree Γs (cf. Def-
inition 2.38). As the universal group U acts chamber-transitively on ∆, it has
an edge-transitive type-preserving action on this tree Γs.

Type preserving automorphisms of trees can act in two diﬀerent ways. An
action is either elliptic, meaning the automorphism ﬁxes some vertex of the tree,
or it is hyperbolic, when the automorphism does not ﬁx any vertex; in this case,
the vertices with minimal displacement form an embedded bi-inﬁnite line graph
A(g) in Γs translated by g, called the axis of g. We say that an element g ∈ U
is s-hyperbolic if it induces a hyperbolic action on the s-tree-wall tree.

Lemma 3.18. If the right-angled building ∆ is irreducible, then its universal
group U acts faithfully on the s-tree-wall tree Γs, for all s ∈ S.

Proof. Assume by way of contradiction that some non-trivial group element
g ∈ U acts trivially on Γs for some s ∈ S. This implies that g stabilizes every
s-tree-wall and every residue of type S \ {s} in the building ∆. The residues
of types s⊥, which are the non-trivial intersections of these two, are hence also
stabilized. As g is non-trivial, there exist distinct chambers c1 and c2 of ∆ such
that g.c1 = c2. These chambers have to be contained in a common residue R of
type s⊥.

Let s1 · · · sn be a reduced word representing the Weyl distance between c1
and c2. For each i ∈ {1, . . . , n}, let γi be a shortest path in the Coxeter diagram
Σ between si and an element t ∈ S such that |st| = ∞. Both the elements t
and the paths exist because we are assuming Σ to be connected.

Let γj be such a path of minimal length between si and t (minimized over all
possible i ∈ {1, . . . , n} and elements t). Denote γj = (r1, . . . , rk), with r1 = sj
and rk = t with |ts| = ∞. We observe that |riri+1| = ∞ for all i by deﬁnition
of a path in Σ. Moreover, ri ∈ s⊥ \ {s1, . . . , sn} for all i ∈ {2, . . . k − 1} since γj
was chosen as a shortest path of minimal length. Therefore

w1 = rk−1 . . . r2s1 · · · snr2 . . . rk−1 and w2 = trk−1 . . . r2s1 · · · snr2 . . . rk−1t

are reduced words in MS.

36

Pick a chamber d1 at Weyl distance r2 . . . rk−1 from c1 and let d2 = g.d1.
Observe that the word w1 represents the Weyl distance from d1 to d2. Hence
d1 and d2 also in R and therefore in the same s-tree-wall T .

1 is distinct from T . Let d′

Let P1 and P2 be the t-residues of d1 and d2, respectively. These panels are
not contained in R as |ts| = ∞. So, if d′
1 ∈ Ch(P1) \ {d1}, then the s-tree-
wall T1 of d′
1 ∈ Ch(P2) \ {d2}. Analogously,
the s-tree-wall T2 of d′
2 does not coincide with T . Moreover w2 is a reduced
representation of the Weyl distance between d′
2. This implies that T1
and T2 are distinct. As g maps d′
2, it maps T1 to T2. We have hence arrived
at a contradiction as g should have stabilized T1, from which we conclude that
the action is faithful.

1 to d′

2 = g.d′

1 and d′

Lemma 3.19. Assume that ∆ is thick. Then every non-trivial normal subgroup
of U contains an s-hyperbolic element, for every s ∈ S.

Proof. Let s ∈ S and N be a non-trivial normal subgroup of U . Assume that
N does not contain any s-hyperbolic element. By [Tit70, Proposition 3.4] we
know that either N ﬁxes some vertex or it ﬁxes an end of the tree Γs.

First assume that N ﬁxes some vertex. This implies, since N is normal in
the type-preserving edge-transitive group U , that N ﬁxes all vertices of the same
type of this vertex. Therefore it ﬁxes every vertex of the tree Γs and hence, by
Lemma 3.18, it contradicts the non-triviality of N .

Next assume that N ﬁxes an end of the tree. Again using normality and
edge-transitivity (and the fact that the tree Γs contains vertices of valency at
least three), we obtain that N ﬁxes at least three ends of Γs. Since three ends
of a tree determine a unique vertex we get that N has a global ﬁxed point, a
possibility already handled in the previous paragraph.

We conclude that for every s ∈ S, the normal subgroup N contains an

s-hyperbolic element.

Proposition 3.20. Assume that ∆ is thick and of irreducible type. Let s ∈ S
and T be an s-tree-wall. Then any non-trivial normal subgroup N of U contains
FixU (T ).

Proof. Let g ∈ N be an s-hyperbolic element, which exists by Lemma 3.19. Let
T be an s-tree-wall for which the corresponding vertex of Γs lies on the axis
A(g). Let P be an s-panel of T , P1 = g.P and T1 = g.T (so P1 ∈ T1). We note
that T and T1 are distinct since g is s-hyperbolic.

Let {c} = projP (P1) and {c1} = projP1 (P). We claim that g.c 6= c1. Assume
by way of contradiction that g.c = c1. Then the residue R = RS\{s},c is mapped
to R1 = RS\{s},c1, both corresponding to vertices of Γs. Both of these residues
belong to the wings Xs(c) and Xs(c1) implying that dist(R, R1) (as vertices of
Γs) is strictly smaller than dist(T , T1). This a contradiction to the fact that
T ∈ A(g). Hence g.c 6= c1.

Let c′ = g−1.c1. Applying Lemma 3.16 to c and c′ yields that

Yd∈Ch(P)\{c,c′}

Vs(d) ⊆ N.

As P is thick, we can pick a chamber c2 in P \ {c, c′}. As Gs is transitive,
Lemma 3.5 implies that there exists a g1 ∈ U such that g1.c2 = c. We observe

37

1 ◦ Vs(c2) ◦ g1 = Vs(g1.c2) = Vs(c), hence Vs(c) ⊆ N . Analogously one

that g−1
proves that Vs(c′) ⊆ N . We therefore obtain that

Yd∈Ch(P)

Vs(d) ⊆ N

and, by Proposition 3.15, that FixU (T ) ⊆ N .

Since U is chamber-transitive, there exists, for each tree-wall T ′, an element

h ∈ U mapping T to T ′. Hence h−1 ◦ FixU (T ) ◦ h = FixU (T ′) ⊆ N .

3.6 Simplicity of the universal group

In this section we prove the simplicity of the universal group provided that the
following two conditions are satisﬁed.

(IR) The right-angled building is thick, irreducible, and has rank ≥ 2.

(ST) For each s ∈ S, the group Gs is transitive and generated by its point

stabilizers.

Remark 3.21. We observe that if we make the stronger assumption that the
local action of the universal group is given by 2-transitive groups, i.e. if each
group Gs ≤ Sym(Ys) is assumed to be 2-transitive, then we can use similar
arguments to the ones in [Cap14, Proposition 6.1] to show that the action of U
on Ch(∆) is strongly transitive and to prove simplicity in that manner.

The second condition (ST) is necessary, as is clear from the following propo-

sition.

Proposition 3.22. Let U + be the subgroup of U generated by chamber stabi-
lizers. Then U = U + if and only if for every s ∈ S the group Gs is transitive
and generated by point stabilizers.

Proof. Notice that, in the deﬁnition of U , we already assume the groups Gs to
be transitive. Assume ﬁrst that U = U +. Fix an element s ∈ S; we will show
that Gs is generated by its point stabilizers. Let (Gs)+ denote the subgroup
of Gs generated by the point stabilizers (Gs

α)α∈Ys.
For any s-panel P and any g, h ∈ U , we deﬁne

σ(g, P) := hs|g.P ◦ g ◦ (hs|P )−1,

(3.1)

which is an element of Gs by the very deﬁnition of the universal group U .
Observe that

σ(gh, P) = σ(g, h.P) ◦ σ(h, P)

for all g, h ∈ U .

We ﬁrst claim that if g ∈ Uc for some chamber c ∈ Ch(∆), then

σ(g, P) ∈ (Gs)+

(3.2)

(3.3)

for all s-panels P of ∆. We will prove this claim by induction on the distance
dist(c, P) := min{dist(c, d) | d ∈ Ch(P)}. If dist(c, P) = 0, then g stabilizes P
since g ﬁxes c, hence σ(g, P) ∈ Gs

hs(c) ≤ (Gs)+.

38

Assume now that the claim is true whenever dist(c, P) ≤ n and let P be
a panel at distance n + 1 from c. Then there is an s-panel P1 at distance n
from c such that there are chambers d ∈ Ch(P) and d1 ∈ Ch(P1) that are
t-adjacent for some t 6= s. Then hs(d) = hs(d1); denote this value by α ∈ Ys.
Similarly, g.d and g.d1 are t-adjacent, hence hs(g.d) = hs(g.d1). By (3.1), this
implies σ(g, P1)(α) = σ(g, P)(α). We conclude that σ(g, P) = σ(g, P1)gα for
α. By our induction hypothesis, σ(g, P1) ∈ (Gs)+, and therefore
some gα ∈ Gs
σ(g, P) ∈ (Gs)+, which proves the claim (3.3).

Now let g ∈ Gs be arbitrary. Choose an arbitrary s-panel P. By Lemma 3.5,
the action of U |{P} on P is permutationally isomorphic to Gs, so in particular,
we can ﬁnd an element u ∈ U |{P} such that its local action on P is given by g,
i.e., g = σ(u, P). Since U = U +, we can write u as a product uc1 · · · ucn, where
each uci ﬁxes a chamber ci. Then g = σ(u, P) = σ(uc1 · · · ucn, P).
It now
follows from (3.2) and (3.3) that g ∈ (Gs)+, so Gs is indeed generated by its
point stabilizers.

Conversely, assume that for each s ∈ S, the group Gs is generated by point
stabilizers. Let s ∈ S and P be an s-panel. Then, as U |{P} is permutationally
isomorphic to Gs, if g ∈ U |{P} for some s-panel P, then hs ◦ g ◦ (hs)−1|P =
gα1 · · · gαn, where gαi ﬁxes the color αi. Lift the elements gα1, . . . , gαn−1 to
elements gc1, . . . , gcn−1 ∈ U arbitrarily, and then deﬁne gcn ∈ U such that
g = gc1 · · · gcn. Then each gci ﬁxes the corresponding chamber ci ∈ P of color
αi, and hence g ∈ U +. As Gs is transitive, U + contains elements of U mapping
one chamber to any other s-adjacent chamber. Since this is true for any s ∈ S,
the subgroup U + is chamber-transitive. Since in addition U + contains the full
chamber stabilizers in U , we conclude that U + is indeed all of U .

Proposition 3.23. Let ∆ be a right-angled building satisfying (IR) and (ST).
Let N be a non-trivial normal subgroup of U . Then for each panel P of ∆, we
have N ∩ StabU (P) 6= 1.

0 be a non-trivial element.
Proof. Let s ∈ S and P be an s-panel of ∆. Let g ∈ Gs
Then g induces a non-trivial permutation of Ch(P) ﬁxing some c0 ∈ Ch(P). By

locally as g on P, and ﬁxing the chambers in the s-wing Xs(c0).

Let t ∈ S be such that |ts| = ∞ (such an element always exists because ∆ is

Proposition 3.6, we can ﬁnd a corresponding elementeg ∈ U stabilizing P, acting
irreducible). Let T be the t-tree-wall of c0. Then Ch(T ) ⊆ Xs(c0). Thereforeeg
ﬁxes T , i.e.,eg ∈ FixU (T ). Henceeg ∈ N by Proposition 3.20. We conclude that

N ∩ StabU (P) is non-trivial.

We are now ready to prove the main result.

Theorem 3.24. Let ∆ be a thick right-angled building of irreducible type (W, S)
with prescribed thickness (qs)s∈S and rank at least 2. For each s ∈ S, let
hs : Ch(∆) → Ys be a legal s-coloring and Gs ≤ Sym(Ys) be a transitive group
generated by point stabilizers.

Then the universal group U of ∆ with respect to the groups (Gs)s∈S is simple.

Proof. We ﬁrst observe that by Proposition 3.22, U coincides with U +. We will
prove the simplicity by induction on the rank of ∆.

If ∆ has rank 2 then the simplicity of U + = U follows from [Tit70, Theorem
4.5] since by deﬁnition U is the universal group of a biregular tree and it has
Tits independence property.

39

Now assume that the rank of ∆ is at least three, and that we have proven
simplicity for lower rank. Let N be a non-trivial normal subgroup of the uni-
versal group U . It suﬃces to show that N contains the chamber stabilizer Uc
of c in U , for each chamber c ∈ Ch(∆). Let c ∈ Ch(∆). We will show that the
stabilizers Nc and Uc coincide.

Pick a generator s ∈ S such that S \ {s} is irreducible. (Note that this is
always possible, by picking s to be a leaf of a spanning tree of the unlabeled
Coxeter diagram.) Let R be the S \ {s}-residue of ∆ containing c. This residue
is a right-angled building on its own of irreducible type and of rank at least two.

Claim 1. N contains the ﬁxator FixU (R) of R in U .

Let r be an element of S not commuting with s (which is always possible
by the irreducibility of the Coxeter system). The set {r} ∪ r⊥ is a subset of
S \ {s} and therefore the residue R contains a residue of type {r} ∪ r⊥, which
forms an r-tree-wall T . The normal subgroup N contains the ﬁxator FixU (T )
by Proposition 3.20, hence it also contains its subgroup FixU (R).

Claim 2. The stabilizer StabN (R) maps surjectively onto U (R).

We ﬁrst observe that the image of N ∩StabU (R) in U (R) (∼= StabU (R)/ FixU (R))

is non-trivial since StabU (P) ⊆ StabU (R) for any panel P in R and N ∩
StabU (P) 6= 1 by Proposition 3.23.

By induction on the rank we know that that U (R) is simple. Since moreover
the natural homomorphism from StabU (R) to U (R) is surjective by Proposi-
tion 3.14, it follows that it remains surjective in restriction to N ∩ StabU (R).
We conclude then that StabN (R) maps surjectively to U (R).

The chamber stabilizers Nc and Uc also stabilize the residue R, hence we
may consider their image in the universal group U (R). By Claim 2, the images
of Nc and Uc in U (R) are both equal to the entire group U (R). The kernels
of the maps from Nc and Uc to U (R) are the ﬁxators FixN (R) and FixU (R),
respectively, which also coincide by Claim 1. We conclude that Uc and Nc are
equal for all c, hence N contains all chamber stabilizers Uc and thus coincides
with U , proving the simplicity.

4 Maximal compact open subgroups of U

The universal group of a locally ﬁnite semi-regular right-angled building is a
locally compact group. Crucial in understanding such a group is to understand
its compact subgroups. This is the aim of this section.

Let (W, S) be a right-angled Coxeter system with Coxeter diagram Σ. Let
(qs)s∈S be a set of natural numbers with qs ≥ 3 and let Ys = {1, . . . , qs}.
Consider the locally ﬁnite thick semi-regular right-angled building ∆ of type
(W, S) with prescribed thickness (qs)s∈S. Fix a base chamber c0 ∈ Ch(∆). For
each s ∈ S, let hs : Ch(∆) → Ys be a directed legal s-coloring with respect
to c0 and let Gs ≤ Sym(Ys) be a transitive permutation group. Consider the
universal group U of ∆ with respect to the groups (Gs)s∈S.

Lemma 4.1. Let R be a spherical residue of ∆. Then the setwise stabilizer UR
of R in U is compact.

40

Proof. By [Woe91, Lemma 1], each chamber stabilizer is compact. Since ∆ is
locally ﬁnite, each spherical residue of ∆ is ﬁnite. The result follows.

Proposition 4.2. The maximal compact open subgroups of U are exactly the
stabilizers of maximal spherical residues of ∆.

Proof. Let H be a compact open subgroup of U . By Lemma 4.1 it is suﬃcient
to show that H is contained in the stabilizer of a spherical residue of ∆.

Since H is compact, the orbits of H on Ch(∆) are ﬁnite. In particular, H acts
(type-preservingly) on any s-tree-wall tree with ﬁnite orbits; therefore, it ﬁxes a
vertex in each s-tree-wall tree. Such a vertex corresponds to a residue R of ∆,
which is, in its own right, a right-angled building. Therefore H ⊆ StabU (R).

As the orbits of action of H on Ch(R) are still ﬁnite, we can repeat the
above procedure and obtain a residue R′ of smaller rank than R such that
H ⊆ StabU (R′). We can continue this procedure until there are no non-trivial
tree-wall trees left, which happens exactly when the right-angled building is
spherical.

We conclude that H is indeed contained in the stabilizer of a spherical

residue.

The chamber stabilizers Uc0 (as well as the maximal compact subgroups of
which they are ﬁnite index subgroups) are totally disconnected compact groups,
and are therefore proﬁnite (see [Wil98, Corollary 1.2.4]), i.e., they are a pro-
jective limit of ﬁnite groups. We will make this inverse limit of ﬁnite groups
explicit for the subgroups Uc0 and we will describe the structure of these ﬁnite
groups.

4.1 A description of Uc0 as iterated semidirect products

Let Uc0|B(c0,n) be the induced action of Uc0 on the n-ball B(c0, n), that is,
(B(c0, n)). (Recall that B(c0, n) is the set of chambers
Uc0|B(c0,n) = Uc0/ FixUc0
of ∆ at gallery distance smaller than or equal to n, as in Deﬁnition 1.3.)

The restriction of the action of Uc0|B(c0,n+1) to B(c0, n) maps Uc0|B(c0,n+1)

to Uc0|B(c0,n) and this restriction is onto. Therefore

Uc0 = lim←−

n

Uc0|B(c0,n) = lim←−

n

Uc0|S(c0,n),

(4.1)

where the last equality follows because there is a unique path of each type
between any two chambers of ∆ and we are considering type-preserving auto-
morphisms only.

We will make the extension of the action of Uc0|B(c0,n) to B(c0, n + 1) explicit

following the strategy described in [Gib, Section 9].

Deﬁnition 4.3.

1. For any w ∈ W , let

L(w) = {s ∈ S | l(ws) < l(w)},

(4.2)

that is, the set of generators which added to a reduced representation for w
do not form a new reduced word. Let W (n) denote the set of elements
w ∈ W of length n. Deﬁne

W1(n) = {w ∈ W (n) | |L(w)| = 1},
W2(n) = {w ∈ W (n) | |L(w)| ≥ 2}.

41

Observe that if w ∈ W1(n), then the last letter of w is independent of the
choice of the reduced representation for w. We will write this last letter
as rw; then L(w) = {rw}.

2. Let n ≥ 1 and let A(n) = S(c0, n) be the n-sphere around c0. We will

create a partition of A(n) by deﬁning, for each i ∈ {1, 2},

Ai(n) = {c ∈ A(n) | δ(c0, c) ∈ Wi(n)}.

(4.3)

t

t

t

c1

t

c2

s s

s

n + 1

t

t

c3

n

n − 1

c1

c2

c3

n

s

t

s

t

s

t

n − 1

...

c0

...

c0

(a) ci ∈ A1(n): for all t 6= s,

l(wt) > l(w).

(b) ci ∈ A2(n): for some t 6= s,

l(wt) < l(w).

Figure 2: Partition of A(n).

We observe that if two chambers c1 and c2 in A(n) are s-adjacent for some
s ∈ S, then there is a unique chamber c in their s-panel that is in A(n − 1).
Thus δ(c0, c1) = δ(c0, c)s = δ(c0, c2) and hence c1 and c2 are in the same part
Ai(n). Therefore A1(n) and A2(n) are mutually disconnected parts of A(n).

We will extend the action of Uc0|B(c0,n) to B(c0, n + 1) by considering the

extension to A1(n + 1) and to A2(n + 1) separately. Let

Cn = {c ∈ B(c0, n) | c s∼ c′ for some c′ ∈ A1(n + 1) and some s ∈ S},

and for each c ∈ Cn, let

Sc = {s ∈ S | c

s∼ c′ for some c′ ∈ A1(n + 1)}.

Now consider the set of pairs

Zn = {(c, s) | c ∈ Cn and s ∈ Sc}.

Equivalently,

Zn = {(c, s) ∈ A(n) × S | δ(c0, c)s ∈ W1(n + 1)}.

(4.4)

For each element z = (c, s) ∈ Zn, let Pz be the s-panel containing c and let
Gz = Gs

0 is the stabilizer of the element 1 ∈ Ys in Gs.

0, where Gs

42

Lemma 4.4. Let E := B(c0, n) ∪ A1(n + 1). For each element z = (c, s) ∈ Zn,
there is a subgroup Uz ≤ Uc0|E acting trivially on E \ Pz and acting as Gz
on Pz. In particular, Uz ﬁxes B(c0, n).

Proof. Let z = (c, s) ∈ Zn, and consider the s-panel P = Pz. Notice that
c = projP (c0). Since hs is a directed legal coloring, we know that hs(c) = 1 and
that, for any g ∈ Uc0|B(c0,n), also hs(g(c)) = 1 because g is a type preserving
automorphism.

For each a ∈ Gs

0, we consider the induced automorphism of P given by
aP = (hs|P )−1 ◦ a ◦ hs|P ∈ Aut(P). By Lemma 3.6 we know that there exists

that projP (d) = c. Indeed, if projP (d) = c2 ∈ S(c0, n + 1), then by Lemma 2.15
there would exist c3 ∈ S(c0, n) such that c2 is t-adjacent to c3 with st = ts,
contradicting the fact that c2 ∈ A1(n + 1). Therefore projP (d) = c. It follows
In particular, the

an element faP ∈ U acting locally as aP on the panel P and ﬁxing the s-wing
Xs(c). In particular, faP ∈ Uc0.
We claim that faP ﬁxes each chamber d ∈ E \ Ch(P). We start by showing
that d ∈ Xs(c), and hence faP ﬁxes d, proving our claim.
restriction of faP to E is independent of the choice of the extension faP; denote
this element of Uc0|E by caP. Then

is a subgroup of Uc0|E isomorphic to Gs
A1(n + 1).

0, ﬁxing every chamber outside Ch(P) ∩

Uz := {caP | a ∈ Gs

0}

Proposition 4.5. The group Uc0|B(c0,n)∪A1(n+1) is isomorphic to

(Yz∈Zn

Gz) ⋊ Uc0|B(c0,n),

where the action of Uc0|B(c0,n) on Qz∈Zn

of the direct product according to the action of Uc0|B(c0,n) on Cn ⊆ B(c0, n).

Gz is given by permuting the entries

Proof. Let E = B(c0, n) ∪ A1(n + 1) as in Lemma 4.4 and consider, for each
z ∈ Zn, the subgroup Uz ≤ Uc0|E. Then the subgroups Uz for diﬀerent z ∈ Zn
all have disjoint support, and hence form a direct product

D := Yz∈Zn

Uz ≤ Uc0|E.

Moreover, D ﬁxes B(c0, n).

On the other hand, it is clear that each element g ∈ Uc0|B(c0,n) can be
uniquely extended to an element ˜g ∈ Uc0|E in such a way that for each z ∈ Zn,
the induced map from Pz to Pg.z preserves the s-coloring, i.e., induces the
identity of Gs. Let

F := {˜g | g ∈ Uc0|B(c0,n)} ≤ Uc0|E.

Then indeed Uc0|E = D ⋊ F , and the conjugation action of F on D is given by
permuting the entries of the direct product according to the action of Uc0|B(c0,n)
on Cn ⊆ B(c0, n).

Proposition 4.6. Each element of Uc0|B(c0,n) extends uniquely to B(c0, n) ∪
A2(n + 1). In particular, Uc0|B(c0,n)∪A2(n+1)

∼= Uc0|B(c0,n).

43

Proof. Let c ∈ A2(n + 1) and let w be a reduced representation of δ(c0, c). Since
|L(w)| ≥ 2, we can choose s, t ∈ L(w) with s 6= t. Consider the chambers
cs = projPs,c(c0) and ct = projPt,c(c0) in B(c0, n). Observe that c is the unique
chamber of A2(n + 1) that is s-adjacent to cs and t-adjacent to ct:
if d were
another such chamber, then c and d would be both s-adjacent and t-adjacent,
In particular, for any g ∈ Uc0, the restriction of g to
which is impossible.
B(c0, n) ∪ A2(n + 1) is already determined by the restriction of g to B(c0, n),
and the result follows.

As the sets A1(n + 1) and A2(n + 1) are mutually disconnected, we can com-
bine the two previous results to obtain an extension of the action of Uc0|B(c0,n)
to B(c0, n + 1) and a description of the groups Uc0|B(c0,n).

Theorem 4.7. For each n, we have

Uc0|B(c0,n+1)

Gz) ⋊ Uc0|B(c0,n),

(4.5)

∼= (Yz∈Zn

where the conjugation action of Uc0|B(c0,n) on Qz∈Zn

Gz is given by permuting
the entries of the direct product according to the action of Uc0|B(c0,n) on Cn ⊆
B(c0, n). Moreover,

Uc0

Uc0|B(c0,n).

∼= lim←−

n

Proof. This is now an immediate consequence of Propositions 4.5 and 4.6.

Remark 4.8. The semidirect product occurring in Theorem 4.7 is almost a
(complete) wreath product; the only diﬀerence is that the groups Gz might be
distinct for each orbit of the action of Uc0|B(c0,n) on Zn. On the other hand, see
Remark 4.17 below.

Remark 4.9. Theorem 4.7 gives a procedure to construct the group Uc0 recur-
sively, together with its action on the directed right-angled building ∆. Indeed,
given the group Un = Uc0|B(c0,n) acting on B(c0, n), we can deﬁne a group Un+1
as in (4.5), and endow it with a faithful action on B(c0, n + 1) precisely by
extending the action of B(c0, n) following the description given in the proofs
Gz acts trivially on
B(c0, n) and on A2(n + 1), and acts naturally on A1(n + 1) via the isomorphisms
Gz ∼= Uz.

of Theorems 4.5 and 4.6. In particular, the groupQz∈Zn

4.2 A description of the w-sphere stabilizers as generalized

wreath products

It might be desirable to have a more direct description of the stabilizer of a
w-sphere for a speciﬁc w ∈ W , where a w-sphere is a subset of Ch(∆) of the
form

S(c0, w) = {v ∈ Ch(∆) | δ(c0, v) = w},

where δ is the Weyl distance. It turns out that this is indeed possible, using
the generalized wreath products described in Section 1.3. Notice that, by Ex-
ample 1.7, the group Uc0|S(c0,n) is a subdirect product of the groups Uc0|S(c0,w)
running over all w ∈ W with l(w) = n; this gives another point of view on the
structure of the group Uc0.

44

Deﬁnition 4.10. Let w = s1 · · · sn−1sn be a reduced word in MS and write
w′ = s1 · · · sn−1. Consider the associated partially ordered set (Sw, ≺w) as in
Deﬁnition 2.6. For each i ∈ {1, . . . , n}, let Xi = {2, . . . , qsi }. We deﬁne

Xw = {(α1, . . . , αn) | αi ∈ Xi}.

By the deﬁnition of a directed right-angled building, the chambers in the w-sphere
S(c0, w) are indexed by the elements of Xw. Moreover, every element of Uc0|S(c0,w)
induces an element of Uc0|S(c0,w′) by restricting the elements of Xw to their ﬁrst
n − 1 coordinates. Let

Dw = {g ∈ Uc0|S(c0,w) | g ﬁxes S(c0, w′)}.

Notice that Dw depends on the word w in MS: diﬀerent reduced representa-
tions w1, w2 for a given element of W might have diﬀerent associated groups
Dw1, Dw2.

Proposition 4.11. Let w = s1 · · · sn−1sn be a reduced word in MS.

1. The group Uc0|S(c0,w) is permutationally isomorphic to the generalized
0 with respect to the partial order ≺w.

wreath product G = Xw–WRi∈Sw Gsi

2. Under this isomorphism, the subgroup Dw ≤ Uc0|S(c0,w) corresponds to the

subgroup D(n) ≤ G from Deﬁnition 1.10.

3. If we write w′ = s1 · · · sn−1, then Uc0|S(c0,w)

∼= Dw ⋊ Uc0|S(c0,w′).

Proof. We will identify S(c0, w) and Xw, i.e., we will view both Uc0|S(c0,w) and G
as subgroups of Sym(Xw), and we will show by induction on n = l(w) that they
are equal. Notice that if n = 1, then these two groups coincide by deﬁnition;
hence we may assume that n ≥ 2.

Let w1, w2, . . . , wn be the sequence of elements in W represented by the
words s1, s1s2, . . . , s1s2 · · · sn, respectively, and let K := {1W , w1, w2, . . . , wn}.
As K is a (ﬁnite) connected subset of W containing the identity, we can apply
Lemma 3.10 and obtain a set of generators for Uc0|S(c0,w), with an explicit
description as in Propositions 2.58 and 3.6. Each of these generators (acting
on Xw) belongs to the generalized wreath product G, hence Uc0|S(c0,w) ≤ G.

Now consider Sw′ = {1, . . . , n − 1} with the partial order ≺w′, let Xw′ =
0 . By the induction

{(α1, . . . , αn−1) | αi ∈ Xi} and let G′ = Xw′–WRi∈S ′
hypothesis, we have G′ = Uc0|S(c0,w′) as subgroups of Sym(Xw′).

w′ Gsi

Observe that {n} is an ideal of Sw; Lemma 1.13 now implies that

G = D(n) ⋊ H,

(4.6)

where H is a subgroup of G isomorphic to G′. Comparing Deﬁnition 1.10 and
Deﬁnition 4.10, we see that D(n) = Dw, and of course Dw ≤ Uc0|S(c0,w). On
the other hand, the embedding of G′ into G as in Lemma 1.13. corresponds
precisely to the embedding of Uc0|S(c0,w′) into Uc0|S(c0,w) obtained by extending
each element trivially on the last coordinate of Xw, hence H ≤ Uc0|S(c0,w). We
conclude that G ≤ Uc0|S(c0,w), and hence we have equality. The last statement
now follows from (4.6).

45

Remark 4.12. The generalized wreath product in Proposition 4.11 is closely
related to intersections of standard (i.e., complete) wreath products. The partial
order used to construct G = Xw–WRi∈Sw Gsi
0 uses only the structure of the
Coxeter diagram Σ and the distinct representations of a reduced word w. For
each reduced word w = s1 · · · sn in the free monoid MS with respect to Σ, let

Gw = Gsn

0 ≀ · · · ≀ Gs1
0

denote the iterated wreath product acting on the set Xw of tuples (α1, . . . , αn),
where each αi is an element in {2, . . . , qsi }, for i ∈ {1, . . . , n}, with its imprimi-
tive action (see [DM96, Section 2.6]). We can view the iterated wreath product
as a subgroup of Sym(Xw).

For each σ ∈ Rep(w), we have

sσ(n)
Gσ.w = G
0

sσ(1)
≀ · · · ≀ G
0

;

we can view this as a group acting on the same set Xw (but of course taking into
account that the entries have been permuted by σ), so in particular, it makes
sense to consider the intersection

H = \σ∈Rep(w)

Gσ.w

as a subgroup of Sym(Xw). The generalized wreath product G is then permu-
tationally isomorphic to H.

Remark 4.13. When ∆ is a tree, then for each reduced word w, the partial
order considered in the set Sw is a chain. Therefore, by Remark 1.9, the gen-
eralized wreath products considered in this construction are iterated wreath
products in their imprimitive action. Hence Proposition 4.11 translates, for the
case of trees, to the description provided by Burger and Mozes in [BM00, Sec-
tion 3.2]. Notice that the chamber c0 corresponds to an edge of the tree, and
for each of the two reduced words w of length n, the corresponding w-sphere
stabilizer corresponds to the stabilizer of a ball in the tree around one of the
two vertices of that edge.

We ﬁnish this section by computing the order of the groups Uc0|S(c0,w) and

Uc0|S(c0,n).

Deﬁnition 4.14. Let w = s1 · · · sn be a reduced word in MS. Then we deﬁne

dw = Yj≻w n

(qsj − 1)

(where dw = 1 if there is no j ≻w n). Notice that if w ∈ W1(n), then every j ∈
j=1 (qsj −1).

{1, . . . , n−1} satisﬁes the condition j ≻w n, so in that case, dw =Qn−1

Proposition 4.15. Let w = s1 · · · sn be a reduced word. Then

(cid:12)(cid:12)Uc0|S(c0,w)(cid:12)(cid:12) =

nYi=1

|Gsi

0 |di,

where di = ds1···si =Qj≻w i (qsj − 1), for each i ∈ {1, . . . , n}.

46

Proof. This follows by induction on n from Proposition 4.11 and Proposition 1.12.
Notice that for each initial subword wi = s1 · · · si, the poset ≺wi is a sub-poset
of ≺w, so that we can indeed express all di using ≺w only.

Proposition 4.16. For each generator s ∈ S, let

d(s, n) = Xw∈W1(n)

s.t. rw=s

dw and

t(s, n) =

d(s, i).

nXi=1

Then

|Uc0|B(c0,n)| =Ys∈S

|Gs

0|t(s,n).

Proof. Recall from equation (4.4) on p. 42 that Zn−1 = {(c, s) ∈ A(n − 1) × S |
δ(c0, c)s ∈ W1(n)}, and observe that this set can be partitioned as

Zn−1 = Gw∈W1(n)(cid:0)S(c0, wrw) × {rw}(cid:1).

(Notice that wrw is the unique initial subword of w of length n − 1.) By the
remark in Deﬁnition 4.14, the sphere S(c0, wrw) contains precisely dw chambers.
It follows that

Yz∈Zn−1

Gz =Ys∈S Yw∈W1(n)

s.t. rw=s

Gs

0 =Ys∈S

(Gs

0)d(s,n).

The result now follows by induction on n from Theorem 4.7.

Remark 4.17. Similarly as in Proposition 4.11, one can show that also the
groups Uc0|B(c0,n) are generalized wreath products.

We start by describing the underlying ﬁnite posets of these generalized
wreath products. Consider the Coxeter group W as a thin right-angled building
and let Bn be the ball of radius n around the identity element 1W .

Let Sn be the set of all tree-walls in W crossing the ball Bn. For each pair
T1 and T2 of such tree-walls in Sn, we set T1 ≺n T2 if and only if the tree-wall T2
is completely contained in the wing of T1 containing the identity element 1W .
It is easily veriﬁed that this makes (Sn, ≺n) into a partially ordered set.

For each s-tree-wall T ∈ Sn, we set sT = s and XT = {2, . . . , qs}. Let Xn

be the Cartesian product of all the sets XT for every T in Sn.

Then the group Uc0|B(c0,n) is permutationally isomorphic to the generalized

wreath product Xn–WRT ∈Sn GsT

0 with respect to the partial order ≺n.

References

[AB08] Peter Abramenko and Kenneth S. Brown, Buildings, Graduate Texts in Math-
ematics, vol. 248, Springer, New York, 2008, Theory and applications. MR
2439729 (2009g:20055)

[AT08] Alexander Arhangel′skii and Mikhail Tkachenko, Topological groups and re-
lated structures, Atlantis Studies in Mathematics, vol. 1, Atlantis Press, Paris;
World Scientiﬁc Publishing Co. Pte. Ltd., Hackensack, NJ, 2008. MR 2433295
(2010i:22001)

47

[Beh90] Gerhard Behrendt, Equivalence systems and generalized wreath products,
Acta Sci. Math. (Szeged) 54 (1990), no. 3-4, 257–268. MR 1096805
(92b:20032)

[BM00] Marc Burger and Shahar Mozes, Groups acting on trees: from local to global
structure, Inst. Hautes Études Sci. Publ. Math. (2000), no. 92, 113–150
(2001). MR 1839488 (2002i:20041)

[Bou97] Marc Bourdon, Immeubles hyperboliques, dimension conforme et rigidité
de Mostow, Geom. Funct. Anal. 7 (1997), no. 2, 245–268. MR 1445387
(98c:20056)

[Bro98] Kenneth S. Brown, Buildings, Springer Monographs in Mathematics,
Springer-Verlag, New York, 1998, Reprint of the 1989 original. MR 1644630
(99d:20042)

[Cap14] Pierre-Emmanuel Caprace, Automorphism groups of right-angled buildings:
simplicity and local splittings, Fund. Math. 224 (2014), no. 1, 17–51. MR
3164745

[CM11] Pierre-Emmanuel Caprace and Nicolas Monod, Decomposing locally compact
groups into simple pieces, Math. Proc. Cambridge Philos. Soc. 150 (2011),
no. 1, 97–128. MR 2739075 (2012d:22005)

[DM96] John D. Dixon and Brian Mortimer, Permutation groups, Graduate Texts
in Mathematics, vol. 163, Springer-Verlag, New York, 1996. MR 1409812
(98m:20003)
Aliska Gibbins, Automorphism groups of graph products of buildings,
http://arxiv.org/abs/1407.4712v1.

[Gib]

[HP03] Frédéric Haglund and Frédéric Paulin, Constructions arborescentes
d’immeubles, Math. Ann. 325 (2003), no. 1, 137–164. MR 1957268
(2004h:51014)
Jacques Tits, Sur le groupe des automorphismes d’un arbre, Essays on topol-
ogy and related topics (Mémoires dédiés à Georges de Rham), Springer, New
York, 1970, pp. 188–211. MR 0299534 (45 #8582)

[Tit70]

[Tit92]

, Twin buildings and groups of Kac-Moody type, Groups, combina-
torics & geometry (Durham, 1990), London Math. Soc. Lecture Note Ser.,
vol. 165, Cambridge Univ. Press, Cambridge, 1992, pp. 249–286. MR 1200265
[TW11] Anne Thomas and Kevin Wortman, Inﬁnite generation of non-cocompact
lattices on right-angled buildings, Algebr. Geom. Topol. 11 (2011), no. 2,
929–938. MR 2782548 (2012d:20068)

[Wei09] Richard M. Weiss, The structure of aﬃne buildings, Annals of Mathemat-
ics Studies, vol. 168, Princeton University Press, Princeton, NJ, 2009. MR
2468338 (2009m:51022)

[Wil98] John S. Wilson, Proﬁnite groups, London Mathematical Society Monographs.
New Series, vol. 19, The Clarendon Press, Oxford University Press, New York,
1998. MR 1691054 (2000j:20048)

[Woe91] Wolfgang Woess, Topological groups and inﬁnite graphs, Discrete Math. 95

(1991), no. 1-3, 373–384.

48

