IAS/Park City Mathematics Series
Volume 00, Pages 000–000
S 1079-5634(XX)0000-0

An introduction to afﬁne Grassmannians and the geometric

Satake equivalence

Xinwen Zhu

Abstract. We introduce various afﬁne Grassmannians, study their geometric prop-
erties, and give some applications. We also discuss the geometric Satake equiv-
alence. These are the expanded lecture notes for a mini-course in 2015 PCMI
summer school.

Contents

6
1
0
2

 
r
p
A
4

 

 
 
]

.

G
A
h
t
a
m

[
 
 

2
v
3
9
5
5
0

.

3
0
6
1
:
v
i
X
r
a

1

2

3

Introduction

2
2
0.1 Some motivations.
3
0.2 Scope and contents.
5
0.3 Conventions and notations.
8
0.4 Acknowledgement.
8
Lecture I: Afﬁne Grassmannians and their ﬁrst properties
8
1.1 The afﬁne Grassmannian of GLn.
10
1.2 Afﬁne Grassmannians of general groups.
13
1.3 Groups attached to the punctured disc.
16
1.4 Beauville-Laszlo’s theorem.
18
1.5 The determinant line bundle.
21
1.6 Afﬁne Grassmannians over complex number.
21
1.7 Afﬁne Grassmannians for p-adic groups.
23
Lecture II: More on the geometry of afﬁne Grassmannians
23
2.1 Schubert varieties.
29
2.2 Digression: Some sub-ind-schemes in Gr.
30
2.3 Opposite Schubert “varieties” and transversal slices.
34
2.4 The Picard group.
36
2.5 Central extensions, and afﬁne Kac-Moody algebras.
Lecture III: Beilinson-Drinfeld Grassmannians and factorisation structures 37
37
3.1 Beilinson-Drinfeld Grassmannians.
44
3.2 Factorisation property.
3.3 The Ran space.
45
46
3.4 Rigidiﬁed line bundles on GrRan.

Key words and phrases. Park City Mathematics Institute.
Partially supported by NSF DMS -1303296/1535464, a Sloan Fellowship and PCMI.

1

©0000 (copyright holder)

2

4

5

An introduction to afﬁne Grassmannians and the geometric Satake equivalence

Lecture IV: Applications to the moduli of G-bundles
4.1 One point uniformization.
4.2 Line bundles and conformal blocks.
4.3 Adèlic uniformization.
The geometric Satake equivalence
5.1 The Satake category SatG.
5.2 SatG as a Tannakian category.
5.3 Langlands dual group.
5.4 Fusion product.
5.5 Bootstraps.
5.6 From the geometric Satake to the classical Satake.

A Complements on sheaf theory

A.1 Equivariant category of perverse sheaves.
A.2 Universally local acyclicity.

49
49
51
52
57
58
60
63
71
75
82
85
85
89

Introduction

0.1. Some motivations. Let F be a complete discrete valuation ﬁeld, with O ⊂ F
its ring of integers and k its residue ﬁeld. Let V = Fn be an n-dimensional F-
vector space. A lattice of V is a ﬁnitely generated O-submodule Λ of V such that
Λ ⊗ F = V. For example, Λ0 = On is a lattice in V. The main purpose of the
lecture notes is to endow the set of lattices of V (and its variants and generalisa-
tions) with a structure as an inﬁnite dimensional algebraic variety, known as the
afﬁne Grassmannian Gr, to study its geometric properties, and to give some of its
applications.

But let us start with an incomplete list of motivations of studying such object.
The ﬁrst motivation lies in the relationship between loop algebras/groups and
Kac-Moody algebras/groups. Since every lattice can be translated to Λ0 by a
linear automorphism of V, Gr is naturally identiﬁed with GLn(F)/GLn(O) as a
set. When F = k((t)), the group GLn(F) is closely related to an afﬁne Kac-Moody
group over k. Realising Gr as a (partial) ﬂag variety of the Kac-Moody group
is important for representation theory of afﬁne Kac-Moody algebras. A precise
relation between them will be brieﬂy discussed in § 2.5.

The second motivation is the study of moduli of vector bundles on an algebraic
curve. Let X be a smooth projective algebraic curve over k, and let x ∈ X(k) be a
point. We identify the complete local ring of X at x with k[[t]] by choosing a local
coordinate t around x. Then one can identify Gr with the following set

Gr =(cid:8)E is a vector bundle on X, β : E|X−x ≃ On

X−x is a trivialisation(cid:9) .

Therefore, there is a map from Gr to the set of isomorphism classes of rank n
vector bundles on X. The latter in fact is the underlying set of points of a much
more sophisticated algebro-geometric object, namely the moduli stack Bunn of

Xinwen Zhu

3

rank n vector bundles on X. It is therefore very desirable to upgrade the above
set-theoretical map to a morphism

ux : Gr → Bunn

of algebro-geometric objects. Such a morphism is called the uniformization map,
and is an important tool to study certain geometric properties of Bunn. We refer
to § 4.1 for more detailed explanations of this idea.

The third motivation comes from the study of some (locally) closed subvari-
eties in Gr, arising from various aspects of the Langlands program. The list of
such subvarieties include afﬁne Springer ﬁbers (related to harmonic analysis on
reductive groups over non-archimedean local ﬁelds), afﬁne Deligne-Lusztig vari-
eties (related to reduction of Shimura varieties mod p) an Kisin varieties (related
to deformation spaces of Galois representations). We refer to § 2.2 for an intro-
duction of these varieties.

The fourth motivation also comes from the Langlands program. Namely, the
Satake isomorphism1, which describes the ring of GLn(O)-bi-invariant functions
on GLn(F), is the starting point of the Langlands duality. It turns out that the
Satake isomorphism admits a vast generalisation, known as the geometric Satake
equivalence. This is the starting point of the geometric Langlands program, and
in recent years also ﬁnds some unexpected applications to the classical arithmetic
Langlands program (e.g. see [46]). But even in order to formulate the geometric
Satake equivalence, we need to know the algebro-geometric structure on Gr.

0.2. Scope and contents.

0.2.1. The notes are based on ﬁve lectures given at the Park City Mathemati-
cal Institute in Summer of 2015. They are aimed as a serious introduction to
the subject. That said, we will address (what we think) the most basic and im-
portant aspects of the subject. Certainly there are many other important topics
untouched in the notes, partly due to the limitation of the space and partly due
to the author’s incapability.

On the other hand, we hope that these notes form a supplement rather than
a supplantation of the existing literature. Therefore, we do not give a detailed
proof of every result, in particular when such a proof already exists in literature.
Instead we shall point out relevant references. On the other hand, there are some
well-known and widely used results for which no (complete) proofs seem to exist
in literature. In that case, we will try to supply the details.

The notes contain a few results that did not appear in literature before, al-
though it is quite plausible that they are well-known to experts. Such results
include, for example, the calculation of the relative Picard sheaves of Beilinson-
Drinfeld Grassmannians (§ 3.4).

1Or rather, Langlands’ re-interpretation of the Satake isomorphism.

4

An introduction to afﬁne Grassmannians and the geometric Satake equivalence

0.2.2. We brieﬂy describe the contents of each section.

Section 1 explains basic constructions, including various (moduli) interpreta-
tions of afﬁne Grassmannians. We will also introduce the important determinant
line bundle, and discuss a relationship between afﬁne Grassmannians over com-
plex numbers and the based loop groups. Although mostly we consider groups
over an equal characteristic local ﬁeld, at the end of this section we brieﬂy discuss
the recent progress of deﬁning afﬁne Grassmannians for p-adic groups.

Section 2 studies some basic geometry of afﬁne Grassmannians. We will in-
troduce various subvarieties in the afﬁne Grassmannian, including Schubert va-
rieties, opposite Schubert “varieties”, transversal slices, and some important sub-
varieties arising from the Langlands program. We study the Picard group of the
afﬁne Grassmannian for a simple simply-connected group G. We also brieﬂy dis-
cuss the relation between afﬁne Grassmannians and partial ﬂag varieties of afﬁne
Kac-Moody groups.

The interpretation of afﬁne Grassmannians as certain moduli of bundles on
curves admits a vast generalisation, known as Beilinson-Drinfeld Grassmanni-
ans. Section 3 is devoted to these objects. A salient feature of Beilinson-Drinfeld
Grassmannians is the factorisation property. We explain this property in some
details, in particular formulate it via the Ran space of a curve. We also discuss
line bundles on Beilinson-Drinfeld Grassmannians.

Section 4 discusses some applications of afﬁne Grassmannians to the study of
moduli of bundles on curves. The basic tools are uniformization theorems. In
fact, there are two types of such theorems: One point uniformization which is
valid when G is semisimple, and the adèlic uniformization, which is the algebro-
geometric version of Weil’s adèlic description of the isomorphism classes of G-
bundles on a curve. As an application, we give a description of the Picard group
of the moduli of G-bundles on a smooth projective curve when G is simple and
simply-connected, and interpret global sections of line bundles on the moduli
space as conformal blocks.

Section 5 is devoted to the geometric Satake equivalence. The theory is nat-
urally divided into two parts. The ﬁrst part is the construction of a Tannakian
category from certain category of perverse sheaves on the afﬁne Grassmannian. A
key ingredient is the fusion product structure on the category, whose construction
relies on the factorisation property of Beilinson-Drinfeld Grassmannians. The sec-
ond part is the study of the Tannakian group. Here the main ingredient is the
Mirkovi´c-Vilonen theory on the geometry of semi-inﬁnite orbits. We also explain
how to extend the geometric Satake equivalence to the forms that are suitable for
applications to the (geometric) Langlands program. At the end of this section, we
explain how to recover the classical Satake isomorphism from the geometric one.
There is also an appendix where we collect some backgrounds on ℓ-adic sheaves

that are used in the Section 5.

Xinwen Zhu

5

0.3. Conventions and notations. Now we ﬁx notations and conventions that will
be used throughout the notes. Readers are strongly suggested to skip this subsec-
tion and come back only when necessary.

0.3.1. k-spaces. Let k denote a commutative ﬁeld. Let Affk denote the category
of afﬁne k-schemes, i.e. the category opposite to the category k -alg of commuta-
tive k-algebras. A presheaf (resp. prestack) is a covariant functor (resp. 2-functor)
from Affk to the category of sets (resp. 2-category of groupoids). We regard a set
as a discrete groupoid so sometimes regard a presheaf as a discrete prestack.

We endow Affk with the fpqc topology. I.e., a cover of R is a faithfully ﬂat map
R → R ′. A k-space is a sheaf on Affk with respect to this topology. Explicitly, a
space F is a covariant functor k -alg → Set

(1) that respects ﬁnite products, i.e.

F(Yi

R) →Yi

F(Ri)

is an isomorphism;

(2) and such that if R → R ′ is faithfully ﬂat,

(0.3.1)

F(R) → F(R ′) ⇒ F(R ′ ⊗R R ′)

is an equaliser.

Morphisms between two spaces are natural transformations of functors. The
category of k-spaces is denoted by Spk. It is well-known that Spk contains the
category Schk of k-schemes as a full subcategory. Recall that a map f : F → G of
presheaves is called schematic if for every scheme T, the ﬁber product F ×G T is
a scheme. One can similarly deﬁne the notion of a stack.

Let X and Y be two prestacks. The ﬁber product X × Y always means X ×k Y.
If Y = Spec R, it is sometimes also written as XR or X ⊗ R or X ⊗k R. Sometimes,
we also write X ×Y Z by X ⊗A B if Y = Spec A and Z = Spec B.

Let X be a prestack over k. We deﬁne the ring of regular functions on X as

(0.3.2)

Γ (X, OX) = Hom(X, Ga),

where Hom is calculated in the category of prestacks. I.e. a regular function f on
X is a coherent way to assign every x ∈ X(R) an element fx ∈ R, satisfying the
natural compatibility conditions. Likewise, we deﬁne the Picard groupoid of line
bundles on X as

(0.3.3)

Pic(X) = Hom(X, BGm),

where BGm is the classifying stack of Gm (see § 0.3.3 below). I.e. an object in
Pic(X), called a line bundle on X, is a coherent way to assign every x ∈ X(R) a
line bundle on Spec R, satisfying the natural compatibility conditions.

0.3.2. Ind-schemes.

In the notes a special class of k-spaces play a prominent role.

6

An introduction to afﬁne Grassmannians and the geometric Satake equivalence

Deﬁnition 0.3.4. An ind-scheme over k is a space that can be written as a ﬁltered
direct limit of subspaces

(0.3.5)

X = “lim−→

′′
i∈IXi

such that each Xi is represented by a scheme and that for every arrow i → j in I,
the corresponding map Xi → Xj is a closed embedding.

Remark 0.3.6. In literature, ind-schemes deﬁned as above are sometimes called
strict ind-schemes to distinguish them from general ind-objects in the category of
schemes. The latter notion will never appear in the notes.

Deﬁnition 0.3.7. Let X be an ind-scheme over k. Then X is called: (i) ind-afﬁne;
(ii) ind-of ﬁnite type over k; (iii) ind-proper over k; (iv) ind-projective over k; (v) reduced
if in some presentation as (0.3.5), each Xi can be chosen to be (i) afﬁne; (ii) of
ﬁnite type over k; (iii) proper over k; (iv) projective over k; (v) reduced. We deﬁne
Xred := “lim−→
Example 0.3.8. A formal scheme is an ind-scheme such that Xred is a scheme.

i∈I(Xi)red.

′′

0.3.3. Torsors. Let G be a k-group (i.e. a group object in the category of k-spaces).
A map E → X of prestacks is called a G-torsor if there is an action of G on E such
that:

(1) the map E → X is G-equivariant (where G acts trivially on X); and
(2) for every Spec R → X, there is a faithfully ﬂat map Spec R ′ → Spec R such

that Spec R ′ ×X E is G-equivariantly isomorphic to Spec R ′ × G.

If G is an afﬁne group scheme over k, this is equivalent to requiring that the map
E → X is schematic and faithfully ﬂat and that the natural action map G × E ∼=
E ×X E is an isomorphism. We say that this G-torsor is fppf (resp. étale, resp.
Zariski) locally trivial if Spec R ′ in (2) can be chosen such that Spec R ′ → Spec R
is a fppf (resp. étale, resp. Zariski) cover.

Let X be a k-space with an action of k-group G. We denote by [X/G] the fpqc
stack whose R-points are G-torsors E on Spec R together with a G-equivariant
map E → X. The natural projection X → [X/G] then is a G-torsor. If X = Spec k,
[X/G] is usually denoted by BG, called the classifying stack of G. If the action
of G on X is free, then [X/G] is a k-space. Let E → X be a G-torsor and Y be a
G-space (i.e. a k-space with a G-action), we deﬁne the twisted product as

X ˜×Y := E ×G Y := [E × Y/G],

where G acts on E × Y diagonally. There is a natural projection X ˜×Y → X with
ﬁbers isomorphic to Y. If Y = V is a linear representation of G, we sometimes
also write E ×G V by VE, and regard it as a vector bundle on X.

If G = GLn is the general linear group, and V = kn is the standard represen-
tation of GLn. Then (E → X) 7→ (VE → X) induces an equivalence of groupoids
between GLn-torsors on X and rank n vector bundles on X. We will use this
equivalence freely in the notes.

Xinwen Zhu

7

There is an obvious generalisation of the above notations for a (non-constant)
group space G over some base k-scheme S. We will denote by E0 the trivial G-
torsor.

0.3.4. The disc. We write

D = Spec k[[t]], D∗ = Spec k((t)),

and call them the disc and the punctured disc to emphasise a preferred choice of
the coordinate t. If R is a k-algebra, we write
DR := D ˆ× Spec R := Spec R[[t]], D∗

R := D∗ ˆ× Spec R := Spec R((t)),

and think them as a family of discs (resp. punctured discs) parameterised by
Spec R.

Unless otherwise stated, by a local ﬁeld F, we mean a ﬁeld over k complete
with respect to a discrete valuation that is trivial on k, and whose residue ﬁeld is
k. We denote by O ⊂ F the ring of integers. Then upon a choice of a uniformizer
t ∈ O, we have F ∼= k((t)) and O ∼= k[[t]]. Let
O ˆ⊗R := lim←−(O/tn ⊗ R),

F ˆ⊗R := O ˆ⊗R[1/t]

so O ˆ⊗R ∼= R[[t]], and F ˆ⊗R ∼= R((t)). We write DF,R = Spec(O ˆ⊗R) and D∗
Spec(F ˆ⊗R).

F,R =

Let X be a smooth geometrically connected curve over k. Let |X| denote the set
of closed points of X. For x ∈ |X|, let X∗ = X − {x}. Let Ox denote the complete
local ring of X at x and Fx denote the fractional ﬁeld of Ox. For a k-algebra R, We
Fx,R for simplicity. If x : Spec R → X
write Dx,R and D∗
is an R-point of X, we write Γx ⊂ XR the graph of x, and let ˆΓx denote the formal
completion of Γx in XR.

x,R instead of DFx,R and D∗

If G is a connected split reductive group over k,
0.3.5. Group theoretical data.
we denote by Gder the derived group of G, Gad the adjoint form of G, and Gsc the
simply-connected cover of Gder.

We denote by T the abstract Cartan of G. Recall that it is deﬁned as the quo-
tient of a Borel subgroup B ⊂ G by its unipotent radical. It turns out that T is
independent of the choice of B up to a canonical isomorphism. When we need to
embed T into G as a maximal torus, we will state it explicitly.

Let X• = X•(T ) denote the weight lattice, i.e. the free abelian group Hom(T, Gm),

and X• = X•(T ) denote the coweight lattice, i.e.
the dual of X•(T ). Let Φ ⊂
X• (resp. Φ∨ ⊂ X•) denote the set of roots (resp. coroots). The quadruple
(X•, X•, Φ, Φ∨) is called the root datum of G. Let W denote the Weyl group.
The Borel subgroup B ⊂ G determines the semi-group of dominant coweights
X•(T )+ ⊂ X•(T ) and the subset of positive roots Φ+ ⊂ Φ, which turn out to be
independent of the choice of B. Then there is a canonical bijection

X•(T )/W ∼= X•(T )+.

8

An introduction to afﬁne Grassmannians and the geometric Satake equivalence

Recall that there is a partial order 6 on X•(T ): λ 6 µ if µ − λ is a non-negative
integral linear combinations of simple coroots; we say λ < µ if λ 6 µ but λ 6= µ.
The restriction of the partial order to X•(T )+ sometimes is called the Bruhat order
on X•(T )+. We will usually denote by 2ρ ∈ X•(T ) the sum of all positive roots,
and let ρ = 1

2 (2ρ) ∈ X•(T ) ⊗ Q.

0.4. Acknowledgement. The notes are based on lectures given at the Park City
Mathematical Institute in Summer of 2015. I would like to thank the organisers,
audiences and the staff of the PCMI. I would also like to thank Weizhe Zheng
for useful discussions related to § A.2 and Michael Harris, Jiuzu Hong and Joel
Kamnitzer for valuable comments.

1. Lecture I: Afﬁne Grassmannians and their ﬁrst properties

We start to deﬁne the objects we are going to study.

1.1. The afﬁne Grassmannian of GLn. First it makes sense to talk about a family
of lattices in k((t))n.

Deﬁnition 1.1.1. Let R be a k-algebra. An R-family of lattices in k((t))n is a
ﬁnitely generated projective R[[t]]-submodule Λ of R((t))n such that Λ ⊗R[[t]]
R((t)) = R((t))n.

Deﬁnition 1.1.2. The afﬁne Grassmannian GrGLn (for GLn) is the presheaf that
assigns every k-algebra R the set of R-families of lattices in k((t))n.

For simplicity, we write GrGLn by Gr in this subsection. The whole subject is

based on the following theorem.

Theorem 1.1.3. The afﬁne Grassmannian Gr is represented by an ind-projective scheme.

Recall that this in particular means that Gr can be written as an increasing

union of ﬁnite dimensional projective schemes (cf. § 0.3.2).

Since the actual proof of the theorem is a little bit technical but the underlying
idea is very simple, we ﬁrst give an informal account (at the level of k-points).
Let Λ0 = k[[t]]n denote the standard lattice. Let Gr(N) ⊂ Gr denote the subspace
classifying lattices Λ in k((t))n that land in between tNΛ0 ⊂ Λ ⊂ t−NΛ0, then
Gr is an increasing union of these Gr(N).
It is enough to show that Gr(N) is
represented by a projective scheme. For a lattice Λ ∈ Gr(N), the quotient Λ/tNΛ0
can be regarded as a subspace of k2nN ∼= t−NΛ0/tNΛ0, stable under the action of
t. In this way, Gr(N) is realised as a closed subscheme of the usual Grassmannian
variety Gr(2nN) classifying ﬁnite dimensional subspaces in k2nN, and therefore
is a projective scheme. Now we turn this idea into a rigorous proof.

Proof. Given an R-family of lattice Λ ⊂ R((t))n, there always exists some integer
N large enough such that

(1.1.4)

tNR[[t]]n ⊂ Λ ⊂ t−NR[[t]]n.

Xinwen Zhu

9

So Gr is the union of subfunctors Gr(N) consisting of those lattices satisfying
(1.1.4). The key observation is the following lemma.

Lemma 1.1.5. Via the map

Gr(N) is identiﬁed with the presheaf Gr(N),f

Λ 7→ Q = t−NR[[t]]n/Λ,

Gr(N),f :=(cid:12)R[[t]]-quotient modules of

t−NR[[t]]n

tNR[[t]]n that are projective as R-modules(cid:13) .

As we shall see, although this statement is quite obvious for k-points, it is

subtle for general R.

We will need another lemma. Let Gr(m) denote the usual Grassmannian va-
riety, classifying ﬁnite dimensional subspaces in km. It is the disjoint union of
those Gr(r, m), classifying those subspaces of dimension r.
Lemma 1.1.6. The functor Gr(N),f is represented by a closed subscheme of Gr(2nN).

We ﬁrst prove Lemma 1.1.6. We identify t−Nk[[t]]n/tNk[[t]]n with k2nN. Then
multiplication by t induces a nilpotent operator Φ on this vector space, and
Gr(N),f is the closed subscheme of Gr(2nN) classifying those subspaces of k2nN
that are stable under Φ. Note that in fact Gr(N),f is a union of Springer ﬁbers
([78, § 1]).

Next we prove Lemma 1.1.5. We ﬁrst need to show that there is indeed a

well-deﬁned map

(1.1.7)

Gr(N) → Gr(N),f

as claimed in the lemma. I.e. we need to show that Q is projective as an R-module.
Since Λ/tΛ is R-projective,

R((t))n/Λ ∼=Mk>0

t−k−1Λ/t−kΛ

is also R-projective. Then the projectivity of Q follows from the exact sequence of
R-modules

0 → Q → R((t))n/Λ → R((t))n/t−NR[[t]]n → 0.

Therefore (1.1.7) realises Gr(N) as a subpresheaf of Gr(N),f. We also need to
show that (1.1.7) is surjective on R-points for every R. In other words, we need
to show that for every k-algebra R and an R-point of Gr(N),f represented by a
quotient map t−NR[[t]]n/tNR[[t]]n → Q, the R[[t]]-module

Λ := ker(t−NR[[t]]n → t−NR[[t]]n/tNR[[t]]n → Q)

is a ﬁnite projective R[[t]]-module. Then Λ ⊗ R((t)) ≃ R((t))n automatically.
Since Gr(N),f is locally of ﬁnite type (by Lemma 1.1.6), we have (cf.

[74,

Tag01ZC])

Gr(N),f(lim−→Ri) = lim−→Gr(N),f(Ri).

10

An introduction to afﬁne Grassmannians and the geometric Satake equivalence

By writing R as a union of ﬁnitely generated sub-k-algebras, we can therefore
assume that R is ﬁnitely generated over k. Then the natural ring map R[t] → R[[t]]
[74, Tag00MB]), and induces an isomorphism
is ﬂat since R is noetherian (cf.
t−NR[t]n/tNR[t]n ∼= t−NR[[t]]n/tNR[[t]]n. Then we can deﬁne an R[t]-module
Λf as

Λf := ker(t−NR[t]n → t−NR[t]n/tNR[t]n → Q).

By the ﬂatness of the map R[t] → R[[t]], Λ = Λf ⊗R[t] R[[t]]. Therefore, it is
enough to prove that Λf is a ﬁnite projective R[t]-module. Clearly, Λf is ﬁnitely
generated, so it is enough to prove that it is ﬂat over R[t]. Since Λf is already
R-ﬂat, by [74, Tag00MH] it is enough to show that for every x ∈ Spec R, with
residue ﬁeld K, the base change Λf ⊗R[t] K[t] is ﬂat over K[t]. Since Q is R-ﬂat, we
have

Λf ⊗R[t] K[t] = ker(t−NK[t]n → Q ⊗R K),

which is t-torsion free and therefore is ﬂat over K[t], as desired. This ﬁnishes the
proof of Lemma 1.1.5.

Finally, it is not hard to see that the inclusion Gr(N) → Gr(N+1) is a closed
(cid:3)

embedding. The theorem then follows.

Remark 1.1.8. The idea of replacing R[[t]] by R[t] is a special case of Beauville-
Laszlo’s realisation of Gr via a global curve. See Theorem 1.4.2 below.

1.2. Afﬁne Grassmannians of general groups. Let G be a smooth afﬁne k-group.
Recall the notion of torsors (cf. § 0.3.3) and R-family of discs (cf. § 0.3.4). We
deﬁne the afﬁne Grassmannian GrG of G as

E is a G-torsor on DR, and
β : E|D∗
R

is a trivialisation (cid:15) .

∼= E0|D∗

R

(1.2.1)

GrG(R) =(cid:14)(E, β) (cid:12)(cid:12)(cid:12)(cid:12)(cid:12)

Note that this deﬁnition makes sense for non-constant group schemes. Namely,
if G is an afﬁne group scheme smooth over k[[t]], we can deﬁne the afﬁne Grass-
mannian GrG of G exactly as in (1.2.1), with G replaced by G.

Theorem 1.2.2. The presheaf GrG is represented an ind-scheme, ind-of ﬁnite type over
k. If G is reductive, then GrG is ind-projective.

Remark 1.2.3. (i) Certainly in the above deﬁnition and theorem one can replace
k[[t]] by the ring of integers of any local ﬁeld.

(ii) It is easy to see that for the additive group G = Ga, GrGa is represented by

an inductive limit of afﬁne spaces and therefore is not ind-projective.

Remark 1.2.4. In the notes, we will state the results for general group schemes
when no additional effort is needed. Readers unfamiliar with group schemes can
safely replace G by a k-group G.

The proof of the theorem is based on the following two results.

Xinwen Zhu

11

Proposition 1.2.5. There exists a faithful k[[t]]-linear representation ρ : G → GLn such
that GLn/G is quasi-afﬁne. In addition, if G is reductive, one can choose ρ such that
GLn/G is afﬁne.

Proof. See [60, Proposition 1.3] for the ﬁrst statement. See [1, Corollary 9.7.7] for
the second statement.
(cid:3)

Proposition 1.2.6. Let ρ : G → GLn be a linear representation such that GLn/G is
quasi-afﬁne, then the induced map fρ : GrG → GrGLn is a locally closed embedding. In
addition, if GLn/G is afﬁne, it is a closed embedding.

The proof is not related in the rest of the notes and readers who take the

proposition on faith can skip it.

Proof. Let Spec R → GrGLn be a map, represented by (E, β). We want to show that
the base change map

F := Spec R ×GrGLn

GrG → Spec R

is a locally closed embedding, and is a closed embedding if GLn/G is afﬁne. Let
R.
us denote π : E → DR for the projection, and regard β as a section of π over D∗
Let

¯π : [E/G] → DR

denote the fpqc quotient. Since GLn/G is (quasi-)afﬁne, by the faithfully ﬂat de-
scent for (quasi-)afﬁne morphisms (cf. [74, Tag0244, Tag0246]), there is a scheme
W, afﬁne and of ﬁnite presentation over DR, such that [E/G] ⊂ W is quasicom-
R, denoted by ¯β. Recall
pact open. The section β induces a section of ¯π over D∗
that giving a reduction of E to a G-torsor E ′ is the same as giving a section of of
¯π. It follows that F is the presheaf over Spec R that assigns every R → R ′ the set
of sections β ′ of ¯π over DR ′ such that β ′|D∗
R ′

R ′ . We have

= ¯β|D∗

Lemma 1.2.7. Let p : V → DR be an afﬁne scheme of ﬁnite presentation, and s be a
R. Then the presheaf over Spec R that assigns every R → R ′ the set of
section of p over D∗
sections s ′ of p over DR ′ such that s ′|D∗
R ′ is represented by a closed subscheme
R ′
of Spec R.

= s|D∗

Proof. We can embed V ⊂ AN
DR
Then using coordinates, we can write s as

as a closed subscheme of some (big) afﬁne space.

s = (s1(t), . . . , sN(t)),

si(t) =X sijtj ∈ R((t)).

The presheaf in question then is represented by the closed subscheme Spec A ⊂
Spec R deﬁned by the ideal generated by {sij = 0, i = 1, . . . , N, j < 0}.
(cid:3)

Applying this lemma to V = W and s = ¯β, we obtain a closed subscheme
Spec A ⊂ Spec R and a tautological map βA : DA → WDA whose restriction to
. Base change along the closed embedding Spec A → DA deﬁned by
D∗
t = 0 induces a section s0 : Spec A → W ×DR Spec A. Then F is represented by
the open subscheme s−1
(cid:3)

0 ([E/G] ×DR Spec A) of Spec A.

A is ¯β|D∗

A

12

An introduction to afﬁne Grassmannians and the geometric Satake equivalence

Remark 1.2.8. In the notes, we work over a ﬁxed base ﬁeld k. But for certain appli-
cations (e.g. [61, 62]), one needs to work over a base scheme S = Spec A. Starting
from an afﬁne smooth group scheme G over A[[t]], one can then similarly deﬁne
the afﬁne Grassmannian GrG by (1.2.1), which is a presheaf over S. If the corre-
sponding Proposition 1.2.5 holds in this generality, then the same arguments as
above show that GrG is representable as an ind-scheme ind-of ﬁnite presentation
over S. It is known Proposition 1.2.5 holds if: (i) G is the base change of a linear
reductive over S ; (ii) S is a Dedekind domain (cf. [62, Appendix]).

Interesting (and important) non-constant group schemes are parahoric group
schemes from Bruhat-Tits theory (see [75] for a summary). Instead of explaining
what they are in general, we give two basic examples.

Example 1.2.9. Let G be a connected reductive group over k and B ⊂ G be a Borel
subgroup.

(1) The group scheme G := G ⊗k O is parahoric, usually called a hyperspecial

parahoric of G.

(2) Let G be as above. There is the evaluation map ev : G(O) → G(k) given
by g 7→ (g mod t). Then there exists a smooth ﬁberwise connected afﬁne
group scheme G ′ over O together with a homomorphism G ′ → G, which
induces an isomorphism G ′ ⊗O F ∼= G ⊗O F = G ⊗k F and identiﬁes G ′(O)
with ev−1(B(k)). Usually G ′ is called an Iwahori group scheme of G.

We refer to Example 1.3.4 for more discussions.

Remark 1.2.10. In this notes, we call GrG the afﬁne Grassmannian of G. This is
inconsistent with the standard terminology in literature. For example, if G is an
Iwahori group scheme of G as above, then GrG is usually called the afﬁne ﬂag
variety of G in literature, and is usually denoted by FℓG.

The following proposition generalises the second statement of Theorem 1.2.2.

Proposition 1.2.11. Let G be a ﬁberwise connected smooth afﬁne group scheme over O
whose generic ﬁber is connected reductive. Then GrG is ind-projective if and only if G is
a parahoric group scheme.

This is similar to the classical result that a homogenous space of a connected
reductive group G is projective if and only if it is a partial ﬂag variety of G. Since
this result is not used elsewhere in the notes, we omit the proof.

Let us introduce the convolution Grassmannian GrG ˜×GrG. It is deﬁned as

(1.2.12)

GrG ˜×GrG(R) =(cid:14)(E1, E2, β1, β2) (cid:12)(cid:12)(cid:12)(cid:12)(cid:12)

There is a map

E1, E2 are G-torsors on DR,
β1 : E1|D∗

∼= E0|D∗

, β2 : E2|D∗

R

R

R(cid:15) .

∼= E1|D∗

R

(1.2.13)

m : GrG ˜×GrG → GrG,

(E1, E2, β1, β2) 7→ (E2, β1β2),

Xinwen Zhu

13

and a natural projection

pr1 : GrG ˜×GrG → GrG,
which together induce an isomorphism

(E1, E2, β1, β2) 7→ (E1, β1),

(1.2.14)

(pr1, m) : GrG ˜×GrG

∼= GrG × GrG.

In particular, the convolution Grassmannian is representable. The map m is usu-
ally called the convolution map.

Similarly, there exists the n-fold convolution Grassmannian GrG ˜× · · · ˜×GrG,
classifying (Ei, βi), i = 1, . . . , n, where Ei is a G-torsor on DR and βi : Ei|D∗
≃
is an isomorphism (where E0 = E0 is trivial). There is a natural pro-
Ei−1|D∗
R
jection prj to the j-fold convolution Grassmannian for each j = 1, . . . , n − 1 by
remembering (Ei, βi), i = 0, . . . , j, and an n-fold convolution map
(1.2.15)

m : GrG ˜× · · · ˜×GrG → GrG,

R

sending (Ei, βi) to (En, β1 · · · βn).

1.3. Groups attached to the punctured disc. There is another useful interpreta-
tion of GrG. First, we introduce jet and loop groups.

Deﬁnition 1.3.1. Let X be a presheaf over O = k[[t]]. The space of n-jets LnX of X
is the presheaf that assigns every R the set

LnX(R) = X(R[t]/tn).

The formal jet space (sometimes also called the arc space, or the positive loop
space) L+X of X is the presheaf that assigns every R the set

LX(R) = X(R[[t]]).

Let X be a presheaf over F = k((t)). The loop space LX of X is the presheaf that
assigns every R the set

LX(R) = X(R((t))).

If X is a presheaf over k, we write L+(X ⊗k O) by L+X and L(X ⊗k F) by LX for
simplicity, if no confusion will arise.
Proposition 1.3.2.

(1) Let X be a scheme of ﬁnite type over O = k[[t]]. Then LnX is represented by a

scheme of ﬁnite type over k. In addition

L+X ∼= lim←− LnX

is represented by a scheme. If X is afﬁne, so is L+X. If f : X → Y is an open (resp.
closed embedding), so is L+f : L+X → L+Y.

(2) Let X be an afﬁne scheme of ﬁnite type over F = k((t)). Then LX is represented
If f : X → Y is a closed embedding, so is
by an ind-afﬁne scheme over k.
Lf : LX → LY. In addition, if X = X ⊗O F for some afﬁne scheme X of ﬁnite type
over O, then L+X ⊂ LX is a closed subscheme.

14

An introduction to afﬁne Grassmannians and the geometric Satake equivalence

Proof. See [60, 1.a].

(cid:3)

Example 1.3.3. If X = A1, then L+X(R) = R[[t]] = {P riti | ri ∈ R, ri = 0 for i < 0}
and LX(R) = R((t)) = {P riti | ri ∈ R, ri = 0 for i ≪ 0}. Therefore L+X ∼=

Spec k[r0, r1, . . .] and LX = lim−→i Spec k[r−i, r−i+1, . . .].
Example 1.3.4. We consider the group schemes as in Example 1.2.9. The natural
homomorphism G ′ → G then induces a closed embedding L+G ′ ⊂ L+G. Indeed,
the evaluation map can be upgraded to a map of afﬁne k-groups ev : L+G → G
and L+G ′ = ev−1(B). Note that, however, the homomorphism G ′ → G is not a
closed embedding since it induces an isomorphism when base change to F.

Back to the afﬁne Grassmannian. Note that there is a natural action

(1.3.5)

LG × GrG → GrG,

(A, (E, β)) 7→ (E, Aβ).

Proposition 1.3.6. The afﬁne Grassmannian GrG can be identiﬁed with the fpqc quotient
[LG/L+G].

Proof. We ﬁrst need a lemma.

Lemma 1.3.7. Every G-torsor on DR can be trivialised over DR ′ for some étale covering
Spec R ′ → Spec R.

Proof. First the map E ⊗R[[t]] R → Spec R is smooth (since G is smooth) and there-
fore admits a section for some étale covering Spec R ′ → Spec R. By the smooth-
ness of E → DR, such a section can be lifted to a section ǫ of E over DR ′.
(cid:3)

Now we prove the proposition, The claim is equivalent to saying that LG is
an L+G-torsor over GrG. More precisely, for a k-algebra R, there is a canonical
isomorphism

In fact, the desired isomorphism is given by A 7→ (E0, A, id) with the inverse map
given by (E, β, ǫ) 7→ A := βǫ.
(cid:3)

Remark 1.3.8. According to the proof of the proposition, the L+G-torsor LG →
GrG is locally trivial for the étale topology. If G = G ⊗ O is constant reductive (or
more generally so-called tamely ramiﬁed), it is even locally trivial for the Zariski
topology (see Lemma 2.3.5).

The convolution Grassmannian (1.2.12) also admits a similar interpretation.
Using the L+G-torsor LG → GrG and the left action of L+G on GrG (deﬁned by
(1.3.5)), we can form a twisted product LG ×L+G GrG (cf. § 0.3.3). By a similar
argument, one sees that LG ×L+G GrG is isomorphic to GrG ˜×GrG (in particular
our notations are consistent).
We have a direct corollary.

LG(R) ∼=(cid:14)(E, β, ǫ) (cid:12)(cid:12)(cid:12)(cid:12)(cid:12)

(E, β) ∈ GrG(R)

ǫ : E0 ∼= E is a trivialisation(cid:15) .

Xinwen Zhu

Corollary 1.3.9. The afﬁne Grassmannian GrG is formally smooth.

Proof. Indeed, both LG and L+G are formally smooth.

15

(cid:3)

Remark 1.3.10. Formal smoothness for an ind-scheme is a weak notion. For exam-
ple, LGm is formally smooth, but it is easy to see that it is highly non-reduced.

Here is a deeper application of loop groups. We assume that k is algebraically
closed and GF = G ⊗ F is connected reductive. Let I = Gal(F/F) be the Galois
group of F. It acts on the fundamental group π1(GF) of GF. Let π1(GF)I denote
the group of coinvariants. Let p denote the characteristic exponent of k.

Theorem 1.3.11.

(1) There is a canonical isomorphism π0(LG) ∼= π1(GF)I. The map LG → GrG
induces an isomorphism π0(LG) ∼= π0(GrG). Let (GrG)0 denote the neutral
connected component.

(2) Assume that GF be semisimple and simply-connected. Then GrG is reduced.
(3) Assume that GF is semisimple and p ∤ π1(GF). Let Gsc be the simply-connected
cover of GF and assume that it extends to an étale cover Gsc → G. Then it
induces an isomorphism GrGsc

∼= (GrG)0. In particular, GrG is reduced.

(4) In general, assume that p ∤ π1(Gder), where Gder is the derived group of GF.

Then the map Gsc → G induced an isomorphism GrGsc

∼= (GrG)0

red.

The proof of this theorem (in various generalities) can be extracted from var-
ious places ([11, §4.5], [3], [47], [5], [24] and ultimately [60]). Note that (1) is
analogous to the well-known fact in topology: π0 of a loop space is the same as
π1 of the original space (this is in fact more than an analogy when k = C, see
Theorem 1.6.1).

By this theorem, the study of many questions on GrG reduces to the study of

the case when G is simply-connected.

Example 1.3.12. (i) Let G = Gm. By the theorem π0(GrG) ∼= Z. In fact, (GrG)red =
π0(G) = Z. However, as mentioned in Remark 1.3.10, it is non-reduced.

(ii) It was shown in [60, Remark 6.4] that GrG is non-reduced for G = PGL2

and char k = 2.

In addition to the natural action of LG on GrG, there is another important
symmetry on GrG, at least when G = G ⊗k O is constant. Let Aut(D) be the
group ind-scheme of automorphisms of O = k[[t]]. Precisely, it is the presheaf of
groups on Affk deﬁned as

Aut(D)(R) = AutR(R[[t]]).

Any R-automorphism ϕ of R[[t]] is determined by the image

ϕ(t) = a0 + a1t + a2t2 + · · · ∈ R[[t]].

16

An introduction to afﬁne Grassmannians and the geometric Satake equivalence

It is an easy exercise to show that there exists ψ such that ψ(ϕ(t)) = t if and only
if a0 is nilpotent and a1 is invertible. Therefore,
Aut(D) ∼= Spf k[[a0]] × Spec k[a±1

1 ] × Spec k[a2, · · · ].

Note that Aut+(D) = Spec k[a±1
1 , a2, · · · ] is a closed normal subgroup scheme
that classiﬁes those automorphisms of R[[t]] that reduce to the identity map mod
t. Then we have

Aut(D) ∼= Aut+(D) ⋊ ˆGa,

(1.3.13)
where ˆGa = Spf k[[a0]] is the formal additive group. In addition, Aut++(D) =
m = Spec k[a±1
Spec k[a2, · · · ] is the pro-unipotent radical of Aut+(D). Write Grot
1 ],
usually called the rotation torus. Then

(1.3.14)

Aut+(D) = Aut++(D) ⋊ Grot
m .

Remark 1.3.15. If F is a general local ﬁeld without a preferred choice of the uni-
formizer, then there is no canonical semidirect product decomposition (1.3.13)
and (1.3.14). But the corresponding short exact sequences of group ind-schemes
are still well-deﬁned.

Now, if G is a group scheme over k[[t]] equipped with an action of Aut(D) that
lifts the canonical action on k[[t]] (e.g. G = G ⊗k k[[t]] is constant), then is the an
action

(1.3.16)
In particular, the rotation torus Grot

Aut(D) × GrG → GrG,

m acts on GrG.

(g, (E, β)) 7→ (g∗E, g∗β).

1.4. Beauville-Laszlo’s theorem. There is another important moduli interpreta-
tion of GrG due to Beauville-Laszlo.

Let X be a reduced connected curve (but not necessarily smooth) over k and
let x ∈ |X| be a smooth closed point. Let G be a smooth afﬁne group scheme over
X. Let GrG,x be the presheaf deﬁned as

E is a G-torsor on XR, and
β : E|X∗
R

is a trivialisation.(cid:15)

∼= E0|X∗

R

(1.4.1)

GrG,x(R) =(cid:14)(E, β) (cid:12)(cid:12)(cid:12)(cid:12)(cid:12)

Let Gx = G ⊗X Ox. There is a natural morphism
res : GrG,x → GrGx

induced by the restriction of a G-torsor on XR to Dx,R.

Theorem 1.4.2. The above morphism is an isomorphism.

Again, the actual proof of the theorem will be technical but the idea is simple,
so we ﬁrst give an informal account. Namely, if E is a Gx-torsor on Dx with a
x, then one can glue E and the trivial G|X∗-torsor E0 on X∗
trivialisation β on D∗
by β. This construction then induces a map inverse to res. To turn this idea into
a rigorous proof, we need to ﬁrst discuss Beauville-Laszlo’s descent theorem (cf.
[4]).

Xinwen Zhu

17

Theorem 1.4.3. Let p : A → ˜A be a homomorphism of commutative rings, and f ∈ A.
˜A) and that the induced
Assume that f (resp. p(f)) is not a zero divisor in A (resp.
map A/f → ˜A/p(f) is an isomorphism. Let Mf(A) denote the category of f-torion
free A-modules and Mp(f)( ˜A) the similar category for ( ˜A, p(f)). Denote by M the
category of triples (M1, M2, ϕ) where M1 is an Af-module, M2 ∈ Mp(f)( ˜A) and ϕ is
an isomorphism between M1 ⊗Af

˜Ap(f) and M2 ⊗ ˜A

˜Ap(f). Then

(1) the functor M 7→ M ⊗A ˜A maps Mf(A) to Mp(f)( ˜A), so we have the functor
F : Mf(A) → M that sends M ∈ Mf(A) to (Mf, M ⊗A ˜A, ϕ) where ϕ is the
natural isomorphism between Mf ⊗Af

˜Ap(f) and (M ⊗A ˜A)p(f).

(2) F : Mf(A) → M is an equivalence of categories.
(3) M ∈ Mf(A) is a ﬁnite (resp. ﬂat, resp. ﬁnite projective) A-module if and only if

both Mf and M ⊗A ˜A have this property.

In [4], ˜A was taken to be ˆA, the completion of A with respect to f. But the same

arguments apply.

Remark 1.4.4. The content of this theorem is descending modules to A from its
covering (Af, ˜A). It does not follow from the usual faithfully ﬂat descent, since
A → ˜A is not assumed to be ﬂat. For example, if A is non-Noetherian, A → ˆA is
typically non-ﬂat. But even in the Noetherian case, the isomorphism ϕ does not
give the full descent datum, i.e. the isomorphism over ˆR ⊗R ˆR is not included.

Here is the consequence of the theorem.

Corollary 1.4.5. The loop group LGx represents the functor that associates every k-
algebra R the set of triples (E, α, β), where E is a G-torsor on XR, α is a trivialisation of
E|Dx,R, and β is a trivialisation of E|X∗

.

R

Proof. We refer to [62, Lemma 6.1] for a detailed argument. Here is the idea.

We can assume that X = Spec A is afﬁne, and x is deﬁned by t = 0. Let R be
a k-algebra and g ∈ LGx(R). Let H1 (resp. H2) be the ring of regular functions
R), which is a ﬂat R[[t]]-algebra (resp. (A[t−1] ⊗ R)-
of G ×X Dx,R (resp. G ×X X∗
algebra). The element g induces an algebra isomorphism φ : H1 ⊗R[[t]] R((t)) ∼=
H2 ⊗(A[t−1]⊗R) R((t)). Applying Theorem 1.4.3 to the triple (H1, H2, φ), one ob-
tains a ﬂat (A ⊗ R)-algebra H. Then E = Spec H will be the G-torsor on XR,
equipped with the canonical trivialisations α and β.

Conversely, given (E, α, β), we obtain g as (β|D∗
x,R

)(α|D∗

x,R

)−1.

(cid:3)

Now Theorem 1.4.2 follows by comparing Proposition 1.3.6 and Corollary 1.4.5.
Alternatively, one can use a similar argument as above to directly construct a map
inverse to res. We leave the details to readers.

Remark 1.4.6. Recall that the category of fpqc sheaves on Affk is equivalent to
the category of fpqc sheaves on Schk. Under this equivalence, one can naturally
extend the moduli description of GrGx as in Theorem 1.4.2 to all k-schemes. How-
ever, it would be awkward to try to extend the moduli description given in (1.2.1)

18

An introduction to afﬁne Grassmannians and the geometric Satake equivalence

to all k-schemes since for a non-afﬁne scheme S, S ˆ× Spec k((t)) does not really
make sense.

1.5. The determinant line bundle. Our next topic is to construct a very ample
line bundle on GrG. Recall from the proof of Theorem 1.1.3, there is the following
commutative diagram

Gr(N) −−−−→ Gr(N+1)

y

y

Gr(2nN) −−−−→ Gr(2n(N + 1))

On the usual Grassmannian variety Gr(m), there is the determinant line bundle
L that associates a subspace L ⊂ km the top exterior power of the quotient space
km/L. This is in fact the ample generator of the Picard group (of each connected
component) of Gr(m). These line bundles are compatible under the embedding
Gr(m) ⊂ Gr(m + 1), and therefore deﬁnes an ample line bundle Ldet on GrGLn.
We prefer to give a more canonical construction.

We start with an important notion.

Deﬁnition 1.5.1. A topological vector space is called linearly compact if it is the
topological dual of a discrete vector space (i.e., the usual dual with a basis of open
neighbourhoods of 0 consisting of annihilators of ﬁnite dimensional subspaces).
A topological space is called linearly locally compact, or Tate, if it admits a basis of
neighbourhoods of 0 consisting of linearly compact subspaces. A lattice in a Tate
vector space V is a linearly compact open subspace of V.

Any two lattices L1, L2 in a Tate vector space are commensurable with each other;

that is, the quotients L1/(L1 ∩ L2) and L2/(L1 ∩ L2) are ﬁnite-dimensional.

Remark 1.5.2. Tate vector spaces form a category, whose Hom’s are the continuous
linear maps. This is an exact category in the sense of Quillen, where admissible
monomorphisms are closed embeddings, and admissible epimorphisms are open
surjective maps.

There is also a categorical approach to Tate vector spaces without invoking
the topology. Recall that for an exact category C, Beilinson constructed the cate-
gory lim←→C of “locally compact objects” as a full subcategory of pro-ind-objects of
C ([8, Appendix]). If we regard the category Vectk of ﬁnite dimensional vector
spaces over k as an exact category, then the category Tate vector spaces is ex-
actly Beilinson’s category lim←→ Vectk. This approach has the advantage of avoiding
using the topology, and can be generalised to other situations.

Let V be a Tate vector space over k. Then for a k-algebra R, we deﬁne a

topological R-module

V ˆ⊗kR = lim←−L(V/L) ⊗k R,

Xinwen Zhu

19

where the inverse limit runs over the set of lattices in V. We can deﬁne a presheaf
of groups GL(V) whose R-points are the continuous R-linear automorphisms of
V ˆ⊗kR.

Deﬁnition 1.5.3. An R-family of lattices in V is an open bounded submodule of
Λ ⊂ V ˆ⊗kR such that V ˆ⊗kR/Λ is a projective R-module.

Deﬁnition 1.5.4. The Sato Grassmannian Gr(V) is the presheaf that assigns every
k-algebra R the set of R-families of lattices in V.

Exactly as Theorem 1.1.3,

Theorem 1.5.5. The Sato Grassmannian Gr(V) is represented by an ind-projective
scheme.

In fact, by similar (and simpler) arguments, there is a natural isomorphism

Gr(V) ∼= lim−→L1⊂L2Gr(L2/L1),

where L1 ⊂ L2 are two lattices so L2/L1 is a ﬁnite dimensional k-vector space, and
Gr(L2/L1) denotes the usual Grassmannian variety classifying ﬁnite dimensional
subspaces of L2/L1.

Now we introduce the determinant line bundle on Gr(V) × Gr(V) (see § 0.3.1
for the deﬁnition of line bundle on a space). First, recall that for a ﬁnite projective
R-module M its top exterior power, denoted by det(M), is an invertible R-module.
For Λ1, Λ2 ∈ Gr(V)(R), deﬁne the “relative determinant line” for (Λ1, Λ2) as

det(Λ1|Λ2) = det(L ˆ⊗R/Λ1) ⊗ det(L ˆ⊗R/Λ2)−1,

where L is some lattice in V such that both (L ˆ⊗R)/Λ1 and (L ˆ⊗R)/Λ2 are projective
R-modules. This is independent of the choice of L up to a canonical isomorphism.
By varying R, we obtain a line bundle Ldet on Gr(V) × Gr(V). The following
lemma, although elementary, summarises important properties of the relative
determinant lines.
Lemma 1.5.6.

(1) For any g ∈ GL(V)(R), and Λ1, Λ2 ∈ Gr(V)(R), there is a canonical isomor-

phism

det(gΛ1|gΛ2) ∼= det(Λ1|Λ2),

such that for g, g ′, the isomorphism

det(gg ′Λ1|gg ′Λ2) ∼= det(g ′Λ1|g ′Λ2) ∼= det(Λ1|Λ2)

coincides with det(gg ′Λ1|gg ′Λ2) ∼= det(Λ1|Λ2). In other words, the diagonal
action of GL(V) on Gr(V) × Gr(V) lifts to an action on Ldet;

(2) For any Λ1, Λ2, Λ3, there is a canonical isomorphism

γ123 : det(Λ1|Λ2) ⊗ det(Λ2|Λ3) ∼= det(Λ1|Λ3)

20

An introduction to afﬁne Grassmannians and the geometric Satake equivalence

such that for any Λ1, Λ2, Λ3, Λ4, γ134γ123 = γ124γ234. In other words, let L×
det
denote the total space of Ldet. Then we have a groupoid

L×
det ⇒ Gr(V).
Remark 1.5.7. The groupoid deﬁnes a Gm-gerbe
DV = [Gr(V)/L×

det],

which is usually called the determinant gerbe of V (the terminology was ﬁrst
introduced by Kapranov).

Remark 1.5.8. The above construction generalises in families. Namely, for a com-
mutative ring R, there is the category TateR of Tate R-modules, deﬁned as the
idempotent completion of lim←→ ProjR, where ProjR is the category of ﬁnite projec-
tive R-modules (see [23] for a topological approach). For a Tate R-module M, there
is the corresponding Sato Grassmannian Gr(M) → Spec R (see loc. cit.), which is
represented by an ind-algebraic space. In addition, there is the determinant gerbe
DM over Spec R.
Remark 1.5.9. In fact, the above construction should be upgraded to a graded
version. Namely, for a ﬁnite projective R-module, we can deﬁne det(M) as a
graded invertible R-module by assigning the degree of det(M) to be the rank
of M (which is a locally constant function on Spec R). Then the above deﬁned
det(Λ1 | Λ2) becomes a graded line bundle on Spec R. Remembering the grading
is crucial for the factorisation structure on determinant lines (see Remark 3.1.19
and Remark 3.2.8), which in turn is important for applications to symbols and
reciprocity laws (cf. [9, 58, 59]).

Let V = k((t))n, endowed with the usual t-adic topology. Then it is a Tate
vector space, containing Λ0 = k[[t]]n as a lattice. It follows by Lemma 1.1.5 that
there is a canonical closed embedding i : GrGLn → Gr(V). Therefore, via pullback
we obtain a line bundle Ldet|{Λ0}×GrGLn
, still denoted by Ldet. Note that this is a
very ample line bundle on GrGLn.

In general, let ρ : G → GLn be a faithful O-linear representation as in Propo-
sition 1.2.5. Then by Proposition 1.2.6, it induces a locally closed embedding
fρ : GrG → GrGLn and the pullback of Ldet deﬁnes a very ample line bundle on
GrG.
Remark 1.5.10. We assume char k 6= 2 (to remove this assumption see [11, § 4.2.16]).
Let V be a Tate vector space k. A continuous symmetric bilinear form B of V is
called non-degenerate if the induced map V → V ∗ is an isomorphism, where V ∗
denotes the topological dual of V. In this case, given a lattice Λ, one can deﬁne
its orthogonal complement Λ⊥. A lattice Λ is called a Lagrangian if Λ = Λ⊥.
The orthogonal Sato Grassmannian OGr(V, B) ⊂ Gr(V) is the closed subspace
classifying Lagrangian lattices. As constructed in [11, § 4], the restriction of deter-
minant line bundle Ldet to OGr(V, B) × OGr(V, B) admits a canonical square root
LPf, called the Pfafﬁan line bundle.

Xinwen Zhu

21

In this subsection, we dis-
1.6. Afﬁne Grassmannians over complex number.
cuss afﬁne Grassmannians over complex numbers. So we assume that k = C. We
assume G = G ⊗k O and write Gr for GrG. Then we can regard Gr as an inﬁnite
dimensional complex analytic space (and in particular a CW complex).

Let K ⊂ G be a maximal compact subgroup and let S1 be the unit circle. Let
ΩK be the space of polynomial maps (S1, 1) → (K, eK). More precisely, let us
parameterise S1 by eiφ, φ ∈ R, and let K ⊂ SO(n, R) be an embedding. Then
ΩK is the space of maps from (S1, 1) → (K, eK) such that when composed with
K ⊂ SO(n, R), the matrix entries of the maps are given by Laurent polynomials
of eiφ. We regard ΩK as a topological group. We have the following theorem.

Theorem 1.6.1.

(1) The canonical map ΩK → LG induces a homeomorphism ΩK ∼= Gr. Equiva-

lently, we have the factorisation LG = ΩK · L+G.

(2) There is an isomorphism ΩK × ΩK ∼= Gr ˜×Gr making the following commutative

diagram

ΩK × ΩK

m−−−−→ ΩK

y

Gr ˜×Gr

m−−−−→ Gr,

y

where the top row is the usual multiplication of the loop group ΩK, and the
bottom row is the convolution map (1.2.13).

(1) is due to Pressley-Segal (cf. [63, § 8.3]). Strictly speaking, only G = GLn
was proved in loc. cit. However, the general case can be deduced from a much
[56, § 4]). Namely, ΩK can be regarded
more general theorem of Nadler (cf.
as a “real form” of the inﬁnite dimensional complex group G(C[t, t−1]). Nadler
gave a parameterisation of the orbits on Gr under the action of some real forms
of G(C[t, t−1]). When specialised to ΩK, his theorem implies (1). Part (2) follows
from (1) directly.

Remark 1.6.2. In particular, we see that Gr has the homotopy type as an H-space.
In addition, the L+G-torsor LG → Gr is trivial, and Gr ˜×Gr ∼= Gr × Gr as topolog-
ically spaces (do not confuse this isomorphism with (1.2.14)). As we shall see in
§ 5, for the afﬁne Grassmannian of G over an arbitrary ﬁeld k, all these facts have
avatars at the level of cohomology (in fact at the level of étale homotopy type).

1.7. Afﬁne Grassmannians for p-adic groups. We brieﬂy discuss the afﬁne Grass-
mannian for a group over a p-adic ﬁeld F, i.e. a ﬁnite extension of Qp. As in the
case F = k((t)), the ﬁrst step is to make sense a family of lattices of V = Qn
p
parameterised by Spec R for an Fp-algebra R. In particular, one needs to make
sense of the disc DR. Although the ﬁber product Spec Zp“ × ′′ Spec R does not
literally make sense, it is widely-known that such DR should be deﬁned as

DR := Spec W(R), D∗

R := Spec W(R)[1/p],

22

An introduction to afﬁne Grassmannians and the geometric Satake equivalence

where W(R) is the ring of (p-typical) Witt vectors of R. This is a ring whose ele-
ments are sequences (r0, r1, r2, . . .) ∈ RN, with the addition and the multiplication
given by certain (complicated) polynomials. The projection to the ﬁrst compo-
nent W(R) → R, (r0, r1, . . .) 7→ r0 is a surjective ring homomorphism, with a
multiplicative (but non-additive) section R → W(R), r 7→ [r] = (r, 0, 0, . . .), called
the Teichmüller lifting of r. If R is a perfect ring, every element in W(R) can be

uniquely written asPi>0[ai]pi so W(R) can be regarded as a “power series ring

in variable p and with coefﬁcients in R”. For example, W(Fp) = Zp. We refer to
[70, § II.5] for a general introduction.

In general, let F be a p-adic ﬁeld, with O its ring of integers, and k its residue
F,R using the so-called ramiﬁed

ﬁeld. Then one can similarly deﬁne DF,R and D∗
Witt vectors introduced by Drinfeld. If R is perfect, they are simply given by

DF,R = Spec W(R) ⊗W(k) O, D∗

F,R = Spec W(R) ⊗W(k) F,

where W(k) → O is the unique ring homomorphism that induces the identity
map of the residue ﬁelds. Now let G be a smooth afﬁne group scheme over O.
Then one can deﬁne a presheaf on Affk exactly as (1.2.1), with one caveat. The
ring W(R) is pathological if R is not perfect. E.g. p could be a zero divisor of
W(R) if R is non-reduced. On the other hand, note that

(1) if R is a perfect k-algebra, then W(R) is well-behaved, e.g. every element

in W(R) has a “power series expansion”.

(2) The R-points of a scheme X for perfect rings R determine X up to perfec-

tion2.

(3) The (étale) topology of a scheme (e.g. the ℓ-adic cohomology) does not

change when passing to the perfection.

Therefore, we restrict the naive moduli problem as in (1.2.1) to the category of
perfect k-algebras. This deﬁnes a presheaf on this category. The étale topology
and the fpqc topology make sense on this category and one can do algebraic
geometry in this setting (see [82, Appendix A] for an introduction). Then the
best question one can ask is: whether this functor is represented by an inductive
limit of perfect k-schemes. The following difﬁcult theorem, proved in [15], gives
a positive answer to this question.

Theorem 1.7.1. The functor GrG is represented by an ind-perfectly projective scheme,
called the Witt vector afﬁne Grassmannian.

The idea is to construct an ample “determinant” line bundle on GrGLn. The
difﬁculty is that for an R-family lattice Λ ⊂ W(R)n, the quotient W(R)n/Λ is not
an R-module so the construction given in § 1.5 does not work. In addition, there
is no similar symmetry Aut(D) on GrG and of course no analogue of Theorem
1.4.2 in p-adic setting.

2The category of perfect k-schemes is a full subcategory of the category of presheaves on the category
of perfect k-algebras, see [82, Lemma A.10].

Xinwen Zhu

23

Previously, it was proved in [82, § 1] that GrG is represented by an ind-perfectly
proper algebraic space. This is a much easier theorem, which sufﬁces for most
applications to topological problems, such as the geometric Satake equivalence
which will be discussed in § 5.

2. Lecture II: More on the geometry of afﬁne Grassmannians

We study some basic geometry of afﬁne Grassmannians. Let F = k((t)) and
O = k[[t]]. Unless otherwise noted, we assume that k is algebraically closed
and G = G ⊗k O is a constant reductive group scheme and write Gr for GrG
if no confusion will arise. We refer to [60] and [81, § 6.3] for generalisations
of some statements to non-constant groups, and to [82] for some corresponding
statements for p-adic groups.

2.1. Schubert varieties. We use notations in § 0.3.5. There is a canonical bijection

(2.1.1)

G(O)\G(F)/G(O) ∼= X•(T )/W ∼= X•(T )+,

which can be concretely realised as follows. In the rest of this subsection, we ﬁx
embeddings T ⊂ B ⊂ G. Let µ ∈ X•(T ) be a coweight, which deﬁnes a map
µ : F× → T (F) ⊂ G(F). We denote by tµ = µ(t) the image of the uniformizer t
in G(F), regarded as a k-point of LG. It depends on the choice of t. Its image in
Gr is still denoted by tµ, which is independent of the choice of the uniformizer.
Then we have the Cartan decomposition (cf. [75, § 3.3.3])

Note that the double coset G(O)tµG(O) does not depend on the uniformizer t
nor the embedding T ⊂ G. Therefore (2.1.2) induces (2.1.1).

Now let E1 and E2 be two G-torsors over D, and let

β : E1|D∗ ∼= E2|D∗

∼= E0, one obtains an automorphism of the trivial G-torsor φ2βφ−1

∼= E0 and
be an isomorphism over D∗. By choosing isomorphisms φ1 : E1
1 ∈
φ2 : E2
Aut(E0|D∗) and therefore an element in G(F). Different choices of φ1 and φ2
will modify this element by left and right multiplication by elements from G(O).
Therefore, β gives rise to a well-deﬁned element

Inv(β) ∈ G(O)\G(F)/G(O) ∼= X•(T )+,

sometimes called the relative position of β.

Remark 2.1.3. Let K be a not necessarily algebraically closed ﬁeld containing k,
E1, E2 be two G-torsors over DK, and β : E1|D∗
be an isomorphism. Then
one can still deﬁne Inv(β) ∈ X•(T )+ as follows. After passing to an algebraic
closure ¯K/K, the above construction gives

∼= E2|D∗

K

K

Inv(β ¯K) ∈ G( ¯K[[t]])\G( ¯K((t))/G( ¯K[[t]]) ∼= G(O)\G(F)/G(O),

(2.1.2)

G(F) = Gµ∈X•(T )+

G(O)tµG(O).

24

An introduction to afﬁne Grassmannians and the geometric Satake equivalence

which is independent of the choice of the algebraic closure ¯K. Therefore, Inv(β) =
Inv(β ¯K) is well-deﬁned.

Now let E1 and E2 be two G-torsors over DR, and β : E1|D∗

∼= E2|D∗

R

. Then for

R

each x ∈ Spec R, by base change we obtain

(E1|Dk(x), E2|Dk(x), βk(x) : E1|D∗

k(x)

≃ E2|D∗

k(x)

).

Let Invx(β) := Inv(βk(x)).

Proposition 2.1.4. Let X = Spec R. Given µ ∈ X•(T )+, the set of points

X6µ := {x ∈ X | Invx(β) 6 µ}

is Zariski closed in X.

Proof. We sketch the proof. Let ρχ : G → GL(Vχ) be a ﬁnite dimensional highest
weight representation of G of highest weight χ (e.g. Vχ is the Weyl module of G,
of highest weight χ), and let Vχ,Ei = Ei ×G Vχ, i = 1, 2 denote the induced vector
bundles. Then by deﬁnition the subset in question is contained in the set

XVχ,6µ :=(cid:10)x ∈ X | ρχ(βx)(Vχ,E1 ) ⊂ t−(χ,µ)(Vχ,E2 )(cid:11) ,

which is easily seen to be closed in X. Indeed, working Zariski locally on X we
can assume that both Vχ,Ei, i = 1, 2 are trivial (by the argument as in Lemma

1.3.7). So ρχ(β) is given by a square matrix with entries aij = Ph aij,hth in

R((t)). Then XVχ,6µ is deﬁned by the equations aij,h = 0 for h < −(χ, µ).

If the derived group Gder of G is simply-connected, then one has

X6µ =\Vχ

XVχ,6µ,

where the intersection is taken over over all ﬁnite dimensional highest weight
representations of G. Therefore, X6µ is closed.

In general, one can always ﬁnd a central extension ˜G of G by a torus D such
˜G is simply-connected (the so-called z-extension, cf.
that the derived group of
[52, Proposition 3.1]). Using Lemma 1.3.7, étale locally on X we can lift β to
a map ˜β of ˜G-torsors and lift µ to a coweight ˜µ of ˜G. Then we reduce to the
previous case.
(cid:3)

We deﬁne the (spherical) Schubert variety Gr6µ as the closed subset

Gr6µ = {(E, β) ∈ Gr | Inv(β) 6 µ} ,

of GrG, endowed with the reduced scheme structure. By Proposition 2.1.4,

Grµ := {(E, β) ∈ Gr | Inv(β) = µ} = Gr6µ \ ∪λ<µGr6λ

is an open subset of Gr6µ, called a Schubert cell.

Proposition 2.1.5.

(1) Grµ forms a single L+G-orbit and is a smooth quasi-projective variety of dimen-

sion (2ρ, µ).

Xinwen Zhu

25

(2) Gr6µ is the Zariski closure of Grµ, and so is a projective variety.

Proof. For (1), note that the stabiliser of tµ for the action of L+G is L+G ∩ tµL+Gt−µ.
The induced map

L+G/(L+G ∩ tµL+Gt−µ) → LG/L+G,

g 7→ gtµ

then is a locally closed embedding. By the Cartan decomposition (2.1.2), the
image is exactly Grµ. Therefore, Grµ is smooth and the tangent space of Grµ at
tµ is identiﬁed with g(O)/g(O) ∩ Adtµ g(O). But it is easy to see that
gα(O)/t(α,µ)gα(O),

g(O)/g(O) ∩ Adtµ g(O) = M(α,µ)>0

where the sum is taken over all positive roots α of G and gα denotes the corre-
sponding root space. Therefore, by a simple calculation dim Grµ = (2ρ, µ).

For (2), note that if λ 6 µ, then there exists a positive coroot α such that µ − α
is dominant and λ 6 µ − α 6 µ (e.g. [64, Lemma 2.3]). Therefore, it is enough
to show that tµ−α is contained in the Zariski closure of Grµ. To prove this, it is
enough to construct a curve C in Gr6µ such that tµ−α ∈ C and C − {tµ−α} ⊂ Grµ.
This reduces to an SL2-calculation as follows.

First, for every integer m, let tλm :=  tm 0

1!, regarded as an element in

0

PGL2(F). Let

Km = Adtλm (L+SL2) ⊂ LSL2.

Note that the Lie algebra of Km as an O-module is spanned by {tme, h, t−mf},
where {e, h, f} is the standard sl2-triple. Also note that

σm :=  0

t−m

−tm

0 ! = tm 0

1! 0 −1

0 ! t−m 0

1! ∈ Km.

0

1

0

Let L>0SL2 be the kernel of the evaluation map ev : L+SL2 → SL2 (cf. Example
1.3.4), and let K

(1)
m = Adtλm (L>0SL2). Then Km/K

∼= SL2.

(1)
m

Now let iα : SL2 → G be the canonical homomorphism corresponding to α.

Let m = (µ, α) − 1 and consider the orbit

(2.1.6)

Cµ,α := Liα(Km)tµ.

(1)
m ⊂ L+G ∩ tµL+Gt−µ so Cµ,α is a homogenous space under Km/K

(1)
m =
∼= P1, and that (L+G ∩ Liα(Km))tµ ∼= A1 ⊂ P1. In

Note that K
SL2. It is easy to see that Cµ,α
addition, P1 \ A1 = iα(σm)tµ. From the famous identity

 0 −1

0 ! = 1 −t−1

1 ! 1 0

1! 1 −t−1

1 ! t−1

0

1

0

0

t

0

t! ,

we see that iα(σm)tµ = (tµ−α mod L+G). Therefore, Cµ,α is the desired curve.
(cid:3)

26

An introduction to afﬁne Grassmannians and the geometric Satake equivalence

Remark 2.1.7. We assume (for simplicity) that Gder is simply connected and char k =
0. Then one can deﬁne a closed subscheme of Gr ′
6µ ⊂ Gr whose R-points clas-
sify those (E, β) such that for every irreducible highest weight representation Vχ,
β(Vχ,E) ⊂ t−(χ,µ)(Vχ ⊗ R[[t]]). From the proof of Proposition 2.1.4, we know that
Gr6µ is the reduced subscheme of Gr ′
6µ. But it is an open question to whether
Gr ′

6µ = Gr6µ. This is closely related to [41, Conjecture 2.14, Conjecture 2.20].

Example 2.1.8. Let G = GLn and µ = (r, 0, . . . , 0) (under the standard identiﬁcation
of X•(T ) ∼= Zn). Then using the lattice description of GrGLn as in § 1.1,

Gr6µ(R) = {Λ ⊂ Λ0 := R[[t]]n | rk Λ0/Λ = r} .

Now assume that r = n. Let Nn denote the variety of n × n nilpotent matrices.
There is a natural map

(2.1.9)

Nn → Gr6µ, A 7→ Λ = (t − A)Λ0.

This is well-deﬁned since det(t − A) = tn. We will show in Lemma 2.3.12 that
this is an open embedding so in particular, Gr6µ gives a compactiﬁcation of Nn.
[49]).
At the level of topological spaces, this was ﬁrst observed by Lusztig (cf.
Note that giving a dominant coweight λ 6 µ = (n, 0, . . . , 0) is equivalent to giving
a partition of n. So each λ 6 µ gives a nilpotent orbit Oλ in Nn. We leave it as an
exercise to show that (2.1.9) maps Oλ to Grλ.

We continue the general theory. There is a map

(2.1.10)

p : X•(T ) → Z/2, µ 7→ (−1)(2ρ,µ)

which factors through X•(T ) → π1(G) → Z/2 and therefore induces a map p :
π0(GrG) → Z/2 by Theorem 1.3.11.

Corollary 2.1.11. The Schubert cell Grµ is in the even (resp. odd) components, i.e.
p(Grµ) = 1 (resp. p(Grµ) = −1) if and only if dim Grµ is even (resp. odd).

In the sequel, let (LG)6µ (resp. (LG)µ) denote the preimage of Gr6µ (resp.

Grµ) in LG. Note that (LG)6µ and (LG)µ are schemes.

For a coweight µ, let Pµ denote the parabolic subgroup of G corresponding
to µ, i.e. the group generated by the root subgroups Uα of G for those roots α
satisfying hα, µi 6 0. Let us denote by g 7→ ¯g := ev(g) for the evaluation map (see
Example 1.3.4). Then there is a natural projection

pµ : Grµ

∼= L+G/(L+G ∩ tµL+Gt−µ) → G/Pµ,

(gtµ mod L+G) 7→ ( ¯g mod Pµ).

The ﬁbers are isomorphic to afﬁne spaces. On the other hand, there is also a
closed embedding

iµ : G/Pµ

∼= G · tµ ⊂ Grµ

Xinwen Zhu

27

by regarding G as a subgroup of L+G of “constant loops”. Note that the action
3 and the ﬁxed point subscheme under the
of Aut+(D) on GrG preserves Grµ
rotation torus Grot

m is G · tµ.

Example 2.1.12. We assume that G = GLn and let Λ0 = k[[t]]n. Let µ = (m1, . . . , mn) ∈
Zn be a dominant coweight (so mi > mi+1). Then the map pµ : Grµ → G/Pµ
∼= kn.
sends a lattice Λ ∈ Grµ to the following decreasing ﬁltration V = Λ0/tΛ0

Fili V = t−mi Λ ∩ Λ0/t−mi Λ ∩ tΛ0.

Conversely, given a decreasing ﬁltration Fil• on V, the map iµ sends it to the
lattice

Λ =X Fili V ⊗ tmi O ⊂ V ⊗k F ∼= Fn.

We give more explicit descriptions of Gr6µ for small µ.
Recall that a dominant coweight µ is called minuscule if µ 6= 0 and for every
positive root α, (α, µ) 6 1. Note that minuscule coweights are minimal elements
in X•(T )+ under the partial order 6. Therefore,

Lemma 2.1.13. If µ is minuscule, then Gr6µ = Grµ

∼= G/Pµ.

So minuscule Schubert varieties in GrG are exactly those partial ﬂag varieties
classifying parabolic subgroups of G corresponding to minuscule coweights. Ex-
amples include the usual Grassmannians Gr(r, n), smooth quadrics in projective
spaces, etc.

Recall that a dominant coweight µ is called quasi-minuscule if µ 6= 0, µ is not
minuscule, and for every positive root α, (α, µ) 6 2. For simplicity, we assume
that Gder is simple. Then µ is the short dominant coroot, denoted by θ, and is
the minimal element in X•(T )+ − {0} under the partial order 6. The root corre-
sponding to θ is the highest root θ∨. Let Lθ = G ×Pθ kθ∨ be the very ample line
bundle on G/Pθ, where Pθ acts on the 1-dimension space kθ∨ by the character θ∨.
Note that 0 ∈ X•(T )+ is the unique element that is strictly less than θ. Therefore,
Gr6θ = Grθ ⊔ Gr0.

Lemma 2.1.14. Assume (for simplicity) that Gder is simple. If µ = θ is quasi-minuscule,
then via the projection pθ, Grθ is isomorphic to the total space of the line bundle Lθ, and
Gr6θ is isomorphic to the projective cone of the projective embedding of G/Pθ by Lθ.

Proof. See [57, § 7].

Blowing-up at the originfGr6θ = P(Lθ ⊕ O) gives a resolution of singularities .
Remark 2.1.15. In fact, fGr6θ is a kind of Demazure resolution of Gr6θ. See [82,

Example 2.1.16. If G = SL2, then θ = α is the positive coroot. In this case Gr6θ is
isomorphic to the projective cone of the quadratic curve {(x, y, z) | x2 = yz} ⊂ P2.

Lemma 2.12].

(cid:3)

3However, the action of Aut(D) on GrG does not preserve Schubert varieties as gtµ 6∈ Gr6µ for
g ∈ Aut(D) sending t → a0 + t, where a0 ∈ R is nilpotent.

28

An introduction to afﬁne Grassmannians and the geometric Satake equivalence

Given µ1, µ2 ∈ X+

• of G, one can deﬁne the twisted product of Gr6µ1 and
Gr6µ2 using the L+G-torsor (LG)6µ1 → Gr6µ1. Alternatively, one can deﬁne it
as

Gr6µ1 ˜×Gr6µ2 = {(E1, E2, β1, β2) ∈ Gr ˜×Gr | Inv(β1) 6 µ1, Inv(β2) 6 µ2} ,

which is closed in Gr ˜×Gr and therefore is representable. Similarly, if µ• =
(µ1, . . . , µn) is a sequence of dominant coweights of G, one can deﬁne

Grµ• := Grµ1 ˜× · · · ˜×Grµn ⊂ Gr6µ• := Gr6µ1 ˜× · · · ˜×Gr6µn ⊂ Gr ˜× · · · ˜×Gr.

Let |µ•| =P µi, then the convolution map (1.2.15) induces

m : Gr6µ• → Gr6|µ•|,

(E•, β•) 7→ (En, β1 · · · βn).

(2.1.17)

This map is analogous to Demazure resolutions (except that Gr6µ• is not smooth
in general). The geometry of these maps is very rich, as we shall see in § 5. Here
we give one example.

Example 2.1.18. We use notations from Example 2.1.8. Now, let ω1 = (1, 0, . . . , 0).
We have the convolution map m : Gr6(ω1,...,ω1) → Gr6µ. On the other hand,
there is the classical Springer resolution p : ˜Nr → Nr (cf. [78, § 1]). These maps
ﬁt into the following commutative diagram
Gr6(ω1,...,ω1) ←−−−− Gr(cid:3)

6(ω1,...,ω1) −−−−→ ˜Nr

(2.1.19)

my

Gr6µ

y

yp

φ

−−−−→ Nr,

π←−−−−

Gr(cid:3)
6µ

6µ(R) classify triples (E, β, ǫ) where (E, β) ∈ Gr6µ(R) and ǫ : Λ0/Λ ∼= Rr
where Gr(cid:3)
is an isomorphism of R-modules. Note that both squares in the diagram are
Cartesian.
Indeed, a point of Gr6(ω1,...,ω1) over Λ ∈ Gr6µ gives a chain Λ =
Λr ⊂ Λr−1 ⊂ · · · ⊂ Λ0 = k[[t]]n. Via the framing ǫ, such a chain gives a full ﬂag
of kr and vice versa.

Now we assume r = n. Then the formula (2.1.9) in fact gives a section
6µ of φ (since (t − A)Λ0 is canonically trivial). Therefore, we obtain

Nn → Gr(cid:3)
the following Cartesian diagram

(2.1.20)

˜Nn −−−−→ Gr6(ω1,...,ω1)

py

Nn −−−−→

ym

Gr6µ.

In other words, the convolution map m in this case extends the Springer resolu-
tion for GLn.

We continue the general discussion. The following fundamental theorem sum-

marises the basic facts of the singularities of Schubert varieties.

Theorem 2.1.21. Let p denote the characteristic exponent of k. If p ∤ |π1(Gder)|, then
Gr6µ is normal, Cohen-Macaulay, Gorenstein, and has rational singularities.

Xinwen Zhu

29

Proof. This is a difﬁcult theorem. Except the Gorenstein property, all statements
were proved in [24, Theorem 8], see also [60, Theorem 0.3]. The key step is to
prove that Gr6µ is normal.

That Gr6µ is Gorenstein follows from [11, Equation (241)]. Strictly speaking,
the argument of loc. cit. only works when the characteristic of k is zero (or is very
good for G). We refer to [80, Theorem 6.11] for more details and the extension to
the case p ∤ |π1(Gder)|. See also Remark 2.3.10 for related discussions.
(cid:3)

Remark 2.1.22. We very brieﬂy discuss the parallel story when G is an Iwahori
group scheme of G. See [24, 60] for details. Write I = G(O).
In this case, the
Cartan decomposition is of the form

I\G(F)/I ≃fW,

wherefW ≃ X•(T ) ⋊ W is called the Iwahori Weyl group. This is a (quasi-)Coxeter
group equipped with a Bruhat order 6 and a length function ℓ : fW → Z. For
w ∈ fW, let Sw denote the corresponding L+G-orbits on GrG = FℓG and let S6w

denote its closure. Then Sw is isomorphic to an afﬁne space of dimension ℓ(w),
and S6w = ∪w ′6wSw. All S6w’s are normal, Cohen-Macaulay, and with rational
singularities. But they are not Gorenstein in general.

2.2. Digression: Some sub-ind-schemes in Gr. We make a digression to explain
a construction of some important subvarieties of Gr. This subsection is not used
in the rest of the notes.

Let ϕ : Gr → Gr a morphism deﬁned over k. For γ ∈ LG and µ, we deﬁne a

closed sub ind-scheme of Gr as

X(µ, γϕ) = {x ∈ Gr | Inv(x, γϕ(x)) 6 µ} .

Explicitly, write x = gL+G ∈ Gr. Then

X(µ, γϕ) =(cid:10)gL+G | g−1γϕ(g) ∈ (LG)6µ(cid:11) /L+G.

Here are a few equivalent deﬁnitions.
(1) X(γϕ, µ) is deﬁned by the following Cartesian diagram

X(µ, γϕ) −−−−→ Gr ˜×Grµ

y

Gr

y

1×γϕ
−−−−→ Gr × Gr.

(2) Assume that ϕ is induced by a morphism ϕ : LG → LG that preserves
L+G. We consider the conjugate action of LG twisted by ϕ. I.e. Int(g) ·ϕ
g ′ = g−1g ′ϕ(g). Consider the morphism of stacks
π : [(LG)µ/ϕL+G] 7→ [LG/ϕLG].

Then X(µ, γϕ) = π−1(γ).

Remark 2.2.1. In many cases, the quotient [LG/ϕLG], although not well-behaved,
should be thought as the moduli space of certain important algebraic structures.

30

An introduction to afﬁne Grassmannians and the geometric Satake equivalence

Here are some concrete examples of the above construction.

(i) Let ϕ = id be the identity map. Then X(γ, µ) is a group version afﬁne
Springer ﬁber (cf. [78, § 2.7.3]). In this case, [LG/LG] classiﬁes conjugacy
classes of G. There is also a Lie algebra analogue of this construction,
which gives the (usual) afﬁne Springer ﬁbers (cf. [78, § 2.2]).

(ii) Assume that k = Fq and let ϕ = σ be the q-Frobenius of Gr. Then
X(µ, γϕ) is usually denoted by X(µ, b) and is called the afﬁne Deligne-
Lusztig variety (ﬁrst introduced in [65]). In this case [LG/σLG] classiﬁes
σ-conjugacy classes of G(¯k((t))), which are closely related to Drinfeld
Shtukas.

(iii) We continue to assume that k = Fp. Let ϕ : Gr → Gr be the morphism in-
i tip. Write
γϕ by Φ. Then X(Φ, µ) is called the Kisin variety, and [LG/σLG] classiﬁes
Galois representations Gal(F/F) → G(Fp) (see [61]).

duced by the absolute Frobenius k[[t]] 7→ k[[t]],P aiti 7→P ap

(iv) Assume that k = C and let ϕ be induced by the loop rotation t 7→ qt,
m . Then [LG/ϕLG] is closely related to G-bundles on the

for some q ∈ Grot
elliptic curve Eq = C×/qZ (Looijenga, Baranovsky and Ginzburg [2]).

(v) Instead of taking ϕ ∈ Grot

m , one can let ϕ ∈ Aut++(D). A Lie algebra

analogue of this construction was studied in [27].

In each case, some basic questions to ask are
(1) When is the variety ﬁnite dimensional?
(2) If it is ﬁnite dimensional, is there a dimension formula? Are the irre-

ducible components equidimensional?

(3) How to parameterise the connected components?
(4) How to parameterise the irreducible components?
These questions are better understood for Case (i) and (ii) (e.g. see [34, 78] and
the references cited there for a summary of known results), but remains widely
untouched in other cases.

Remark 2.2.2. Thanks to § 1.7, afﬁne Springer ﬁbers and afﬁne Deligne-Lusztig
varieties now are also deﬁned for p-adic groups.

2.3. Opposite Schubert “varieties” and transversal slices. Opposite Schubert
“varieties” are very different from Schubert varieties Gr6µ introduced in § 2.1. In
fact, they are not really varieties and are inﬁnite dimensional (but ﬁnite codimen-
sional).

First, let L−G be the presheaf of groups deﬁned as

L−G(R) = G(R[t−1]).

In § 2.5, we shall see that LG is closely related a Kac-Moody group. From this
point of view, L−G then is a “parabolic opposite” to L+G. There is another point
of view. Namely, L−G is a special case of the group GX∗ which will be introduced

Xinwen Zhu

31

in (4.1.3) (corresponding to the case X = P1 and x = 0). In particular, by Lemma
4.1.4 below, the group L−G is represented by an ind-scheme.

We ﬁx T ⊂ B ⊂ G as in § 2.1. Then there is the Birkhoff decomposition of G(F)

(2.3.1)

which induces

(2.3.2)

G(F) = Gµ∈X•(T )+

G(k[t−1])tµG(O),

L−G(k)\G(F)/G(O) ∼= X•(T )+.

Similar to the Cartan decomposition (2.1.1), (2.3.2) is independent of any choice.
We refer to [24, Lemma 4] for a proof of this decomposition for the general G.

We deﬁne opposite Schubert “cells” as L−G-orbits on Gr. By the Birkhoff

decomposition (2.3.2), they are of the form

Grµ = L−G · tµ ⊂ Gr,

and are parameterised by X•(T )+. Let

Gr>µ = Gλ>µ

Grλ,

called the opposite Schubert variety. The terminology is justiﬁed by the following
proposition.

Proposition 2.3.3.

(1) Grµ is a locally closed sub-ind-scheme of Gr.
(2) Grµ ∩ Grλ 6= ∅ if and only if µ > λ. In addition, Grµ ∩ Grµ = G · tµ ∼= G/Pµ,

which is ﬁxed by the rotation torus Grot
m .

(3) Gr>µ is Zariski closed, and contains Grµ as an open dense subset.
(4) The codimension of Gr>µ is (2ρ, µ) − dim G/Pµ.

Proof. (1) The stabiliser of tµ in L−G is L−G ∩ tµL+Gt−µ, which is a ﬁnite dimen-
sion subgroup. By writing L−G = lim−→Ki such that Ki ⊃ L−G ∩ tµL+Gt−µ, we
see that each Kitµ is locally closed in Gr and Grµ = lim−→Kitµ is an ind-scheme.
We also note that

(2.3.4)

dim(L−G ∩ tµL+Gt−µ) = (2ρ, µ) + dim Pµ,

which follows by calculating the dimension of its Lie algebra as in the argument
for Proposition 2.1.5.

(2) We leave it as an exercise.
(3) We ﬁrst show that Gr0 is open in the neutral connected component of Gr.

Note that there is an evaluation map
L−G → G,

g 7→ g mod t−1.

We deﬁne L<0G = ker(L−G → G) as the kernel of the above map. Note that
Gr0 = L<0G · e.

32

An introduction to afﬁne Grassmannians and the geometric Satake equivalence

Lemma 2.3.5. Then the multiplication map

L+G × L<0G → LG

is an open embedding. In particular, L<0G ∼= L<0G · e ⊂ Gr is an open immersion.

Proof. Note that L<0G ∩ L+G = {1} and at the level of Lie algebras Lg = L+g ⊕
L<0g, where L+g = g(O) and L<0g = t−1g ⊗ k[t−1]. Therefore L+G × L<0G → LG
is an open embedding.
(cid:3)

Now consider L−G · tµ · Gr0. It is open and is a union of L−G-orbits. It is easy
to see that tλ belongs to it if and only if Grλ ∩ Grµ 6= ∅ and therefore by (2) if
and only if λ 6 µ. Therefore, ⊔λ6µGrλ = L−G · tµ · Gr0 is open. It follows that
Gr>µ then is closed. It remains to show that Grλ is in the closure of Grµ for every
λ > µ. As argued in Proposition 2.1.5, we can assume that λ = µ + α for some
positive root α. Let Cµ+α,α be the curve deﬁned by (2.1.6). Then it is easy to see
that tµ+α ∈ Cµ+α,α and the complementary A1 ⊂ Grµ. This ﬁnishes the proof.
(cid:3)

(4) follows from (3) and (2.3.4).

Remark 2.3.6. (i) The open subset Gr0 is usually called the “big open cell” of Gr.
(ii) As we just see, the roles played by L+G and L−G are different. So it is
also natural to consider the quotient LG/L−G. By Theorem 2.3.7 below, it can
be interpreted as the moduli of G-torsors on P1 together with a trivialisation on
D0 (the disc around 0 ∈ P1). Sometimes in literature, LG/L−G is called the thick
afﬁne Grassmannian of G. Note that unlike Gr, it is of global nature (i.e.
its
deﬁnition involves a global curve) and is a scheme (of inﬁnite type).

The best way to understand opposite Schubert cells/varieties is via the follow-
ing theorem. Let BunG(P1) denote the moduli stack of G-bundles on P1. This is
an algebraic stack locally of ﬁnite presentation over k (e.g. see [72]).

Theorem 2.3.7. Assume that G is connected reductive over k. There is a canonical
isomorphism

[L−G\Gr] ≃ BunG(P1).

In fact, the map Gr → BunG(P1) exhibits Gr as an L−G-torsor on BunG(P1) in étale
topology.

Proof. The statement is equivalent to saying that after passing to an étale covering
map R → R ′ every G-bundle on P1 × Spec R is trivial on (P1 − {0}) × Spec R ′. This
follows from: (i) every G-bundle on XR admits a reduction to the Borel after a
possible étale base change R → R ′ ([22, Theorem 1]), and (ii) every B-bundle on
(P1 − {0}) × Spec R is trivial after a possible étale base change R → R ′ since B has
a ﬁltration by subgroups with the associated graded being Gas and Gms.
(cid:3)

At the level of k-points, the theorem says that

BunG(P1)(k) ∼= G(k[t−1])\G(k((t))/G(k[[t]]).

Xinwen Zhu

33

In particular, Grothendieck’s theorem for vector bundles over P1 is equivalent
to the Birkhoff decomposition (2.3.1) (for G = GLn). Explicitly, the G-bundle
corresponding to the double coset for tµ is the one induced from the line bundle
µ
→ T ⊂ G. We denote this G-bundle by O(µ), and
OP1 (1) by pushout along Gm
let [O(µ)] denote the corresponding point on BunG(P1). Then Proposition 2.3.3
can be reformulated as

Proposition 2.3.8.

(1) The point [O(λ)] is in the closure of [O(µ)] if and only if λ > µ;
(2) The closure of [O(µ)] is a closed substack of dimension −(2ρ, µ) − dim Pµ.

As an application of Proposition 2.3.3, we can also introduce the transversal

slices.
Proposition 2.3.9. L<0G · tλ is a transverse slice of Grλ in Gr. More precisely, for
every λ 6 µ, let Sλ
6µ intersects Grν transversally for
every λ 6 ν 6 µ.

6µ = L<0G · tλ ∩ Gr6µ. Then Sλ

Proof. It follows from Lemma 2.3.5.

(cid:3)

Remark 2.3.10. The variety Sλ
6µ is an example of a variety with symplectic singu-
larities (cf. [41, Theorem 2.7]). We refer to [6, Deﬁnition 1.1] for the deﬁnition of
this notion. According to [6, Proposition 1.3], symplectic singularities are rational
Gorenstein, which is consistent with Theorem 2.1.21.

We discuss a few examples.

Example 2.3.11. We consider G = GLn. Let µ = (n, 0, . . . , 0). First, we have

Lemma 2.3.12. The map (2.1.9) is an open embedding.
Proof. Indeed, the map Nn → L<0GLn, A 7→ 1 − At−1 is a closed embedding
and therefore by Lemma 2.3.5, the map Nn → GrGLn, A 7→ (t − A)Λ0 is a locally
closed embedding with image contained in Gr6µ. Therefore, (2.1.9) itself is a
locally closed embedding. Since Gr6µ is irreducible and reduced and dim Nn =
dim Gr6µ = n(n − 1), (2.1.9) must be an open embedding.
(cid:3)

Now let λ = (1, . . . , 1). Note that Grλ is a point. Then Lemma 2.3.12 is equiva-
6µ ⊂ Gr6µ. As a

lent to saying that the map (2.1.9) realises the transversal slice Sλ
consequence Sν

6µ is isomorphic to the Slodowy slice for Oν where λ 6 ν 6 µ.

Example 2.3.13. We assume that Gder is simple.. Let µ = θ be quasi-minuscule. By
the same construction as above, S0
6θ is isomorphic to the closure of the minimal
nilpotent orbit Omin of g.

Remark 2.3.14. Note that Theorem 2.1.21 implies nilpotent orbits of GLn and the
minimal nilpotent orbit of a general semisimple Lie algebra g are normal, Cohen-
Macaulay, Gorenstein, and have rational singularities. This is not true for the
general nilpotent orbits in semisimple Lie algebras, which implies that the above

34

An introduction to afﬁne Grassmannians and the geometric Satake equivalence

relation between transversal slices an nilpotent orbits does not extend to the gen-
eral case.

2.4. The Picard group. We assume that G is simple and simply connected (for
simplicity). Let θ be the short dominant coweight, which we recall is a minimal
element in X•(T )+ − {0}. By Proposition 2.3.3, Θ := Gr>θ is of codimension one,
and Gr = Gr0 ⊔ Θ. We show that it is the vanishing loci of a global section of an
ample line bundle on Gr.

Proposition 2.4.1. There is an ample line bundle L and a global section σ ∈ Γ (Gr, L)
such that Gr0 = {x ∈ Gr | σ(x) 6= 0}.

Proof. We explain the ideas and refer to [24, Lemma 2, Corollary 3] for details.
We ﬁrst consider G = SLn. In fact L<0G · e is the non-vanishing loci of a global
section σ of Ldet constructed as follows. Let L0 = (t−1k[t−1])n and consider
2-term complex on Spec R

0 → R ⊗ L0 ⊕ Λ

Υ→ R ⊗ L0 ⊕ R[[t]]n → 0, Υ(v, w) = (v, 0) + β(w),

where β : Λ → R((t)) = R ⊗ L0 ⊕ R[[t]] is the natural inclusion. By deﬁnition,
the determinant cohomology of this complex (or more precisely the complex ob-
tained by dividing both terms by R ⊗ L0 ⊕ tNR[[t]]n for N ≫ 0) is exactly the
determinant line bundle Ldet constructed in § 1.5, and σ = det(Υ) deﬁnes a
global section of Ldet. Let us represent a point x ∈ Gr as gΛ0 for some g ∈ LG.
Then by deﬁnition, σ(gΛ0) 6= 0 if and only if Υ is an isomorphism at this point.
Note that the latter condition in turn is equivalent to g−1L0 = L0 (cf. [24, Lemma
2]). This ﬁnishes the proof for SLn.

Next, let ρ : G → GL(V) be a representation such that there is a vector v ∈ V
whose stabiliser in GL(V) is G. Such a representation exists since G is semisimple.
ρ (L<0SLn · e) =
Let fρ : GrG → GLSLn be the induced map. One can show that f−1
L<0G · e. This implies that ΘG is the pullback of ΘSLn (as closed subsets).
(cid:3)

Recall the deﬁnition of line bundles on a prestack (cf. § 0.3.1). Let e ∈ X(k)
be a point. We deﬁne the Picard groupoid Pice(X) of line bundles on X rigidiﬁed
at e as the groupoids consisting of (L, ǫ) where L is a line bundle on X and
ǫ : e∗L ≃ k is a trivialisation. Note that if X is a proper algebraic variety, then
Pice(X) is discrete and reduces to the usual Picard group of X.

Theorem 2.4.2. Assume that G is simple and simply-connected. Endow Θ with the
reduced closed ind-scheme structure. Then Θ is an effective Cartier divisor, and the
corresponding line bundle O(1) := O(Θ) is ample. In addition, Pice(Gr) = ZO(1).

Remark 2.4.3. If ρ : G → GLn is a representation, the pullback of Ldet along
fρ : GrG → GrGLn then is a positive multiple of O(1), i.e. f∗
ρLdet = O(dρ) for
some positive integer dρ, called the Dynkin index of the representation ρ. A
general formula of dρ can be found in [44, Lemma 5.2], see also [72, Lemma
10.6.1] and [77, Lemma 4.2] (note that although only the case char k = 0 was

Xinwen Zhu

35

considered in all the above references, the argument of [77, Lemma 4.2] works for
arbitrary characteristic).

For example, if ρ is the adjoint representation, then dρ = 2h∨, where h∨ is the
dual Coxeter number of G. If ρ is the standard representation of SLn or Sp2n, then
dρ = 1. If G is an orthogonal group SOn (say char k > 2) and ρ is the standard
representation, or G = G2 and ρ is the unique 7-dimensional representation, then
dρ = 2 and the unique square root can be obtained by pullback of the pfafﬁan
line bundle LPf on OGr(V) (see Remark 1.5.10).

From a different point of view, the above discussions essentially give the con-
struction of O(1) when G is a classical group or G = G2. However, if G = E8,
60 | dρ for any ρ. So it is an interesting question to ﬁnd an explicit construction
of O(1) in this case.

Remark 2.4.4. It follows that for the adjoint representation Ad : G → GL(g),
AdL−1
det admits a unique rigidiﬁed square root, denoted by Lc. This is the so-
f∗
called critical line bundle on the afﬁne Grassmannian, which plays an important
role in the geometric Langlands program (cf. [11]).

One way to prove this theorem is to identify Gr with a partial ﬂag variety of the
corresponding Kac-Moody group (see § 2.5 below) and then to invoke the results
from [51]. Here is a more direct approach. Namely, O(1) should be the line bundle
associated to the divisor Θ. However, since Gr is not ﬁnite dimensional, and in
general cannot be written as an increasing union of smooth ﬁnite dimensional
subvarieties, its really deﬁnition relies on the following lemma.

Lemma 2.4.5. Assume that G is simple and simply-connected. There is an open substack
˚BunG(P1) of BunG(P1) classifying trivialisable G-torsors on P1, and the boundary
BunG \ ˚BunG is pure of codimension one. Therefore, it is an effective Cartier divisor,
deﬁning a line bundle O(1) on ˚BunG(P1).

˚BunG(P1) = [L−G\L<0G · e], and BunG \ ˚BunG = [L−G\Θ] is
Proof. We have
pure of codimension one. Alternatively, one can prove this using deformation
theory.
(cid:3)

Then the pullback deﬁnes a line bundle on Gr, temporally denoted by L(Θ).
Note that L(Θ) is ample since its certain multiple is the pullback of the determi-
nant line bundle by Proposition 2.3.5.

Next, it is not hard to show that the rational curve Cθ,θ constructed in (2.1.6)
intersects with Θ transversally at tθ (e.g. by looking at the tangent spaces), where
as before θ is the short dominant coroot.
In addition, one can show that the
restriction to Cθ,θ induces an injective map of Picard groups (using Demazure
It follows that there are inclusions ZL(Θ) ⊂ Pice(Gr) ⊂ Pic(P1)
resolutions).
which send L(Θ) to OP1 (1). The theorem then follows. See [24, Corollary 12] and
[72, § 10.2] for more details.

We leave the following statement as an exercise.

36

An introduction to afﬁne Grassmannians and the geometric Satake equivalence

Lemma 2.4.6. The action of Aut+(D) on Gr lifts to a unique action on O(1) which
restricts to the trivial action on the ﬁber of O(1) at e.

2.5. Central extensions, and afﬁne Kac-Moody algebras. We continue to as-
sume that k is algebraically closed and F = k((t)). Recall that afﬁne Dynkin
diagrams classify two different types of groups. Let Γ be a connected afﬁne
Dynkin diagram, and S be a subset of vertices of Γ. The work of Bruhat-Tits
attaches to Γ a simple and simply-connected reductive group GΓ over F and to S
a parahoric group scheme GS over O (cf. [75] for a summary and in particular
§4.2 of ibid. for the classiﬁcation). On the other hand, attached to Γ there is a
Kac-Moody algebra gΓ ([40, Chap. 4]) and the corresponding Kac-Moody group
GΓ and to S a parabolic subgroup PS of GΓ

4.

Now we explain the relation between the Bruhat-Tits theory and the Kac-

Moody theory by explaining the dotted arrow in the following diagram.

{Reductive groups over F}

{Afﬁne Dynkin diagrams}

3❢❢❢❢❢❢❢❢❢❢❢❢❢❢❢❢❢❢❢❢❢❢❢
+❳❳❳❳❳❳❳❳❳❳❳❳❳❳❳❳❳❳❳❳❳❳❳

{Afﬁne Kac-Moody algebras/groups over k}

We will assume that Γ is an untwisted afﬁne Dynkin diagram5. These are
the afﬁne Dynkin diagrams listed in [40, Chap. 4, TABLE Aff 1]. They can be
obtained from the ﬁnite Dynkin diagrams (listed in [40, Chap 4, TABLE Fin])
by adding a distinguished node v0. Reductive groups over F corresponding to
these Dynkin diagrams are those base change of simple and simply-connected
If S = {v0}, then the corresponding parahoric group
reductive groups from k.
scheme is hyperspecial, and is of the form G ⊗k k[[t]] (see Example 1.2.9).

In this case, the line bundle O(1) on GrG allows one to deﬁne a central exten-

sion of LG by Gm

(2.5.1)

1 → Gm → cLG → LG → 1.

Namely, an R-point of cLG is an R-point g ∈ LG(R) together with an isomorphism
The action of the rotation torus canonically lifts to an action on cLG (by Lemma

g∗O(1) ≃ O(1).

2.4.6). Let

m .

fLG := cLG ⋊ Grot

4In fact, the situation is much more complicated. There are various versions of inﬁnite dimensional
groups (e.g. minimal, formal, etc.) attached to gΓ due to the work of many people (Moody-Teo,
Marcuson, Garland, Kac-Perterson, Slodowy, Tits, Mathieu,...). See [76] for a summary and references
cited there.
5The twisted cases are more complicated, in particular when k has small characteristic.



3
+
Xinwen Zhu

37

Theorem 2.5.2. The ind-group fLG is isomorphic to the (formal version of) Kac-Moody

group GΓ constructed from the corresponding untwisted afﬁne Dynkin diagram.

This can be deduced from the following more precise theorem. Let G be a
parahoric group scheme of G, corresponding to a subset S of vertices of the afﬁne
Dynkin diagram of G. Let PS ⊂ GΓ be the corresponding parabolic subgroup in
the afﬁne Kac-Moody group. Then

Theorem 2.5.3. The afﬁne Grassmannian GrG is isomorphic to the partial ﬂag variety
GΓ /PS as deﬁned in [43, 51].

Proof. See [3] for the case G = SLn and [24] for general G (see also [60, §10]). The
idea is to ﬁrst prove that the Schubert varieties in GrG are isomorphic to the (a
priori different) Schubert varieties arising from Kac-Moody theory.
(cid:3)

Remark 2.5.4. The Lie algebra cLg of cLG is a central extension of g(F) by k.

If
char k = 0, it can be explicitly described as g ⊗ F ⊕ k1 with the Lie bracket given
by

[X ⊗ f, 1] = 0,

[X ⊗ f, Y ⊗ g] = [X, Y] ⊗ fg − (Rest=0fdg)(X, Y)1,

where X, Y ∈ g, f, g ∈ F, (−, −) : g × g → k is the normalised invariant bilinear
form on g and Res : Fdt → k is the residue map. We refer to [40, § 7] for details.

Combined with main results of [43, 51], one obtains a Borel-Weil type theorem.
For simplicity, we assume that char k = 0 and state it for untwisted afﬁne Dynkin
diagram Γ and S = {v0}.

Theorem 2.5.5. The dual of the space of global sections Γ (GrG, O(m))∗ is isomorphic to
Lm(gΓ ), the level m integrable representation of gΓ .

Integrable representations of Kac-Moody groups are the analogues of ﬁnite di-
mensional representations of reductive algebraic groups and can be constructed
purely by representation theory method. We brieﬂy recall the deﬁnition of Lm(gΓ ).
We follow notations from [40]. Let Λ0 be the fundamental weight of gΓ as deﬁned
in ibid. § 6, and let M(mΛ0) be the Verma module of gΓ of highest weight mΛ0
as deﬁned in ibid. § 9. Then Lm(gΓ ) is the quotient of M(mΛ0) by the submodule
generated by those vectors given in ibid. Formula (10.1.1).

3. Lecture III: Beilinson-Drinfeld Grassmannians and factorisation

structures

In this section, we introduce a version of afﬁne Grassmannians over curves,
known as Beilinson-Drinfeld Grassmannians. We also discuss some of their basic
geometric properties, in particular the factorisation property.

3.1. Beilinson-Drinfeld Grassmannians. A great discovery of Beilinson-Drinfeld
is that the interpretation of the afﬁne Grassmannian via Theorem 1.4.2 admits vast
generalisations.

38

An introduction to afﬁne Grassmannians and the geometric Satake equivalence

First, we can allow the point x in Theorem 1.4.2 to move. For a point x ∈ X(R),
let Γx denote the graph of the map x : Spec R → X. Then one can deﬁne the
prestack

GrG,X(R) =(cid:14)(x, E, β) (cid:12)(cid:12)(cid:12)(cid:12)(cid:12)

x ∈ X(R), E is a G-torsor on XR,
β : E|XR−Γx

∼= E0|XR−Γx is a trivialisation(cid:15) .

But in fact we can do more by allowing multiple points. Let I be a ﬁnite non-
empty set. For a point x = {xi, i ∈ I} ∈ XI(R), let

Γx := [i∈I

Γxi

denote the union of the graphs of the maps xi : Spec R → X (as closed subschemes
of XR).
Deﬁnition 3.1.1. We deﬁne the presheaf GrG,XI over the self-product of curves
XI as

(3.1.2) GrG,XI(R) =(cid:14)(x, E, β) (cid:12)(cid:12)(cid:12)(cid:12)(cid:12)

x ∈ XI(R), E is a G-torsor on XR,
β : E|XR−Γx

∼= E0|XR−Γx is a trivialisation(cid:15) .

Let qI : GrG,XI → XI denote the structural map.
Theorem 3.1.3. The presheaf GrG,XI is represented by an ind-scheme, ind-of ﬁnite type
over XI. It is ind-projective if G is reductive.

Proof. Again, one reduces to prove the theorem in the case when G = GLn by
arguments similar to Proposition 1.2.5 and 1.2.6. Then it is enough to prove that
for positive integer N,

Gr(N)

GLn,XI =(cid:10)(x, E, β) ∈ GrGLn,XI | On

(−NΓx) ⊂ E ⊂ On
XR

XR

(NΓx)(cid:11)

is represented by a projective scheme over XI. By an argument as in Lemma 1.1.5,
the map E 7→ F := On
/E(−NΓx) identiﬁes it with the functor that assigns R the
XR
pairs (x, F) where x ∈ X(R) and F is an R-ﬂat OXR-module that is a quotient of
On
(−2NΓx). Its representability then follows from the representability of
XR
quot schemes (in place of Grassmannians used in Lemma 1.1.6).
(cid:3)

/On
XR

For simplicity, write GrG,XI by GrXI if the group G is clear for the context.

Remark 3.1.4. The last statement of Theorem 3.1.3 holds in a more general situa-
tion. We call a smooth afﬁne group scheme G over X a Bruhat-Tits group scheme
(or a parahoric group scheme) if its restriction to every Dx, x ∈ |X| is a parahoric
group scheme in the sense of Bruhat-Tits. Using Proposition 1.2.11, an argument
as in [62] shows that GrXI is ind-proper over XI.

One can similarly deﬁne the multi-point version of the jet groups and the loop
groups. For x ∈ XI(R), let ˆΓx denote the formal completion of the graphs Γx in
XR (which is a formal scheme). We have the canonical map π : ˆΓx → XR.
(3.1.5)

(L+G)XI =(cid:10)(x, β) | x ∈ XI(R), β ∈ G(ˆΓx)(cid:11) .

Xinwen Zhu

39

Proposition 3.1.6. (L+G)XI is represented by a scheme afﬁne over XI.

To rigorously deﬁne the global loop groups, we need the following lemma.

Lemma 3.1.7. The formal scheme ˆΓx is ind-afﬁne. Let Ax be the topological algebra of its
ring of functions and let ˆΓ ′
x. Then
there is a unique morphism i : ˆΓ ′

x = Spec Ax. There is the canonical map p : ˆΓx → ˆΓ ′

x → XR such that π = ip : ˆΓx → XR.

Proof. See [11, Proposition 2.12.6].
Then it makes sense to deﬁne ˆΓ ◦

x = ˆΓ ′

x \ Γx.

(cid:3)

(3.1.8)

(LG)XI =(cid:10)(x, β) | x ∈ XI(R), β ∈ G(ˆΓ ◦
x )(cid:11) .

By Theorem 1.4.3 and similar arguments as in Corollary 1.4.5, we have

Proposition 3.1.9. As k-spaces, GrG,XI

∼= [(LG)XI /(L+G)XI ]. In particular,

(1) (LG)XI is represented by an ind-scheme over XI;
(2) (LG)XI naturally acts on GrG,XI.
Beilinson-Drinfeld Grassmannians are truly remarkable objects. To wit, let us

ﬁrst analyse the case I = {1} and I = {1, 2}.

Let I = {1} and ﬁrst assume that G = G × X is constant. For every x ∈ X, by

choosing an isomorphism Ox ≃ O, we obtain a canonical isomorphism

GrX|x = GrG,x

∼= GrG

by Theorem 1.4.2. However, globally there is no canonical identiﬁcation GrX 6=
GrG × X in general. Rather, GrX can be regarded as a twisted product X ˜×GrG
(cf. § 0.3.3 for the deﬁnition of the twisted product). Namely, there is an Aut(D)-
torsor ˆX → X over X, classifying x ∈ X together with Dx

∼= D. Precisely

ˆX(R) =(cid:8)(x, α) | x ∈ X(R), α : ˆΓ ′

x

∼= Spec R[[t]].(cid:9)

Likewise, there is the Aut+(D)-torsor ˆX+ consisting of those α that restricts to the
canonical isomorphism Γx ≃ Spec R. Recall that Aut(D) acts on GrG (as deﬁned
by (1.3.16)). Then there are isomorphisms
∼= ˆX ×Aut(D) GrG

∼= ˆX+ ×Aut+(D) GrG.

(3.1.10)

GrX

The ﬁrst isomorphism in fact implies that there exists a connection on GrX (see
also Proposition 3.1.20). The second isomorphism allows one to deﬁne

(3.1.11)

Gr6µ,X := X ˜×Gr6µ := ˆX+ ×Aut+(D) Gr6µ

as a closed subscheme. Alternatively, Gr6µ,X can be identiﬁed with the closed
subset (with the reduced scheme structure) of GrX classifying those points (x, E, β)
such that Invx(β) 6 µ.

Remark 3.1.12. One can also describe (L+G)X and (LG)X using the above twisting
procedure.

40

An introduction to afﬁne Grassmannians and the geometric Satake equivalence

We still assume that I = {1}, but that G is not necessarily constant. For example,
one can construct a group scheme G over X such that G|X−x ≃ G × (X − x) and
G|Dx is an Iwahori group scheme of G. Then GrG,X is a deformation from the
afﬁne Grassmannian to the afﬁne ﬂag variety of G (see Remark 1.2.10 for the
terminology). I.e. the ﬁber of GrG,X over a point y 6= x on X is isomorphic to GrG
and its ﬁber over x is isomorphic to FℓG. This deformation plays a crucial role in
the construction of central sheaves by Gaitsgory [28]. Similar deformations over
the ring p-adic integers were used in [62] to deﬁne the local model of Shimura
varieties.

Next, we turn to GrX2. Let ∆ : X → X2 be the diagonal.

Proposition 3.1.13. There are canonical isomorphisms

∆ : GrX

∼= GrX2 ×X2,∆ X,

c : GrX2 |X2−∆

∼= (GrX × GrX)|X2−∆.

In addition, there is a natural S2-action on GrX2 such that c is S2-equivariant, where S2
acts on the GrX × GrX by the permutation of two factors.

Proof. The ﬁrst isomorphism is clear. To construct the second one, let (x, y) ∈
(X2 − ∆)(R). Then (XR − Γx) and (X − Γy) form a Zariski cover of XR. We deﬁne
a map

GrX2 ×X2 Spec R → GrX ×X,x Spec R

by sending (E, β) to (Ex, βx), where Ex is obtained by gluing E|XR−Γy and E0|XR−Γx
∼= E0|XR−Γx. Sim-
via β and therefore is equipped with a trivialisation βx : E|XR−Γx
ilarly, we have a map GrX2 ×X2 Spec R → GrX ×X,y Spec R. Together, they deﬁne
a map GrX2 |X2−∆ → (GrX × GrX)|X2−∆.

Conversely, if we have (Ex, βx) ∈ GrX ×X,x Spec R and (Ey, βy) ∈ GrX ×X,y
y βx, which by

Spec R, we can construct E by gluing Ex|XR−Γy and Ey|XR−Γx by β−1
deﬁnition is naturally equipped with a trivialisation β on XR − Γx − Γy.

Finally, the non-trivial element σ ∈ S2 acts on GrX2 by sending (x, y, E, β) to
(y, x, E, β). It is an exercise to check that under c, this action corresponds to the
ﬂip of the two factors of GrX × GrX.
(cid:3)

These isomorphisms contradict to our intuition. Namely, the ﬁbers of GrX2 →
X2 over the diagonal are “smaller” than its general ﬁbers! This is purely an
inﬁnite dimensional phenomenon, as we all know that the ﬁber dimension of a
family of algebraic varieties goes up under specialisation.

In fact, there is no contradiction. We have the following result.

Proposition 3.1.14. Assume that G = G × X is constant and p ∤ π1(Gder). Regard
Gr6µ,X × Gr6λ,X|X2−∆ ⊂ GrX2 |X2−∆ via the above identiﬁcation and let Gr6(µ,λ)
denote the closure in GrX2. Then Gr6(µ,λ)|∆ = Gr6µ+λ,X.

So as soon as we restrict to ﬁnite dimensional subvarieties, we restore our
intuition. A slightly weaker version of this result was proved in [79] (see also
[80]) but more or less the same arguments apply here.

Xinwen Zhu

41

Next we consider line bundles. Let L be a line bundle on the prestack BunG
of G-torsors on X, rigidiﬁed at the trivial G-torsor. Note that we have the natural
forgetful map

uXI : GrXI → BunG.

(3.1.15)
Let LXI denote the pullback of L to GrXI.
Proposition 3.1.16. Assume that G = G × X is constant and G simply-connected. Then
under the identiﬁcation given in Proposition 3.1.13, there are canonical isomorphisms

∆∗LX2 ∼= LX, LX2 |X2−∆

∼= c∗(LX ⊠ LX|X2−∆).

Proof. The ﬁrst isomorphism is clear. We explain the second. Note that the fol-
lowing diagram is commutative by the proof of Proposition 3.1.13

(GrX × X)|X2−∆

c−1(id×e)

GrX2 |X2−∆
rr

'◆◆◆◆◆◆◆◆◆◆◆

BunG

rrr

yrrrr

Therefore, the restriction of LX2 |X2−∆ to GrX × X|X2−∆ is canonically isomorphic
to LX ⊠ OX|X2−∆. Using the fact that Pice(GrG) ≃ Z which is discrete (so every
line bundle algebraically equivalent to zero is trivial) and GrX is connected, we
see that for every point of s of GrX, the restriction of LX2 |X2−∆ to GrX × {s} is
isomorphic to LX. By the same argument, the restriction of LX2 |X2−∆ to {s} × GrX
is also isomorphic to LX.

Since GrX is ind-proper over X, we can apply the See-Saw principle (cf. [55, §5])
to conclude that LX2 |X2−∆ is canonically isomorphic to LX ⊠ LX|X2−∆, compati-
ble with the rigidiﬁcations.
(cid:3)

Note that if G is not simply-connected, Proposition 3.1.16 cannot hold for ar-
6. In addition, the argument does not work for non-
bitrary line bundle on BunG
constant group scheme G even the generic ﬁber of G is simply-connected, since
we crucially use the fact that GrXI → XI is ind-proper (in order to apply the See-
Saw principle). For most applications, Proposition 3.1.17 below can be served as
a replacement.

Namely, the construction of the determinant line bundle on GrGLn in § 1.5

immediately generalises to give determinant line bundles Ldet,XI on GrGLn,XI.
Proposition 3.1.17. There are similar isomorphisms as in Proposition 3.1.16 for the
determinant line bundle Ldet,XI .

In particular, given a representation ρ : G → GLn, via pullback along fρ :
GrG,XI → GrGLn,XI, one can construct line bundles on GrG,XI together with iso-
morphisms as in Proposition 3.1.16.

6Although probably one can generalise this proposition to not necessarily simply-connected groups
by requiring L on BunG to be “multiplicative” in appropriate sense.

/
/
'
y
42

An introduction to afﬁne Grassmannians and the geometric Satake equivalence

Proof. The existence of the ﬁrst isomorphism is clear. The second isomorphism
follows from the canonical isomorphism

(3.1.18)

det(M ⊕ N) ∼= det(M) ⊗R det(N),

where M and N are two ﬁnite projective R-modules.

(cid:3)

Remark 3.1.19. There is, however, a crucial difference between the isomorphism
∼= c∗(LX ⊠ LX|X2−∆) in Proposition 3.1.16 and the corresponding iso-
LX2 |X2−∆
morphism in Proposition 3.1.17. Namely, ﬁrst note that both LX2 and Ldet,X2
admit a natural S2-action. While the isomorphism in Proposition 3.1.16 is S2-
equivariant, the isomorphism in Proposition 3.1.17 is only S2-equivariant up to
a sign. The sign appears because under (3.1.18), the canonical isomorphism
det(M ⊕ N) ∼= det(N ⊕ M) corresponds to the canonical isomorphism det(M) ⊗
det(N) ∼= det(N) ⊗ det(M) up to the sign (−1)rk M rk N. This reﬂects the fact that
taking the determinant line is a symmetric monoidal functor from the category
ProjR of ﬁnite projective R-modules (with the tensor product given by direct sums)
to the category PicZ
R of graded invertible R-modules. We refer to [58] for further
elaborations on this point.

We list two more basic properties of Beilinson-Drinfeld Grassmannians.

Proposition 3.1.20.

(1) There exists a canonical connection on GrXI . I.e. Let x, y : S → XI be two points
such that x|Sred = y|Sred. Then there is a canonical isomorphism GrXI ×XI,x
S = GrXI ×XI,y S.

(2) Beilinson-Drinfeld Grassmannians commute with étale base change. I.e., let U →
X be an étale morphism. Then there is a canonical isomorphism GrG,XI ×XI UI ∼=
GrGU,UI .

Proof. For (1), see [11, §2.8]. For (2), see [80, Lemma 3.2].

(cid:3)

We ﬁnish this subsection by introducing some variants of Beilinson-Drinfeld

Grassmannians. First we have convolution Grassmannians over XJ.

Let φ : J ։ {1, 2, . . . , n} be a surjective map of ﬁnite sets. Let Ji = φ−1(i).
For x ∈ XJ, let xi ∈ XJi be the corresponding component. We can deﬁne the
convolution Grassmannian
(3.1.21)

x ∈ XJ(R), Ei are G-torsor on XR,
βi : Ei|XR−Γxi

∼= Ei−1|XR−Γxi

where E0 = E0.(cid:15) .

GrG,φ =(cid:14)(x, (Ei, βi)i=1,2,...,n) (cid:12)(cid:12)(cid:12)(cid:12)(cid:12)

Sometimes, it is also denoted by GrXJ1 ˜×GrXJ2 ˜× · · · ˜×GrXJn since there are projec-
tions

pri : GrXJ1 ˜×GrXJ2 ˜× · · · ˜×GrXJi → GrXJ1 ˜×GrXJ2 ˜× · · · ˜×GrXJi−1

realising GrXJ1 ˜×GrXJ2 ˜× · · · ˜×GrXJi as the twisted product of GrXJ1 ˜×GrXJ2 ˜× · · · ˜×GrXJi−1
and GrXJi (see § 0.3.3 for the deﬁnition of the twisted product). Namely, there is

Xinwen Zhu

43

an (L+G)XJn -torsor
(3.1.22)
classifying a point (x, (Ei, βi)i=1,2,...,n−1) ∈ GrXJ1 ˜×GrXJ2 ˜× · · · ˜×GrXJn−1 , a point
y ∈ XJn, and a trivialisation of En−1 along ˆΓy. Then the twisted product is
constructed using this torsor.

E → GrXJ1 ˜×GrXJ2 ˜× · · · ˜×GrXJn−1 × XJn

There is also the convolution map

mφ : GrG,φ → GrXJ

sending (x, (Ei, βi)i=1,2,...,n) to (x, En, β1 · · · βn). Using an argument similar to
Proposition 3.1.13, one shows that

Lemma 3.1.23. The map mφ restricts to an isomorphism over X(φ).

Next we have a symmetrized version of Beilinson-Drinfeld Grassmannians. We
refer to [74, Tag01WQ, Tag056P] for the deﬁnition of (relative) effective Cartier
divisors. Recall that given d, the dth symmetric product X(d) = Xd//Sd classiﬁes
effective Cartier divisors on X. I.e. for every k-algebra R, X(d)(R) is the set of
relative effective Cartier divisor on XR. Then we can deﬁne the symmetrized
version of Beilinson-Drinfeld Grassmannians Gr(d) → X(d) as follows.
(3.1.24)

D ⊂ XR a relative effective Cartier divisor of degree d,
E a G-torsor on XR, β : E|XR−D

∼= E0|XR−D a trivialisation(cid:15) .

Gr(d) =(cid:14)(D, E, β) (cid:12)(cid:12)(cid:12)(cid:12)(cid:12)

It is easy to see that the natural map

GrXd → Gr(d) ×X(d) Xd

is an isomorphism. Given a coweight µ, we have a closed subvariety Gr(d)
the natural map

6µ and

Gr6(µ,...,µ) → Gr(d)

6µ ×X(d) Xd

is an isomorphism. The the convolution map induces Gr6µ ˜× · · · ˜×Gr6µ → Gr(d)
6µ.

Example 3.1.25. Let G = GLn, and ω1 = (1, 0, . . . , 0). Then

Gr(m)
6ω1

=(cid:10)E ⊂ On

XR

We further assume that X = A1 = Spec k[t]. Then Example 2.1.8 and 2.1.18 have
the global counterparts. First, Formula (2.1.9) in fact deﬁnes

| On
XR

/E is a projective R-module of rank m(cid:11) .

We leave it as an exercise to construct the counterpart of (2.1.19) in the global
setting. In addition, the global analogue of (2.1.20) is

gln → Gr(n)
6ω1

.

egln −−−−→ Grω1,X ˜× · · · ˜×Grω1,X −−−−→ Xn
y
y

gln −−−−→

Gr(m)
6ω1

−−−−→ X(n),

y

44

An introduction to afﬁne Grassmannians and the geometric Satake equivalence

where egln → gln is the Grothendieck-Springer resolution ([78, § 1]), and the

left square is Cartesian. We can identify Xn ∼= An with the standard Cartan
subalgebra tn of gln and X(n) with tn//Sn. Then the composition of the two
maps in the bottom row can be identiﬁed with the Chevalley map that sends a
matrix to its characteristic polynomial. This diagram ﬁrst appeared in [54].

Remark 3.1.26. There also exists a version of Beilinson-Drinfeld afﬁne Grassman-
nians for p-adic groups, as recently constructed by P. Scholze [69]. However, this
is beyond the scope of our notes.

3.2. Factorisation property. Let us summarise the most important properties
of Beilinson-Drinfeld Grassmannians {GrXI } into the following theorem, which
vastly generalises Proposition 3.1.13. But the proof remains similar.

Theorem 3.2.1. Let G be a smooth afﬁne group scheme over X.

(i) For every I, there is a unit section eI : XI → GrXI given by the trivial G-torsor.
(ii) For every φ : J ։ I, let ∆(φ) : XI → XJ be the corresponding diagonal embedding
sending {xi, i ∈ I} to {yj, j ∈ J} with yj = xφ(j). Then there is a canonical isomorphism
(3.2.2)
By abuse of notation, the composition GrXI
by ∆(φ).

∼= GrXJ ×XJ,∆(φ) XI → GrXJ is also denoted

∼= GrXJ ×XJ,∆(φ) XI

∆(φ) : GrXI

(iii) Given φ : J ։ I, let J = ⊔i∈IJi denote the partition of J, and X(φ) ⊂ XJ denote
the open subset of those {xj, j ∈ J} such that xj ∩ xj ′ = ∅ if φ(j) 6= φ(j ′). Then there is a
canonical isomorphism (usually called the factorization isomorphism)
GrXJi ) ×XJ X(φ).

(3.2.3)

cφ : GrXJ ×XJ X(φ) ∼= (Yi∈I

These maps satisfy the following conditions:

(1) ∆(φ) ◦ eI = eJ|∆(φ) and cφ(eJ|X(φ)) = (Qi∈I eJi )|X(φ).

ψ
։ I, ∆(φ)∆(ψ) = ∆(ψφ).
ψ
։ I, the following diagram is commutative

(2) Given K
(3) Given K

φ
։ J
φ
։ J

GrXJ |X(ψ)

∆(φ)|
X(ψ)
−−−−−−−→

GrXK |X(ψφ)

ycψφ
(Qi ∆(φi))|
−−−−−−−−−−−→ (Qi GrXKi )|X(ψφ),

cψy
(Qi GrXJi )|X(ψ)
։ I, (Qi∈I cφi )(cψφ|X(φ)) = cφ.

φ
։ J

X(ψ)

where φi : Ki → Ji is the map over i ∈ I.

(4) Given K

ψ

Example 3.2.4. Let us see why this theorem encodes all the information contained
in Proposition 3.1.13. First, applying (3.2.2) to the map φ : {1, 2} → {1} recovers
∼= GrX2 |∆, and applying it to the ﬂip σ : {1, 2} → {1, 2}
the isomorphism ∆ : GrX
gives the canonical isomorphism ∆(σ) : GrX2 → GrX2 covering the ﬂip map of
X2 → X2. On the other hand, applying (3.2.3) to the map id : {1, 2} → {1, 2},

Xinwen Zhu

45

∼= GrX × GrX|X2−∆. Applying Property
recovers the isomorphism c : GrX2 |X2−∆
σ→ {1, 2} implies that
(3) to {1, 2}
the isomorphism c is compatible with ∆(σ) and the natural ﬂip of GrX × GrX, as
claimed in Proposition 3.1.13.

id
→ {1, 2} and Property (4) to {1, 2}

id
→ {1, 2}

σ→ {1, 2}

The generalisation of Proposition 3.1.16 is

Theorem 3.2.5. Assume that G is simply-connected and G = G × X is constant. Let L
be a rigidiﬁed line bundle on BunG, and let LXI denote its pullback to GrXI. Then under
the isomorphisms in Theorem 3.2.1, there are canonical isomorphisms,

I LXI

(i) e∗
In addition, these isomorphisms are compatible in the sense that the analogue state-

∼= OXI ; (ii) ∆(φ)∗LXJ

∼= LXI ; (iii) LXJ |X(φ)

∼= c∗

φ(⊠LXJi |X(φ)).

ments (1)-(4) in Theorem 3.2.1 hold.

The above structures and properties of Beilinson-Drinfeld Grassmannians are
also shared by some other geometric objects so it is worth to summarise them
into the following deﬁnition.

Deﬁnition 3.2.6. A factorization space Y over X is an assignment for each non-
empty ﬁnite set I a space YI → XI together with a collection of maps as in (ii)-(iii)
of Theorem 3.2.1, satisfying the compatibility conditions (2)-(4) of Theorem 3.2.1.
A factorization space is called unital if there exist a collection of maps as in (i) of
Theorem 3.2.1, satisfying the compatibility condition (1) of Theorem 3.2.1.

A line bundle L on a unital factorization space Y is an assignment for each I a
line bundle LI on YI together with a collection of isomorphisms as in (i)-(iii) of
Theorem 3.2.5 satisfying the natural compatibility conditions as in Theorem 3.2.5.

Remark 3.2.7. Factorization spaces (resp. unital factorization spaces) are called
chiral semigroups (resp. chiral monoids) in [10, § 3.10.16]. We refer to loc. cit. for
further discussions and examples.

Remark 3.2.8. One can also generalise Proposition 3.1.17 to say that the collection
Ldet,XI form a graded factorization line bundle on GrGLn,XI. There are also a
collection of isomorphisms as in (i)-(iii) of Theorem 3.2.5 between them. But the
compatibility conditions between these isomorphisms must be modiﬁed. More
precisely, the analogous Statement (3) in Theorem 3.1.16 must be modiﬁed.

3.3. The Ran space.
single object and reformulate the above theorem using this object.

It will be conceptually concise to organise all {GrXI } into a

Deﬁnition 3.3.1. We deﬁne the Ran space Ran(X) of X as the presheaf that assign
every R the set of ﬁnite non-empty subsets of X(R).

Note that for any ﬁnite non-empty set I, there is a tautological map XI →

Ran(X), which induces an isomorphism

lim−→IXI → Ran(X),

GrG,Ran(X) =(cid:14)(x, E, β) (cid:12)(cid:12)(cid:12)(cid:12)(cid:12)

x ∈ Ran(X)(R), E is a G-torsor on XR,
β : E|XR−Γx

∼= E0|XR−Γx is a trivialisation(cid:15) .

46

An introduction to afﬁne Grassmannians and the geometric Satake equivalence

where the colimit is taken in the category of presheaves over the category of all
ﬁnite non-empty sets with surjective transition maps. Since the colimit is taken
over a non ﬁltered category, Ran(X) is not a space (although each XI is). In fact,
it is not a sheaf even for the étale topology.

For x = {xi, i ∈ I} ∈ Ran(X)(R), let Γx denote the union of all graphs Γxi (as

closed subschemes in XR).
Deﬁnition 3.3.2. We deﬁne the Ran Grassmannian GrG,Ran(X) as

Note that we do not claim any representability of GrG,Ran(X) as it is not repre-

sentable. However, there is a natural projection

and the unit section

qRan : GrG,Ran(X) → Ran(X),

eRan : Ran(X) → GrG,Ran(X),

that are relatively representable. In fact, we have

GrG,XI = XI ×Ran(X),qRan GrG,Ran(X).

If the curve X and the group scheme G are clear from the context, we write
GrG,Ran(X) by GrRan(X) or by GrRan for brevity.

Here is a concise way to encode the factorization structure of the Beilinson-
Drinfeld Grassmannians. First, the Ran space Ran(X) has a semigroup structure
given by union of points

union : Ran(X) × Ran(X) → Ran(X),

({xi}, {xj}) 7→ {xi, xj}.

Let (Ran × Ran)disj ⊂ Ran × Ran denote the open subpresheaf consisting of those
{xi} and {xj} with {xi} ∩ {xj} = ∅, and similarly one deﬁnes (Ran × Ran × Ran)disj.
Then Theorem 3.2.1 can be reformulated as

Theorem 3.3.3. There is a canonical isomorphism

a : GrRan ×Ran (Ran × Ran)disj ≃ (GrRan × GrRan)|(Ran × Ran)disj,

compatible with the unit section eRan : Ran → GrRan and satisfying a natural cocycle
condition over (Ran × Ran × Ran)disj.

We leave it as an exercise to verify that Theorem 3.2.1 and Theorem 3.3.3 are

equivalent.

3.4. Rigidiﬁed line bundles on GrRan. The Ran Grassmannian GrRan is a fasci-
nating geometric object. As we shall see in the next section, it encodes many
information of the moduli of G-bundles on X. Therefore, it is important to study
the geometry of GrRan. Here we illustrate some methods by one example, namely,
we will calculate the Picard groupoid of rigidiﬁed line bundles on GrG,Ran(X),
where G → X is a simple, simply-connected group scheme over X.

Xinwen Zhu

47

For a morphism X → S of prestacks equipped with a section e : S → X, let
Pice(X/S) denote the Picard groupoid of line bundles on X, equipped with a
trivialisation along e. Here is the theorem.

Theorem 3.4.1. Assume that G is simple and simply-connected and G = G × X is
constant. Then for any point x ∈ X, the map Grx → GrRan induces an isomorphism
Pice(GrRan/ Ran) ≃ Pice(Grx).

Note that we have

Pice(GrRan/ Ran) = lim−→ Pice(GrXI /XI),

and the Picard groupoid Pice(GrXI /XI) is discrete. In addition, it is the group of
global sections of an étale sheaf on (XI)et

Pice(GrXI /XI)(U) = Pice((GrXI )U/U).

We will ﬁrst study Pice(GrXI /XI).

Lemma 3.4.2. Let X be a smooth curve, and G be a connected reductive group scheme
over X that is ﬁberwise connected, and simply-connected. Then there is a canonical iso-
morphism

ZX ≃ Pice(GrX/X),

where ZX is the constant sheaf Z on X. In particular, for every point x ∈ X, the stalk
Pice(GrX/X)x = Pice(Grx) = Z.

Proof. We ﬁrst treat the case when G = G × X is constant and there is an étale
morphism X → A1. Then since afﬁne Grassmannians commute with étale base
change (see Proposition 3.1.20), we reduce to treat the case X = A1. In this case,
there is a canonical isomorphism GrA1 ∼= Gr0 × A1. Namely, there exists a global

coordinate on A1 so the Aut(D)-torsor cA1 → A1 is trivial. Then the lemma

follows. Note that the isomorphism Z ∼= Pice(GrA1 ) is canonical since there is an
ample generator O(1).

In general, we have an étale map f : U → X such that G ×X U ∼= G × U for
some constant group G and there is an étale map U → A1. The canonicity of
∼= Pice(GrU/U) implies that it descends to a canonical
the isomorphism ZU
isomorphism ZX → Pice(GrX/X).
(cid:3)

We write by O(n)X the line bundle on GrX corresponding to n ∈ ZX under

the above isomorphism.

The crucial step is to understand Pice(GrX2 /X2). Note that since GrX → X is

ind-projective, we have the canonical isomorphism

Pice(GrX/X) ⊠ Pice(GrX/X) ∼= Pice(GrX × GrX/X × X)

by the See-Saw principle (see the proof of Proposition 3.1.16). In particular,
Pice(GrX2 /X2)|X2−∆

∼= Pice(GrX/X) ⊠ Pice(GrX/X)|X2−∆

∼= (ZX ⊠ ZX)|X2−∆.

48

An introduction to afﬁne Grassmannians and the geometric Satake equivalence

Lemma 3.4.3. The above isomorphism extends to an exact sequence
0 → Pice(GrX2 /X2) → ZX ⊠ ZX → ∆∗ZX → 0,

where the map ZX ⊠ ZX → ∆∗ZX is given by (a, b) 7→ a − b.
Proof. First, we show that Pice(GrX2 /X2) → ZX ⊠ ZX is injective. I.e. it does not
admit non-zero sections supported along the diagonal. Let (x, x) be a point on the
diagonal. As above, by working étale locally on X we can assume that G = G × X
is constant, and that GrX → X is isomorphic to Gr × X → X. Let V → X × X
be an étale open neighbourhood of (x, x). For brevity, we write V ∩ ∆ by ∆ in
the sequel. Let L be a rigidiﬁed line bundle on GrV := GrX2 ×X2 V, trivial on
GrV −∆ := GrV |V −∆. We need to show that L is trivial. It is enough to show that
its restriction to the Schubert variety Gr6(λ,µ)|V ⊂ GrV is trivial for all (λ, µ) (see
Proposition 3.1.14 for the deﬁnition of Gr6(λ,µ)). For brevity, we write L|Gr6(λ,µ)
by L.

By the deﬁnition of the rigidiﬁed line bundle, L is equipped with a triviali-
In addition, L|GrV−∆ is trivial. Since the pullback along
sation θ : OV
the map Gr6(λ,µ)|V −∆ → V − ∆ induces an isomorphism of spaces of regular
functions, there is a unique trivialisation

∼= e∗L.

s : OGr6(λ,µ)|V−∆

∼= L|V −∆,

such that e∗(s) = θ|V −∆. By Proposition 3.1.14 and Theorem 2.1.21, the scheme
Gr6(λ,µ) is Cohen-Macaulay. Therefore, L((n − 1)∆) is a subsheaf of L(n∆). Then
there is an integer n such that

s ∈ Γ (Gr6(λ,µ), L(n∆)) \ Γ (Gr6(λ,µ), L((n − 1)∆)).

Then we regard s as a regular section of L(n∆). Note that then e∗(s) coincides
with OV ≃ e∗L → e∗L(n∆) as a regular section of (e∗L)(n∆). In particular, n > 0.
But if n > 0, s would vanish at e(∆) and therefore must vanish on the entire
Gr6(λ,µ)|∆ (since the zero loci of s is pure of codimension one and is contained
in Gr6(λ,µ)|∆ which is an integral scheme again by Proposition 3.1.14). This
would imply that s ∈ Γ (Gr6(λ,µ), L((n − 1)∆)), which is contradiction. Therefore
n = 0. By the same reasoning s does not vanish along e(∆) and therefore does
not vanish anywhere. Therefore, s induces a trivialisation of L. This ﬁnishes the
proof of the injectivity.

Now let L be a rigidiﬁed line bundle on GrX2, whose restriction to GrX2 |X2−∆
is O(a)X ⊠ O(b)X|X2−∆. Then again by the See-Saw principle, its pullback m∗L
along the convolution map m : GrX ˜×GrX → GrX2 is of the form pr∗
1 O(a)X ⊗ L ′,
where L ′ is some line bundle on GrX ˜×GrX whose restriction to each pr−1
1 (y)(≃
GrX) is isomorphic to O(b)X. Over a point on the diagonal, the global convolution
map restricts to the local convolution map (see (1.2.13)). Then an easy computa-
tion of the pullback of line bundles on Gr along (1.2.13) implies that a = b. This
shows that the composition Pice(GrX2 /X2) → ZX ⊠ ZX → ∆∗ZX is zero.

Xinwen Zhu

49

Finally, we need to show that Pice(GrX2 /X2) maps surjectively to ker(ZX ⊠
ZX → ∆∗ZX). Again, it is enough to consider the stalks along the diagonal. So
as before we can pass to an étale neighbourhood of (x, x) and therefore assume
that X = A1 ⊂ P1 and G = G × X is constant. Then we can conclude by pulling
back of the line bundle O(1) on BunG(P1) (see Lemma 2.4.5) to GrX2.
(cid:3)

By the same argument, one can show that Pice(GrXI /XI) ﬁts into the following

exact sequence

0 → Pice(GrXI ) → ⊠i∈IZX → Mφ:I։J/∼

∆(φ)∗ ⊠j∈J ZX.

Here |J| = |I| − 1 and φ ∼ φ ′ if there is an isomorphism J ∼= J ′ intertwining φ and
φ ′. In other words, the sum is taken over all partitions of I into |I| − 1 subsets.
The map dφ : ⊠i∈IZX → ∆(φ)∗ ⊠j∈J ZX is given as follows: one can write
I = I ′ ∪ {1, 2} → J = I ′ ∪ {1} and the map dφ is the identity on ⊠i∈I ′ZX-factor
and is the map ZX ⊠ ZX → ∆∗ZX in Lemma 3.4.3 on the factors corresponding
to {1, 2} → {1}.

Corollary 3.4.4. For every point x ∈ X, and every φ : J ։ I, the maps Pice(GrX) →
Pice(Grx) and Pice(GrXJ /XJ) → Pice(GrXI /XI) are an isomorphisms.

Theorem 3.4.1 then follows.

4. Lecture IV: Applications to the moduli of G-bundles

In this section, we explain how to study moduli of G-bundles via afﬁne Grass-
mannians. The basic tools are the uniformization theorems. We assume that k is
algebraically closed throughout this section.

4.1. One point uniformization. Let X be a smooth projective curve over k. Let
G be a ﬁberwise connected smooth afﬁne group scheme over X. Then the moduli
space BunG of G-torsors on X is an algebraic stack, locally of ﬁnite presentation
over k (e.g. see [37, Proposition 1]).

Example 4.1.1. Let G|X−{x1,...,xn}
be an appro-
priate parahoric group scheme at every xi, then BunG is the moduli stack of
parabolic bundles of G (with parabolic structures at {x1, . . . , xn}).

∼= G × (X − {x1, . . . , xn}) and G|Dxi

By the deﬁnition of GrG,x (cf. (1.4.1)), we have a natural morphism

ux : GrG,x → BunG.

(4.1.2)
Let X∗ = X − {x}, and let GX∗ denote the space of sections. I.e.
(4.1.3)
Lemma 4.1.4. The space GX∗

is represented by an group ind-scheme.

GX∗

(R) = Γ (X∗

R, G).

Proof. Again, one reduces to prove it for G = GLn, which is easy (e.g. see [3,
(1.9)]).
(cid:3)

50

An introduction to afﬁne Grassmannians and the geometric Satake equivalence

By restriction to D∗

x ⊂ X∗, we may regard GX∗ as a subgroup of LGx. Then

GX∗ acts transitively along the ﬁbers of ux and therefore ux factors through
(4.1.5)

\GrG,x] → BunG.

[GX∗

This map is not necessarily surjective, as can be seen in the case G = Gm (not
every line bundle on the open curve X∗ is trivial). However, it is surjective if
G = G ⊗ X is semisimple. In fact, we have the following stronger result.

Theorem 4.1.6. Let G be a smooth ﬁberwise connected afﬁne group scheme over X with
semisimple generic ﬁber over the rational function ﬁeld k(X). Then (4.1.5) is an isomor-
phism.

At the level of k-points, it says that

BunG(k) = Γ \G(Fx)/G(Ox),

where Γ = GX∗
(k) = Γ (X∗, G). This is due to Harder. The SLn case is due to
Beauville-Laszlo (cf. [3]). For a constant semisimple group scheme, this is due to
Drinfeld-Simpson (cf. [22]). It was proved in loc. cit. that if p ∤ |π1(G)|, then the
GX∗-torsor GrG → BunG is étale locally trivial. In its full generality, the theorem
is due to Heinloth (cf. [37]). Because of this theorem, we can think (4.1.2) as a
uniformization map.

Example 4.1.7. We illustrate the theorem in the simplest example G = SL2. In this
case, BunG classiﬁes rank two vector bundles on X with the trivial determinant.
We explain why every such bundle E on X becomes trivial on X∗. First, there
exists a line bundle L (negative enough) ﬁtting into the following short exact
sequence 0 → L → E → L−1 → 0. Now, since X∗ is afﬁne, H1(X∗, L−2) = 0, so
E|X∗ ∼= (L ⊕ L−1)|X∗. Next, we can ﬁnd a large enough integer n, a global section
s1 of L(nx), and s2 of L−1(nx) such that s1 and s2 do not have common zeros on
X∗. Let s = (s1, s2)|X∗ : OX∗ → (L ⊕ L−1)|X∗. Then s vanishes nowhere on X∗, and
therefore we have 0 → OX∗ → (L ⊕ L−1)|X∗ → OX∗ → 0. Again, by vanishing of
H1(X∗, OX∗), we have E|X∗ ∼= (L ⊕ L−1)|X∗ ∼= O2

X∗.

For simplicity, we assume that G = G × X in the rest of this subsection. In this

case, write GX∗ by GX∗.
Corollary 4.1.8. There is a canonical isomorphism c : π0(BunG) ∼= π1(G). In particular,
if G is simply-connected, then BunG is connected.
Example 4.1.9. When G = GLn, the map BunG → π0(BunG) ∼= π1(G) ∼= Z is given
by attaching a vector bundle on X its Chern class.
Proof. The point is to show that GX∗ is contained in the neutral connected com-
ponent of LG, and then it follows π0(BunG) ∼= π0(Grx) so we can use Theorem
1.3.11. We refer to [5, (1.2)] for the proof of the claim.
(cid:3)
Remark 4.1.10. (i) Note that GX∗ itself may not be connected. In fact, it was proved
in [5] that π0(GX∗

) ≃ H1(X∗, π1(G)) (in the case char k = 0).

Xinwen Zhu

51

(ii) For the generalisation of this result to non-constant group schemes, we

refer to [37].

4.2. Line bundles and conformal blocks. The uniformization theorem is in par-
ticular useful for the study of line bundles on BunG. Here is the main theorem.

Theorem 4.2.1. Assume that G is simply-connected. Then the pullback induces an
isomorphism u∗

x : Pice(BunG) → Pice(Grx).

In particular, if G is simple, then Pice(BunG) ∼= Z. The ample generator O(1)

of GrG descends to a generator of Pice(BunG), still denoted by O(1).

The injectivity of the map is easy. By the uniformization theorem, rigidi-
ﬁed line bundles on GrG are the same as the GX∗-equivariant line bundles on
GrG. Therefore, the corollary is equivalent to the statement that any charac-
ter GX∗
→ Gm is trivial. This last statement was proved in [47, Corollary 5.2].
However, since the geometry of GX∗ is still very complicated, it is not easy to
deduce the surjectivity part of the theorem from the one point uniformization
theorem. Theorem 4.2.1 was proved in [47] for classical groups and G2 by ex-
plicitly constructing the line bundle on BunG whose pullback is O(1) (similar to
the discussion in Remark 2.4.3). Then the full theorem was proved by Sorger
[71] when char k = 0 (using some non-vanishing result of the space of conformal
blocks) and by Faltings [24, Theorem 17] in general. In the next subsection, we
will deduce this theorem from another uniformization theorem.

Now assume that k = C (or any algebraically closed ﬁeld of characteristic zero).
Let L be a line bundle on BunG. Global sections of L are usually called non-
abelian theta functions (because when G = Gm they are classical theta functions).
Let gX∗

= g ⊗ OX(X∗). This is the Lie algebra of GX∗.

Lemma 4.2.2. The Kac-Moody central extension (i.e. the Lie algebra of (2.5.1)) splits
uniquely over gX∗
embeds into the Kac-Moody algebra gΓ (cf. § 2.5) as
a subalgebra.

and therefore gX∗

Proof. By the explicit formula in Remark 2.5.4 and the residue theorem, the central
extension splits over gX∗. Since [g, g] = g, such splitting is unique.
(cid:3)

In physics, the integrable representation Lm(gΓ ) is the space of vacuum states
of the WZW conformal ﬁeld theory, and HomgX∗ (Lm(gΓ ), k) is called the space
of conformal blocks. Combining the above uniformization theorem and the Borel-
Weil type Theorem 2.5.5, we obtain

Corollary 4.2.3. Assume that G is simple and simply-connected. The space of level m
non-abelian theta functions on BunG is isomorphic to the dual of the conformal block. I.e.

Γ (BunG, O(m))∗ ≃ Lm(gΓ )/gX∗

Lm(gΓ ),

where O(m) = O(1)⊗m.

52

An introduction to afﬁne Grassmannians and the geometric Satake equivalence

The dimension of the space of conformal blocks is calculated by the so-called
Verlinde formula. As a consequence, one also obtains the dimension of the space
of non-abelian theta functions on BunG. For example, we have

Corollary 4.2.4. Let G = SLn. Then

dim Γ (BunG, O(m)) = (

n

n + m

)g XS⊂{1,...,m+n}
|S|=n Ys∈S

t6∈S

g−1

.

(cid:12)(cid:12)(cid:12)(cid:12)2 sin π

s − t

m + n(cid:12)(cid:12)(cid:12)(cid:12)

In particular, the right hand side is a positive integer! See [3, Corollary 8.6].

Corollary 4.2.5. Assume that G is of A, D, E type, then dim Γ (BunG, O(1)) = |Z(G)|g,
where Z(G) is the center of G, and g is the genus of X.

In particular, if G = E8, there is a unique divisor on BunG that deﬁnes O(1).
It would be very interesting to ﬁnd this divisor geometrically (this question was
asked by Faltings, see [25]).

For further discussions and applications of the one point uniformization theo-

rem, we refer to [3, 5, 37, 47, 71, 72]. See also [44, 45].

4.3. Adèlic uniformization. We have seen some important applications of the
uniformization of BunG by Grx. However, in practice there are several limita-
tions of this uniformization theorem. First of all it only works for semisimple
group. More seriously, the geometry of the ﬁbers of ux, which are GX∗-torsors,
are still complicated, so some questions about BunG cannot be easily accessible
by studying Grx (e.g. Theorem 4.2.1). In this subsection, we introduce another
uniformization of BunG to overcome of these difﬁculties.

Recall the the following result of A. Weil. Assume that k is algebraically closed
and let X be a smooth connected projective curve over k. Let |X| denote the set of

closed points. Let O =Qx∈|X| Ox be the ring of integral adèles and A =Q ′ Fx

be the ring of adèles, which is the restricted product of Fx over all closed points
x ∈ |X|: an element in A is a collection of (fx ∈ Fx)x∈|X| such that fx ∈ Ox for all
but ﬁnitely many x. Let η denote the generic point of X, and Fη the fractional ﬁeld
of X. Note that the natural embedding Fη ⊂ Fx deﬁnes a diagonal embedding
Fη ⊂ A. Let G be a ﬁberwise connected smooth afﬁne group scheme over X, and
write G = G ⊗ Fη. Then

Lemma 4.3.1. There is a natural bijection

(4.3.2)

BunG(k) ≃ G(Fη)\G(A)/G(O),

Proof. Let E be a G-torsor on X. Since Fη is a ﬁeld of cohomological dimension
one, the G-torsor E ⊗ Fη is trivial by Steinberg’s theorem. We choose such a trivial-
isation βη : E ⊗ Fη ≃ E0 ⊗ Fη. It extends to a trivialisation over some open subset
U ⊂ X. On the other hand, for every x ∈ |X|, E|Dx is also trivial and we ﬁx such
a trivialisation βx : E|Dx ≃ E0|Dx. Then (β|D∗
) is an automorphism
of the trivial G-torsor on D∗
x and therefore deﬁnes an element gx ∈ G(Fx). Note

) ◦ (β−1

x |D∗

x

x

Xinwen Zhu

53

that for x ∈ |U|, gx ∈ G(Ox) and therefore, from the triple (E, βη, {βx}x∈|X|) we
construct an element (gx) ∈ G(A). Different choices of βη and βx will modify
this element by left and right multiplication by elements from G(Fη) and from
G(O). Therefore, E gives rise to a well-deﬁned element in G(Fη)\G(A)/G(O).
This deﬁnes a map BunG(k) → G(Fη)\G(A)/G(O). Conversely, given an element
g = (gx) ∈ G(A), there exists an open subset U ⊂ X such that gx ∈ G(Ox) for
x ∈ |U|. Then one can construct E on X by gluing the trivial torsor on U and
on Dx, x ∈ |X| \ |U| using gx ∈ G(Fx) = Aut(E0|D∗
) as transition maps. This
construction gives the inverse map.
(cid:3)

x

We will describe an algebro-geometric version of (4.3.2), which will be called

the adèlic uniformization of BunG. The ﬁrst question is to endow the set G(A)/G(O)
with an algebro-geometric structure. In fact, there are two natural solutions to this
question.

The ﬁrst solution uses the Ran Grassmannian GrRan (Deﬁnition 3.3.2). While
an element in G(A)/G(O) can be interpreted as a pair (E, βη), where E is a G on
X and βη is section of E over η (or equivalently over some open subset U ⊂ X),
a k-point of GrRan also specify a set of points on X at which βη may fail to be a
regular map. One can get rid of the redundancy as follows (following [30, § 2]).
Recall that the Ran space Ran = Ran(X) has a semigroup structure by union of

points. There is an “action” map

act : Ran ×GrRan → GrRan

sending (x, (y, E, β)) ∈ Ran(R) × GrRan(R) to (x ∪ y, E, β|XR−Γx∪y ). The “quotient”
presheaf, denoted by GrRan,indep, then is deﬁned as the coequalizer of the diagram

Ran ×GrRan

act
−−−→−−−→
pr2

GrRan.

Concretely, GrRan,indep(R) is the quotient of GrRan(R) by the equivalence relation:
(x, E, β) ∼ (x ′, E ′, β ′) if there is an isomorphism α : E ∼= E ′ of G-torsors on XR
compatible with β and β ′ when restricted to XR − Γx∪x ′. It follows by deﬁnition
that

GrRan,indep(k) = G(A)/G(O).

However GrRan,indep is in general not a space unless G is the trivial group (in
which case GrRan,indep is a point). Fortunately, the fpqc sheaﬁﬁcation of GrRan,indep
exists and can be described explicitly as follows.

We say an open subscheme U ⊂ XR very dense if it is ﬁberwise dense, i.e. the
composition U → XR → Spec R is faithfully ﬂat. Note that ﬁnite intersections
of very dense open subsets are very dense. We deﬁne GrG,Rat(X) as the prestack
that assigns every k-algebra R the following groupoid: objects are triples (E, U, β)
where E is a G-torsor on XR, U ⊂ XR is a very dense open subscheme, and β is a
trivialisation of E on U; morphisms from (E, U, β) to (E ′, U ′, β ′) are isomorphisms
α : E ∼= E ′ such that β ′α|U∩U ′ = β|U∩U ′.

54

An introduction to afﬁne Grassmannians and the geometric Satake equivalence

We write GrG,Rat(X) by GrRat for simplicity if G and X are clear from the context.

We need

Lemma 4.3.3. The above groupoid is discrete, and GrRat is in fact a sheaf.

Proof. We need to show that there is no non-trivial automorphism for any object
(E, U, β). I.e., let R be a k-algebra and E be a G-torsor over XR. Let α : E → E be
an automorphism. If α|U = id, then α = id. By embedding E into some afﬁne
space over XR, it reduces to show that if f is a regular function on XR, such that
its restriction to some very dense open subset is zero, then f = 0. Note that this is
not completely trivial since we do not assume that R is reduced. It follows from
the following lemma.
(cid:3)

Lemma 4.3.4. Let X be a quasi-projective variety, and Z ⊂ X be a ﬁnite (possibly empty)
set of closed points, regarded as a closed subscheme. Let U ⊂ XR be an open dense subset
such that: (i) ZR ⊂ U; and (ii) U → Spec R is surjective. Then there is an open cover of
Spec R by Spec Ri and relative Cartier divisors Di ⊂ XRi such that ZR ∩ Di = ∅, and
XRi

\ Di ⊂ U ⊗R Ri.

We recall that on an afﬁne space X = Spec A, a Cartier divisor D is by deﬁnition
a closed subscheme deﬁned by one equation f = 0 for some f ∈ A that is not a
zero divisor (cf. [74, Tag01WQ]). Then from the deﬁnition the localisation map
A → Af is injective and therefore any function that vanishes on X \ D will vanish
on the entire X.

Proof. We reduce to the following situation: X = Spec A is afﬁne, and S = Spec R,
and U = Spec A ⊗k R \ V(a), where a is an ideal of A ⊗k R, and V(a) ∩ Z = ∅.
The subjectivity of U → S then is equivalent to the condition that Im(a ⊗R K →
A ⊗k K) 6= 0, where K = Frac(R/p) for every prime ideal p of R. We ﬁx such a p
and are free to shrink S around x = V(p).

Writing R as the union of ﬁnitely generated k-algebras, and by shrinking U,
we can assume that R is ﬁnitely generated and that the image of U → Spec R
contains x. Let ¯f be such a non-zero element in Im(a ⊗R R/p → A ⊗k R/p) such
that V( ¯f) ∩ ZK = ∅, and let f ∈ a be a lifting of ¯f. Then by [74, Tag00ME], the
multiplication map f : A ⊗k Rp → A ⊗k Rp is injective and the quotient is Rp-ﬂat.
Since R is noetherian, by shrinking S if necessary around x, we can assume that
R → Rp is injective. Then f : A ⊗k R → A ⊗k R is injective. Again by shrinking
S if necessary, we can assume that V(f) does not contain vertical divisors and
V(f) ∩ Z = ∅. Then f : A ⊗k R/q → A ⊗k R/q is injective for every prime ideal q in
R. Therefore, (A ⊗k R/f)q is ﬂat over every Rq and therefore A ⊗k R/f is ﬂat over
R. Then D = V(f) is the sought-after relative Cartier divisor.
(cid:3)

Clearly, the map (x, E, β) 7→ (E, U = XR − Γx, β) realises GrRan,indep as a sub-

presheaf of GrRat.

Lemma 4.3.5. The space GrRat is the fpqc sheaﬁﬁcation of GrRan,indep.

Xinwen Zhu

55

Proof. It is enough to show that fpqc locally every point Spec R → GrRat can be
lifted to a point of GrRan,indep. Let (E, U, β) represent an R-point of GrRat. By
Lemma 4.3.4, Zariski locally on Spec R, we can assume that U = XR \ D for some
relative Cartier divisor D ⊂ XR. Recall that the presheaf that assigns every R
the set of relative Cartier divisors on X is represented by symmetric powers of
X. On the other hand, the symmetrisation map Xd → X(d) is ﬁnite faithfully ﬂat.
Therefore, after a ﬁnite faithfully ﬂat base change of R, we can assume that U is
the complement of Γx for some x : Spec R → Xd.
(cid:3)

Next, we need an algebro-geometric structure on G(Fη). Again there are two
solutions. We will only introduce GRat := GRat(X), which is the one corresponding
to GrRat. It assigns every R the groupoid of pairs (U, α), where U is very dense
open on XR and α ∈ G(U). Again, this is a sheaf of groups. The following lemma
is easy.

Lemma 4.3.6. GRat(X) depends only on G ⊗ Fη. We have GRat(X)(k) = G(Fη).

Now we can state an algebro-geometric version of (4.3.2).

Theorem 4.3.7. Assume that the generic ﬁber of G is reductive. The morphism uRat :
GrRat → BunG is a GRat-torsor and therefore induces an isomorphism

[GRat(X)\GrRat] ∼= BunG.

Precisely, for every Spec R → BunG, there is a faithfully ﬂat map Spec R ′ → Spec R
such that Spec R ′ ×BunG GrRat is GRat-equivariantly isomorphic to Spec R ′ × GRat.
Proof. The basic ingredient of this proposition is the same as in Theorem 2.3.7.
Namely every G-torsor on XR admits a reduction to a Borel over some very dense
open subset after a faithfully ﬂat base change Spec R ′ → Spec R. To prove this,
by Lemma 4.3.6 we can modify some ﬁbers of G to make it a Bruhat-Tits group
scheme (see Remark 3.1.4 for the deﬁnition) over X and then apply [37, Corollary
26]. But since Gm and Ga-torsors can be trivialised Zariski locally, the theorem
follows.
(cid:3)

One reason to introduce the above adèlic uniformization theorem of BunG is
because the geometry of the ﬁbers of uRat are surprisingly “simple”. Namely, the
group space GRat(X) in some sense behaves like a point. We justify this assertion
by the following theorem. Recall that for a k-space F (or a k-prestack), it makes
sense to talk about its ring of regular functions, the Picard groupoid of line bun-
dles (see (0.3.3)).
In [31, § 2], it was also explained how to deﬁne the (ℓ-adic)
(co)homology of a prestack.

Theorem 4.3.8. Let R be a k-algebra of ﬁnite type.

(1) Every regular function on GRat ⊗ R is the pullback of a regular function on

Spec R.

(2) Every line bundle on GRat ⊗ R is the pullback of a line bundle on Spec R.

56

An introduction to afﬁne Grassmannians and the geometric Satake equivalence

(3) The map GRat ⊗ R → Spec R induces an isomorphism of (ℓ-adic) homology.

Part (1) and (2) are due to Beilinson-Drinfeld (see [11, Proposition 4.3.13] and
[10, § 4.9.1]). Part (3) is due to Gaitsgory-Lurie (see [30] and [31, Theorem 3.3.1]).

Proof. We refer to [31] for Part (3), and only explain (1) in the case when G = Gm
or Ga. The general case reduces to this special case (using Lemma 4.3.6).

We can choose an ample line bundle L on X. For n ≫ 0, let Vn = Γ (X, Ln),

and let V ′

n = Vn \ {0}. Then there are maps

pn : V ′

n × V ′

n → (Gm)rat(X), pn : Vn × V ′

n → (A1)rat(X)

given by pn(f, g) 7→ f/g. By Lemma 4.3.4, every map S → (Gm)rat(X) (or
S → (A1)rat(X)) Zariski locally on S factors through pn for some n large enough.
Given a regular function ϕ on Yrat(X) ⊗ R, its pullback gives a regular function
n) ⊗ R) which is invariant with respect to
nϕ on (V ′
p∗
n). Choose n large enough
the obvious action of Gm on V ′
nϕ extends to a Gm-invariant regular function on
so that dim Vn > 1. Then p∗
(Vn × Vn) ⊗ R, which necessarily comes from R. This proves (1). One can simi-
larly argue for (2).
(cid:3)

n) ⊗ R (or on (Vn × V ′

n (or on Vn × V ′

n × V ′

n × V ′

To make this theorem more useful, we need the following companion state-

ment. By deﬁnition, there are the following sequence of maps

and uRan = w · uRat. We have the following result.

GrRan

w→ GrRat

uRat→ BunG,

Theorem 4.3.9.

(1) The pullback along w induces an isomorphism of spaces of regular functions.
(2) The pullback along w induces an equivalence of Picard groupoids of rigidiﬁed line

bundles.

(3) The pushforward along w induces an isomorphism of ℓ-adic homology.

Note that this theorem is non-trivial even when G is the trivial group. In this

case, we state it as the following proposition.

Proposition 4.3.10.

(1) Every regular function on Ran X ⊗ R is the pullback of a regular function on

Spec R.

(2) The natural map Ran X ⊗ R → Spec R induces an isomorphism of (ℓ-dic) homol-

ogy.

Proof. Again, we refer to [30] and [31, § 2] for (2). To prove (1), we make use of
the following lemma.

Lemma 4.3.11. Let f ∈ R[[x, y, z]] be a power series in x, y, z with coefﬁcients in R. If f
is invariant under permutations of x, y, z and if f(x, x, y) = f(x, y, y), then f(x, x, x) is
constant.

Xinwen Zhu

57

We leave this lemma as an interesting exercise. By factoring XI → Ran(X) as
XI ∆→ XI⊔I⊔I → Ran(X), one sees that every function on Ran ⊗R, when pullback
to XI ⊗ R, comes from a regular function on Spec R. (1) then follows.
(cid:3)

Now we explain Part (1) of Theorem 4.3.9. Recall the deﬁnition of the space
of regular functions on a prestack (cf. (0.3.2)). Since Ga is a sheaf, according to
Lemma 4.3.5,

Γ (GrRat, O) = Hom(GrRat, Ga) = Hom(GrRan,indep, Ga) = Γ (GrRan,indep, O)

and by deﬁnition, the latter is isomorphic to the equaliser of the following se-
quence

Γ (GrRan, O)

Γ (Ran ×GrRan, O).

act∗
−−−→−−−→
pr∗
2

2. There is a natural
Therefore, to prove (1), it is enough to show that act∗ = pr∗
map (qRan, id) : GrRan → Ran ×GrRan sending (x, E, β) to (x, (x, E, β)). In addition

act ◦(qRan, id) = pr2 ◦ (qRan, id) = id.

By Proposition 4.3.10 (1), pr∗
isomorphism which in turn implies that act∗ = pr∗
be proved similarly.

2 is an isomorphism. It follows that (qRan, id)∗ is an
2. Part (2) of Theorem 4.3.9 can

Corollary 4.3.12.

(1) The pullback along uRan induces an isomorphism of spaces of regular functions.
(2) It induces an equivalence of Picard groupoids of rigidiﬁed line bundles.
(3) The pushforward induces an isomorphism of homology of GrRan and BunG.

Remark 4.3.13. (i) Note that by combining Theorem 3.4.1 and Part (2) of Corollary
4.3.12, we obtain a natural proof of Theorem 4.2.1.

(ii) Part (3) of Corollary 4.3.12 is one of the key steps in Gaitsgory-Lurie’s proof

of Weil’s conjecture on Tamagawa number for global function ﬁelds (cf. [31]).

5. The geometric Satake equivalence

In this lecture, we discuss the geometric Satake equivalence, which is a corner-
stone of the geometric Langlands program. We will assume that k is algebraically
closed unless otherwise stated. Let O = k[[t]] and F = k((t)), and let G denote a
reductive group over k. Let G = G ⊗k O. For simplicity, we will write Gr for GrG
if the group G is clear.

We ﬁx a prime number ℓ different from the characteristic of k. Sheaves will
mean Qℓ-sheaves, and all pushforward and pullback are derived. Let us mention
that the geometric Satake equivalence can also be formulated in two other sheaf
(1) If char k = 0, one can work with D-modules (see [11, § 5.3]); (2)
contents.
if k = C, one can work with sheaves of E-vector spaces under analytic topology
on Gr, where E is ﬁeld of characteristic zero. The approach given below also
applies to these contents. On the other hand, there are versions of the geometric

58

An introduction to afﬁne Grassmannians and the geometric Satake equivalence

Satake equivalence for Zℓ- and Fℓ-sheaves, or when k = C, for sheaves of Λ-
modules, where Λ is a commutative noetherian ring of ﬁnite global dimension
(e.g. Λ = Z). The following approach then is insufﬁcient. One needs to refer to
[53] for the extension to general coefﬁcients.

We also mention that there is a geometric Satake equivalence for p-adic groups.

We refer to [82] for details.

5.1. The Satake category SatG. First, the action of L+G on Gr satisﬁes Condition
(S) in § A.1.4, since each orbit is of the form Grµ = L+G/(L+G ∩ tµL+Gt−µ) and
L+G ∩ tµL+Gt−µ is connected. Therefore the construction of § A.1.4 gives the
category PL+G(Gr) of L+G-equivariant perverse sheaves on Gr. Denote by ICµ
the intersection cohomology sheaf on Gr6µ. Then ICµ|Grµ = Qℓ[(2ρ, µ)], and
its restriction to each stratum Grλ is constant. Again since L+G ∩ tµL+Gt−µ is
connected, irreducible objects of PL+G(Gr) are exactly these ICµ’s.

Proposition 5.1.1. The category PL+G(Gr) is semisimple.
Proof. We need to show that Ext1(ICλ, ICµ) = 0 for any λ and µ. The essential
case is λ 6 µ or µ 6 λ. In this case, the vanishing follows from: (i) purity of the
stalk cohomology of IC sheaves of (afﬁne) Schubert varieties (cf. [42]); and (ii)
parity of the dimension of L+G-orbits in each connected component of Gr (see
Lemma 2.1.11). We refer to [28, Proposition 1] (see also [68, Proposition 3.1]) for
details.
(cid:3)

Here is a consequence.

Corollary 5.1.2. Objects in PL+G(Gr) are Aut+(D)-equivariant.
Proof. Since every IC sheaf must be Aut+(D)-equivariant (by Lemma A.1.2). (cid:3)

There is natural a monoidal structure on PL+G(Gr), deﬁned by Lusztig’s convo-
lution product of sheaves. Namely, for A1, A2 ∈ PL+G(Gr), we denote by A1 ˜⊠A2
the “external twisted product” of A1 and A2 on Gr ˜×Gr (see § A.1.2 and § A.1.4).
˜⊠ICµ2 is canonically isomorphic to the inter-
For example, if Ai = ICµi, then ICµ1
section cohomology sheaf of Gr6µ1 ˜×Gr6µ2. Then the convolution product of A1
and A2 is deﬁned as
(5.1.3)
where m : Gr ˜×Gr → Gr is the convolution map (deﬁned by (1.2.13)). This is an
L+G-equivariant ℓ-adic complex on Gr. Similarly, one can deﬁne the n-fold con-
volution product A1 ⋆ · · · ⋆ An = m!(A1 ˜⊠ · · · ˜⊠An) using the n-fold convolution
map (1.2.15). Note that since m is ind-proper, m! = m∗.

A1 ⋆ A2 := m!(A1 ˜⊠A2),

Proposition 5.1.4. The convolution product A1 ⋆ A2 is perverse.

This is called a miraculous theorem in [11]. It allows us to stay in the world of
abelian monoidal categories rather than the more involved notion of triangulated
monoidal categories. Another miracle for SatG is Lemma 5.2.4.

Xinwen Zhu

59

There are essentially two different approaches to this proposition. The ﬁrst ap-
proach is based on some semi-inﬁnite geometry of afﬁne Grassmannians (which
will be introduced in § 5.3 below) in one way or another. It was used by Lusztig
to prove a numerical result of the afﬁne Hecke algebra [50] that is equivalent to
the proposition (see [32, Proposition 2.2.1]), and by Mirkovi´c-Vilonen to prove
the semismallness of the convolution map that is also equivalent to the propo-
sition (see [53, Lemma 4.3, 4.4] and Remark 5.1.6 below).
It was also used in
[57, Corollary 9.7] (see also [82, § 2.2]) to give a direct proof of this proposition.

The second approach is based on Beilinson-Drinfeld Grassmannians. Using
nearby cycles functor Gaitsgory proved a stronger result: Namely in Proposition
5.1.4, A1 can be any perverse sheaf on Gr (note that no equivariance condition on
A1 is needed in order to deﬁne the external twisted product). See Remark 5.4.7
below.

We need a corollary of Proposition 5.1.4. Let µ• = (µ1, . . . , µn) be a sequence

of dominant coweights. By Proposition 5.1.1 and 5.1.4, we can write

ICµ1 ⋆ · · · ⋆ ICµn =Mλ

V λ
µ• ⊗ ICλ,

where V λ

µ• = HomP(Gr)(ICλ, ICµ1 ⋆ · · · ⋆ ICµn). Let |µ•| =P µi.

Corollary 5.1.5. There is a canonical isomorphism

V λ
µ•

∼= H(2ρ,|µ•|−λ)

c

(Grµ• ∩ m−1(tλ), Qℓ),

and the latter vector space has a basis given by irreducible components of Grµ• ∩ m−1(tλ)
of dimension (2ρ, |µ•| − λ).
Proof. Let d = dim Grµ• ∩ m−1(tλ). By stratifying Gr6µ• as ⊔µ ′
•, a spectral
sequence argument shows that the degree 2d − (2ρ, |µ•|) stalk cohomology of
ICµ1 ⋆ · · · ⋆ ICµn at tλ is given by
H2d

c (Grµ• ∩ m−1(tλ), Qℓ).

•Grµ ′

It follows from the perversity of ICµ1 ⋆ · · · ⋆ ICµn that 2d − (2ρ, |µ•|) 6 −(2ρ, λ), or
equivalently d 6 (ρ, |µ•| − λ). In addition, V λ
µ• equals to the degree −(2ρ, λ) stalk
cohomology of ICµ• at tλ. The corollary follows.
(cid:3)

Remark 5.1.6. (i) Note that the argument also implies that
dim Gr6µ• ∩ m−1(tλ) 6 (ρ, |µ•| − λ).

It follows that the convolution map is semismall. But in general, there might
exists irreducible component of Gr6µ• ∩ m−1(tλ) of dimension strictly smaller
than (ρ, |µ•| − λ). See [36, Remark 4.3, 8.3] for examples.

(ii) Sometimes these Gr6µ• ∩ m−1(tλ) are called Satake ﬁbers.

In the case
G = GLn, sometimes they can be identiﬁed with the Springer ﬁbers (see Exam-
ple 2.1.18). In particular, it implies the semismallness of the Springer resolution
˜Nn → Nn.

60

An introduction to afﬁne Grassmannians and the geometric Satake equivalence

By identifying (A1 ⋆ A2) ⋆ A3 and A1 ⋆ (A2 ⋆ A3) with A1 ⋆ A2 ⋆ A3, one equips

the convolution product with natural associativity constraints. We call the monoidal
category (PL+G(Gr), ⋆) the Satake category, and sometimes denoted by SatG for
simplicity.

In this subsection, we will ﬁrst endow the
5.2. SatG as a Tannakian category.
hypercohomology functor H∗ : SatG → VectQℓ
with a monoidal structure follow-
ing [82, § 2.3]. Then we will explain how to upgrade the monoidal structure on
(SatG, H∗) to a symmetric monoidal structure. The actual proofs will be based on
the later interpretation of the convolution product as a fusion product.
Proposition 5.2.1. The hypercohomology functor H∗ : SatG → VectQℓ
monoidal structure.

has a canonical

The idea is as follows. First assume that k = C so we can regard Gr and Gr ˜×Gr
as inﬁnite dimensional complex analytic spaces as in § 1.6. Note that the category
PL+G(GrG) can also be deﬁned via the analytic topology. It is easy to see that the
following holds (see [32, Proposition 2.1.1]).
Lemma 5.2.2. Under the isomorphisms in Theorem 1.6.1, A1 ˜⊠A2 on Gr ˜×Gr is identi-
ﬁed with A1 ⊠ A2 on ΩK × ΩK.

It follows from the Künneth formula that H∗(−) := H∗(Gr, −) : SatG → VectQℓ

admits a monoidal structure as claimed in Proposition 5.2.1.

If k is general, Theorem 1.6.1 and the above lemma do not literally make sense.
There are two alternative approaches to make sense of these topological isomor-
phisms. One is based on a deformation from Gr ˜×Gr to Gr × Gr via Beilinson-
Drinfeld Grassmannians, which will be explained in § 5.4. Here we explain the
other approach using equivariant cohomology, which has the advantage of being
purely local (i.e. independent of the choice of a curve).

Recall that for A ∈ SatG, its L+G-equivariant cohomology H∗

L+G(A) is a free
RG-module (cf. § A.1.3). By (informally) thinking L+G-equivariant sheaves on
Gr as sheaves on L+G\LG/L+G, there should exist another RG-module structure
on H∗
L+G(A), which can be literally constructed as follows. Let L+G(m) ⊂ L+G
denote the m-th congruence subgroup (i.e. the kernel of the projection L+G →
LmG), and let Gr(m) = LG/L+G(m) denote the universal LmG-torsor on Gr. Then
Gr(m) admits an action of L+G × LmG and the projection

is L+G-equivariant. Then by (A.1.8),

πm : Gr(m) → Gr

L+G(A) = H∗
giving an RG-bimodule structure on H∗
pendent of m, as soon as m > 0.

H∗

mA),

L+G×LmG(π∗
L+G(A). Note that this structure is inde-

Recall that the category of bimodules of a (unital) algebra R has a standard

monoidal structure (M, N) 7→ M ⊗R N. We have

Lemma 5.2.3. For every A1, A2, . . . , An, there is a canonical isomorphism of RG-bimodules

Xinwen Zhu

61

H∗

L+G(A1 ⋆ · · · ⋆ An) ∼= H∗

L+G(A1) ⊗RG · · · ⊗RG H∗

L+G(An),

satisfying the natural compatibility conditions. Therefore, there is a natural monoidal
structure on H∗

L+G(−) : SatG → (RG ⊗ RG) -mod.

This is a variant of Soergel’s idea to attach equivariant sheaves on (afﬁne) ﬂag
varieties to Soergel bimodules. Here we just explain the idea of constructing a
map in the case n = 2 and Ai = ICµi. The general case is similar (e.g. see
[82, § 2.3]). We assume that the action of L+G on Gr6µ2 factors through LmG
so Gr6µ1 ˜×Gr6µ2 = Gr(m)
×LmG Gr6µ2. By the deﬁnition of the convolution
6µ1
product and (A.1.8)

H∗

L+G(ICµ1 ⋆ ICµ2 ) = H∗

L+G×LmG(π∗

mICµ1 ⊠ ICµ2 ).

On the other hand by the equivariant Künneth formula (A.1.12), there is a canon-
ical isomorphism

H∗

L+G(ICµ1 ) ⊗RG H∗

L+G(ICµ2 ) ∼= H∗

L+G×LmG(π∗

mICµ1 ⊠ ICµ2 ).

Putting them together, we obtain the desired isomorphism.

Another ingredient we need is

Lemma 5.2.4. The two RG-structures on H∗

L+G(A) coincide.

Proof. We explain the ideas and refer to [82, § 2.3] for details. Using Lemma
2.1.13 and Lemma 2.1.14, it is easy to prove the lemma for A = ICµ where µ is
minuscule or quasi-minuscule. Then by Lemma 5.2.3, the statement holds for the
convolutions of these ICµs. Finally, every A ∈ SatG appears as a direct summand
of these convolutions (this is a geometric version of the so-called PRV conjecture,
which was proved in [57, Proposition 9.6]). The lemma follows.
(cid:3)

Remark 5.2.5. This lemma is speciﬁc to the case G = G ⊗ O. For example, it is not
true for equivariant perverse sheaves on the afﬁne ﬂag variety FℓG (see Remark
1.2.10 for the terminology).

Note that combining Proposition 5.2.3 and 5.2.4, we actually endow the equi-

variant hypercohomology functor

H∗

L+G : SatG → ProjRG

a canonical monoidal structure, where as before ProjRG
denotes the category of ﬁ-
nite projective RG-modules, equipped with the usual tensor product. By (A.1.11),
after specialising along the augmentation map RG → Qℓ, we obtain the desired
monoidal structure on H∗.

We leave it as an exercise to verify that when k = C, the above monoidal
structure on H∗ coincides with the one constructed using the homeomorphism
Gr ˜×Gr ∼= Gr × Gr.

62

An introduction to afﬁne Grassmannians and the geometric Satake equivalence

Having endowed H∗ with a monoidal structure, we now explain the con-
struction of the commutativity constraints on SatG that makes H∗ a symmetric
monoidal functor. The key statement is as follows.

Proposition 5.2.6. For every A1, A2 ∈ SatG, there exists a unique isomorphism c ′
A1 ⋆ A2

∼= A2 ⋆ A1 such that the following diagram is commutative

A1,A2

:

H∗(A1 ⋆ A2)

H∗(c ′
−−−−−−−→ H∗(A2 ⋆ A1)

A1,A2

)

H∗(A1) ⊗ H∗(A2)

H∗(A2) ⊗ H∗(A1),

∼=−−−−→

cgr

where the vertical isomorphisms come from Proposition 5.4.9, and the isomorphism cgr is
the commutativity constraint for graded vector spaces, i.e.

cgr(v ⊗ w) = (−1)deg(v) deg(w)(w ⊗ v).

Remark 5.2.7. The readers should notice that Proposition 5.2.1 puts an additional
structure on (SatG, H∗) while Proposition 5.2.6 establishes some properties of
(SatG, H∗).

As H∗ : SatG → VectQℓ
A1,A2 is clear. The content is its existence.

is faithful (by semisimplicity of SatG), the uniqueness
It will be proved in § 5.4 after
of c ′
we interpret the convolution product as a fusion product. Note that [82, § 2.4]
suggests that there might be a purely local approach (a.k.a without using a global
curve) of this proposition.

Here is the corollary that we need. First, we can modify the constraints c ′

A1,A2
by a Koszul sign change as follows (see also [11, § 5.3.21] or [53] after Remark
6.2 for a more elegant treatment). Namely, the category PL+G(Gr) admits a Z/2-
grading induced by (2.1.10). We say A has pure parity if p(Supp(A)) is 1 or −1,
in which case we deﬁne p(A) = p(Supp(A)). Here Supp(A) denote the support
of A. Then

(5.2.8)

cA1,A2 := (−1)p(A1)p(A2)c ′

A1,A2,

if A1 and A2 have the pure parity p(A1) and p(A2). With this modiﬁed commu-
tativity constraints, the following diagram is commutative

H∗(A1 ⋆ A2)

H∗(cA1,A2
−−−−−−−→ H∗(A2 ⋆ A1)

)

H∗(A1) ⊗ H∗(A2)

H∗(A2) ⊗ H∗(A1),

∼=−−−−→
cvect

where the isomorphism cvect is the usual commutativity constraint for vector
spaces, i.e. cvect(v ⊗ w) = w ⊗ v.

∼=y

∼=y

y ∼=

y ∼=

Xinwen Zhu

63

Theorem 5.2.9. The monoidal category SatG, equipped with the above constraints cA1,A2,
form a symmetric monoidal category. The hypercohomology functor H∗ is a tensor func-
tor. In fact, (PL+G(Gr), ⋆, c, H∗) form a neutral Tannakian category.
Proof. We need to check cA2,A1 cA1,A2 = id, and the hexagon axioms. Using the
faithfulness of H∗, it is enough to prove these after taking the cohomology. Using
Proposition 5.2.6, and the fact c2
vect = id, we see that H∗(cA2,A1 cA1,A2 ) = id, and
therefore cA2,A1 cA1,A2 = id. The hexagon axioms can be proved similarly. The
second statement is clear.

To show that (PL+G(Gr), ⋆, c, H∗) is a neutral Tannakian category, we apply
[21, Proposition 1.20, Remark 2.18]. Namely, again by semisimplicity, H∗ is exact
(and faithful).
It is easy to check Condition (a)-(d) of Proposition 1.20 of ibid.
(with IC0 being the unit object). To verify Condition (e) there, one observes that
dim H∗(Gr, ICµ) = 1 if and only if dim Gr6µ = 0, in which case µ is a cocharacter
of the center ZG ⊂ G. Then IC−µ ⋆ ICµ
(cid:3)

∼= IC0.

5.3. Langlands dual group. We have seen that SatG together with the commu-
tativity constraints c and the ﬁber functor H∗ form a neutral Tannakian category
(modulo Proposition 5.2.6, which will be established in the next subsection). Let

˜G = Aut⊗ H∗

denote the Tannakian group. The next step is to give an explicit description of
this afﬁne group scheme in terms of G. First, it is easy to show that
Lemma 5.3.1. The afﬁne group scheme ˜G over Qℓ is a connected reductive group.
Proof. First note ICµ1 ⋆ ICµ2 contains ICµ1+µ2 as a direct summand since the con-
volution map Gr6µ1 ˜×Gr6µ2 → Gr6µ1+µ2 is birational. From this fact, we see
that SatG is generated as a tensor category by ﬁnitely many ICµ’s (e.g. by those
ICµ’s with µ being fundamental coweights), and there is no tensor subcategory
that contains only direct sums of ﬁnite collection of IC’s (e.g. the n-fold self con-
volution product of ICµ contains ICnµ as a direct summand). Then by [21, Propo-
sition 2.20, Corollary 2.22], ˜G is algebraic and connected. Finally, since SatG is
semisimple, ˜G is reductive ([21, Proposition 2.23]).
(cid:3)

Recall that to a connected reductive group G, one associates a quadruple
(X•, X•, Φ, Φ∨), called the root datum of G (cf. § 0.3.5). The surprising fact
is that connected reductive group over an algebraically closed ﬁeld is uniquely
determined by this combinatoric datum (up to isomorphism).
In addition, if
(X•, X•, Φ, Φ∨) arises from some G, then (X•, X•, Φ∨, Φ) also arises from some
ˆG in the sense that X• (resp, X•) is the weight lattice (resp. coweight lattice) of
the Cartan torus ˆT of ˆG, and Φ∨ ⊂ X• (resp. Φ ⊂ X•) is the corresponding root
sets (resp. coroot sets). See [73, § 1,2] for a summary. The reductive group ˆG is
usually called the Langlands dual group of G. Note that the passage from G to ˆG
is completely combinatoric and relies on the classiﬁcation theorem of reductive
groups. The following table gives some examples of this passage.

64

An introduction to afﬁne Grassmannians and the geometric Satake equivalence

SLn
G GLn
ˆG GLn PGLn

SO2n+1
Sp2n

SO2n E8
SO2n E8

Theorem 5.3.2. The Tannakian group ˜G has the root datum (X•, X•, Φ∨, Φ) and there-
fore is isomorphic to ˆG.

Remark 5.3.3. In a sense, this theorem can be regarded as a classiﬁcation free
deﬁnition of the Langlands dual group of G.

The rest of this subsection explains the idea of proving this theorem and some
applications. In the course of the proof, we will put more structures on ˜G (see
Proposition 5.3.23). Note that there is another approach of this theorem, due to
Richarz (cf. [68, § 3]).

First, it is easy to check

Lemma 5.3.4. Assume that G = T is a torus. Then the theorem holds.

Proof. Indeed, (GrT )red is a discrete set of points canonically isomorphic to X•(T ).
Then it is easy to see SatT is equivalent to the category of X•(T )-graded ﬁnite
dimensional Qℓ-vector spaces and H∗ is just the functor forgetting the grading.
The lemma then follows.
(cid:3)

To deduce the general case from this special situation, we mimic the classical
construction to deﬁne a “categorical Satake transform”, i.e. a symmetric monoidal
functor

CT : SatG → SatT ,

where T is the abstract Cartan of G.

We use notations as in § 0.3.5. We ﬁx a Borel subgroup B ⊂ G, and let T =
B/U be the abstract Cartan, where U is the unipotent radical of B. Consider the
following induced diagram

(5.3.5)

GrT

q
← GrB

i→ GrG,

Note that GrB → GrG is bijective at the level of points but is far from being
an isomorphism of ind-schemes.
Indeed, the morphism i itself is pathological.
However, each connected component of (GrB)red is locally closed in GrG. Since
we are only interested in ℓ-adic sheaves on these spaces, we can safely replace the
involved afﬁne Grassmannians by their reduced sub-ind-schemes (but to simplify
the notation we will omit the subscript red in the sequel). Then as mentioned
above, GrT ≃ X•(T ) is a discrete set of points. For λ ∈ X•(T ), we deﬁne

Sλ = i(q−1(λ)) ⊂ GrG.

Note that it is an orbit through tλ under the action of LU on GrG (via the embed-
ding LU ⊂ LG). Recall the partial order 6 on X•(T ). First, we have

Proposition 5.3.6. The union S6λ := ∪λ ′6λSλ ′ is closed and Sλ ⊂ S6λ is open dense.
In particular, Sλ is locally closed in GrG and S6λ is its closure ¯Sλ.

Xinwen Zhu

65

Proof. The proof is similar to the proof of Proposition 2.1.4 and Proposition 2.1.5.
is closed. We ﬁrst assume that Gder is simply-
First we show that ∪λ ′6λSλ ′
connected. Then points on S6λ admit the following moduli interpretation. Namely,
for a highest weight representation Vχ of G, let ℓχ be the corresponding highest
weight line. Then

S6λ =(cid:10)(E, β) ∈ Gr | β−1(ℓχ) ⊂ t−(χ,λ)(Vχ,E), for all Vχ(cid:11) .

Then as argued in Proposition 2.1.4, one can express these conditions as a collec-
tion of matrix equations, and therefore deﬁnes a closed subset. For general G, one
can pass to a z-extension to reduce to the case when Gder is simply-connected.

Then it remains to shows that if α is a positive coroot, Sλ−α is in the closure
(cid:3)

Sλ. But this follows from the construction of the curve Cλ,α in (2.1.6).

Next, we have the following relation between these LU-orbits with Schubert

and opposite Schubert cells.

Lemma 5.3.7. If the intersection Sλ ∩ Grµ is non-empty, then tλ ∈ Gr6µ.
intersection Sλ ∩ Grµ is non-empty, then tλ ∈ Gr>µ.

If the

Proof. Let 2ρ∨ denote the sum of positive coroots of G. We choose an embedding
T ⊂ B. By composition

2ρ∨
→ T ⊂ G ⊂ L+G,

Gm

the action of L+G on GrG induces a Gm-action on GrG. Then GrB becomes the
attractor of this action and GrT ⊂ GrG is the ﬁxed point subset. I.e.

Sλ =(cid:12)x ∈ GrG | lim

s→0

2ρ∨(s)x = tλ(cid:13) .

Then since Grµ is 2ρ∨(Gm)-invariant, Sλ ∩ Grµ 6= ∅ only if tλ ∈ Grµ = Gr6µ.
The same argument implies the second statement.
(cid:3)

Corollary 5.3.8. The set S<λ := ∪λ ′<λSλ ′ is the intersection of Sλ with a hyperplane
section of the ample line bundle O(1).

When char k = 0, Mirkovi´c-Vilonen proved this (cf. [53, Proposition 3.1(b)])
using the basic representation L1(gΓ ) of the corresponding Kac-Moody algebra
(cf. § 2.5). We give an alternative argument which does not rely on the Kac-
Moody theory (and works for arbitrary characteristic).
Proof. By translation by t−λ, we can assume λ = 0. It is easy to see that S0 ⊂ Gr0.
By Lemma 5.3.7, S<0 ∩ Gr0 = ∅. In other words, S<0 = S60 ∩ Θ, where we recall
from Theorem 2.4.2 that Θ is an effective Cartier divisor on (the neutral connected
component of) GrG corresponding to O(1). This ﬁnishes the proof.
(cid:3)

Now we can state the main geometric results of semi-inﬁnite orbits proved by

Mirkovi´c-Vilonen (cf. [53, § 3]).

Theorem 5.3.9.

66

An introduction to afﬁne Grassmannians and the geometric Satake equivalence

(1) If tλ ∈ Gr6µ, then Sλ ∩ Grµ is non-empty and Sλ ∩ Gr6µ is pure of dimension

(ρ, λ + µ).

(2) Let A ∈ SatG. Then (q!i∗A)λ = H∗

c(Sλ, A) is concentrated in degree (2ρ, λ).

In addition, there is a canonical isomorphism

H(2ρ,λ)

c

(Sλ, ICµ) ⊗ Qℓ((ρ, λ + µ)) ∼= Qℓ[Irr(Sλ ∩ Gr6µ)],

where the r.h.s is the Qℓ-span of irreducible components of Sλ ∩ Gr6µ.

(3) There is a canonical isomorphism of functors

H∗(−) ∼= CT :=Mλ

H∗

c(Sλ, −) : SatG → VectQℓ

.

Remark 5.3.10. Mirkovi´c-Vilonen established the theorem for a general coefﬁcient
ring Λ (when k = C). In this generality, one needs to replace ICµ in (1) by the
corresponding standard or costandard object.

Let us explain the basic ideas going into the proof of this theorem and refer
to [53, § 3] for details. Another approach to the theorem was given in [82, § 2.2],
based on some ideas of [57]. This alternative approach is necessary to establish
the geometric Satake for p-adic groups because (currently) we do have the corre-
sponding Corollary 5.3.8 in that setting (there is no Kac-Moody theory nor the
Cartier divisor Θ available in that setting).

First, it follows from Corollary 5.3.8 that if α is a simple coroot, dim(Sλ−α ∩

Gr6µ) = dim(Sλ ∩ Gr6µ) − 1. Then (1) follows by induction, starting with

(5.3.11)

Sλ ∩ Gr6µ = Sλ ∩ Grµ =(cid:14) tw0(µ)

L+Utµ ∼= A(2ρ,µ) λ = µ,

λ = w0(µ),

where w0 is the longest element in the Weyl group of G.

For (2), note that the functor q!i∗ is nothing but Braden’s hyperbolic locali-
sation functor (cf. [16]). More precisely, let B− be the opposite Borel such that
B ∩ B− = T. Then GrB− is the repeller of the 2ρ∨(Gm)-action and we have the
diagram

By Braden’s theorem,

GrT

q−
← GrB−

i−
→ GrG.

q!i∗A = (q−)∗(i−)!A,

for A ∈ SatG.

In addition, the stratiﬁcation of Sλ by {Sλ ∩ Grµ, µ ∈ X•(T )+} induces a spectral
sequence with E1-term H∗
c(Sλ, A). These consid-
erations, together with the dimension formula in (1), establish (2).

c(Sλ ∩ Grµ, A) and abutment H∗

To prove (3), the stratiﬁcation of Gr by semi-inﬁnite orbits {Sλ, λ ∈ X•(T )}
induces a spectral sequence with E1-term H∗
It
degenerates at the E1-term by degree reasons established in (ii). So there is a
natural ﬁltration on H∗ with associated graded ⊕λ H∗
c(Sλ, −). Explicitly, this is a

c(Sλ, −) and abutment H∗(−).

Xinwen Zhu

67

ﬁltration indexed by (X•(T ), 6) deﬁned as

Fil>µ H∗(A) = ker(H∗(A) → H∗(S<λ, A)),

where S<λ = ¯Sλ − Sλ. On the other hand, the stratiﬁcation of Gr by

gives another ﬁltration of H∗ as

λ := i−(q−(λ)), λ ∈ X•(T )(cid:9)
(cid:8)S−

Fil ′

<λ H∗(A) = Im(H∗
S−
<λ

(A) → H∗(A)),

(A) denotes the cohomology of the !-restriction of A to S−

where H∗
<λ. These
S−
<λ
two ﬁltrations are complimentary to each other (by Braden’s theorem and (2)),
and together deﬁne the decomposition H∗ = ⊕λ H∗

c(Sλ, −).

Remark 5.3.12. (i) It follows that both dim(Sλ ∩ Gr6µ) = (ρ, λ + µ) and dim Gr6µ −
dim(Sλ ∩ Gr6µ) = (ρ, µ − λ) tends to inﬁnity as µ goes to inﬁnity. In other words,
Sλ is inﬁnite dimensional and inﬁnite codimensional in GrG. On the other hand,
it is an orbit of LU. For this reason, Sλ is usually called a semi-inﬁnite orbit.

(ii) The intersection of Sλ ∩ S−

µ is ﬁnite dimensional, and depends only on λ − µ.
So it is usually denoted by Zλ−µ and is called the Zastava space. Note that Zλ−µ
is non-empty if and only if λ > µ.

(iii) It was also proved in [53, Theorem 3.6] that the ﬁltration and the decom-
position of H∗ do not depend on the choice of the embeddings B ⊂ G and T ⊂ B.
See also Corollary 5.3.20.

We can regard CT as a functor from SatG → SatT , and the isomorphism in

Theorem 5.3.9 (iv) as an isomorphism

(5.3.13)

H∗ ◦ CT ∼= H∗ : SatG → VectQℓ

.

Proposition 5.3.14. There is a unique monoidal structure on CT such that the isomor-
phism (5.3.13) is monoidal.

The monoidal structure on CT, if exists, is clearly unique. The existence was
proved in [53, Proposition 6.4] using the fusion product interpretation of the con-
volution product. Here we sketch an alternative approach, using equivariant
cohomology.

Proof. The monoidal structure on CT, if exists, is clearly unique. We sketch the
existence.

Recall from the above discussion that there is a ﬁltration Fil∗

>µ on H∗ such that
CT = gr H∗. It is enough to show that the monoidal structure given in Proposition
5.2.1 is compatible with this ﬁltration. Then the Verdier dual argument shows that
the complementary ﬁltration is also compatible with the monoidal structure. By
the construction of the isomorphism H∗ ∼= CT from the above discussion, the
proposition then follows.

The obvious problem is that the monoidal structure of H∗ is constructed using
the L+G-equivariant cohomology whereas Sλ is not L+G-equivariant. However,

68

An introduction to afﬁne Grassmannians and the geometric Satake equivalence

Sλ is stable under the action of the constant torus T ⊂ L+T ⊂ L+G. Then the
stratiﬁcation {Sλ} also induces a spectral sequence with E1-term H∗
T ,c(Sλ, −) and
abutment H∗
T . By degree reasons (cf. Theorem 5.3.9 (2)), the spectral sequence
degenerates at E1-term so one can lift the ﬁltration Fil>µ H∗ to a ﬁltration of H∗
T
by free RT -modules

Fil>µ H∗

T (A) = ker(H∗

T (A) → H∗

T (S<λ, A)),

so that the associate graded is ⊕λ HT ,c(Sλ, A) (which is in particular a free RT -
module). In addition, after base change along the augmentation map RT → Qℓ,
one recovers the ﬁltration on H∗. See [77, § 2.2] for more details.
L+G(A) ⊗RG RT , the monoidal structure on H∗

T (A) ∼= H∗

Since H∗

L+G constructed
T by base change. There-

in Proposition 5.4.9 induces a monoidal structure on H∗
fore it is enough to show that the canonical isomorphism

(5.3.15)

H∗

T (A1) ⊗RT H∗

T (A2) ∼= H∗

T (A1 ⋆ A2)

is compatible with the ﬁltration. In addition, it is enough to check this over the
generic points of Spec RT . Let us write Hη = H∗
T ⊗RT Q, where Q is the fractional
ﬁeld of RT . Applying the equivariant localisation theorem (cf. Theorem A.1.13)
we have

Hη(A) ∼=Mν

Hη(A|tν), Hη(S<λ, A) ∼= Mν<λ

Hη(A|tν).

Therefore, Fil>λ Hη(A) = ⊕ν>λ Hη(A|tν). In addition, it follows from the deﬁni-
tion of the monoidal structure on H∗
T that under these identiﬁcations, (5.3.15) is
induced by the canonical isomorphisms

Mν1+ν2=ν

Hη(A1|tν1 ) ⊗Q Hη(A2|tν2 ) ∼= Mν1+ν2=ν

Hη((A1|tν1 ) ⊗ (A2|tν2 ))

∼= Hη(A1 ⋆ A2|tν),

where the ﬁrst isomorphism is the equivariant Künneth formula (A.1.12) and the
second is again the localisation theorem.

Now the proposition follows by putting everything together.

(cid:3)

Remark 5.3.16. Mirkovi´c-Vilonen’s theory generalises to parabolic subgroups. Let
P ⊂ G be a parabolic subgroup and LP be the Levi quotient. Then we have the
induced diagram

GrL

q
← GrP

i→ GrG.

Given A ∈ SatG, one can then deﬁne q!i∗A as a complex of sheaves on GrL. By
choosing an appropriate one-parameter subgroup of G we can also regard it as a
hyperbolic localization functor and therefore q!i∗A is perverse (up to some shifts).
Then we have the parabolic version of CT = CTG
T

such that that CTG

T ◦ CTG
L .

CTG
T = CTL

L : SatG → SatL, A 7→ q!i∗A[shifts],

Xinwen Zhu

69

Applying Proposition 5.2.6, we see that CT in fact respects to the symmetric
monoidal structure, and thus is a tensor functor between two Tannakian cate-
gories. It thus induces a homomorphism

ˆT ∼= ˜T → ˜G.

This deﬁnes a subtorus of ˜G.

Lemma 5.3.17. This is a maximal torus.

˜G. Then
Proof. Indeed, let Lµ = H∗(ICµ) be an irreducible representation of
under the decomposition given by Theorem 5.3.9 (3), H(2ρ,λ)
(Sλ, ICµ) is the λ-
weight subspace of Lµ. By (5.3.11), dim H(2ρ,µ)
(Sµ, ICµ) = 1. This implies that
all the characters of Lµ are linearly independent. Therefore, the representation
˜G is a subring of the representation ring of ˜T, which implies that ˜T is
ring of
maximal.
(cid:3)

c

c

Remark 5.3.18. Note that T (deﬁned as the abstract Cartan) is not a subgroup of
G, but its Langlands dual ˆT is canonically a subgroup of ˜G.

We continue the proof of the theorem.
Let ℓµ = H(2ρ,µ)

c

(Sµ, ICµ). Note that the natural map (up to scalar)

Lµ1 ⊗ Lµ2 → Lµ1+µ2

sends ℓµ1 ⊗ ℓµ2 to ℓµ1+µ2, since the monoidal structure on H∗ is compatible with
the ﬁltration Fil on H∗. Therefore via the Plücker relation, the collection {ℓµ ⊂
Lµ, µ ∈ X•(T )+} deﬁnes a Borel subgroup ˜B ⊂ ˜G, and ˜T ⊂ ˜B.
It follows by
deﬁnition that µ is the highest weight (with respect to ˜B) of the representation
Lµ. Therefore, the set of dominant coweights X•(T )+ coincide with the set of
dominant weights X•( ˜T )+ of ˜T with respect to ˜B.

Recall the following description of the semigroup ˜Q+ ⊂ X•( ˜T ) generated by
positive roots of ˜G. A weight λ ∈ ˜Q+ if and only if there exists a highest weight
representation Lµ such that µ − λ appears as a weight of Lµ. By Theorem 5.3.9,
this is equivalent to the existence of some µ such that tµ−λ ∈ Gr6µ, which is
equivalent to λ being a sum of positive coroots of G. Therefore the semigroup
(Q∨)+ ⊂ X•(T ) generated by positive coroots of G coincides with the semigroup
˜Q+. It then follows that the set of simple coroots of G coincide with the set of
simple roots of ˜G. To ﬁnish the proof of Theorem 5.3.2, it remains to prove the
following lemma.

Lemma 5.3.19. A root datum (X•, X•, Φ, Φ∨) is uniquely determined by the semi-
group X•+ of dominant weights and the set ∆ ⊂ Φ of simple roots.

Proof. Indeed, X•+ determines the dominant Weyl chamber of X• ⊗ R, and there-
fore the Weyl group W. Then Φ = W(∆). We leave the details as an exercise. (cid:3)

Note that the above arguments also give the following corollary.

70

An introduction to afﬁne Grassmannians and the geometric Satake equivalence

Corollary 5.3.20. The grading on the hypercohomology functor H∗ corresponds to the
one parameter subgroup

2ρ : Gm → ˜T ⊂ ˜G,

where the cocharacter 2ρ ∈ X•( ˜T ) = X•(T ) is the sum of positive coroots of ˜G.

In particular, ˜T is the centraliser of 2ρ(Gm) in ˜G and ˜B is the unique Borel that con-
tains ˜T and such that 2ρ is dominant with respect to ˜B. Therefore, ( ˜T , ˜B) is independent
of the choice of T ⊂ B and B ⊂ G.

At the end of this subsection, we give a few applications of the geometric
Satake equivalence. First it produces certain “canonical bases” for representations
of ˆG.

Theorem 5.3.21.

(1) Via Theorem 5.3.9 (2), irreducible components of Sλ ∩ Gr6µ provide a natural

basis of the λ-weight space of Lµ.

(2) Via Corollary (5.1.5), irreducible components of Gr6µ• ∩ m−1(tλ) of dimension

(ρ, |µ•| − λ) provide a natural basis of HomG(Vλ, Vµ1 ⊗ · · · ⊗ Vµn ).

Bases in (1) are usually called Mirkovi´c-Vilonen bases, and irreducible com-
ponents of Sλ ∩ Gr6µ are usually called MV cycles. Bases in (2) are sometimes
called Satake bases.

Next, we give some cute applications of the geometric Satake equivalence to

topology.

Example 5.3.22. (i) We have a canonical isomorphism

H∗(Gr(i, n)) ∼= ∧i(

Qℓ[−2j](−j)).

n−1Mj=0

(ii) Let Xn ⊂ Pn+1 be the smooth n-dimensional quadric. Then

j=0 Qℓ[−2j](−j)

H∗(Xn) ∼=(cid:14) Ln
Ln
j=0 Qℓ[−2j](−j)L Qℓ[−n](− n

n is odd,
2 ) n is even.

The proof is by identifying Gr(i, n) and Xn as minuscule Schubert varieties of
PGLn, SOn+2.

Recall that if k = C, Gr ∼= ΩK and therefore is an H-space. As a result, the
cohomology ring H∗(Gr) has a natural graded commutative and cocommutative
Hopf algebra structure. If k is general, this still holds. Namely, the convolution
map m : Gr ˜×Gr → Gr induces a comultiplication for the equivariant cohomology

H∗

L+G(Gr) ⊗RG H∗
L+G(Gr).
The similar statement in Lemma 5.2.4 holds for H∗
L+G(Gr). Therefore, we can
specialise along RG → Qℓ, which induces a comultiplication of usual cohomology.

L+G(Gr) → H∗

Xinwen Zhu

71

By the classiﬁcation of such Hopf algebras, H∗(Gr) = U(a) (or H∗(ΩK) = U(a)
if k = C), where a is the primitive part of H∗(GrG). Since H∗(Gr) acts on H∗(A)
by the cup product, a general Tannakian formalism induces a map a → ˆg = Lie ˆG.

Theorem 5.3.23. We ﬁx an isomorphism Qℓ(1) ≃ Qℓ.

(1) The Chern class c1(O(1)) ∈ a and its image in ˆg is a principal nilpotent element

N of ˆg.

(2) The map a → ˆg is injective and identiﬁes a with the centraliser of N in ˆg.
(3) ( ˜G, ˜B, ˜T, N) is a canonical pinning of ˜G.

(1) and (2) were proved in [32, §4] and [77]. We only mention that N is prin-
cipal nilpotent is a consequence of the hard Lefschetz theorem for intersection
cohomology (cf. [32, Lemma 4.4.2]). (3) was proved in [77]. This theorem in par-
ticular gives a description of the based loop group of a compact Lie group when
k = C.

Remark 5.3.24. (i) There is an integral version of this theorem, formulated in terms
of homology of Gr ([77, Theorem 1.1]). The proof relies on the integral version of
the geometric Satake equivalence [53].

(ii) One can similarly describe the equivariant cohomology H∗

L+G(Gr) by the
regular centraliser of ˆg, see [13, Theorem 2.12] and [77, Proposition 6.6]. This is
the ﬁrst step towards the study of L+G-equivariant derived category DL+G(Gr)
(also known as the derived Satake category) as in [14].

5.4. Fusion product. The factorization structure of the Beilinson-Drinfeld Grass-
mannians allow us to interpret the convolution product (5.1.3) as a fusion product,
which in term allows one to easily deduce Proposition 5.2.1 and Proposition 5.2.6
together.

First, by the same procedure to deﬁne PL+G(GrG) (as in § A.1.4), we have
(GrXI ) of (L+G)XI-equivariant perverse sheaves on
the abelian category P(L+G)
(GrXI ) as the full
GrXI. Following Reich (cf. [66]), we deﬁne SatXI ⊂ P(L+G)
subcategory of those sheaves that are ULA with respect to the morphism qI :
GrXI → XI (see § A.2 for a review of the ULA property). By Theorem 3.2.1 and
Theorem A.2.6, for every φ : J → I, there is a functor

XI

XI

(5.4.1)

∆(φ)• := (νφ)∗[|I| − |J|] ∼= (νφ)![|J| − |I|] : SatXJ → SatXI.

Given a surjective map φ : J ։ I = {1, 2, . . . , n}, we have the convolution map

from the convolution Grassmannian to the Beilinson-Drinfeld Grassmannian

mφ : GrXJ1 ˜× · · · ˜×GrXJn → GrXJ.

For Ai ∈ SatXJi , one can form the “external twisted product” A1 ˜⊠ · · · ˜⊠An on
GrXJ1 ˜× · · · ˜×GrXJn using (3.1.22). Then one can deﬁne the “external convolution
product”

A1(cid:3)⋆ A2(cid:3)⋆ · · · (cid:3)⋆ An := (mφ)!(A1 ˜⊠ · · · ˜⊠An).

Here is the crucial statement.

72

An introduction to afﬁne Grassmannians and the geometric Satake equivalence

Proposition 5.4.2.

(1) The complex A1(cid:3)⋆ A2(cid:3)⋆ · · · (cid:3)⋆ An belongs to SatXJ and therefore, there is the well

deﬁned external convolution product functor

(cid:3)⋆ i∈I : SatXJ1 × · · · × SatXJn → SatXJ,

(A1, . . . , An) 7→ A1(cid:3)⋆ · · · (cid:3)⋆ An.

(2) There is a canonical isomorphism

(5.4.3)

A1(cid:3)⋆ · · · (cid:3)⋆ An

∼= j!∗((A1 ⊠ · · · ⊠ An)|X(φ))

where j : X(φ) → XJ denotes the open embedding and (A1 ⊠ · · · ⊠ An)|X(φ) is
regarded as a perverse sheaf on GrXJ ×XJ X(φ) via the isomorphism (3.2.3).

Proof. First note that if all Ais are ULA, then so is A1 ˜⊠ · · · ˜⊠An. This is because
locally (in smooth topology), the support Supp(A1 ˜× · · · ˜×An) is isomorphic to
the product Supp(A1) × · · · × Supp(An). Then the claim follows from Theorem
A.2.5 (3) and (4)’.

Now applying Theorem A.2.5 (2), we see that A1(cid:3)⋆ · · · (cid:3)⋆ An is ULA with re-
In addition, it is perverse when restricted to X(φ), since

spect to GrXJ → XJ.
under the isomorphism (3.2.3)

A1(cid:3)⋆ A2(cid:3)⋆ · · · (cid:3)⋆ An|X(φ) = A1 ⊠ · · · ⊠ An|X(φ),

by Lemma 3.1.23. Therefore, it follows by Theorem A.2.6 that it is perverse and
∼= j!∗((A1 ⊠ · · · ⊠ An)|X(φ) ). Finally, the (L+G)XJ-equivariance is
A1(cid:3)⋆ · · · (cid:3)⋆ An
clear.
(cid:3)

Let us deduce consequences ((i)-(iii) below) from this proposition. In particular
we will obtain another proof of Proposition 5.2.1 and a proof of Proposition 5.2.6.
(i) Combining with (5.4.1), we can deﬁne the internal convolution product

functor on each SatXJ as
(5.4.4)

⋆ i∈I : ×i∈ISatXJ → SatXJ, A1 ⋆ A2 ⋆ · · · ⋆ An := ∆•(A1(cid:3)⋆ A2(cid:3)⋆ · · · (cid:3)⋆ An),

where ∆ : XI → (XI)n is the diagonal embedding and ∆• = ∆∗[−(n − 1)|I|]. By
the same reasoning as for SatG, each SatXJ is a monoidal category.

Remark 5.4.5. One may try to deﬁne the internal convolution product ⋆ on the
(GrXJ ) using the same formula (5.4.4). However, the following
whole P(L+G)
example shows that ⋆ is not perverse exact on this bigger category and this is
one of the reasons we impose the ULA condition on the sheaves.

XJ

Assume G = {e} is trivial. Then PL+G(GrX) is nothing but the category of
perverse sheaves on X and SatX is the category of local systems on X shifted to
degree −1. Then by deﬁnition,

A1(cid:3)⋆ A2 = A1 ⊠ A2, A1 ⋆ A2 = A1 ⊗ A2[−1].

In particular, if either A1 or A2 is a skyscraper sheaf, then A1 ⋆ A2 is not perverse.

Xinwen Zhu

73

Note that we have a natural functor

SatG → SatX, A 7→ AX := Qℓ ˜⊠A[1],

where AX = Qℓ ˜⊠A[1] is the external twisted product on GrX = X ˜×Gr (see
(3.1.10)).
Lemma 5.4.6.

(1) The functor A 7→ AX is fully faithful.
(2) For each n, there is a canonical isomorphism

(A1 ⋆ · · · ⋆ An)X

∼= (A1)X ⋆ · · · ⋆ (An)X.

In particular, there is a natural monoidal structure on the functor SatG →
SatX, A 7→ AX.

Proof. Note that both maps in the diagram X ˜× Supp(A) ← ˆX+ × Supp(A) →
Supp(A) can be written as inverse limit of smooth surjective maps with geomet-
rically connected ﬁbers. Then (1) follows from [7, Proposition 4.2.5]. (2) follows
from the canonical isomorphism

X ˜×(Gr ˜× · · · ˜×Gr) ∼= GrX ˜× · · · ˜×GrX|∆.

(cid:3)

Remark 5.4.7. Note that this lemma together with Proposition 5.4.2 gives a proof
of Proposition 5.1.4. In fact, it proves a stronger statement (as in the remark after
Proposition 6 of [28]) since there is no need to assume that A1 is L+G-equivariant.

(ii) Note that (qI)∗A is ULA on XI. Let

(5.4.8)

H∗(A) :=Mi

Hi(qI)∗A[i].

This is a graded local system on XI by Theorem A.2.5 (1). It follows that there is
a canonical isomorphism

(5.4.9)

H∗(A1(cid:3)⋆ · · · (cid:3)⋆ An) ∼= H∗(A1) ⊠ · · · ⊠ H∗(An).

since this holds over X(φ) by the Künneth formula. We thus obtain a functor
H∗ : SatXI → Locgr(XI) to the category of graded local systems on XI, compatible
with the external convolution and tensor product. As a consequence, the functor
H∗ has a natural monoidal structure with respect to the internal convolution and
tensor product

H∗ : (SatXI, ⋆ ) → (Locgr(XI), ⊗).

For every point ix : {x} → X, taking the stalk i∗
from Locgr(X) to the category of graded vector spaces Vectgr
Qℓ
the graded commutativity constraints cgr. Although i∗
the point x, the composition

x is a symmetric monoidal functor
, both equipped with
x depends on the choice of

(5.4.10)

SatG → SatX

H
→ Locgr(X)

i∗
x→ Vectgr
Qℓ

74

An introduction to afﬁne Grassmannians and the geometric Satake equivalence

does not, and is canonically isomorphic to the hypercohomology functor H∗ by
the proper base change. We thus also obtain a monoidal structure on H∗. We
leave it as an exercise to show that this monoidal structure on H∗ coincides with
the one constructed in Proposition 5.2.1.

(iii) The expression given in the right hand side of (5.4.3) is usually called the
fusion product of A1, · · · , An. This interpretation gives more visible symmetries
of the convolution product, coming from the symmetry of XI. The following
simple statements are enough to prove Proposition 5.2.6. For a more general
discussion, see Remark 5.4.12.

Let A1, A2 ∈ SatX. Recall that there is an involution ∆(σ) : GrX2 ∼= GrX2, see
It follows from that proposition and (5.4.3) that there is a

Proposition 3.1.13.
canonical isomorphism

such that the following diagram is commutative

∆(σ)∗(A1(cid:3)⋆ A2) ∼= A2(cid:3)⋆ A1

σ∗H∗(A1(cid:3)⋆ A2)

∼= /

H∗∆(σ)∗(A1(cid:3)⋆ A2)

∼=

/ H∗(A2(cid:3)⋆ A1)

∼=

σ∗(H∗(A1) ⊠ H∗(A2))

∼=
cgr

∼=

/ H∗(A2) ⊠ H∗(A1),

where cgr is the isomorphism (say at (x, y) ∈ X2) given by

σ∗(H∗(A1) ⊠ H∗(A2))(x,y) = H∗(A1)y ⊗ H∗(A2)x
cgr
∼= H∗(A2)x ⊗ H∗(A1)y = (H∗(A2) ⊠ H∗(A1))(x,y).

Therefore,

Corollary 5.4.11. There is a canonical isomorphism c ′
that the following diagram is commutative

A1,A2

: A1 ⋆ A2

∼= A2 ⋆ A1 such

H∗(A1 ⋆ A2)

H∗(A2 ⋆ A1)

c ′
A1,A2
−−−−→
∼=

∼=y

y∼=

H∗(A1) ⊗ H∗(A2)

−−−−→ H∗(A2) ⊗ H∗(A1).

cgr

Finally, since SatG is a full subcategory of SatX and the hypercohomology

functor H∗ : SatG → VectQℓ
Remark 5.4.12. More generally, for every φ : J ։ I (I non-ordered) we have a
functor

is isomorphic to (5.4.10), Proposition 5.2.6 follows.

(cid:3)⋆f
φ

: ×i∈ISatXJi → SatXJ,

(Ai, i ∈ I) 7→ (cid:3)⋆f
φ

Ai := j!∗((⊠iFi)|X(φ) ).

(That the right hand side is ULA with respect to qI is a consequence of Propo-
ψ
sition 5.4.2.) Then by Theorem 3.2.1, we have for every K
։ I canonical

φ
։ J

/


/


/
Xinwen Zhu

75

isomorphisms of functors

(5.4.13)

and

(5.4.14)

(cid:3)⋆f
φ

= (cid:3)⋆f
ψφ

(×i∈I(cid:3)⋆f
φi

) : ×jSat

XKj → SatXK,

∆(φ)• (cid:3)⋆f
ψφ

= (cid:3)⋆f
ψ

(×i∈I∆(φi)•) : ×iSatXKi → SatXJ.

It directly follows from these formulas and [21, Proposition 1.5] that (SatXI, ⋆ )
has a tensor category structure and that H∗ : (SatXI, ⋆ ) → (Locgr(XI), ⊗) has a
tensor structure.

Example 5.4.15. We assume that G = GLn. The above construction of the com-
mutativity constraints via fusion product and Example 3.1.25 together imply that
under the identiﬁcation of Grω1,...,ω1 ∩ m−1(tλ) with a Springer ﬁber as in Ex-
ample 2.1.18, the action of the symmetric group Sm on Hom(Vλ, V ⊗m
ω1 ) coincides
with the Springer action up to a sign. In particular, it gives the Schur-Weyl duality.
Note that this identiﬁcation is also the starting point of Laumon’s construction of
automorphic sheaves from the Springer sheaf (cf. [26]).

5.5. Bootstraps. To apply the geometric Satake correspondence to the (geomet-
ric) Langlands program, it is important not to assume that k is algebraically
closed, and it is important to extend it to equivalences between SatXI (for var-
ious I) and certain categories involving the Langlands dual group ˆG.
In this
subsection, we explain how to bootstrap the previous results to obtain such ex-
tensions.

We begin with some general nonsense.

Deﬁnition 5.5.1. Let K denote a linear algebraic group over a ﬁeld E, and C
be an E-linear abelian category with inﬁnite direct sums (so it makes sense to
talk about tensoring an object in C by an E-vector space). A representation of
K in C is an object M with a morphism ρ : M → M ⊗E OK satisfying the usual
commutative diagram for a coaction. A morphism f : (M1, ρ1) → (M2, ρ2) of
K-representations is a morphism f : M1 → M2 in C intertwining ρi. The category
of K-representations in C is denoted by Rep(K, C).

In general if C does not necessarily admit inﬁnite direct sums, one ﬁrst passes
to its the ind-completion Ind C and deﬁnes Rep(K, C) as the full subcategory of
Rep(K, Ind C) consisting of those (M, ρ) whose underlying object M is in C. One
immediately checks that if C admits inﬁnite direct sums, the new deﬁnition coin-
cides with the old one.

Example 5.5.2. If C = VectE is the category of ﬁnite dimensional E-vector spaces,
then Rep(K, C) is the category of ﬁnite dimensional algebraic representations of
K, and is denoted by RepE(K) for simplicity.
Example 5.5.3. Let Γ be a proﬁnite group, and let Repc
Qℓ
continuous ℓ-adic representations of Γ. Let Rep(K, Repc
Qℓ

(Γ ) denote the category of
(Γ )) be the above deﬁned

76

An introduction to afﬁne Grassmannians and the geometric Satake equivalence

category of representations of K in Repc
Qℓ
in Rep(K, Repc
Qℓ
in the ﬁrst factor and algebraic in the second factor.

(Γ ). Then it is easy to see that an object
(Γ )) is nothing but a representation of Γ × K, that is continuous

Note that if F : C → D is an additive functor, it canonically lifts a functor

F : Rep(K, C) → Rep(K, D).

Some classical constructions in representation theory generalise to this setting.
We mention a few. Given a K-linear representation V and an object M ∈ Rep(K, C),
the tensor product M ⊗ V makes sense as an object in Rep(K, C). If C is a monoidal
abelian category, and M, N ∈ Rep(K, C), then M ⊗ N admits a natural diagonal
K-action and therefore the monoidal structure can be upgraded to a monoidal
structure on Rep(K, C). We can also deﬁne the invariant MK as the equaliser
eK→ M ⊗E OK. Then
of the map ρ : M → M ⊗ OK and the map M = M ⊗E E
M 7→ MK is a left exact functor from Rep(K, C) to C.

Now let k be a not necessarily algebraically closed ﬁeld and ¯k its separable
closure. Let Γk = Gal(¯k/k). Let G be a connected reductive group over k, G =
G ⊗k O, and let Gr denote the afﬁne Grassmannian of G. Let ˆG = Aut⊗(H∗) be the
Tannakian group of SatG ¯k, equipped with the canonical pinning from Proposition
5.3.237. We will ﬁrst explain how to deﬁne the full Langlands dual group LG as
a semi-direct product of ˆG and Γk. In fact, as we shall see, there are two versions
of LG.

As explained in [67], there is a canonical action actgeo of Γk on ˆG deﬁned as
follows. Every γ ∈ Γk induces an automorphism Gr ⊗ ¯k ∼= Gr ⊗ ¯k and therefore
the pullback γ∗ induces a tensor automorphism of SatG ¯k. In addition, there is
a canonical isomorphism αγ : H∗ ∼= H∗ ◦γ∗ of tensor functors. Then for every
g ∈ ˆG, regarded as an automorphism of the tensor functor H∗, γ(g) is the tensor
automorphism of H∗ deﬁned as

α−1
γ→ H∗ .

H∗ αγ−→ H∗ ◦γ∗ g◦id

(5.5.4)
Since the isomorphism αγ preserves the cohomological degree, actgeo preserves
2ρ : Gm → ˆG and therefore preserves ˜T ⊂ ˜B ⊂ ˆG by Corollary 5.3.20. But it does
not preserve the principal nilpotent element N from Proposition 5.3.23.

→ H∗ ◦γ∗

2ρ
→ ˆG → ˆGad admits
Let ˆGad be the adjoint quotient of ˆG. Then cocharacter Gm
a unique square root, denoted by ρad. Let cycl : Γk → Z×
ℓ be the cyclotomic
character of Γk deﬁned by the action of Γk on the ℓ∞-roots of unity of ¯k. We

deﬁne a homomorphism

χ : Γk

cycl
→ Z×
ℓ

ρad→ ˆGad(Qℓ),

which induces an action Adχ : Γk → Aut( ˆG) of Γk on ˆG by inner automorphisms.
χ preserves the pinning of ˆG deﬁned in
Lemma 5.5.5. The action actalg := actgeo ◦Ad−1
Proposition 5.3.23.

7We do not really need Theorem 5.3.2 to identify it with the one arising from the usual combinatoric
construction.

Xinwen Zhu

77

Proof. This follows from the fact that the ﬁrst Chern class c1(O(1)) is an element
in H2(GrG ⊗ ¯k, Qℓ(1))Γk. See [67, Proposition A.6] for details.
(cid:3)

Remark 5.5.6. This remark is not needed in the sequel. Recall that there is always
an action ψ : Γk → Out(G ⊗ ¯k) of Γk on G ⊗ ¯k by outer automorphisms. On the
other hand, by Theorem 5.3.2, there is a canonical isomorphism Out(G ⊗ ¯k) ∼=
Out( ˆG) = Aut( ˆG, ˜B, ˜T, N). As explained in [67], under this isomorphism, actalg
coincides with ψ.

We deﬁne the full Langlands dual group of G as
LGalg := ˆG ⋊actalg Γk.

Since Γk is proﬁnite and the action actalg of Γk on ˆG factors through a ﬁnite
quotient, we may regard LGalg as a pro-algebraic group.

On the other hand, according to the above discussion, it is also natural to

consider

LGgeo := ˆG ⋊actgeo Γk,

which is more closely related to SatG. We regard LGgeo as a topological group.

As an erratum, we pointed out that [67, Corollary A.8] was wrong. The correct

statement is as follows.
Lemma 5.5.7. Assume that χ : Γk → ˆGad(Qℓ) lifts to a continuous homomorphism
˜χ : Γk → ˆG(Qℓ). Then there is a natural isomorphism (of topological groups)

LGgeo ∼= LGalg,

(g, γ) 7→ (g˜χ(γ), γ).

Remark 5.5.8. The lifting ˜χ exists in the following cases.

(i) The cocharacter ρad lifts to a cocharacter ˜ρ : Gm → ˆG. For example, this

holds if ˆG = GLn. Note that we do not require 2 ˜ρ = 2ρ.

(ii) The cyclotomic character cycl : Γk → Z×

ℓ admits a square root, i.e. there
2 ). For example, this holds if char k = p > 0 or

exists a half Tate twist Qℓ( 1
k is a p-adic ﬁeld (p 6= ℓ).

Example 5.5.9. Here is an example when these two groups are not isomorphic. We
consider k = R and G = PGL2(R). Then LGalg = SL2 × Gal(C/R) and LGgeo =

SL2 ⋊ Gal(C/R), where the complex conjugation acts on SL2 by sending a b
c d!
d!. Note that the center of LGalg is isomorphic to Z/2 × Z/2 whereas
to  a −b

−c

the center of LGgeo is isomorphic to Z/4. Therefore, they are non-isomorphic.

Although LGgeo can not be regarded as a pro-algebraic group, one can always

embed it into a larger pro-algebraic group as follows. Let

(5.5.10)

ˆGT := ˆG ⋊ Gm

78

An introduction to afﬁne Grassmannians and the geometric Satake equivalence

where Gm acts on ˆG by inner automorphisms through ρad : Gm → ˆGad. For
example if ˆG = SL2, then ˆGT = GL2. The action actalg naturally extends to an
action of Γk on ˆGT , denoted by the same notation. Let

LGT = ˆGT ⋊actalg Γk,

which can be regarded as a pro-algebraic group. Let d : ˆGT → Gm denote the
natural projection. Then there is the following short exact sequence

1 → LGgeo → LGT d×cycl−1

−→ Gm → 1.

Remark 5.5.11. Note that ˆGT is in fact the dual group of a central extension of
G by Gm. It seems that LGT is exactly the C-group appeared in [19, Deﬁnition
5.3.2]. As suggested as above and also by [19], this seems to be a more natural
object in order to formulate the attached Galois representations to automorphic
representations.

Let Repc
Qℓ

(LGgeo) denote the category of ﬁnite dimensional continuous repre-
sentations of LGgeo that is algebraic when restricted to ˆG. There is a similarly de-
ﬁned category Repc
(LGT ). Let B be the regular representation of Gm, regarded
Qℓ
(LGT ) via the homomorphism
as an algebra object in the ind-completion of RepQℓ
d × cycl−1. Recall that for a monoidal category C and an algebra object B ∈ C,
it makes sense to talk about B-modules in C, which form a category denoted by
B -mod(C). Then there is an equivalence

B -mod(Repc
Qℓ

(LGT )) ≃ Repc
Qℓ

(LGgeo), V 7→ V ⊗B Qℓ,

where B → Qℓ is the counit map (dual to 1 ∈ Gm).

Now let SatG denote the category of L+G-equivariant perverse sheaves on Gr,
equipped with the convolution product (note that (5.1.3) is deﬁned over k). For
example if G = {e} is trivial, this is the category Repc
(Γk) of continuous ℓ-adic
Qℓ
representations of Γk with the usual tensor product. Here is the full version of
the geometric Satake equivalence.

Theorem 5.5.12. The hypercohomology functor H∗ : SatG → Repc
Qℓ
canonical equivalence

(Γk) lifts to a

(5.5.13)

F : SatG ≃ Repc
Qℓ

(LGgeo)

such that the following diagram is commutative (up to a canonical isomorphism)

SatG

Pull backy

SatG ¯k

≃−−−−→ Repc
Qℓ

(LGgeo)

yRes

≃−−−−→ RepQℓ

( ˆG).

Proof. We sketch the proof (see [68, § 5] for a different approach). Since the
pullback of a sheaf on Gr to Gr ⊗ ¯k is Γk-equivariant, by general non-sense ([67,
Lemma A.3]) the hypercohomology factors in the way as stated in the theorem

Xinwen Zhu

79

such that the diagram is commutative. It remains to prove that it is an equivalence.
We will prove this by constructing a quasi-inverse functor.

To explain the ideas, we will assume that G is split so every L+G-orbit is
deﬁned over k. Indeed, if G is non-split, one can ﬁrst pass to a ﬁnite extension
k ′/k such that Gk ′ is split and then perform a further Galois descent.

For a Schubert variety Gr6µ, let ICµ be its intersection cohomology complex
G of SatG

(so ICµ|Grµ = Qℓ[(2ρ, µ)]). We ﬁrst consider the full subcategory SatT
spanned by direct sums of ICµ(i) for µ ∈ X•(T )+, i ∈ Z.
Lemma 5.5.14.

(1) The category SatT
(2) The Tannakian group Aut⊗(H∗) is isomorphic to ˆGT deﬁned in (5.5.10).

G is a Tannakian category with a ﬁber functor given by H∗.

Proof. (1) Indeed Corollary 5.1.5 implies that SatT
G is closed under the convolution
product. In addition, as the commutativity constraints c in Proposition 5.2.6 is
Γk-equivariant (since cvect is Γk-equivariant), SatT
G is symmetric monoidal. Then
as arguing in Theorem 5.2.9, it is Tannakian.

(2) Let us denote the Tannakian group by ˜GT . There is an exact sequence

1 → ˆG → ˜GT d→ Gm → 1,

where the ﬁrst map is induced by the pullback SatT
G → SatG ¯k and the second map
is given by the full subcategory spanned by direct sums of ICe(i), i ∈ Z. There is
a splitting Gm → ˜GT of d : ˜GT → Gm corresponding to the following grading on
H∗(A)

Then as in Lemma 5.5.7, using the fact that c1(O(1)) ∈ H2(GrG ⊗ ¯k, Qℓ(1))Γk, one
concludes that ˜GT = ˆGT .
(cid:3)

( ˆGT ) ≃ SatT

G of H∗.

We will ﬁx a quasi-inverse ST : RepQℓ
Now we consider the full category SatG. We will make use of the abstract
nonsense developed at the beginning of this subsection. Let RT be the ring of
( ˆGT ) via the left
regular functions on ˆGT , regarded as an object in Ind RepQℓ
regular representation. Let RT = ST (RT ) ∈ Ind SatT
G be the corresponding ob-
ject. Since RT also admits a right regular representation, RT is in fact an object
in Rep( ˆGT , Ind SatG). Since G is split, Repc
(Γk)). An
Qℓ
object V in Rep( ˆGT , Repc
(Γk)) can be regarded as a sheaf on Spec k with an
Qℓ
action by ˆGT . Then by general nonsense, e∗V ⋆ RT makes sense as an object
ˆGT is an object in Ind SatG. We thus
Rep( ˆGT , Ind SatG), and therefore (e∗V ⋆ RT )
obtain a tensor functor

(LGT ) = Rep( ˆGT , Repc
Qℓ

Rep( ˆGT , Repc
Qℓ

(Γk)) → Ind SatG, V 7→ (e∗V ⋆ RT )

ˆGT ,

still denoted by ST , because its restriction to RepQℓ
nothing but the functor ST we ﬁx at the beginning.

( ˆGT ) ⊂ Rep( ˆGT , Repc
Qℓ

(Γk)) is

H∗(A) =Mi

Qℓ(i) ⊗ Hom(Qℓ(i), H∗(A)).

80

An introduction to afﬁne Grassmannians and the geometric Satake equivalence

Recall that we regard B = OGm as an object in Rep( ˆGT , Repc
Qℓ

(Γk)). Then

B := ST (B) = ICe ⊗ B.

Therefore ST sends B-module objects in Rep( ˆGT , Repc
Qℓ
in Ind SatG. We thus can deﬁne

(Γk)) to B-module objects

S : Repc
Qℓ

(LGgeo) ≃ B -mod(Repc
Qℓ

(LGT )) → Ind SatG : V 7→ ST (V) ⊗B Qℓ,

where as before B → Qℓ is the counit map.

Note that for V ∈ Rep( ˆGT , Repc
Qℓ

(Γk)),

H∗ ◦ST (V) = H∗((e∗V ⋆ RT )

ˆGT

) = (V ⊗ RT )

ˆGT

= V,

regarded as a representation of LGgeo. Then it follows that S is the desired quasi-
inverse of H∗ : SatG → Repc
(cid:3)
Qℓ

(LGgeo). We leave the details as an exercise.

Remark 5.5.15. The proof of the theorem can be simpliﬁed if one of conditions in
Remark 5.5.8 holds. For example, if ρ ∈ X•(T ) or if a half Tate twist exists, one
can deﬁne the normalised intersection cohomology complex

µ

= ICµ((2ρ, µ)),

ICnorm
and can deﬁne a subcategory SatN
G ⊂ SatG spanned by direct sums of these
normalised IC sheaves. This is a monoidal subcategory of SatG (by Corollary
5.1.5) and the pullback induces an equivalence
G ≃ SatG ¯k

SatN

of monoidal categories. Therefore, the ring of regular functions R on ˆG gives an
object R ∈ Rep( ˆG, Ind SatG) which can be used as a replacement of RT to deﬁne
the functor S directly.

As LGalg can be regarded a pro-algebraic group, there is the category of alge-
(LGalg). If a lifting ˜χ : Γk → ˆG(Qℓ) exists, then via
braic representations RepQℓ
(LGalg) as a full
the natural isomorphism in Lemma 5.5.7, we can regard RepQℓ
(LGgeo). Under the assumption that ρ ∈ X•(T ) or if a half
subcategory of Repc
Qℓ
Tate twist exists, it was explained in [67] how to select out a full subcategory of
(LGalg) under
SatG (denoted by Pf
the equivalence (5.5.13). The statement is particularly neat when k is ﬁnite.
Proposition 5.5.16. Assume that k = Fq is ﬁnite. Let Sat0
G ⊂ SatG denote the full
subcategory of semisimple pure perverse sheaves of weight zero. Then the equivalence
(5.5.12) restricts to an equivalence

L+G(GrG) in loc. cit.) corresponding to RepQℓ

F : Sat0

G ≃ RepQℓ

(LGalg)

Proof. See [67, Remark A.9, Proposition A.10]. Note that for A ∈ Sat0
of Γk on F(A) coincides with the natural action of Γk on ⊕i Hi(A( i
2 )).

G, the action
(cid:3)

Next, we will describe a version of the geometric Satake equivalence for all
SatXI. For simplicity, we assume that G is split and either ρ ∈ X•(T ) or a half

Xinwen Zhu

81

Tate twist exists. Then as explained above, there is a fully faithful functor

S : Rep( ˆG) ≃ SatN

G → SatG.

Let X be a curve over k. For a ﬁnite non-empty set I, let Loc(XI) denote the
category of Qℓ-local systems on XI. We also have Rep( ˆGI, Loc(XI)). There are the
following functors relating these categories. Let φ : J ։ I.

(i) the restriction ∆(φ)∗ : Rep( ˆGJ, Loc(XJ)) → Rep( ˆGI, Loc(XI)), where ˆGI

acts on ∆(φ)∗F via the embedding ˆGI → ˆGJ.

(ii) the external product ⊠i∈I :Qi∈I Rep( ˆGJi, Loc(XJi)) → Rep( ˆGJ, Loc(XJ)).

Here is the theorem.

Theorem 5.5.17. There is a canonical equivalence

SI : Rep( ˆGI, Loc(XI)) ≃ SatXI

compatible with the restriction functors and the external product functors in obvious
sense.

Remark 5.5.18. A version of the this theorem was ﬁrst proved by Gaitsgory ([29]).
In fact, he considered larger categories in both sides, namely Rep( ˆGI, P(XI)) on
(GrXI ) on the r.h.s. However, the restriction functors as in
the l.h.s and P(L+G)
(1) are not deﬁned on these bigger categories (see Remark 5.4.5). Our approach
is different from loc. cit.

XI

The following corollary plays a crucial role in [46].

Corollary 5.5.19. For each I, there is a fully faithful functor SI : Rep( ˆGI) → SatXI
such that for every surjective map φ : J ։ I, there is a canonical isomorphism of functors
∆(φ)∗SJ
ˆGI is the usual restriction functor for the embedding
ˆGI → ˆGJ.

ˆGI , where Res ˆGJ

∼= SI ◦ Res ˆGJ

We explain the ideas to prove this theorem. First, we claim that the functor

H∗ : SatXI → Loc(XI) canonically lifts to a functor

FI : SatXI → Rep( ˆGI, Loc(XI)).

Namely, let ηI be the generic point of XI, and ηI a geometric point over ηI. Since
the restriction functor

ηI : Loc(XI) → Repc
i∗
Qℓ

(Gal(ηI/ηI))

is fully faithfully, it sufﬁces to show that every H∗(A)
of ˆGI. However, since (GrXI )ηI
Theorem 5.5.12.

∼= (Qi GrX)ηI, the desired lifting follows from

To deﬁne a functor in another direction, we need an object in Rep( ˆGI, Ind SatXI )
analogous to the sheaf RT on Gr (or under our assumption the sheaf R in Remark
5.5.15). We deﬁne

ηI admits a canonical action

RX := S(R)X,

82

An introduction to afﬁne Grassmannians and the geometric Satake equivalence

which is an object in Rep( ˆG, Ind SatX) ( by the reasoning as in Theorem 5.5.12).
For general I, we deﬁne

RXI := (cid:3)⋆ i∈IRX

as the self external convolution product of RX, naturally regarded as an object in
Rep( ˆGI, Ind SatXI ).

Then we can deﬁne the functor SI : Rep( ˆGI, Ind Loc(XI)) → Ind SatXI as

SI(F) = ((eI)∗F[|I|] ⋆ RXI )

ˆGI.

We claim that for every A ∈ SatXI, there is a canonical isomorphism SIFI(A) ∼= A,
and for every F ∈ Rep( ˆGI, Loc(XI)) there is a canonical isomorphism FISI(F) ∼= F.
Note that by the ULA property, the restriction functor

SatXI → P((L+G)

XI )

ηI

((GrXI )ηI)

is fully faithful. Therefore, it is enough to construct these isomorphisms over ηI,
which reduces to Theorem 5.5.12.

From the factorization property of RXI, it is easy to check that SI’s are compat-
ible with external convolution product. By the interpretation of the convolution
product as the fusion product, FI’s are compatible with restrictions to diagonals.
The theorem then follows.

In this subsection, we
5.6. From the geometric Satake to the classical Satake.
discuss the relationship between the geometric Satake equivalence and the clas-
sical Satake isomorphism. For simplicity, we will assume that G is split over
k = Fq. The general case was discussed in [67]. Let σ denote the geometric
Frobenius automorphism of Fq. We ﬁx a half Tate twist Qℓ( 1
2 ), or equivalently
a square root q1/2 (= tr(σ, Qℓ( 1
2 ))−1) of q in Qℓ. To relate the geometric Satake
∼= C. We
with the classical Satake, we also need to choose an isomorphism ι : Qℓ
can arrange our choice of Qℓ( 1

2 ) and ι such that
ι(q1/2) ∈ R<0.

The advantage of this choice is that under ι, the trace of the geometric Frobenius
on Qℓ[i]( i

2 ) is positive for every i ∈ Z.

We will let HG denote the classical spherical Hecke algebra, consisting of G(O)-
bi-invariant Z-valued functions on G(F), equipped with the convolution product

(f ∗ g)(x) =ZG(F)

f(y)g(y−1x)dy,

where the measure is chosen such that the volume of G(O) is 1. For µ ∈ X•(T )+,
let cµ denote the characteristic function on G(O)tµG(O). Then {cµ, µ ∈ X•(T )+}
form a Z-basis of HG.

On the other hand, let R( ˆG) denote the representation ring of ˆG, which is a
Z-algebra with a basis given by characters of irreducible representations. For µ ∈
X•(T )+, let Lµ = H∗(ICµ) denote the corresponding irreducible representation
and let χµ denote the corresponding character.

Xinwen Zhu

83

The classical Satake isomorphism (or rather, Langlands’ reinterpretation) is a

canonical isomorphism

S : HG ⊗ C ∼= R( ˆG) ⊗ C.

We refer to [35] for details. Now we explain the geometric approach.

Recall that the Grothendieck fonctions-faisceaux dictionary attaches to every

A ∈ SatG (or more generally every ℓ-adic complex on GrG) a function

fA : Gr(k) → Qℓ,

(−1)itr(σx, Hi

¯x(A)),

fA(x) =Xi

where ¯x denotes a geometric point over x, Hi
¯x denotes the stalk cohomology at
¯x, and σx ∈ Gal(¯x/x) denotes the geometric Frobenius element. Since A is L+G-
equivariant, we can regard fA ∈ HG ⊗Z Qℓ. In addition, it follows from deﬁnition
that

Lemma 5.6.1. For A1, A2 ∈ SatG, fA1 ⋆A2 = fA1 ∗ fA2.
Proof. Let m : Gr ˜×Gr → Gr be the convolution map. Given x ∈ Gr(k), the
ﬁber m−1(x)(k) can be identiﬁed with {(y, y−1x) | y ∈ G(F)/G(O)}, and by
the construction there is a canonical isomorphism of stalks (A1 ˜⊠A2)(y,y−1x)
∼=
(A1)y ⊗ (A2)y−1x. Then according to our choice of the measure,

fA1 ∗ fA2 (x) =ZG(F)

fA1 (y)fA2 (y−1x)dy = Xy∈G(F)/G(O)

tr(σ ¯y, (A1 ˜⊠A2) ¯y) = fA1 ⋆A2 (x).

fA1 (y)fA2 (y−1x)

= Xy∈m−1(x)(k)

Now, let fµ = fICµ[−(2ρ,µ)], where we recall that ICµ|Grµ = Qℓ[(2ρ, µ)]. By the
purity of stalk cohomology of the intersection cohomology complex of (afﬁne)
Schubert varieties (cf. [42]), one can write

(cid:3)

(5.6.2)

where

aµλ(q)cλ,

fµ = cµ + Xλ<µ
aµλ(x) =X aµλ,ixi ∈ N[x]

are Kazhdan-Lusztig polynomials. Recall that aµλ,i = dim H2i−(2ρ,µ)
degree 2i − (2ρ, µ) stalk cohomology of ICµ at tλ.

tλ

ICµ is the

Recall that the K-group of a monoidal abelian category is a natural Z-algebra
(so called the K-ring). Then the geometric Satake equivalence induces an isomor-
phism of Z-algebras

K(SatN

G ) ∼= K(RepQℓ

( ˆG)),

where we recall SatN
G is the monoidal subcategory of SatG spanned by normalised
IC sheaves (see Remark 5.5.15). Let σq denote the geometric Frobenius of k = Fq.
Then by (5.6.2) and Lemma 5.6.1, the Grothendieck fonctions-faisceaux dictionary

84

An introduction to afﬁne Grassmannians and the geometric Satake equivalence

induces an algebra isomorphism

f : K(SatN

G ) ⊗ Qℓ → HG ⊗ Qℓ.

( ˆG)) ∼=
On the other hand, there is always a canonical isomorphism Ch : K(RepQℓ
R( ˆG) by sending [V] to its character χV . Putting together, we obtain the following
isomorphism

S ′ : HG ⊗ Qℓ

∼= K(RepQℓ
Lemma 5.6.3. Under the chosen isomorphism ι : Qℓ

Ch
( ˆG)) ⊗ Qℓ
∼= R( ˆG) ⊗ Qℓ
∼= C, S ′ = S. In particular

f−1
∼= K(SatN

G ) ⊗ Qℓ

S−1(χµ) = (−ι(q1/2))−(2ρ,µ)fµ.

The proof was sketched at the end of [67]. First, the functor CT : SatG → SatT

naturally lifts to a functor

CTN : SatN

G → SatN
T .
(Indeed, it follows from Theorem 5.3.9 (iii) that H∗
c(A) is of Tate type). Under the
Grothendieck fonctions-faisceaux dictionary and our choice of ι the functor CTN
exactly corresponds to the classical Satake transform (e.g. see [35, § 3] for explicit
formulas).

(ii) Since ιfA ∈ HG ⊗ Z[q±1/2] for every A ∈ SatN

Remark 5.6.4. (i) If one prefer not to introduce a square root q1/2, one can formu-
( ˆGT ).
late a version of the Satake isomorphism via the equivalence SatT
G
G, the isomorphism S ′ restricts
to an isomorphism HG ⊗ Z[q±1/2] ≃ R( ˆG) ⊗ Z[q±1/2]. If in addition ρ ∈ X•(T ), it
further restricts to an isomorphism HG ⊗ Z[q−1] ≃ R( ˆG) ⊗ Z[q−1]. This coincides
with the classical theory (see [35, §3]).

∼= RepQℓ

Let us also mention that the Kazhdan-Lusztig polynomials aµλ admits the
following interpretation via ˆG. Recall the pinning on ˆG given by Proposition
5.3.23. It deﬁnes an increasing ﬁltration (the Brylinski-Kostant ﬁltration) on any
representation V of ˆG as
(5.6.5)

NiV = (ker N)i+1.

For λ ∈ X•(T ), denote by V(λ) the corresponding weight subspace of V, under
the action of ˜T . Then ﬁltration (5.6.5) induces
(5.6.6)

NiV(λ) = V(λ) ∩ NiV.

The following theorem was proved in [50] and [18], and by another method in

[32, § 5] (see also [81, § 5]).

Theorem 5.6.7. For µ ∈ X•(T )+, let Lµ = H∗(ICµ) be the corresponding representa-
tion of ˆG.

aµλ(x) =Xi

dim grN

i Lµ(λ)xi.

Xinwen Zhu

85

A. Complements on sheaf theory

In this appendix, we review some sheaf theory that are used in § 5. We as-
sume that k is an algebraically closed ﬁeld. Let ℓ be a prime different from
char k. Sheaves will mean ℓ-adic sheaves. All pushforward and pullback are de-
rived. (Ind)schemes are always (ind-)of ﬁnite type over k. The standard reference
is [7].

A.1. Equivariant category of perverse sheaves.

A.1.1. Basic properties. Recall that for a scheme X over k, there is the bounded
derived category of constructible ℓ-adic complexes Db
c (X). It contains the category
of perverse sheaves P(X) as a full abelian subcategory. If X admits an action of a
linear algebraic group K (with the action map denoted by act), it makes sense to
deﬁne the abelian category of K-equivariant perverse sheaves PK(X) on X. I.e., an
object in PK(X) is a perverse sheaf F on X together with an isomorphism θ along
the two maps

act, pr2 : K × X−→

−→X,

satisfying: (i) e∗θ = id where e : X → K × X is given by the unit of K; (ii) a natural
cocycle condition on K × K × X.

Remark A.1.1. There is a more involved notion of (bounded) equivariant derived
category Db
K,c(X) of (constructible) ℓ-adic sheaves on X. It cannot be deﬁned in
a simple way as above. Instead, one can either deﬁne this category as in [12], or
view it as the derived category of ℓ-adic sheaves on the algebraic stack [X/K] (e.g.
cf. [48]). In the note, we only occasionally use this concept in a very formal way,
i.e.
there exists a good Grothendieck’s six operation formalism between these
triangulated categories (over different schemes).

By deﬁnition, there is a forgetful functor PK(X) → P(X).

Lemma A.1.2. If K is a connected algebraic group, this forgetful functor is fully faithful,
with essential image consisting of those perverse sheaves F such that act∗ F ∼= pr∗

2 F.

The signiﬁcance of this lemma is that being K-equivariant is a property rather
than an additional structure of a perverse sheaf on X. Note that the statement is
false for disconnected groups. Indeed, if K is ﬁnite, PK(pt) is equivalent to the
category of ﬁnite dimensional representations of K. The statement is also false for
the equivariant derived category.

Proof. We sketch the proof of the ﬁrst statement and leave the second statement
as an exercise. The functor is clearly faithful. Let (F1, θ1) and (F2, θ2) be two K-
equivariant perverse sheaves and ϕ : F1 → F2 be a morphism, we need to show
that it automatically intertwines with θi, i.e. we need to show that
(A.1.3)

θ−1
2 ◦ act∗(ϕ) ◦ θ1 = pr∗

2 (ϕ).

86

An introduction to afﬁne Grassmannians and the geometric Satake equivalence

Note that since K is connected, pr∗[dim K] : P(X) → P(K × X) is fully faithful
by [7, Proposition 4.2.5]. Then to check (A.1.3), it is enough to show e∗(θ−1
2 ◦
act∗(ϕ) ◦ θ1) = e∗(pr∗
(cid:3)

2 (ϕ)), which then is tautological.

We will make use the following two properties of the equivariant category.

Lemma A.1.4. Let K1 ⊂ K be a closed normal subgroup.

(1) If the action of K1 on X is free and [X/K1] is represented by an algebraic space ¯X,

then the pull back along q : X → ¯X induces an equivalence of categories

(A.1.5)

q∗[dim K1] : PK/K1( ¯X) ≃ PK(X)

(2) Assume that K1 is connected. If the action of K1 on X is trivial, then the forgetful

functor

(A.1.6)

PK(X) → PK/K1(X)

is an equivalence of categories.

Proof. By the étale descent of perverse sheaves, we can assume that X = ¯X × K1.
Then (1) follows easily. (2) follows from Lemma A.1.2.
(cid:3)

Remark A.1.7. The equivalence (A.1.5) continues to hold if one replaces PK/K1 by
the equivariant derived categories. But it is less trivial (see [12, § 2.6.2]).

A.1.2. Twisted external product. Now let p : E → X be a K-torsor and Y be a
scheme with an action of K. Let F ∈ P(X) and G ∈ PK(Y), then one can form the
twisted external product F ˜⊠G as a perverse sheaf on X ˜×Y as follows. We have
the perverse sheaf p∗F[dim K] ⊠ G on E × Y which is K-equivariant by construction.
Then by Lemma A.1.4 (i), it descends to a unique (up to a unique isomorphism)
perverse sheaf on X ˜×Y, which is our F ˜⊠G. Note that by Remark A.1.7, one can
actually deﬁne the external twisted product for ℓ-adic complexes.

A.1.3. Equivariant cohomology. Let K be a linear algebraic group over k and let
RK = H∗(BK) be the cohomology of the classifying stack of K. It is a ﬁnitely gen-
erated augmented commutative Qℓ-algebra isomorphic to a polynomial algebra.
Concretely, it can be realised as follows. Let {En → Bn} denote a sequence of
K-torsors over {Bn}, which approximates of the classifying space of K. E.g. we
can embed K into some GLr such that GLr/K is quasi-afﬁne. For n large, let
En := Sn,r be the Stiefel variety, i.e.
the tautological GLr-torsor over Gr(r, n).
Then Bn := En/K is represented by a scheme, Bn ⊂ Bn+1 is a closed embedding,
and H∗(lim−→nBn) = H∗(BK). For example, if K = T is a torus, then there is a
canonical isomorphism Spec RT

∼= LieT. If K is unipotent, then RK = Qℓ.

Let F ∈ PK(X) (or more generally F ∈ Db

the K-equivariant cohomology H∗
ogy of F as a sheaf on the quotient stack [X/K], or more concretely

K,c(X)). It makes sense to talk about
K(X, F). It can be either deﬁned as the cohomol-

K(X, F) := H∗(lim−→n(Bn ˜×X), Qℓ ˜⊠F).
H∗

Xinwen Zhu

87

From the construction, H∗

K(X, F) is a module over H∗(lim−→nBn) = RK.

It follows from the deﬁnition that if K1 ⊂ K acts freely on X with ¯X the quotient

as in Lemma A.1.4, then

(A.1.8)

H∗

K(X, q∗F) = H∗

K/K1

( ¯X, F).

On the other hand, if K1 is unipotent and acts trivially on X, then
(A.1.9)

(X, F).

K(X, F) = H∗

H∗

K/K1

Now assume that K is a connected linear algebraic group. Let F ∈ PK(X). The
Leray spectral sequence associated to the projection Bn ˜×X → Bn induces a spec-
tral sequence with the E2-term H∗(BK) ⊗ H∗(X, F) and the abutment H∗
K(X, F).
Following [33], we say that F is equivariantly formal if the spectral sequence
degenerates at E2-term.

Theorem A.1.10. If X is proper, then the intersection cohomology sheaf X, viewed as a
K-equivariant perverse sheaf on X, is equivariantly formal.

The proof relies on the theory of “weights”. See [33, Theorem 14.1]. In fact, the
same argument applies to semi-simple pure perverse sheaves of geometric origin.
For an equivariantly formal complex F, there is a non-canonical isomorphism

In particular, in this case H∗
mension of H∗(X, F). Canonically, there is an isomorphism

K(X, F) ∼= RK ⊗ H∗(X, F).
H∗
K(X, F) is a free RK-module of rank equal to the di-

(A.1.11)

H∗(X, F) ∼= H∗

K(X, F) ⊗RK

Qℓ,

where RK → Qℓ is the augmentation map. In addition, one has the equivariant
Künneth formula. Assume that both X and Y are proper and F ∈ PK(X) and
G ∈ PK(Y) are semisimple pure perverse sheaves. Then there is the canonical
isomorphism

(A.1.12)

H∗

K(X, F) ⊗RK H∗

K(Y, G) ∼= H∗

K(X × Y, F ⊠ G).

This follows from the usual Künneth formula and the degeneration of the spectral
sequence.

Let us also state the localization theorem for equivariant cohomology (see [33,
T ,c(X), one can deﬁne the

(6.2)] for the topological version). First, for F ∈ Db
T-equivariant cohomology with compact support as

H∗

T ,c(X, F) := H∗

c(lim−→n(Bn ˜×X), Qℓ ˜⊠F).

Theorem A.1.13. Let K = T be a torus acting on X and let i : X0 ⊂ X be the subscheme
of T -ﬁxed point. Then for F ∈ Db
T (X0, i!F) → H∗

T ,c(X), the natural maps
T (X, F), H∗

T ,c(X, F) → H∗
become isomorphisms after localising to the generic point of RT .

T ,c(X0, i∗F)

H∗

88

An introduction to afﬁne Grassmannians and the geometric Satake equivalence

Proof. We sketch the proof of the ﬁrst isomorphism. The second then follows
by the Verdier duality. Let j : X − X0 → X be the open complement. From the
distinguished triangle i!i!F → F → j∗j∗F →, it reduces to show that if X0 = ∅,
then H∗
T (X, F) is a torsion RT -module. We can ﬁnd a ﬁnite cover of X = ∪Xi such
that on each Xi is T-invariant and there is a non-trivial subtorus Ti ⊂ T acting on
Xi freely. Then it follows from (A.1.8) that the cohomology of H∗
T (Xi, F|Xi) is a
torsion RT -module. Therefore H∗
T (X, F) is also a torsion RT -module by a spectral
sequence argument.
(cid:3)

A.1.4. Pro-algebraic groups acting on ind-schemes. Let X be an ind-scheme. We
can deﬁne the category of perverse sheaves on X as P(X) = lim−→ P(Xi), where
X = lim−→Xi is a presentation of X as closed subschemes of ﬁnite type over k. This
is independent of the choice of the presentation.

Now assume that X admits an action by a pro-algebraic group K. We assume

that

(S)

the stabiliser of each geometric point only has

ﬁnitely many connected components.

Then it makes sense to deﬁne the category of K-equivariant perverse sheaves on
X as follows.

First, there exists a presentation X = lim−→Xi, such that each Xi is a K-stable
closed subscheme of ﬁnite type over k, and the action of K on Xi factors through
an algebraic quotient Ki. Then we can choose Ki to be an algebraic quotient of K
by a connected normal subgroup. In addition, if Xi ⊂ Xj is a closed subscheme,
we can arrange Ki to be a quotient of Kj.

Then we deﬁne PK(Xi) := PKi(Xi). By Lemma A.1.4 (ii), we see that PK(X)
is independent of the choice of Ki up to a canonical equivalence. Therefore, we
have a fully faithful functor

PK(Xi) = PKi(Xi) ≃ PKj(Xi) → PKj (Xj) = PK(Xj).

Finally, we deﬁne

PK(X) = lim−→ PK(Xi).

Now assume that E → X is a K-torsor over an ind-scheme ind-of ﬁnite type,
and Y is a K-ind-scheme satisfying (S). Let F ∈ P(X) and G ∈ PK(Y), we can
similarly deﬁne the twisted product F ˜⊠G as an object in P(X ˜×Y). Namely, F is
supported on some Xi and G is supported on some Yj. The action of K on Yj
factors through Kj. Then Eij := E|Xi ×K Ki → Xi is a Ki-torsor and

Xi ˜×Yj = E|Xi ×K Yj = Eij ×Kj Yj

is a closed subscheme of X ˜×Y. Then the construction in § A.1.2 gives F ˜⊠G as an
object in P(Xi ˜×Yj) ⊂ P(X ˜×Y).

Finally, let Ku be the pro-unipotent radical of K and assume that K/Ku is
algebraic. Let X be a K-ind-scheme satisfying (S). Then for F ∈ PK(X), we have

Xinwen Zhu

89

K(X, F), which is a module over
the well-deﬁned K-equivariant cohomology H∗
RK = H∗(B(K/Ku)). All the properties of the equivariant cohomology discussed
in § A.1.3 extend to this setting.

A.2. Universally local acyclicity. Let S be a scheme and s be a geometric point
of S, we denote by S(s) the strict Henselisation of S at s. We will formally write
t → s if t is a geometric point of S(s), and call it the specialisation map.

We recall the following deﬁnition, as in [20].

Deﬁnition A.2.1. Let f : X → S be a morphism of schemes of ﬁnite type over k.
An ℓ-adic complex F on X is called locally acyclic with respect to f if for every
geometric point x ∈ X, and every geometric point t ∈ S(f(x)), the natural map
RΓ (X(x), F) → RΓ ((X(x))t, F) is an isomorphism, where (X(x))t = X(x) ×S(f(x)) t.
It is called universally locally acyclic (ULA) if it is locally acyclic after arbitrary
base change S ′ → S.

We can reformulate local acyclicity as follows. Let f : X → S be a morphism as
above and F be an ℓ-adic complex on X. Let s be a geometric point of S and t be
a geometric point of S(s). Let jt : X ×S t → X be the natural map. We write

Ψt→s(F) := ((jt)∗j∗

tF)|Xs

and think it as the nearby cycles along the specialisation map t → s (recall that
by our convention (jt)∗ is derived). Indeed, if (S, s, η) is a strictly local Henselian
trait (i.e. S is the spectrum of a local strictly Henselian DVR with s and η its closed
and generic points) and t is a geometric point over η, Ψt→s(F) is by deﬁnition
the 1-dimensional nearby cycles Ψ(Fη) of F.

Lemma A.2.2. The complex F is locally acyclic with respect to f if and only if for every
s and t as above, the natural map

(A.2.3)

is an isomorphism.

F|Xs → Ψt→s(F)

Proof. Indeed, local acyclicity says the above map induces the isomorphism of
stalks at every geometric point x of Xs.
(cid:3)

Remark A.2.4. Note that if (S, s, η) is a trait, Lemma A.2.2 says that F is locally
acyclic with respect to f if and only if Fs → Ψ(Fη) is an isomorphism, or equiva-
lently the vanishing cycles Φ(F) vanish. Therefore, for a higher dimensional base
S, roughly speaking a sheaf F is ULA with respect to f : X → S if there are no
vanishing cycles along any direction on S. This can be made precise by introduc-
ing nearby cycles and vanishing cycles functors over higher dimensional base (cf.
[39, Example 1.7(b)]).

Here are some basic properties of ULA sheaves that we need.

Theorem A.2.5.

90

An introduction to afﬁne Grassmannians and the geometric Satake equivalence

(1) Let S be a smooth variety over k. Then a complex F on S is ULA with respect to
the identity map if and only if each cohomology sheaf Hi(F) is a local system on
S.

(2) If f : X → Y is a proper morphism over S, and assume that F is ULA with respect

to X → S. Then f∗F is ULA with respect to S.

(3) If f : X → Y is a smooth morphism over S. Then f∗F is ULA with respect to

X → S if and only if F is ULA with respect to Y → S.

(4) Let fi : Xi → S, i = 1, 2 be two morphisms and Fi a complex on Xi ULA with
respect to fi. Then F1 ⊠S F2 is ULA with respect to f1 ×S f2 : X1 ×S X2 → S.
(4)’ Let fi : Xi → Si, i = 1, 2 be two morphisms and let Fi be a complex on Xi ULA

with respect to fi. Then F1 ⊠ F2 is ULA with respect to f1 × f2.

Proof. (1) It follows by deﬁnition that an honest sheaf on S is ULA with respect to
id : S → S if and only if it is a local system. The general case follows by induction
on the cohomological amplitude of F.

(2) and (3) follow from the fact that the functor Ψt→s commutes with the
(4)’
proper push-forward and the smooth pullback.
follows from (4) by noting that for every morphism S → S1 × S2, (X1 × X2) ×S1×S2
S = (X1 ×S1 S) ×S (X2 ×S2 S).
(cid:3)

(4) is [39, Corollary 2.5].

Now we discuss a result related to ULA perverse sheaves.

Theorem A.2.6. Let f : X → S be a morphism of k-varieties with S smooth and D ⊂ S
a smooth effective divisor. Let i : Z = f−1(D) → X be the closed embedding and
j : U = X − Z → X be the open complement. If a complex F on X is ULA with respect to
f and F|U is perverse, then

F ∼= j!∗(F|U),

i!F[1] ∼= i∗F[−1].

In particular, F is also perverse. In addition, i∗F[−1] is perverse and ULA with respect
to fi.

Proof. The question is local in étale topology, so we can assume that there is a
smooth map g : S → A1 such that D = g−1(0). By [20, Lemma 2.14], F is ULA
with respect to gf : X → A1. Then we reduce to the situation f : X → A1 and
Z = f−1(0). According to Remark A.2.4, i∗F → Ψ(j∗F) is an isomorphism.
It
follows that

i∗F[−1] ∼= Ψ(j∗F)[−1] =: C

is perverse ([38, Corollary 4.5]). Using the distinguished triangle

j!j∗F → F → i∗i∗F →,

we see that F lives in perverse cohomological degree −1 and 0. In addition, it
follows from the distinguished triangle (see proof of [20, Lemma 3.11])

i∗j∗j∗F → Ψ(j∗F)P 1−t→ Ψ(j∗F)P →

Xinwen Zhu

91

that the perverse cohomology sheaf pHri∗j∗j∗F ∼= C for r = −1, 0 and vanishes
for r 6= −1, 0, where P denotes the wild inertia and t denotes a generator of the
tame inertia. It then follows from the distinguished triangle

i∗i!F → F → j∗j∗F →

that i!F[1] ∼= C, that F is perverse and that there is a short exact sequence of
perverse sheaves

0 → F → j∗j∗F → pH0j∗j∗F → 0.

This in turn implies that F ∼= j!∗j∗F.

(cid:3)

Remark A.2.7. When the base S is smooth, there is another equivalent deﬁnition
of local acyclicity as introduced in [17, § 5.1, Appendix B]. Under this other deﬁ-
nition, Theorem A.2.5 (iv) was proved by Gaitsgory (private communication) and
the rest part of Theorem A.2.5 and Theorem A.2.6 were proved by Reich in [66].

References

[1] Jarod Alper, Adequate moduli spaces and geometrically reductive group schemes, Algebr. Geom. 1

(2014), no. 4, 489–531, DOI 10.14231/AG-2014-022. MR3272912 ←11

[2] Vladimir Baranovsky and Victor Ginzburg, Conjugacy classes in loop groups and G-bundles on el-
liptic curves, Internat. Math. Res. Notices 15 (1996), 733–751, DOI 10.1155/S1073792896000463.
MR1413870 ←30

[3] Arnaud Beauville and Yves Laszlo, Conformal blocks and generalized theta functions, Comm. Math.

Phys. 164 (1994), no. 2, 385–419. MR1289330 ←15, 37, 49, 50, 52

[4] Arnaud Beauville and Yves Laszlo, Un lemme de descente, C. R. Acad. Sci. Paris Sér. I Math. 320

(1995), no. 3, 335–340 (French, with English and French summaries). MR1320381 ←16, 17

[5] Arnaud Beauville, Yves Laszlo, and Christoph Sorger, The Picard group of the moduli of G-bundles
on a curve, Compositio Math. 112 (1998), no. 2, 183–216, DOI 10.1023/A:1000477122220. MR1626025
←15, 50, 52

[6] Arnaud Beauville, Symplectic singularities,

Invent. Math. 139 (2000), no. 3, 541–549, DOI

10.1007/s002229900043. MR1738060 ←33

[7] A. A. Be˘ılinson, J. Bernstein, and P. Deligne, Faisceaux pervers, Analysis and topology on singular
spaces, I (Luminy, 1981), Astérisque, vol. 100, Soc. Math. France, Paris, 1982, pp. 5–171 (French).
MR751966 ←73, 85, 86

[8] A. A. Be˘ılinson, How to glue perverse sheaves, K-theory, arithmetic and geometry (Moscow, 1984),
Lecture Notes in Math., vol. 1289, Springer, Berlin, 1987, pp. 42–51, DOI 10.1007/BFb0078366.
MR923134 ←18

[9] Alexander Beilinson, Spencer Bloch, and Hélène Esnault, ǫ-factors for Gauss-Manin determinants,
Mosc. Math. J. 2 (2002), no. 3, 477–532. Dedicated to Yuri I. Manin on the occasion of his 65th
birthday. MR1988970 ←20

[10] Alexander Beilinson and Vladimir Drinfeld, Chiral algebras, American Mathematical Society Col-
loquium Publications, vol. 51, American Mathematical Society, Providence, RI, 2004. MR2058353
←45, 56

[11] Alexander Beilinson and Vladimir Drinfeld, Quantization of Hitchin’s integrable system and Hecke
eigensheaves, available at www.math.uchicago.edu/ mitya/langlands. ←15, 20, 29, 35, 39, 42, 56,
57, 58, 62

[12] Joseph Bernstein and Valery Lunts, Equivariant sheaves and functors, Lecture Notes in Mathematics,

vol. 1578, Springer-Verlag, Berlin, 1994. MR1299527 ←85, 86

92

References

[13] Roman Bezrukavnikov, Michael Finkelberg, and Ivan Mirkovi´c, Equivariant homology and K-
theory of afﬁne Grassmannians and Toda lattices, Compos. Math. 141 (2005), no. 3, 746–768, DOI
10.1112/S0010437X04001228. MR2135527 ←71

[14] Roman Bezrukavnikov and Michael Finkelberg, Equivariant Satake category and Kostant-Whittaker
reduction, Mosc. Math. J. 8 (2008), no. 1, 39–72, 183 (English, with English and Russian summaries).
MR2422266 ←71

[15] Bhargav Bhatt and Peter Scholze, Projectivity of Witt vector afﬁne Grassmannians, available at

http://arxiv.org/abs/1507.06490. ←22

[16] Tom Braden, Hyperbolic localization of intersection cohomology, Transform. Groups 8 (2003), no. 3,

209–216, DOI 10.1007/s00031-003-0606-4. MR1996415 ←66

[17] A. Braverman and D. Gaitsgory, Geometric Eisenstein series, Invent. Math. 150 (2002), no. 2, 287–

384, DOI 10.1007/s00222-002-0237-8. MR1933587 ←91

[18] Ranee Kathryn Brylinski, Limits of weight spaces, Lusztig’s q-analogs, and ﬁberings of adjoint orbits, J.

Amer. Math. Soc. 2 (1989), no. 3, 517–533, DOI 10.2307/1990941. MR984511 ←84

[19] K. Buzzard and T. Gee, The conjectural connections between automorphic representations and Galois

representations, available at http://arxiv.org/abs/1009.0785. ←78

[20] Pierre Deligne, Théorèmes de ﬁnitude en cohomologie ℓ-adique, Cohomologie étale, Lecture Notes
in Mathematics, Vol. 569, Springer-Verlag, Berlin-New York, 1977. Séminaire de Géométrie Al-
gébrique du Bois-Marie SGA 4 1
2 ; Avec la collaboration de J. F. Boutot, A. Grothendieck, L. Illusie
et J. L. Verdier, pp. 233–261 (French). MR0463174 ←89, 90

[21] Pierre Deligne and James S. Milne, Tannakian categories, Hodge cycles, motives, and Shimura va-
rieties, Lecture Notes in Mathematics, vol. 900, Springer-Verlag, Berlin-New York, 1982, pp. 101–
228. MR654325 ←63, 75

[22] V. G. Drinfel′d and Carlos Simpson, B-structures on G-bundles and local triviality, Math. Res. Lett.

2 (1995), no. 6, 823–829, DOI 10.4310/MRL.1995.v2.n6.a13. MR1362973 ←32, 50

[23] Vladimir Drinfeld, Inﬁnite-dimensional vector bundles in algebraic geometry: an introduction, The
unity of mathematics, Progr. Math., vol. 244, Birkhäuser Boston, Boston, MA, 2006, pp. 263–304,
DOI 10.1007/0-8176-4467-9-7. MR2181808 ←20

[24] Gerd Faltings, Algebraic loop groups and moduli spaces of bundles, J. Eur. Math. Soc. (JEMS) 5 (2003),

no. 1, 41–68, DOI 10.1007/s10097-002-0045-x. MR1961134 ←15, 29, 31, 34, 35, 37, 51

[25] Gerd Faltings, Theta functions on moduli spaces of G-bundles, J. Algebraic Geom. 18 (2009), no. 2,

309–369, DOI 10.1090/S1056-3911-08-00499-2. MR2475817 ←52

[26] E. Frenkel, D. Gaitsgory, D. Kazhdan, and K. Vilonen, Geometric realization of Whittaker functions
and the Langlands conjecture, J. Amer. Math. Soc. 11 (1998), no. 2, 451–484, DOI 10.1090/S0894-
0347-98-00260-4. MR1484882 ←75

[27] Edward Frenkel and Xinwen Zhu, Any ﬂat bundle on a punctured disc has an oper structure, Math.

Res. Lett. 17 (2010), no. 1, 27–37, DOI 10.4310/MRL.2010.v17.n1.a3. MR2592725 ←30

[28] D. Gaitsgory, Construction of central elements in the afﬁne Hecke algebra via nearby cycles, Invent.

Math. 144 (2001), no. 2, 253–280, DOI 10.1007/s002220100122. MR1826370 ←40, 58, 73

[29] D. Gaitsgory, On de Jong’s conjecture, Israel J. Math. 157 (2007), 155–191, DOI 10.1007/s11856-006-

0006-2. MR2342444 ←81

[30] Dennis Gaitsgory, Contractibility of the space of rational maps, Invent. Math. 191 (2013), no. 1, 91–196,

DOI 10.1007/s00222-012-0392-5. MR3004779 ←53, 56

[31] Dennis Gaitsgory and Jacob Lurie, Weil’s

conjecture

for

function ﬁelds, available at

http://math.harvard.edu/ lurie/papers/tamagawa.pdf. ←55, 56, 57

[32] Victor Ginzburg, Perverse

sheaves on a loop group and Langlands’ duality, available at

http://arxiv.org/abs/alg-geom/9511007. ←59, 60, 71, 84

[33] Mark Goresky, Robert Kottwitz, and Robert MacPherson, Equivariant cohomology, Koszul duality,
and the localization theorem, Invent. Math. 131 (1998), no. 1, 25–83, DOI 10.1007/s002220050197.
MR1489894 ←87

References

93

[34] Ulrich Görtz, Afﬁne Springer ﬁbers and afﬁne Deligne-Lusztig varieties, Afﬁne ﬂag manifolds and
principal bundles, Trends Math., Birkhäuser/Springer Basel AG, Basel, 2010, pp. 1–50, DOI
10.1007/978-3-0346-0288-4-1. MR3013026 ←30

[35] Benedict H. Gross, On the Satake isomorphism, Galois representations in arithmetic algebraic ge-
ometry (Durham, 1996), London Math. Soc. Lecture Note Ser., vol. 254, Cambridge Univ. Press,
Cambridge, 1998, pp. 223–237, DOI 10.1017/CBO9780511662010.006. MR1696481 ←83, 84

[36] Thomas J. Haines, Equidimensionality of convolution morphisms and applications to saturation problems,

Adv. Math. 207 (2006), no. 1, 297–327, DOI 10.1016/j.aim.2005.11.014. MR2264075 ←59

[37] Jochen Heinloth, Uniformization of G-bundles, Math. Ann. 347 (2010), no. 3, 499–528, DOI

10.1007/s00208-009-0443-4. MR2640041 ←49, 50, 51, 52, 55

[38] Luc Illusie, Autour du théorème de monodromie locale, Astérisque 223 (1994), 9–57 (French). Périodes

p-adiques (Bures-sur-Yvette, 1988). MR1293970 ←90

[39] Luc

Illusie, Around

the Thom-Sebastiani

theorem,

available

at

http://www.math.u-

psud.fr/ illusie/Illusie-nearby-cycles27d.pdf. ←89, 90

[40] Victor G. Kac, Inﬁnite-dimensional Lie algebras, 3rd ed., Cambridge University Press, Cambridge,

1990. MR1104219 ←36, 37

[41] Joel Kamnitzer, Ben Webster, Alex Weekes, and Oded Yacobi, Yangians and quantizations
of slices in the afﬁne Grassmannian, Algebra Number Theory 8 (2014), no. 4, 857–893, DOI
10.2140/ant.2014.8.857. MR3248988 ←26, 33

[42] David Kazhdan and George Lusztig, Schubert varieties and Poincaré duality, Geometry of the
Laplace operator (Proc. Sympos. Pure Math., Univ. Hawaii, Honolulu, Hawaii, 1979), Proc. Sym-
pos. Pure Math., XXXVI, Amer. Math. Soc., Providence, R.I., 1980, pp. 185–203. MR573434 ←58,
83

[43] Shrawan Kumar, Demazure character formula in arbitrary Kac-Moody setting, Invent. Math. 89 (1987),

no. 2, 395–423, DOI 10.1007/BF01389086. MR894387 ←37

[44] Shrawan Kumar, M. S. Narasimhan, and A. Ramanathan, Inﬁnite Grassmannians and moduli spaces
of G-bundles, Math. Ann. 300 (1994), no. 1, 41–75, DOI 10.1007/BF01450475. MR1289830 ←34, 52

[45] Shrawan Kumar and M. S. Narasimhan, Picard group of the moduli spaces of G-bundles, Math. Ann.

308 (1997), no. 1, 155–173, DOI 10.1007/s002080050070. MR1446205 ←52

[46] Vincent Lafforgue, Chtoucas pour les groupes réductifs et paramétrisation de Langlands globale, avail-

able at http://arxiv.org/abs/1209.5352. ←3, 81

[47] Yves Laszlo and Christoph Sorger, The line bundles on the moduli of parabolic G-bundles over curves
and their sections, Ann. Sci. École Norm. Sup. (4) 30 (1997), no. 4, 499–525, DOI 10.1016/S0012-
9593(97)89929-6 (English, with English and French summaries). MR1456243 ←15, 51, 52

[48] Yifeng Liu and Weizhe Zheng, Enhanced six operations and base change theorem for Artin stacks,

available at http://arxiv.org/abs/1211.5948. ←85

[49] G. Lusztig, Green polynomials and singularities of unipotent classes, Adv. in Math. 42 (1981), no. 2,

169–178, DOI 10.1016/0001-8708(81)90038-4. MR641425 ←26

[50] George Lusztig, Singularities, character formulas, and a q-analog of weight multiplicities, Analysis and
topology on singular spaces, II, III (Luminy, 1981), Astérisque, vol. 101, Soc. Math. France, Paris,
1983, pp. 208–229. MR737932 ←59, 84

[51] Olivier Mathieu, Formules de caractères pour les algèbres de Kac-Moody générales, Astérisque 159-160

(1988), 267 (French, with English summary). MR980506 ←35, 37

[52] James S. Milne and Kuang-yen Shih, Conjugates of Shimura varieties, Hodge cycles, motives, and
Shimura varieties, Lecture Notes in Mathematics, vol. 900, Springer-Verlag, Berlin-New York,
1982, pp. 280–356. MR654325 ←24

[53] I. Mirkovi´c and K. Vilonen, Geometric Langlands duality and representations of algebraic groups over
commutative rings, Ann. of Math. (2) 166 (2007), no. 1, 95–143, DOI 10.4007/annals.2007.166.95.
MR2342692 ←58, 59, 62, 65, 66, 67, 71

[54] I. Mirkovi´c and M. Vybornov, Quiver varieties and Beilinson-Drinfeld Grassmannians of type A. ←44

94

References

[55] David Mumford, Abelian varieties, Tata Institute of Fundamental Research Studies in Mathematics,
No. 5, Published for the Tata Institute of Fundamental Research, Bombay; Oxford University
Press, London, 1970. MR0282985 ←41

[56] David Nadler, Matsuki correspondence for the afﬁne Grassmannian, Duke Math. J. 124 (2004), no. 3,

421–457, DOI 10.1215/S0012-7094-04-12431-5. MR2084612 ←21

[57] B. C. Ngô and P. Polo, Résolutions de Demazure afﬁnes et formule de Casselman-Shalika géométrique, J.
Algebraic Geom. 10 (2001), no. 3, 515–547 (French, with English summary). MR1832331 ←27, 59,
61, 66

[58] Denis Osipov and Xinwen Zhu, A categorical proof of the Parshin reciprocity laws on algebraic surfaces,
Algebra Number Theory 5 (2011), no. 3, 289–337, DOI 10.2140/ant.2011.5.289. MR2833793 ←20,
42

[59] Denis Osipov and Xinwen Zhu, The two-dimensional Contou-Carrère symbol and reciprocity laws,

available at http://arxiv.org/abs/1305.6032. ←20

[60] G. Pappas and M. Rapoport, Twisted loop groups and their afﬁne ﬂag varieties, Adv. Math. 219 (2008),
no. 1, 118–198, DOI 10.1016/j.aim.2008.04.006. With an appendix by T. Haines and Rapoport.
MR2435422 ←11, 14, 15, 23, 29, 37

[61] G. Pappas and M. Rapoport, Φ-modules and coefﬁcient spaces, Mosc. Math. J. 9 (2009), no. 3, 625–

663, back matter (English, with English and Russian summaries). MR2562795 ←12, 30

[62] G. Pappas and X. Zhu, Local models of Shimura varieties and a conjecture of Kottwitz, Invent. Math.

194 (2013), no. 1, 147–254, DOI 10.1007/s00222-012-0442-z. MR3103258 ←12, 17, 38, 40

[63] Andrew Pressley and Graeme Segal, Loop groups, Oxford Mathematical Monographs, The Claren-
don Press, Oxford University Press, New York, 1986. Oxford Science Publications. MR900587 ←21
[64] Michael Rapoport, A positivity property of the Satake isomorphism, Manuscripta Math. 101 (2000),

no. 2, 153–166, DOI 10.1007/s002290050010. MR1742251 ←25

[65] Michael Rapoport, A guide to the reduction modulo p of Shimura varieties, Astérisque 298 (2005),

271–318 (English, with English and French summaries). Automorphic forms. I. MR2141705 ←30

[66] Ryan Cohen Reich, Twisted geometric Satake equivalence via gerbes on the factorizable Grassmannian,
Represent. Theory 16 (2012), 345–449, DOI 10.1090/S1088-4165-2012-00420-4. MR2956088 ←71, 91
[67] Timo Richarz and Xinwen Zhu, Construction of the full Langlands dual group via the geometric Satake

correspondence. Appendix to [81]. ←76, 77, 78, 80, 82, 84

[68] Timo Richarz, A new approach to the geometric Satake equivalence, Doc. Math. 19 (2014), 209–246.

MR3178249 ←58, 64, 78

[69] Peter Scholze and Jared Weinstein, p-adic geometry. ←44
[70] Jean-Pierre Serre, Local ﬁelds, Graduate Texts in Mathematics, vol. 67, Springer-Verlag, New York-

Berlin, 1979. Translated from the French by Marvin Jay Greenberg. MR554237 ←22

[71] Christoph Sorger, On moduli of G-bundles of a curve for exceptional G, Ann. Sci. École Norm.
Sup. (4) 32 (1999), no. 1, 127–133, DOI 10.1016/S0012-9593(99)80011-1 (English, with English
and French summaries). MR1670528 ←51, 52

[72] Christoph Sorger, Lectures on moduli of principal G-bundles over algebraic curves, School on Alge-
braic Geometry (Trieste, 1999), ICTP Lect. Notes, vol. 1, Abdus Salam Int. Cent. Theoret. Phys.,
Trieste, 2000, pp. 1–57. MR1795860 ←32, 34, 35, 52

[73] T. A. Springer, Reductive groups, Automorphic forms, representations and L-functions (Proc. Sym-
pos. Pure Math., Oregon State Univ., Corvallis, Ore., 1977), Proc. Sympos. Pure Math., XXXIII,
Amer. Math. Soc., Providence, R.I., 1979, pp. 3–27. MR546587 ←63

[74] Stack project authors, Stack project (2016), available at http://stacks.math.columbia.edu. ←9, 10,

11, 43, 54

[75] J. Tits, Reductive groups over local ﬁelds, Automorphic forms, representations and L-functions (Proc.
Sympos. Pure Math., Oregon State Univ., Corvallis, Ore., 1977), Proc. Sympos. Pure Math., XXXIII,
Amer. Math. Soc., Providence, R.I., 1979, pp. 29–69. MR546588 ←12, 23, 36

References

95

[76] Jacques Tits, Groupes associés aux algèbres de Kac-Moody, Astérisque 177-178 (1989), Exp. No. 700,

7–31 (French). Séminaire Bourbaki, Vol. 1988/89. MR1040566 ←36

[77] Zhiwei Yun and Xinwen Zhu, Integral homology of loop groups via Langlands dual groups, Represent.

Theory 15 (2011), 347–369, DOI 10.1090/S1088-4165-2011-00399-X. MR2788897 ←34, 35, 68, 71
[78] Zhiwei Yun, Lectures on Springer theories and orbital integrals, These Proceedings. ←9, 28, 30, 44
[79] Xinwen Zhu, Afﬁne Demazure modules and T -ﬁxed point subschemes in the afﬁne Grassmannian, Adv.

Math. 221 (2009), no. 2, 570–600, DOI 10.1016/j.aim.2009.01.003. MR2508931 ←40

[80] Xinwen Zhu, On the coherence conjecture of Pappas and Rapoport, Ann. of Math. (2) 180 (2014), no. 1,

1–85, DOI 10.4007/annals.2014.180.1.1. MR3194811 ←29, 40, 42

[81] Xinwen Zhu, The geometric Satake correspondence for ramiﬁed groups, Ann. Sci. Éc. Norm. Supér. (4)

48 (2015), no. 2, 409–451 (English, with English and French summaries). MR3346175 ←23, 84, 94
[82] Xinwen Zhu, Afﬁne Grassmannians and the geometric Satake in mixed characteristic, available at

http://arxiv.org/abs/1407.8519. ←22, 23, 27, 58, 59, 60, 61, 62, 66

Department of Mathematics, California Institute of Technology, Pasadena, CA 91125
E-mail address: xzhu@caltech.edu

