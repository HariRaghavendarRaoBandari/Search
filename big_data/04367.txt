6
1
0
2

 
r
a

 

M
4
1

 
 
]

.

A
Q
h
t
a
m

[
 
 

1
v
7
6
3
4
0

.

3
0
6
1
:
v
i
X
r
a

Associative algebras for (logarithmic) twisted

modules for a vertex operator algebra

Yi-Zhi Huang and Jinwei Yang

Abstract

We construct two associative algebras from a vertex operator algebra V and a
general automorphism g of V . The ﬁrst, called g-twisted zero-mode algebra, is a
subquotient of what we call g-twisted universal enveloping algebra of V . These algebras
are generalizations of the corresponding algebras introduced and studied by Frenkel-
Zhu and Nagatomo-Tsuchiya in the (untwisted) case that g is the identity. The other is
a generalization of the g-twisted version of Zhu’s algebra for suitable g-twisted modules
constructed by Dong-Li-Mason when the order of g is ﬁnite. We are mainly interested in
g-twisted V -modules introduced by the ﬁrst author in the case that g is of inﬁnite order
and does not act on V semisimply. In this case, twisted vertex operators in general
involve the logarithm of the variable. We construct functors between categories of
suitable modules for these associative algebras and categories of suitable (logarithmic)
g-twisted V -modules. Using these functors, we prove that the g-twisted zero-mode
algebra and the g-twisted generalization of Zhu’s algebra are in fact isomorphic.

1

Introduction

Orbifold conformal ﬁeld theories play an important role in mathematics and physics. They
are examples of conformal ﬁeld theories constructed from known conformal ﬁeld theories
and automorphisms of these known ones. Mathematically, the study of orbifold conformal
ﬁeld theories can be reduced to the study of the twisted representation theory of vertex
operator algebras, that is, the theory of representations of vertex operator algebras twisted by
automorphisms. In fact, the ﬁrst example of orbifold conformal ﬁeld theories is the conformal
ﬁeld theory corresponding to the moonshine module vertex operator algebra constructed by
Frenkel, Lepowsky and Meurman [FLM]. One conjecture proposed by the ﬁrst author in
this twisted representation theory of vertex operator algebras is that g-twisted modules for
a vertex operator algebra V satisfying suitable conditions and an element g in a group G
of automorphisms of V equipped with twisted (logarithmic) intertwining operators among
g-twisted modules for g ∈ G has a structure of G-equivariant intertwining operator algebras
satisfying a modular invariance property. This conjecture in fact implies that the category
of g-twisted V -modules has a structure of G-crossed (tensor) category in the sense of Turaev
[T].

1

Automorphisms of a vertex operator algebra can be of ﬁnite or inﬁnite orders. An ele-
ment of the Monster group gives an automorphism of the moonshine module vertex operator
algebra [FLM]. Such an automorphism is of ﬁnite order. An element of a simply connected
ﬁnite-dimensional Lie group gives an automorphism of the vertex operator algebra associated
to the aﬃne Lie algebra of the Lie algebra of the Lie group [FLM] [FZ]. Such an automor-
phism is in general of inﬁnite order. Moreover, in general it might not act on the vertex
operator algebra semisimply.

Twisted modules for a vertex operator algebra associated to an automorphism of ﬁnite
orders were introduced in the construction of the moonshine module vertex operator algebra
in [FLM]. In [H3], the ﬁrst author introduced a notion of twisted module associated to a
general automorphism whose order does not have to be ﬁnite. One important new feature
of twisted modules in the general case is that twisted vertex operators might involve the
logarithm of the variable (logarithmic g-twisted module). For a historical discussion of
twisted modules for vertex operator algebras and the relevant references, see [H3]. See also
[B] for the Jacobi identity for a suitable component of the twisted vertex operators that we
shall derive from the axioms in [H3] and use in this paper.

In the representation theory of Lie algebras, one of the most important tools is the
universal enveloping algebra of a Lie algebra. The representation theory of a Lie algebra is
equivalent to the representation theory of its universal enveloping algebra. It is natural to
try to ﬁnd associative algebras that play the similar roles in the representation theory of
vertex operator algebras.

Let V be a vertex operator algebra. Frenkel and Zhu in [FZ] ﬁrst constructed the universal
enveloping algebra U(V ) of V . V -modules of any type (even more general than the so called
weak V modules) are equivalent to U(V )-modules. Though U(V ) is very natural, it is not
very useful because in the representation theory of vertex operator algebras, we are interested
mostly in V -modules with suitable lower bounded gradings.
In [Z], Zhu constructed an
associative algebra A(V ) on a quotient of V with the product obtained from the vertex
operator map. He also constructed implicitly functors between the category of V -modules
with suitable lower bounded gradings and the category of A(V )-modules. In [H2], motivated
by the geometry of vertex operator algebras, the ﬁrst author constructed an associative
algebra ˜A(V ) using a product and a quotient that look very diﬀerent from those deﬁning
A(V ). It was also proved in [H2] that ˜A(V ) is in fact isomorphic to A(V ) by constructing
explicitly an isomorphism between them using the conformal transformation 1
2πi log(1+2πiz).
To study twisted modules for vertex operator algebras, we would also like to ﬁnd suitable
associative algebras such that the study of twisted modules can be reduced to the study
of modules for these associative algebras.
In the case that the automorphism g of the
vertex operator algebra V is of ﬁnite order, Dong, Li and Mason in [DLM1] generalized
Zhu’s construction to obtain an associative algebra Ag(V ) together with functors between
the categories of suitable g-twisted V -modules and Ag(V )-modules. This associative algebra
Ag(V ) is in fact a subalgebra of Zhu’s algebra for the ﬁxed point vertex operator algebra
under g. The construction in [DLM1] cannot be generalized directly to the case that the
order of g is inﬁnite.

2

In the present paper, for a vertex operator algebra V and an automorphism g of V ,
we ﬁrst construct a g-twisted universal enveloping algebra Ug(V ) such that g-twisted V -
modules of any type (even more general than g-twisted weak V -modules) are equivalent to
Ug(V )-modules. The construction is a straightforward generalization of the construction of
Frenkel-Zhu to the twisted case. We take the tensor algebra of the aﬃnization of V with
suitable powers of the variable and take a topological completion so that suitable inﬁnite
sums are allowed, and then divide this algebra by all the relations corresponding to the
identities that should hold for any type of g-twisted modules.

Just as in the case of V -modules, Ug(V ) is not very useful because we are interested
mostly in g-twisted V -modules with suitable lower bounded gradings. For g-twisted V -
modules graded by conformal weights, there exist lowest weight spaces.
In the case that
such a g-twisted V -module is irreducible, the lowest weight space determines the module
completely. It is natural to expect that there exists an associative algebra obtained from
Ug(V ) such that the lowest weight space of an irreducible g-twisted V -module is a module
for this algebra.

In this paper, using Ug(V ), we construct an associative algebra Zg(V ), called g-twisted
zero-mode algebra, satisfying this property. In fact, Ug(V ) is graded by conformal weights.
Take the subalgebra of Ug(V ) generated by elements of of imaginary weights and then take the
quotient of this algebra by the ideal generated by elements of the form uv where u, v ∈ Ug(V )
have weights k + m and −m for k ∈ I and m ∈ C satisfying ℜ(m) > 0. This quotient algebra
is our g-twisted zero-mode algebra Zg(V ).
We also construct an associative algebra ˜Ag(V ), generalizing the algebra ˜A(V ) in [H2],
and an isomorphic algebra Ag(V ), generalizing the algebra constructed in [DLM1] for g of
ﬁnite order. In fact, in this case, ˜Ag(V ) is more natural to work with. We give our construc-
tions and proofs mostly for ˜Ag(V ). The construction and results for Ag(V ) can be easily
derived using those for ˜Ag(V ) and the isomorphism between them. One interesting feature
in the case that the order of g is inﬁnite is that Ag(V ) is in general not a subalgebra of Zhu’s
algebra for the ﬁxed point vertex operator subalgebra under g. It is instead a subalgebra of
Zhu’s algebra for the ﬁxed point vertex operator subalgebra under the semisimple part of g.
Our main results in this paper are the constructions of functors between the categories
of suitable g-twisted V -modules, suitable Zg(V )-modules and suitable ˜Ag(V )-modules (or
Ag(V )-modules). As in the case that the order of g is ﬁnite, a suitable g-twisted V -module
W has a subspace Ωg(W ) on which the components of the twisted vertex operators whose
weights have negative real parts act as 0. It is easy to prove from the deﬁnitions that Ωg(W )
is a Zg(V )-, ˜Ag(V )- or Ag(V )-module. We then construct right inverses of these functors and
derive some consequences that will be useful for future study. Finally, using these results,
we prove that Zg(V ), ˜Ag(V ) and Ag(V ) are isomorphic to each other.

In the case that g is the identity, the g-twisted zero-mode algebra becomes the zero-mode
In [NT],
algebra, appeared ﬁrst in physics (see [BN]) and introduced rigorously in [FZ].
Nagatomo and Tsuchiya [NT] proved that the zero-mode algebra is isomorphic to Zhu’s
algebra. As a special case (the case that g is the identity), our proof that Zg(V ) and Ag(V )
are isomorphic gives in particular a diﬀerent proof that the zero-mode algebra is isomorphic

3

to Zhu’s algebra.

It seems to be easier to calculate Zg(V ) than to calculate Ag(V ) or ˜Ag(V ). On the other
hand, ˜Ag(V ) is more natural for the study of modular invariance. Ag(V ) is in some sense a
bridge connecting them. We expect that Zg(V ) will be especially useful for the construction
and study of twisted modules and twisted intertwining operators.

There are also higher zero-mode algebras Zg,n(V ) for n ∈ N as the quotient of the
subalgebra of Ug(V ) generated by elements of imaginary weights by the ideal generated by
elements of the form uv where u, v ∈ Ug(V ) have weights k + m and −m for k ∈ I and m ∈ C
satisfying ℜ(m) > n. The zero-mode algebra Zg discussed above is in fact Zg,0(V ). We can
also generalize higher Zhu’s algebras An(V ) introduced by Dong, Li and Mason in [DLM2]
to associative algebras Ag,n(V ) for n ∈ N such that Ag,0(V ) = Ag(V ) and A1,n(V ) = An(V )
when g is the identity 1. There are also ˜Ag,n(V ) for n ∈ N generalizing ˜Ag(V ). These
algebras will be important for the study of twisted logarithmic intertwining operators. But
for simplicity, we shall study only Zg(V ), ˜Ag(V ) and Ag(V ) in this paper. The general case
will be discussed in another paper.

The deﬁnition of g-twisted module in [H3] was formulated using the duality properties
of the twisted vertex operators.
It should be possible to use the duality properties and
immediate consequences to construct the associative algebras and functors above (see [HY]
for a construction of the functors between the category of modules for Zhu’s algebra A(V )
and the category of suitable V -modules without using the commutator formula for modules).
On the other hand, since twisted vertex operators are special (logarithmic) intertwining
operators, suitable components of twisted vertex operator might satisfy some Jacobi-type
identity as is discussed for intertwining operators by the ﬁrst author in [H1]. A Jacobi-type
identity will give formulas that can be used to simplify our constructions. Indeed, a Jacobi
identity for suitable components of twisted vertex operators was obtained by Bakalov in
[B]. Bakalov gave in [B] a diﬀerent deﬁnition of g-twisted V -module based on an associator
formula for the twisted vertex operators. From this deﬁnition, he derived a Jacobi identity
for the map obtained by taking the non-logarithmic component of the twisted vertex operator
map, that is, the constant term in the twisted vertex operator map when we view the twisted
vertex operator map as a polynomial in the logarithm of the variable. It was stated in [B]
that a g-twisted V -module satisfying the original deﬁnition given by the ﬁrst author in [H3]
indeed satisﬁes the deﬁnition given in [B]. But no proof was given there.

Note that the twisted vertex operators given in the deﬁnition in [H3] are the objects that
we are interested in orbifold conformal ﬁeld theory, not their non-logarithmic components.
For example, in the future, we would like to prove the modular invariance for the space of
q-(pseudo-)traces of twisted vertex operators for g-twisted V -modules, not for the space of
q-(pseudo-)traces of non-logarithmic components of twisted vertex operators for g-twisted
V -modules. Thus before we can use the Jacobi identity in [B], we need to ﬁrst show that for
suitable g-twisted V -modules, these two deﬁnitions are equivalent. We give a proof of this
equivalence in this paper. We then use freely the formulas derived from this Jacobi identity
to give our constructions and proofs.

The present paper is organized as follows: In Section 2, we recall several variants of the

4

notion of g-twisted V -module. We derive Bakalov’s Jacobi identity for the non-logarithmic
components of twisted vertex operators and some other useful properties in this section.
In this section, we also prove that when the other conditions for (generalized) g-twisted V -
modules hold, the duality property for the twisted vertex operators given in [H3] is equivalent
to the Jacobi identity for non-logarithmic components of twisted vertex operators given in
[B]. We give the constructions of g-twisted universal enveloping algebra Ug(V ) and the zero-
mode algebra Zg(V ) in Section 3. The constructions of ˜Ag(V ) and Ag(V ) are given in Section
4. Our main results, the constructions of functors between diﬀerent categories, are given in
Section 5. In Section 6, we give the proof that Zg(V ), Ag(V ) and ˜Ag(V ) are isomorphic to
each other.

2 Twisted modules

In this paper, we ﬁx a vertex operator algebra (V, Y, 1, ω) and an automorphism g of V . We

shall use the convention that log z = log |z| + arg z√−1 where 0 ≤ arg z < 2π. We shall
also use lp(z) to denote log z + 2πp√−1 for p ∈ Z. Besides the usual notations C, R, Z, Z+

and N for the sets of complex numbers, real numbers, integers, positive integers and natural
numbers, respectively, we also use I and C
to denote the set of imaginary numbers and the
closed right half complex plane.

+

In this section, we recall the deﬁnition of several variants of the notion of g-twisted V -
module and prove a number of useful properties for these g-twisted V -modules. Many of the
formulas proved in this section were obtained ﬁrst by Bakalov [B] from a diﬀerent deﬁnition
of g-twisted V -module. Here we prove them starting from the original deﬁnition in [H3]. We
also prove that when the other conditions for (generalized) g-twisted V -modules hold, the
duality property for the twisted vertex operators given in [H3] is equivalent to the Jacobi
identity for non-logarithmic components of twisted vertex operators given in [B].

For α ∈ C/Z, we denote by

V [α] = {u ∈ V | (g − e2π√−1α)Λu = 0 for some Λ ∈ Z+}

the generalized eigenspace with eigenvalue e2π√−1α for g. For α ∈ C/Z, there is a unique
a ∈ [0, 1) + I such that a + Z = α. We call a ∈ [0, 1) + I a g-weight of V if V [a+Z] 6= 0. We
use P (V ) to denote the set of all the g-weights of V . Then V = `n∈C,a∈P (V ) V [a+Z]
. Let
AV : V → V be the linear map deﬁned by AV v = av for v ∈ V [a+Z] and a ∈ P (V ).

(n)

+

Let C

⊂ C be the closed right half plane.

Deﬁnition 2.1 A C

+

-graded weak g-twisted V -module is a C

× C/Z-graded vector space
-degrees and g-weights) equipped with a linear map

+

+

W =`n∈C

+

,α∈C/Z W [α]

n

(graded by C

v ⊗ w 7→ Y g(v, x)w
and an action of g satisfying the following conditions:

Y g :V ⊗ W → W{x}[logx],

5

1. The equivariance property: For p ∈ Z, z ∈ C×, v ∈ V and w ∈ W , Y g;p+1(gv, z)w =

Y g;p(v, z)w, where for p ∈ Z,

Y g;p(v, z)w = Y g(v, x)w(cid:12)(cid:12)(cid:12)(cid:12)xn=enlp(z), log x=lp(z)

is the p-th analytic branch of Y g.

2. The identity property: For w ∈ W , Y g(1, x)w = w.
[n](cid:17)∗ and, for n ∈ C, πn : W → W[n]
,α∈C/Z(cid:16)W [α]
3. The duality property: Let W ′ = `n∈C
be the projection. For any u, v ∈ V , w ∈ W and w ′ ∈ W ′, there exists a multivalued
analytic function of the form

+

f (z1, z2) =

N

Xi,j,k,l=0

aijklzmi

1 znj

2 (logz1)k(logz2)l(z1 − z2)−t

for N ∈ N, m1, . . . , mN , n1, . . . , nN ∈ C and t ∈ Z+, such that the series

′

′

′

′

hw

, Y g;p(u, z1)Y g;p(v, z2)wi =Xn∈Chw
, Y g;p(v, z2)Y g;p(u, z1)wi =Xn∈Chw
hw
, Y g;p(Y (u, z1 − z2)v, z2)wi =Xn∈Chw

′

hw

, Y g;p(u, z1)πnY g;p(v, z2)wi,

, Y g;p(v, z2)πnY g;p(u, z1)wi,

′

, Y g;p(πnY (u, z1 − z2)v, z2)wi

are absolutely convergent in the regions |z1| > |z2| > 0, |z2| > |z1| > 0, |z2| > |z1−z2| >
0, respectively, to the branch

N

Xi,j,k,l=0

aijklemilp(z1)enj lp(z2)lp(z1)klp(z2)l(z1 − z2)−t

of f (z1, z2).

4. The C

+

+

- and g-grading conditions: For v ∈ V(m) and w ∈ Wp =`α∈C/Z W [α]

n,k(v)wx−n−1(log x)k. Then Y g

, write Y g(v, x)w = PN
Z and p ∈ C
is 0 when m − n − 1 + p 6∈ C
m − n − 1 + p ∈ C
consisting of w ∈ W such that Y g
m − n − 1 + p 6∈ C
that (g − e2π√−1α)Λw = 0. Moreover, gY g(u, x)v = Y g(gu, x)gv.

p where m ∈
k=0Pn∈C Y g
n,k(v)w
(or ℜ(m − n − 1 + p) < 0), is in Wm−n−1+p when
and for r ∈ R, `r∈R W√−1r is equal to the subspace of W
n,k(v)w = 0 for v ∈ V(m), n ∈ C, k = 1, . . . , N,
n , there exists Λ ∈ Z+ such

. For α ∈ C/Z, w ∈ W [α] =`n∈C

+ W [α]

+

+

+

6

5. The L(−1)-derivative property: For v ∈ V ,

d
dx

Y g(v, x) = Y g(L(−1)v, x).

A lower bounded generalized g-twisted V -module or simply a lower bounded g-twisted V -
-graded weak g-twisted V -module W together with a decomposition of W
module is a C

+

as a direct sum W = `n∈C W[n] of generalized eigenspaces W[n] with eigenvalues n ∈ C for
the operator Lg(0) = ResxxY g(ω, x) such that for each n ∈ C and each α ∈ C/Z, W [α]
[n+l] =
W[n+l] ∩ W [α] = 0 for suﬃciently negative real number l. A lower bounded generalized g-
twisted V -module is said to be strongly C/Z-graded or grading-restricted if it is lower bounded
and for each n ∈ C, α ∈ C/Z, dim W [α]

[n] = dim W[n] ∩ W [α] < ∞.

In the twisted representation theory of vertex operator algebras, we are mainly interested
in strongly C/Z-graded or grading-restricted generalized g-twisted modules. For simplicity,
we shall call them simply g-twisted V -modules.
In the case that g does not act on V
semisimply, since the twisted vertex operators involve not only powers of the variable but also
the logarithm of the variable, we shall also call such a g-twisted V -module a logarithmic g-
twisted V -module. Lower bounded g-twisted V -modules also often appear in the formulations
-weak g-twisted V -modules are not really needed
of certain conditions and assumptions. C
in the twisted representation theory of vertex operator algebras. They are not introduced in
[H3] because of this reason. But in this paper, they are needed in the proof of the theorem
that Zg(V ) and Ag(V ) are isomorphic. Because of this reason, we prove all the results in this
-weak g-twisted V -modules and then derive the corresponding results for lower
paper for C
bounded g-twisted V -modules and g-twisted V -modules (including logarithmic g-twisted
V -modules) as special cases.

+

+

+

,α∈C/Z W [α]

n be a C

-graded weak g-twisted V -module with the twisted

Let W = `n∈C
+ W [α]
vertex operator map Y g. For α ∈ C/Z, let W [α] = `n∈C
n . When W is a (lower
bounded) g-twisted V -module, we also have W [α] =`n∈C W [α]
[n] . As in the case of V , we call
a ∈ [0, 1) + I a g-weight of W if W [a+Z] 6= 0. Let P (W ) be the set of all g-weights of W . Then
W =`n∈C
. Let AW : W → W be the linear map deﬁned by AW w = aw for
w ∈ W [a+Z] and a ∈ P (W ). It is clear that for a ∈ P (V ) and b ∈ P (W ), either a + b ∈ P (W )
or a + b − 1 ∈ P (W ).
For v ∈ V , we have

,a∈P (W ) W [a+Z]

[n]

+

+

Y g(v, x) =

Y g
n,k(v)x−n−1(log x)k.

Let

Y g
n,k(v)x−n−1.

N

Xk=0Xn∈C
k (v, x) =Xn∈C

Y g

7

Then

N

Denote the formal variable log x by y and let

Y g(v, x) =

Y g
k (v, x)(log x)k.

Xk=0

Y g(v, x, y) =

Y g
k (v, x)yk =

N

Xk=0

N

Xk=0Xn∈C

Y g
n,k(v)x−n−1yk

(2.1)

for v ∈ V . Taking u in the duality property to be 1, we see that Y g
when ℜ(n) is suﬃciently negative, that is, Y g
We say that Y g

k , k = 0, . . . , N, are lower truncated.

n,k(v)w = 0 for k = 0, . . . , N
k (v, x)w for k = 0, . . . , N are lower truncated.

Since the homogeneous subspaces of V are ﬁnite dimensional and g preserves the homo-
geneous subspaces of V , by the multiplicative Jordan-Chevalley decomposition, there exist
a unique semisimple automorphism σ of V and a unique locally unipotent operator gu such
that σ and gu commute with each other and g = σgu. Here by locally unipotent operator,
we mean that gu − 1V is locally nilpotent, that is, for v ∈ V , (gu − 1V )jv = 0 when j is
suﬃciently large. Let

N =

=

log gu

2π√−1
log(1V + (gu − 1V ))

2π√−1
(−1)j+1(gu − 1V )j

2π√−1j

= Xj∈Z+

.

(2.2)

Note that since gu is locally unipotent, the right-hand side of (2.2) is a ﬁnite sum when
acting on v ∈ V and is locally nilpotent. From the deﬁnition of N , we have

gu = e2π√−1N

(2π√−1N )j

.

j!

= Xj∈N

Thus we have g = σe2π√−1N .

+

Let (W, Y g) be a C

-graded weak g-twisted V -module. We now use the multiplicative
Jordan-Chevalley decomposition of g above to derive some formulas. For n ∈ Z, consider
the space Y g(V(n), x, y) of elements of (End W ){x}[y] of the form Y g(v, x, y) for v ∈ V(n).
Then Y g(·, x, y) is a surjective homomorphism from V(n) to Y g(V(n), x, y).
In particular,
Y g(V(n), x, y) is ﬁnite dimensional. Since g preserve weights, g acts on V(n). Thus g also acts
on Y g(V(n), x, y) by g · Y g(v, x, y) = Y g(gv, x, y) for v ∈ V(n). Since on V(n), g = σe2π√−1N ,
we obtain a decomposition of this action of g on Y g(V(n), x, y) which, for simplicity, we shall
still write as g = σe2π√−1N where σ and N are the corresponding operators on Y g(V(n), x, y).

8

On the other hand, from the equivariance property,

Y g(gv, x, y) = e−2π√−1x∂/∂xe−2π√−1∂/∂yY g(v, x, y)

(2.3)

for v ∈ V . By (2.3), the action of g on Y g(V(n), x, y) is equal to e−2π√−1x∂/∂xe−2π√−1∂/∂y. If
Y g(V(n), x, y) is invariant under e−2π√−1x∂/∂x and e−2π√−1∂/∂y, then e−2π√−1x∂/∂xe−2π√−1∂/∂y
is a Jordan-Chevalley decomposition of g on Y g(V(n), x, y). By the uniqueness of the Jordan-
Chevalley decomposition, we obtain σ = e−2π√−1x∂/∂x and e2π√−1N = e−2π√−1∂/∂y. Since

log(1Y g(V(n),x,y) + (e−2π√−1∂/∂y − 1Y g(V(n),x,y))

∂/∂y =

(−1)j+1(e−2π√−1∂/∂y − 1Y g(V(n),x,y))j

,

−2π√−1
−2π√−1j

= Xj∈Z+

by the deﬁnition of N , we obtain N = −∂/∂y on Y g(V(n), x, y). Since we do not assume
that Y g(V(n), x, y) is invariant under e−2π√−1x∂/∂x and e−2π√−1∂/∂y, we have to prove σ =
e−2π√−1x∂/∂x and e2π√−1N = e−2π√−1∂/∂y directly, without using the uniqueness of the Jordan-
Chevalley decomposition for an operator on a ﬁnite-dimensional space.

Let v ∈ V [α], α ∈ C/Z. Since the action of g on Y g(V(n), x, y) is equal to e−2π√−1x∂/∂xe−2π√−1∂/∂y

and Y g(v, x, y) is a generalized eigenvector of g with eigenvalue e2π√−1α, there exists M ∈ Z+

such that

(e−2π√−1x∂/∂xe−2π√−1∂/∂y − e2π√−1α)M Y g(v, x, y) = 0.

(2.4)

From (2.1) and (2.4), we obtain

N

Xk=0Xn∈C

=

= 0.

n,k(v)(e−2π√−1(−n−1)e−2π√−1∂/∂y − e2π√−1α)M x−n−1yk
Y g
Xk=0Xn∈C

n,k(v)(e−2π√−1x∂/∂xe−2π√−1∂/∂y − e2π√−1α)M x−n−1yk
Y g

N

(2.5)

From (2.5), we see that the coeﬃcients of the left-hand side of (2.5) as a formal series in
powers of x must be 0, that is,

n,k(v)(e−2π√−1(−n−1)e−2π√−1∂/∂y − e2π√−1α)M yk = 0
Y g

(2.6)

N

Xk=0

for n ∈ C. Rewriting (2.6), we obtain

(e−2π√−1∂/∂y − e2π√−1(α−n−1))M

Y g
n,k(v)yk = 0

N

Xk=0

9

for n ∈ C. Let n ∈ C such that e2π√−1(α−n−1)
PN
k=0 Y g

n,k(v)yk is a nonzero polynomial in y. Since e2π√−1i(α−n−1) 6= 1,

6= 1.

If Y g

n,k(v) 6= 0 for some k, then

(e−2π√−1∂/∂y − e2π√−1(α−n−1))M

Y g
n,k(v)yk

N

Xk=0

cannot be equal to 0. Contradiction with (2.5). Thus for such β, Y g
and we have

n,k(v) = 0 for k = 0, . . . , N

N

In particular,

Y g(v, x, y) =

Xk=0Xn∈α

Y g
n,k(v)x−n−1yk.

e−2π√−1x∂/∂xY g(v, x, y) = e2π√−1αY g(v, x, y)

= σY g(v, x, y).

Since v is an arbitrary element of V(n), e−2π√−1x∂/∂x = σ on Y g(V(n), x, y) and thus e2π√−1N =
e−2π√−1∂/∂y.

Since n is arbitrary, we have proved the following formulas:

Lemma 2.2 For v ∈ V ,

Y g(σv, x, y) = e−2πix∂/∂xY g(v, x, y),
Y g(N v, x, y) = −∂/∂yY g(v, x, y),
Y g(e2πiN v, x, y) = e−2πi∂/∂yY g(v, x, y).

(2.7)
(2.8)
(2.9)

From (2.7), (2.8) and (2.9), for v ∈ V [a+Z], a ∈ P (V ) and w ∈ W , Y g(v, x)w ∈

x−aW ((x))[log x]. Then for v ∈ V [α], w ∈ W ,
k (v, x)w = Xn∈a+Z
Xk=0

Y g(v, x)w =

Y g

Ng(v)

Y g
n,k(v)wx−n−1,

Y g
k (v, x)w(log x)k,

where Ng(v) ∈ N depends only on N and v. For convenience, we shall use u(n) to denote
the operator Y g

n,0(u).

From (2.8), we have the following relation between Y g and Y g
0 :

Lemma 2.3 For v ∈ V ,

where x−N = e−N log x.

Y g(v, x) = Y g

0 (x−N v, x),

(2.10)

10

Proof. From (2.8) and the formal Taylor’s theorem, we obtain

Y g(xN v, x, y) = e−(log x)∂/∂yY g(v, x, y)

=

=

Ng(v)

Ng(v)

Xk=1
Xk=1

e−(log x)∂/∂yY g

k (v, x, y)yk

Y g
k (v, x, y)(y − log x)k.

(2.11)

Substituting log x for y in (2.11) and then substituting x−N v for v, we obtain (2.10).

We also need the following lemma:

Lemma 2.4 For u ∈ V , we have

σY g(u, x) = Y g(σu, x)σ,
[N , Y g(u, x)] = Y g(N u, x),
eyN Y g(u, x) = Y g(eyN u, x)eyN .

(2.12)
(2.13)
(2.14)

Proof. Let u ∈ V [α] and v ∈ V [β]. Then u and v are generalized eigenvectors for g with
eigenvalues e2π√−1α and e2π√−1β.
In particular, there exist M, N ∈ Z+ such that (g −
e2π√−1α)M u = (g − e2π√−1β)N v = 0.
(g − e2π√−1(α+β))Y g(u, x)v = Y g((g − e2π√−1α)u, x)gv + Y g(e2π√−1αu, x)(g − e2π√−1β)v.

Using the fact that g is an automorphism of V , we have

Then

(g − e2π√−1(α+β))M +N Y g(u, x)v

=

= 0.

M +N

Xj=0 (cid:18)M + N

j (cid:19)Y g(e2π√−1(M +N−j)α(g − e2π√−1α)ju, x)gj(g − e2π√−1β)M +N−jv

Thus Y g(u, x)v ∈ V [α+β][[x, x−1]]. This proves (2.12).

Using (2.12) together with the fact that g is an automorphism of V , we obtain

e2π√−1N Y g(u, x) = Y g(e2π√−1N u, x)e2π√−1N

or

Y g(e2π√−1N u, x) = e2π√−1N Y g(u, x)e−2π√−1N
= Ad(e2π√−1N )(Y g(u, x)).

11

Thus by the deﬁnition of N ,

Y g(N u, x) =
=

=

1

1

2π√−1
2π√−1
2π√−1

1

Y g(log(e2π√−1N )u, x)

(log(Ad(e2π√−1N ))))(Y g(u, x))
ad(2π√−1N )(Y g(u, x))

= [N , Y g(u, x)],

proving (2.13). The formula (2.14) follows immediately from (2.13).

As consequences of Lemmas 2.3 and 2.4, we have the following properties:

Proposition 2.5 For n ∈ Z and v ∈ V ,

[N , L(n)] = 0,
xN L(n) = L(n)xN ,

Y g
0 (L(−1)u, x) =

d
dx

Y g
0 (u, x) − x−1Y g

0 (N u, x).

(2.15)

(2.16)
(2.17)

(2.18)

Proof. Since gω = ω, we have N ω = ω. Then (2.16) follows from (2.13) and (2.17) is an
immediate consequence of (2.16).
The formula (2.18) is obtained by taking derivative with respect to x on both sides of
(2.10), using the L(−1)-derivative property for Y g and then take the 0-th power of log x on
both sides of the resulting equality.

Using the the formulas obtained above, we prove a duality property for the map Y g

0 . For

u ∈ V , in the region |z2| > |z1 − z2| > 0, we use
z2 (cid:19)N
z1 − z2

(cid:18)1 +

u

(2.19)

to denote the power series in the variable z1−z2
binomial expansion. This series can also be obtained by writing (2.19) as

z2

with coeﬃcients in V obtained by using the

exp(cid:18)log(cid:18)1 +

z2 (cid:19)N(cid:19) u,
z1 − z2

expanding (2.20) as a power series in

log(cid:18)1 +

z2 (cid:19)
z1 − z2

(2.20)

(2.21)

and then expanding powers of (2.21) as powers series in z1−z2
in the region |z2| > |z1−z2| > 0.
Since N is locally nilpotent, this series is in fact obtained from a polynomial in (2.21) with

z2

12

coeﬃcients in V by expanding powers of (2.21) as powers series in z1−z2
in |z2| > |z1−z2| > 0.
In other words, (2.19) is a ﬁnite sum of elements of V multiplied by powers of (2.21), which
as power series in z1−z2

are absolutely convergent in the region |z2| > |z1 − z2| > 0.

z2

z2

Theorem 2.6 Let W be a C
V [b+Z], a, b ∈ P (V ),

+

-graded weak g-twisted V -module. Then for u ∈ V [a+Z], v ∈

hw′, Y g
hw′, Y g
0  Y  (cid:18)1 +

0 (u, z1)Y g
0 (v, z2)Y g
z2 (cid:19)N
z1 − z2

0 (v, z2)wi,
0 (u, z1)wi,
u, z1 − z2! v, z2! w+

*w′, Y g

(2.22)
(2.23)

(2.24)

are absolutely convergent in the region |z1| > |z2| > 0, |z2| > |z1| > 0, |z2| > |z1 − z2| > 0,
respectively, to a function of z1 and z2 of the form

e−a log z1e−b log z2

g(z1, z2)

2(z1 − z2)t ,
1zs
zr

where g(z1, z2) is a polynomial in z1 and z2, r, s, t ∈ Z.
Proof. Since u ∈ V [a+Z], v ∈ V [b+Z], a, b ∈ P (V ), by the duality property,

hw′, Y g(u, z1)Y g(v, z2)wi,
hw′, Y g(v, x2)Y g(u, x1)wi,
hw′, Y g(Y (u, z1 − z2)v, z2)wi

(2.25)

(2.26)
(2.27)
(2.28)

are absolutely convergent in the region |z1| > |z2| > 0, |z2| > |z1| > 0, |z2| > |z1 − z2| > 0,
respectively, to a function of z1 and z2 of the form

N

Xi,j,k,l=0

aijkle(−a−ri) log z1e(−b−sj ) log z2(log z1)k(log z2)l(z1 − z2)−t

N

gkl(z1, z2)

= e−a log z1e−b log z2

Xk,l=0
where ri, sj, t ∈ Z satisfying ri < ri−1 and sj < sj−1 and gkl(z1, z2) are polynomials in z1 and
z2. In particular, in the region |z1| > |z2| > 0,

2 (z1 − z2)t (log z1)k(log z2)l
1 zs0
zr0

l (v, z2)wi(log z1)k(log z2)l

N

Xk,l=0

k (u, z1)Y g

hw′, Y g
= hw′, Y g(u, z1)Y g(v, z2)wi
= e−a log z1e−b log z2

N

gkl(z1, z2)

2 (z1 − z2)t (log z1)k(log z2)l.
1 zs0
zr0

Xk,l=0

13

By Proposition 7.8 in [HLZ], we obtain

hw′, Y g

k (u, z1)Y g

l (v, z2)wi = e−a log z1e−b log z2

g00(z1, z2)

2 (z1 − z2)t .

zr0
1 zs0

Taking g(z1, z2) to be g00(z1, z2) and r, s to be r0, s0, we see that (2.22) indeed converges
absolutely to a function of the form (2.25).

Similarly we can prove that (2.23) converges absolutely to a function of the form (2.25).
Since (2.26) and (2.27) converge to the same function in |z1| > |z2| > 0 and |z2| > |z1| >
0, respectively, from the argument above, the fact that the powers of z1 and z2 in these
expressions are congruent to a and b, respectively, and Proposition 7.8 in [HLZ], we see that
(2.22) and (2.23) converge absolutely to the same function of the form (2.25) in |z1| > |z2| > 0
and |z2| > |z1| > 0, respectively.

The same argument above shows that

hw′, Y g

0 (Y (u, z1 − z2)v, z2)wi

converges absolutely in the region |z2| > |z1 − z2| > 0. As is discussed above, (2.19) is a
ﬁnite sum of elements of V multiplied by powers of (2.21), which as power series in z1−z2
are
absolutely convergent in the region |z2| > |z1− z2| > 0, (2.24) is absolutely convergent in the
same region. We shall use the associativity for Y g and (2.10) to show that (2.24) converges
to the same function that (2.22) converges to.

z2

By (2.10), (2.14) and the associativity for Y g, in the region |z1| > |z2| > |z1 − z2| > 0, we

have

*w′, Y g

u, z1 − z2! v, z2! w+
u, z1 − z2! v, z2! w+

0  Y  (cid:18)1 +
z2 (cid:19)N
z1 − z2
=*w′, Y g zN2 Y  (cid:18)z1
z2(cid:19)N
= hw′, Y g(Y (zN1 u, z1 − z2)zN2 v, z2)wi
= hw′, Y g((z1)N u, z1)Y g(zN2 v, z2)wi
= hw′, Y g

0 (v, z2)wi.

0 (u, z1)Y g

In [B], Bakalov derived a Jacobi identity for the map Y g

0 from an associator formula for

twisted V -modules. From Theorem 2.6, we obtain the Jacobi identity immediately.

Theorem 2.7 (Bakalov [B]) Let W be a C
have the twisted Jacobi identity

+

-graded weak g-twisted V -module. Then we

x−1

0 δ(cid:18)x1 − x2

0 (u, x1)Y g

x0 (cid:19) Y g
1 δ(cid:18)x2 + x0

0 (v, x2) − x−1
x1 (cid:19)a
x1 (cid:19)(cid:18)x2 + x0

0 δ(cid:18)−x2 + x1
0  Y  (cid:18)1 +

Y g

x0

(cid:19) Y g
x2(cid:19)N

x0

= x−1

0 (v, x2)Y g

0 (u, x1)

u, x0! v, x2!

(2.29)

14

or equivalently, the component form of the twisted Jacobi identity

(−1)k(cid:18) l

Xk∈N

k(cid:19)u(l − k + m)v(k + n) −Xk∈N
j (cid:19)u(cid:19)j

=Xj∈N (cid:18)(cid:18)l + N

(−1)k−l(cid:18) l
v! (m + n − j)

k(cid:19)v(l − k + n)u(k + m)

(2.30)

for u ∈ V [a+Z], v ∈ V [b+Z], m ∈ a + Z, n ∈ b + Z and l ∈ Z, where u(p) = Y g
v(q) = Y g

q,0(v) for p ∈ a + Z and q ∈ b + Z.

p,0(u) and

As a consequence of Jacobi identity, we have the commutator formulas:

Corollary 2.8 For u ∈ V [a+Z], v ∈ V [b+Z], m ∈ a + Z and n ∈ b + Z, we have

[Y g

0 (u, x1), Y g

0 (v, x2)] = Resx0x−1

·

x0

1 δ(cid:18)x2 + x0
0  Y  (cid:18)1 +
·Y g
0 (cid:18)(cid:18)(cid:18)m + N
j (cid:19)u(cid:19)j

x1 (cid:19)a
x1 (cid:19)(cid:18)x2 + x0
u, x0! v, x2! ,
x2(cid:19)N
j (cid:19)u(cid:19) (j)v, x2(cid:19) ,
v! (m + n − j).

Y g

xm−j
2

Xj=0
Xj=0 (cid:18)(cid:18)m + N

∞

∞

(2.31)

(2.32)

(2.33)

[u(m), Y g

0 (v, x2)] =

[u(m), v(n)] =

We also have the associator formula and weak associativity:

Corollary 2.9 For u ∈ V [a+Z], v ∈ V and w ∈ W ,
Resx1xα

0 (u, x1)Y g

1 x−1

0 δ(cid:18) x1 − x2

x0 (cid:19) Y g

= (x2 + x0)aY g

0 (v, x2) − Resx1xα
0  Y  (cid:18)1 +
x2(cid:19)N

x0

1 x−1

x0

0 δ(cid:18)−x2 + x1
u, x0! v, x2! .

0 (v, x2)Y g

0 (u, x1)

(cid:19) Y g

(2.34)

For u ∈ V [a+Z], v ∈ V and w ∈ W , let l ∈ a + Z such that u(n)w = 0 for n ≥ l. Then

(x0 + x2)lY g

0 (u, x0 + x2)Y g

0 (v, x2)w = (x2 + x0)lY g

0  Y  (cid:18)1 +

x0

x2(cid:19)N

u, x0! v, x2! w. (2.35)

Finally we have the following equivalence of the main properties of g-twisted modules:

Theorem 2.10 The following properties for a C

+

-weak g-twisted V -module are equivalent:

15

(1) The duality property for Y g in Deﬁnition 2.1.

(2) The duality property for Y g

0 in Theorem 2.6.

(3) The property that Y g

0 is lower truncated and the twisted Jacobi identity (2.29).

(4) The property that Y g
associativity (2.35).

0 is lower truncated, the commutator formula (2.31) and the weak

Proof. We have shown that (1) ⇒ (2) ⇒ (3) ⇒ (4). The same method as that for ordinary
modules shows that (4) ⇒ (2). Using (2.10), we see that (2) ⇒ (1).

3 The g-twisted universal enveloping algebra and g-

twisted zero-mode algebra

In this section, we construct two associative algebras associated with V and the automor-
phism g, one is called “g-twisted universal algebra of V ” and the other is called the “g-twisted
zero-mode algebra associated to V ”.

Let

L(V, g) = aa∈P (V )

V [a+Z] ⊗ taC[t, t−1].

For u ∈ V [a+Z] and m ∈ a + Z, we use u(m) to denote the element u ⊗ tm ∈ L(V, g).
of the form

Let T (L(V, g)) be the tensor algebra of L(V, g). Then T (L(V, g)) is spanned by elements

for us ∈ V [as+Z], is ∈ as + Z. For simplicity, we omit the tensor symbols for the elements.
Then the multiplication is given by

u1(i1) ⊗ · · · ⊗ un(in)

(u1(i1)· · · um(im))(v1(j1)· · · vn(jn)) = u1(i1)· · · um(im)v1(j1)· · · vn(jn).

Deﬁne a grading called weight on T (L(V, g)) as follows: For λ ∈ C,

wt λ = 0

and for λ ∈ C, homogeneous us ∈ V [as+Z] and is ∈ as + Z,

wt (λu1(i1)· · · un(in)) =

n

Xs=1

(wt us − is − 1).

Let ˜P (V ) be the subset of [0, 1) + I such that ˜P (V ) + Z is the subgroup of C/Z generated
by P (V ) + Z. Then the weight of a homogeneous element of T (L(V, g)) is in ˜P (V ) + Z. Let

16

T (L(V, g))k denote the subspace of T (L(V, g)) consisting of the elements of weight k. Then
we have

T (L(V, g))k

T (L(V, g)) = ak∈ ˜P (V )+Z
T (L(V, g))kT (L(V, g))l ⊂ T (L(V, g))k+l.

and

For k ∈ ˜P (V ) + Z and n ∈ Z, let

T (L(V, g))n

k = aa∈ ˜P (V ),i∈n+N

T (L(V, g))k+a+iT (L(V, g))−a−i.

Then we have

and also

T (L(V, g))n+1

k ⊂ T (L(V, g))n

k

T (L(V, g))n

k = 0,

T (L(V, g))n

k = T (L(V, g))k.

\n∈Z
[n∈Z

Hence, {T (L(V, g))n
Denote by ˜T (L(V, g))k its completion and let

k | n ∈ Z} form a fundamental neighborhood system of T (L(V, g))k.

˜T (L(V, g)) = ak∈ ˜P (V )+Z

˜T (L(V, g))k.

Then ˜T (L(V, g)) is a complete topological vector space.

Proposition 3.1 The multiplication for T (L(V, g)) is continuous under the topology given
by the fundamental neighborhood systems above.
In particular, its topological completion
˜T (L(V, g)) is a complete topological ring.

It suﬃces to prove that given m ∈ ˜P (V ) + Z and n ∈ Z and given k, l ∈ ˜P (V ) + Z

Proof.
satisfying k + l = m, there exist n1, n2 ∈ Z such that

T (L(V, g))n1

k T (L(V, g))l + T (L(V, g))kT (L(V, g))n2

(3.1)
Let l = c + l′ where c ∈ ˜P (V ) and l′ ∈ Z. We take n1 = n + l′ + 1 and n2 = n. Elements
of T (L(V, g))n+l′
are ﬁnite sums of elements of the form ϕψ where ϕ ∈ T (L(V, g))k+a+i and
ψ ∈ T (L(V, g))−a−i for a ∈ ˜P (V ), i ∈ n+l′ +1+ N. Let η ∈ T (L(V, g))l. When a−c ∈ ˜P (V ),
ϕ ∈ T (L(V, g))(k+l)+(a−c)+(i−l′) and ψη ∈ T (L(V, g))−(a−c)−(i−l′). Since a − c ∈ ˜P (V ) and
i − l′ ∈ n + 1 + N ⊂ n + N,

l ⊂ T (L(V, g))n
m.

k

ϕψη ∈ T (L(V, g))(k+l)+(a−c)+(i−l′)T (L(V, g))−(a−c)−(i−l′)

⊂ T (L(V, g))n
k+l
= T (L(V, g))n
m.

17

When a−c 6∈ ˜P (V ), we must have a−c+1 ∈ ˜P (V ). Then ϕ ∈ T (L(V, g))(k+l)+(a−c+1)+(i−l′−1)
and ψη ∈ T (L(V, g))−(a−c+1)−(i−l′−1). Since a − c + 1 ∈ ˜P (V ) and i − l′ − 1 ∈ n + N,

ϕψη ∈ T (L(V, g))(k+l)+(a−c+1)+(i−l′−1)T (L(V, g))−(a−c+1)−(i−l′−1)

⊂ T (L(V, g))n
k+l
= T (L(V, g))n
m.

Since the addition is continuous with respect to the topology and elements of T (L(V, g))n+l′
are ﬁnite sums of elements of the form ϕψ above, we have shown that

k

T (L(V, g))n1

Similarly, elements of T (L(V, g))n

k T (L(V, g))l ⊂ T (L(V, g))n
m.
l are ﬁnite sums of elements of the form ϕψ where
ϕ ∈ T (L(V, g))l+a+i and ψ ∈ T (L(V, g))−α−i for a ∈ ˜P (V ), i ∈ n + N. Let η ∈ T (L(V, g))k.
Then ηϕ ∈ T (L(V, g))k+l+a+i and

(3.2)

ηϕψ ∈ T (L(V, g))k+l+a+iT (L(V, g))−a−i

⊂ T (L(V, g))n
k+l
= T (L(V, g))n
m.

Thus

Combining (3.2) and (3.3), we obtain (3.1).

T (L(V, g))kT (L(V, g))n2

l ⊂ T (L(V, g))n
m.

(3.3)

Proposition 3.2 For k ∈ ˜P (V ) + Z, elements of ˜T (L(V, g))k are of the form u1 + u2 where
u1 ∈ T (L(V, g))k and u2 is in the topological completion of

aa∈ ˜P (V ),i∈Z+

T (L(V, g))k+a+iT (L(V, g))−a−i.

Proof. The topological completion ˜T (L(V, g))k of T (L(V, g))k is the space of all Cauchy
wm where

sequences or equivalently all Cauchy series in T (L(V, g))k. Assuming thatPm∈Z+
wm ∈ T (L(V, g))k is such a Cauchy series. Then for any n ∈ Z,

M +N

Xm=M

wm ∈ aa∈ ˜P (V ),i∈n+N

T (L(V, g))k+a+iT (L(V, g))−a−i

for suﬃciently large M ∈ Z+ and N ∈ Z+.
exists M ∈ Z+ such that wm ∈`a∈ ˜P (V ),i∈Z+
u1 = PM
is still an element of T (L(V, g))k. Since Pm∈Z+
also a Cauchy series. Since wm ∈`a∈ ˜P (V ),i∈Z+

m=1 wm and u2 = P∞m=M +1 wm. Then u1 as a ﬁnite sum of elements of T (L(V, g))k
wm is a Cauchy series, u2 =P∞m=M +1 wm is

T (L(V, g))k+a+iT (L(V, g))−a−i when m > M,

In particular, if we take n = 1, then there
T (L(V, g))k+a+iT (L(V, g))−a−i for m > M. Let

18

it is in fact a Cauchy series in `a∈ ˜P (V ),i∈Z+

topological completion.

T (L(V, g))k+a+iT (L(V, g))−a−i and thus is in its

Note that the two terms in the left-hand side of (2.30) and the right-hand side of (2.30)
all correspond to well deﬁned elements of ˜T (L(V, g)). Take the diﬀerence between the sum of
the two elements of ˜T (L(V, g)) corresponding to the two terms in the left-hand side of (2.30)
and the element of ˜T (L(V, g)) corresponding to the right-hand side of (2.30), we obtain an
element of ˜T (L(V, g)). These are the elements of ˜T (L(V, g)) corresponding to the Jacobi
identity (2.30). Let J be the two-sided ideal in ˜T (L(V, g)) generated by these elements of
˜T (L(V, g)) corresponding to the Jacobi identity (2.30), the elements 1(n) − δn,−1 for n ∈ Z
corresponding to the identity property for Y g

0 , and the elements

(L(−1)u)(n) + (n + N )u(n − 1)

(3.4)

for n ∈ Z corresponding to the L(−1)-derivative property (2.18).
Deﬁnition 3.3 The g-twisted universal enveloping algebra Ug(V ) of V is the quotient alge-
bra ˜T (L(V, g))/J of ˜T (L(V, g)) by the two-sided ideal J. Since J is generated by homoge-
neous elements, the grading on ˜T (L(V, g)) induces a grading on Ug(V ) and we still call the
degree of an element of Ug(V ) its weight. The homogeneous subspace of Ug(V ) of weight
n ∈ C is denoted by Ug(V )n.

In the special case that g = 1V , the g-twisted universal enveloping algebra Ug(V ) of V is

the universal enveloping algebra U(V ) of V introduced by Frenkel and Zhu [FZ].

The action of g on V [α] for α ∈ C/Z induce an action of g on L(V, g). This action of g on
L(V, g) induces an action of g on T (L(V, g)) such that this action in fact gives an automor-
phism of the associative algebra T (L(V, g)). By the deﬁnition of the topological completion
of T (L(V, g)), this action of g on T (L(V, g)) extend continuously to an automorphism of the
topological completion ˜T (L(V, g)). Since the elements in ˜T (L(V, g)) corresponding to (2.30)
and the elements 1(n) − δn,−1 and (3.4) for n ∈ Z for u, v in generalized eigenspaces for g
are also in generalized eigenspaces for g in ˜T (L(V, g)), Ug(V ) as the quotient of ˜T (L(V, g))
by the ideal generated by these elements also has an action of g. Moreover, the action of g
on Ug(V ) is an automorphism of Ug(V ).

The following result follows immediately from Proposition 3.2:

Proposition 3.4 For k ∈ C, let πUg(V )k be the projections from ˜T (L(V, g))k to Ug(V )k.
Then elements of Ug(V )k are of the form u1 + u2 where u1 ∈ πUg(V )T (L(V, g))k, and u2 is in
the topological completion of

aa∈ ˜P (V ),i∈Z+

(πUg(V )T (L(V, g))k+a+i)(πUg(V )T (L(V, g))−a−i).

-graded weak V -module. Then W has a natural structure of
Proposition 3.5 Let W be a C
a Ug(V )-module such that the Ug(V )-module structure is compatible with the action of g on

+

19

Ug(V ) and W in the sense that for u ∈ Ug(V ) and w ∈ W , g(uw) = (gu)(gw). Conversely,
let W = `n∈C
and C/Z and

[n] be a Ug(V )-module equipped with gradings by C

an action of g on W satisfying the following conditions:

,α∈C/Z W [α]

+

+

1. The Ug(V )-module structure is compatible with the action of g on Ug(V ) and W in the

sense that for u ∈ Ug(V ) and w ∈ W , g(uw) = (gu)(gw).

suﬃciently large.

2. For u ∈ V [a+Z] (a ∈ P (V )) and m ∈ Z and w ∈ W , u(a + m)w = 0 when m is
3. For u ∈ V(m) and w ∈ Wp = `α∈C/Z W [α]
, u(n)w is 0
and for r ∈ R,
when m − n − 1 + p 6∈ C
`r∈R W√−1r is equal to the subspace of W consisting of w ∈ W such that u(n)w = 0
. For α ∈ C/Z, w ∈ W [α] =`n∈C
for u ∈ V(m), m ∈ Z, n ∈ C, m−n−1+p 6∈ C
there exists Λ ∈ Z+ such that (g − e2π√−1α)Λw = 0, where Lg(0) = ω(1) ∈ Ug(V ).

, is in Wm−n−1+p when m − n − 1 + p ∈ C

p where m ∈ Z and p ∈ C

+ Wn,

+

+

+

+

+

+

[n]

-graded weak g-twisted V -module. In particular, the category of C

-graded
Then W is a C
weak g-twisted V -modules and the category of Ug(V )-modules satisfying three conditions above
are isomorphic (not just equivalent since the underlying vector spaces are the same). Un-
der this isomorphism, lower bounded generalized g-twisted V -modules correspond to Ug(V )-
modules of the form W = `n∈C,α∈C/Z W [α]
for n ∈ C are
generalized eigenspaces of Lg(0), satisfying the three conditions above and the lower bounded
condition that for each n ∈ C and each α ∈ C/Z, W [α]
[n+l] = 0 for suﬃciently negative real
number l. Under this isomorphism, grading-restricted generalized g-twisted V -modules (or
simply g-twisted V -modules as we have called them) correspond to Ug(V )-modules of the form
above, satisfying the three conditions above, the lower bounded condition and the condition
that for each n ∈ C, α ∈ C/Z, dim W [α]
Proof. The ﬁrst conclusion is clear from the construction of Ug(V ).

[n] such that W[n] = `α∈C/Z W [α]

[n] < ∞.

For its converse, we deﬁne Y g

0 (u, x)w = Pn∈α+Z u(n)wx−n−1 for u ∈ V and w ∈ W and
Y g(u, x)w = Y g
0 (xN u, x)w. For u ∈ V [a], m ∈ a + Z and w ∈ W [b+Z], we have u(m)w ∈
W [a+b+Z] Thus gY g
0 (gu, x)gw and gY g(u, x)w = Y g(gu, x)gw. Since u(a +
m)w = 0 when m ∈ Z is suﬃciently large, Y g
0 (u, x)w is lower truncated. Since W is a
Ug(V )-module, the Jacobi identity (2.29) and the L(−1)-derivative property (2.18) hold. By
Theorem 2.10, the duality property for Y g holds. It is also clear that all the other axioms
for a g-twisted generalized V -module hold.

0 (u, x)w = Y g

The other conclusions are all clear.

It is clear that the subspace Ug(V )I =`n∈I Ug(V )n spanned by elements of Ug(V ) whose

weights are imaginary numbers is a subalgebra of Ug(V ). Let N(Ug(V )I) be the two-sided
ideal in Ug(V )I generated by

a

n∈I,a∈ ˜P (V ),i∈N,ℜ(a+i)>0

Ug(V )n+a+iUg(V )−a−i.

20

Deﬁnition 3.6 The g-twisted zero-mode algebra associated to V is the quotient algebra

Zg(V ) = Ug(V )I/N(Ug(V )I).

For weight homogeneous v ∈ V [a+Z], a ∈ P (V )∩ (I), we write og(v) for v(wt v + a − 1) ∈
Ug(V )I, denote by [og(v)] the image of og(v) in the quotient Zg(V ), and extend [og(v)] to all
v ∈ V by linearity.

From the deﬁnition of Zg(V ) and Proposition 3.4, we have the following useful result:

Proposition 3.7 The g-twisted zero-mode algebra Zg(V ) is spanned by elements of the form

[og(u1)]· · · [og(uk)]

for u1, . . . , uk ∈ V and k ∈ N.
Proof. By Proposition 3.4, elements of Ug(V )n for n ∈ I are of the form u1 + u2 where
u1 ∈ πUg(V )T (L(V, g))n, and u2 is in the topological completion of

aa∈ ˜P (V ),i∈Z+

(πUg(V )T (L(V, g))n+a+i)(πUg(V )T (L(V, g))−a−i).

Since (πUg (V )T (L(V, g))n+a+i)(πUg(V )T (L(V, g))−a−i) ⊂ Ug(V )n+a+iUg(V )−a−i, we see that u2
is in the topological completion of`a∈ ˜P (V ),i∈Z+
Ug(V )n+a+iUg(V )−a−i. Since ℜ(a + i) > 0 for
a ∈ ˜P (V ) and i ∈ Z+, we have `a∈ ˜P (V ),i∈Z+
Ug(V )n+a+iUg(V )−a−i ⊂ N(Ug(V )I). Thus u2 ∈
N(Ug(V )I) and elements of Zg(V ) are of the form u1 +N(Ug(V )I) for u1 ∈ πUg(V )T (L(V, g))n,
n ∈ I . But T (L(V, g))n is spanned by elements of the form u1(m1)· · · uk(mk) for k ∈ N,
homogeneous u1 ∈ V [a1+Z], . . . , uk ∈ V [ak+Z], a1, . . . , ak ∈ P (V ), m1 ∈ a1+Z, . . . , mk ∈ ak +Z
such that Pk
i=1(wt ui − mi − 1) = n. For simplicity, we shall also use the same notation to
denote the images of such elements in Ug(V )n under the map πUg(V ). Since the commutator
formula holds for elements in Ug(V ), these elements in Ug(V )n are linear combinations of
elements of the same form but satisfying the additional condition ℜ(wt ui − m1 − 1) ≥ · · · ≥
ℜ(wt ui − mk − 1).
If ℜ(wt ui − mi − 1) < 0 for some i, then ℜ(wt uk − mk − 1) < 0
and u1(m1)· · · uk(mk) is in Ug(V )n+ak+(−wt uk+mk−ak+1)Ug(V )−ak−(−wt uk+mk−ak+1) satisfying
ℜ(ak + (−wt uk + mk − ak + 1)) = ℜ(−wt uk + mk + 1) > 0. Hence u1(m1)· · · uk(mk) is
in N(Ug(V )I). Thus if u1(m1)· · · uk(mk) is not in N(Ug(V )I), ℜ(wt ui − mi − 1) ≥ 0 for
i = 1, . . . , k. Since Pk
i=1(wt ui − mi − 1) = n ∈ I, we must have ℜ(wt ui − mi − 1) = 0 or
ℜ(mi) = wt ui − 1 for i = 1, . . . , k. Since mi ∈ ai + Z, we see that ℜ(ai) = 0 and hence
ai ∈ I. Moreover, mi = wt ui + ai − 1. Thus

u1(m1)· · · uk(mk) + N(Ug(V )I) = [og(u1)]· · · [og(uk)].

We shall discuss modules for Ug(V ) and for Zg(V ) and their connections with suitable
g-twisted V -modules in Section 5.
In Section 6, Proposition 3.7 is needed in the proof
that Zg(V ) and Ag(V )( (to be constructed in the next section) are isomorphic. Then as a
consequence of the isomorphism, we obtain in turn an improvement of Proposition 3.7.

21

4 A generalization of Zhu’s algebra to the g-twisted

case for g of inﬁnite order

In [DLM1], Dong, Li and Mason introduced a generalization of Zhu’s algebra for suitable
g-twisted V -modules when g is of ﬁnite order. But their generalization does not generalize
straightforwardly to the case of a general automorphism g, especially in the case that g
does not act on V semisimply. In this section, we give such a generalization. When g does
not act on V semisimply, the deﬁnition of this associative algebra involves the operator
N obtained from the multiplicative Jordan-Chevalley decomposition of g. Moreover, this
associative algebra is not a quotient of the ﬁxed point subalgebra; instead, it is a quotient of
the generalized eigenspace of eigenvalue 1 of g. This means that when g does not act on V
semisimply (in this case the order of g must be inﬁnite), this generalization of Zhu’s algebra
might have some interesting new features.

In [H2], the ﬁrst author ﬁnd a natural deﬁnition of Zhu’s algebra in connection with
the modular invariance. Besides its geometric meaning in connection with the modular
invariance, the advantage of this deﬁnition is that one can separate vertex operators from
other formal series or analytic functions in the proofs of the properties of the algebra. This
advantage makes it particularly simple for our generalization such that all the proofs are
identical to those in [H2] except for some properties of the operator N . Because of this
reason, we give our generalization by generalizing the deﬁnition in [H2]. Just as in [H2],
the diﬀerence between the deﬁnition given in this section and a direct generalization of
the deﬁnitions of Zhu and Dong-Li-Mason is given by an isomorphism obtained from the
conformal transformation 1
2πi log(1 + 2πiz), the geometry underlying vertex operators and
the Virasoro operators.

For weight homogeneous u ∈ V [a+Z], a ∈ P (V ), let l(u) ∈ a+Z such that ℜ(wt u−n−1) <
0 for n ∈ a + Z and n − a ≥ l(u) − a. Then l(u) = wt u + a when a ∈ P (V ) ∩ (I) and
l(u) = wt u + a − 1 when a ∈ P (V ) ∩ ((0, 1) + I). We deﬁne a linear operator L on V by
Lu = l(u)u for weight homogeneous u ∈ V [α] and linearity. We deﬁne a product •g in V as
follows: For u, v ∈ V ,

u •g v = Resyy−1Y (cid:18)(1 + y)L−L(0)+N u,

1

2π√−1

log(1 + y)(cid:19) v

Y (e2π√−1x(L−L(0)+N )u, x)v.

= Resx

2π√−1e2π√−1x
e2π√−1x − 1

Recall the operator A deﬁned in Section 2. Let ˜Og(V ) be the subspace of V spanned by
elements of the form

Resyy−nY (cid:18)yL(0)−L+A(1 + y)L−L(0)+N u,

1

2π√−1

log(1 + y)(cid:19) v

= Resx

2π√−1e2π√−1x
(e2π√−1x − 1)n

Y  (cid:18)

1

e2π√−1x − 1(cid:19)L(0)−L+A

e2π√−1x(L−L(0)+N )u, x! v

22

for n > 1, u, v ∈ V . Note that by deﬁnition, when u 6∈ V [0], u •g v ∈ ˜Og(V ). Also note that

Resyy−nY (cid:18)(1 + y)L−L(0)+N u,

1

2π√−1

log(1 + y)(cid:19) v ∈ ˜Og(V )

(4.1)

for n > 1 since for homogeneous u, (L(0) − L + A)u is either 0 or u.

Let ˜Ag(V ) = V / ˜Og(V ).

Theorem 4.1 The product •g in V induces a product (denoted still by •g) in ˜Ag(V ) such
that ˜Ag(V ) together with this product and the equivalence class of the vacuum 1 ∈ V is an
associative algebra with identity. Moreover, for any u, v ∈ V , (L(−1)u) •g v ∈ ˜Og(V ) and
u•g v ≡ v•g u− 2π√−1u0v mod ˜Og(V ). In particular, ω + ˜Og(V ) is in the center of ˜Ag(V ).
Proof. The proof is the same as the proof of Proposition 6.1 in [H2] except that we need to
use (2.14) to take care of the additional operator e2π√−1xN appearing in the deﬁnition and
we need to take care of those factors involving a ∈ P (V ) just as in [DLM1]. To convince
the reader that the same proof together with (2.14) and with the adjustments involving
a ∈ P (V ) indeed works, we give as an example the proof that
Y  (cid:18)
e2π√−1x − 1(cid:19)L(0)−L+A
2π√−1e2π√−1ax
(e2π√−1x − 1)n

2π√−1e2π√−1x
(e2π√−1x − 1)n
= Resx

Y (e2π√−1xN u1, x)u2! •g u3

e2π√−1x(L−L(0)+N )u, x! v

Resx

(4.2)

1

is in ˜Og(V ) when u1 ∈ V [a+Z] (a 6= 0), u2, u3 ∈ V and n > 1.

In the case that u2 ∈ V [b+Z] and b 6= 1 − a,

Resx

2π√−1e2π√−1ax
(e2π√−1x − 1)n

Y (e2π√−1xN u1, x)u2 ∈ V [a+b+Z] 6= V [0].

Thus by deﬁnition, (4.2) is in ˜Og(V ). The only case we need to consider is u2 ∈ V [1−a+Z].
Using the deﬁnition of •g, (2.14), the Jacobi identity for the vertex operator for V and
the property of the formal delta function, we modify the ﬁrst step in (6.8) in [H2] to obtain
that (4.2) is equal to

Resx0Resx2

2π√−1e2π√−1ax0
(e2π√−1x0 − 1)n

2π√−1e2π√−1x2
e2π√−1x2 − 1

= Resx0Resx2

Y (e2π√−1x2N Y (e2π√−1x0N u1, x0)u2, x2)u3

2π√−1e2π√−1ax0
(e2π√−1x0 − 1)n
·Y (Y (e2π√−1(x2+x0)N u1, x0)e2π√−1x2N u2, x2)u3

2π√−1e2π√−1x2
e2π√−1x2 − 1

·

23

= Resx1Resx2Resx0

−Resx1Resx2Resx0

= Resx1Resx2Resx0

2π√−1e2π√−1ax0
(e2π√−1x0 − 1)n
0 δ(cid:18)x1 − x2
·x−1

2π√−1e2π√−1x2
e2π√−1x2 − 1

·

·

2π√−1e2π√−1x2
e2π√−1x2 − 1

x0 (cid:19) Y (e2π√−1(x2+x0)N u1, x1)Y (e2π√−1x2N u2, x2)u3
2π√−1e2π√−1ax0
(e2π√−1x0 − 1)n
−x0 (cid:19) Y (e2π√−1x2N u2, x2)Y (e2π√−1(x2+x0)N u1, x1)u3
0 δ(cid:18)x2 − x1
·x−1
2π√−1e2π√−1ax0
(e2π√−1x0 − 1)n
0 δ(cid:18)x1 − x2
·x−1

x0 (cid:19) Y (e2π√−1x1N u1, x1)Y (e2π√−1x2N u2, x2)u3
2π√−1e2π√−1ax0
(e2π√−1x0 − 1)n
−x0 (cid:19) Y (e2π√−1x2N u2, x2)Y (e2π√−1x1N u1, x1)u3.

2π√−1e2π√−1x2
e2π√−1x2 − 1

2π√−1e2π√−1x2
e2π√−1x2 − 1

0 δ(cid:18)x2 − x1
·x−1

·

·

(4.3)

−Resx1Resx2Resx0

Then using the same remaining steps in (6.8) in [H2], we see that the right-hand side of (4.3)
is equal to

Xk∈N(cid:18)−n

Y (e2π√−1x2N u1, x1)Y (e2π√−1x2N u2, x2)u3

k (cid:19)Resx1Resx22π√−1e−2π√−1a(x2−x1)(e−2π√−1x2 − 1)−n−ke2π√−1(−n−k)x1 ·

k (cid:19)Resx1Resx22π√−1e2π√−1a(x1−x2)(e2π√−1x1 − 1)−n−ke−2π√−1(−n−k)x2·
·(e−2π√−1x2 − 1)k 2π√−1e2π√−1x2
e2π√−1x2 − 1
−Xk∈N(cid:18)−n
·(e2π√−1x1 − 1)k 2π√−1e2π√−1x2
e2π√−1x2 − 1
k (cid:19)Resx2e−2π√−1ax2e−2π√−1(−n−k)x2(e−2π√−1x2 − 1)k 2π√−1e2π√−1x2
e2π√−1x2 − 1
2π√−1e2π√−1ax1
Y (e2π√−1x2N u1, x1)Y (e2π√−1x2N u2, x2)u3
(e2π√−1x1 − 1)n+k
k (cid:19)Resx1e2π√−1ax1(−1)−n−ke2π√−1(−n−k)x1(e2π√−1x1 − 1)k ·
2π√−1e2π√−1(1−a)x2
(e2π√−1x2 − 1)1+n+k

Y (e2π√−1x2N u2, x2)Y (e2π√−1x2N u1, x1)u3

e2π√−1(n+k)x2Y (e2π√−1x2N u2, x2)Y (e2π√−1x2N u1, x1)u3.

−Xk∈N(cid:18)−n

·Resx1

·Resx2

·

=Xk∈N(cid:18)−n

(4.4)

24

The ﬁrst term in the right-hand side of (4.4) is in ˜Og(V ). Since u2 ∈ V [1−a+Z]
6= V [0] and
e2π√−1(n+k)x2 can be written as a polynomial in e2π√−1x2 − 1 with degree less than or equal
to n + k, the second term in the right-hand side of (4.4) is also in ˜Og(V ).
Note that N ω = 0. Thus the same proof as in the proof of Proposition 6.1 in [H2] gives
(L(−1)u) •g v ∈ ˜Og(V ) and u •g v ≡ v •g u − 2π√−1u0v mod ˜Og(V ) .

We now derive a generalization of the algebra Ag(V ) introduced in [DLM1]. Recall the

invertible operator

U(1) = (2π√−1)L(0)e−L+(A)

Note that N commutes with all the Virasoro operators (see (2.16)). Thus (1.5) in [H2] gives

AjL(j) and the coeﬃeients Aj for j ∈ Z+

− Xj∈Z+

∂y

Ajyj+1 ∂
 y.


(4.5)

1

are uniquely determined by

on V introduced in [H2], where L+(A) = Pn∈Z+
exp
U(1)Resyy−nY (cid:18)(1 + y)N u,

(e2π√−1y − 1) =

2π√−1

We deﬁne a product ∗ on V by

1

2π√−1

log(1 + y)(cid:19) v
= Resyy−nY (cid:0)(1 + y)L(0)+NU(1)u, y(cid:1)U(1)v.
u ∗g v = Resxx−1Y (cid:0)(1 + x)L+N u, x(cid:1) v
Resxx−nY (cid:0)xL(0)−L+A(1 + x)L+N u, x(cid:1) v

for u, v ∈ V . Let Og(V ) be the subspace of V spanned by elements of the form

for n > 1, u, v ∈ V . By (4.5), we obtain the following result:
Corollary 4.2 Let Ag(V ) = V /Og(V ). Then Ag(V ) is an associative algebra isomorphic to
˜Ag(V ). The isomorphism from ˜Ag(V ) to Ag(V ) is given by the map induced from U(1).
Because of Corollary 4.2, the categories of Ag(V )-modules and ˜Ag(V ) are equivalent.
Since the map U(1) corresponds to the coordinate change from the standard coordinate on
an annulus centered at 0 in the sphere C∪{0} to the standard coordinate on the corresponding
parallelogram, the algebra ˜Ag(V ) deﬁned using this coordinate change is most suitable for
the study of the modular invariance (see [H2]).

25

5 Functors between module categories

In this section, we construct functors between suitable categories of Zg(V )-modules, ˜Ag(V )-
modules, Ag(V )-modules and g-twisted V -modules.

We are interested only in Zg(V )-modules that have compatible actions of g and can be
written as direct sums of generalized eigenspaces of the actions of g. Recall the notation
[og(v)] for v ∈ V in Section 3. We are also interested in such Zg(V )-modules with another
grading given by the generalized eigenspaces of [og(ω)] ∈ Zg(V ).
Deﬁnition 5.1 Let M be a Zg(V )-module. If M = `α∈C/Z M [α] where M [α] for α ∈ C/Z
are the generalized eigenspaces of the action of g, we call M a g-graded Zg(V )-module.
Let M = `n∈C,α∈C/Z M [α]
[n] be a Zg(V )-module with double gradings by C and by C/Z
[n] for n ∈ C are generalized
(or equivalently, by a subset of [0, 1)).
eigenspaces of the action of [og(ω)] on M with eigenvalues n (called weights) and the C/Z-
grading is given by the generalized eigenspaces of an action of g compatible with the Zg(V )-
module structure, then we call M a doubly-graded Zg(V )-module or simply graded Zg(V )-
[n] be a graded Zg(V )-module, if for each n ∈ C and each
[n+l] = 0 for suﬃciently negative real number l, we call M a lower bounded Zg(V )-
[n] is called grading restricted if

module. Let M = `n∈C,α∈C/Z M [α]
α ∈ C/Z, M [α]
module. A lower bounded Zg(V )-module M =`n∈C,α∈C/Z M [α]

If M[n] = `α∈C/Z M [α]

[n] < ∞ for n ∈ C, α ∈ C/Z.

dim M [α]

Note that in particular, Zg(V ) itself is a g-graded Zg(V )-module.

+

,α∈C/Z W [α]

Let W = `n∈C
,a∈P (W ) W [a]
P (W ) of all g-weights of W .
n .
a ∈ P (V ) and b ∈ P (W ), either a + b ∈ P (W ) or a + b − 1 ∈ P (W ). Let

In particular, W = `n∈C

n be a C

+

+

-graded weak g-twisted V -module. Recall the set

It is clear that for

Ωg(W ) = {w ∈ W | u(k)w = 0 for homogeneous u ∈ V,ℜ(wt u − k − 1) < 0}.

-grading condition in Deﬁnition 2.1 and (2.10), Ωg(W ) = `r∈R W√−1r =
√−1r . In the case that W is a lower bounded g-twisted V -module, the gradings

on W also induce gradings on Ωg(W ). In particular, we have

Then by the C

+

`r∈R,a∈P (W ) W [a+Z]
Ωg(W ) = an∈C

(Ωg(W ))[n] = aa∈P (W )

(Ωg(W ))[a+Z] = an∈C,a∈P (W )

(Ωg(W ))[a+Z]

.

[n]

By Theorem 3.5, W is a Ug(V )-module and hence also a Ug(V )I-module. In particular,
Ωg(W ) generates a Ug(V )I-submodule of W . By the commutator formula (2.33), Ωg(W ) is
invariant under the action of v(wt v+a−1) for weight homogeneous v ∈ V [a+Z], a ∈ P (V )∩(I)
. In particular, the restriction of v(wt v +a−1) to Ωg(W ) gives us a linear operator oW (v) on
Ωg(W ). Also by the commutator formula (2.33), u1(m1)· · · uk(mk)w = 0 for homogeneous
ui ∈ V [ai], w ∈ Ωg(W ) and mi ∈ ai + Z satisfying ℜ(wt u1 − m1 − 1 +· · · + wt uk − mk − 1 +

26

wt w) < 0. Thus N(Ug(V )I) acts on Ωg(W ) as 0. In particular, Ωg(W ) is a Ug(V )I-module
and moreover Ωg(W ) is a Zg(V )-module with the action of Zg(V ) given by [og(v)]w = oW (v)w
for v ∈ V and w ∈ Ωg(W ). Note that the weight of the operator v(wt v + a − 1) for weight
homogeneous v ∈ V [a+Z], a ∈ P (V ) ∩ (I) is −a ∈ (I). Thus we have:
Proposition 5.2 The action of Zg(V ) on Ωg(W ) given by [og(v)]w = oW (v)w gives Ωg(W ) a
g-graded Zg(V )-module structure. When W is a lower bounded g-twisted V -module, Ωg(W )

is a lower bounded Zg(V )-module. In this case, `n∈r+I(Ωg(W ))[n] for r ∈ R are Zg(V )-

submodules of Ωg(W ).

+

+

+

+

Theorem 5.3 The functor Ωg from the category of C
-graded weak g-twisted V -modules to
the category of g-graded Zg(V )-modules given by W 7→ Ωg(W ) has a right inverse, that is,
there exists a functor Hg from the category of g-graded Zg(V )-modules to the category of
-graded weak g-twisted V -modules such that Ωg ◦ Hg = 1, where 1 is the identity functors
C
on the category of g-graded Zg(V )-modules. Moreover we can ﬁnd such Hg such that for any
-graded weak g-twisted V -module W , there exists a natural surjective homomorphism of
C
-graded weak g-twisted V -modules from Hg(Ωg(W )) to the C
-graded weak g-twisted V -
C
submodule of W generated by Ωg(W ). The restriction of Ωg to the category of lower bounded
g-twisted V -modules (or (grading-restricted generalized) g-twisted V -modules) is a functor
from this subcategory to the category of lower bounded Zg(V )-modules (or grading-restricted
Zg(V )-modules). The restrictions of Hg to the category of lower bounded Zg(V )-modules
(or grading-restricted Zg(V )-modules) is the right inverse of the restriction of Ωg to the
category of lower bounded g-twisted V -modules (or (grading-restricted generalized) g-twisted
V -modules) such that for any object W in the category, there exists a natural surjective
homomorphism in the category from Hg(Ωg(W )) to the lower bounded g-twisted V -submodule
(or the (grading-restricted generalized) g-twisted V -submodule) of W generated by Ωg(W ).

+

+

n

+

equipped with gradings by C

,α∈C/Z Hg(M)[α]

-graded weak g-twisted V -module.

and C/Z and an
action of g on W satisfying Conditions 1 to 3 in Theorem 3.5. Then by Theorem 3.5, we see
that Hg(M) is a C

Proof. Let M = `α∈C/Z M [α] be a g-graded Zg(V )-module. We now construct a Ug(V )-
module Hg(M) = `n∈C
From the deﬁnition of Ug(V ), Ug(V )− = `a∈ ˜P (V ),i∈N,ℜ(a+i)>0 Ug(V )−a−i is a subalgebra
of Ug(V ). Since M is a Zg(V )-module, it is also a Ug(V )I-module. We deﬁne the action
of Ug(V )− on M to be 0. Then M becomes a Ug(V )− ⊕ Ug(V )I-module. Let Hg(M) =
Ug(V ) ⊗Ug (V )−⊕Ug(V )I M. Then Hg(M) is a Ug(V )-module. By Proposition 3.4, elements of
Ug(V )k are of the form u1 + u2 where u1 ∈ πUg(V )T (L(V, g))k, and u2 is in the topological
completion of

+

aa∈ ˜P (V ),i∈Z+

(πUg(V )T (L(V, g))k+a+i)(πUg(V )T (L(V, g))−a−i).

Since (πUg(V )T (L(V, g))−a−i) ⊂ Ug(V )−a−i ⊂ Ug(V )− for a ∈ ˜P (V ) and i ∈ N satisfying
ℜ(a+i) > 0, it acts on M as 0 and thus u2w = 0 for w ∈ M. Since u1 ∈ πUg (V )T (L(V, g))k, it

27

is a linear combination of elements of the form u1(m1)· · · uk(mk) for ui ∈ V [ai+Z], ai ∈ P (V ),
mi ∈ ai + Z. Thus elements of Hg(M) are ﬁnite linear combinations of elements of the
form u1(m1)· · · uk(mk)w for ui ∈ V [ai+Z], ai ∈ P (V ), mi ∈ ai + Z and w ∈ M. Using the
commutator formula repeatedly and the actions of Ug(V )− and Ug(V )I on M, we see that
Hg(M) is spanned by elements of the same form for homogeneous ui ∈ V [ai+Z], ai ∈ P (V ),
mi ∈ ai + Z and w ∈ M, satisfying ℜ(wt ui − mi − 1) > 0.
For an element of the form u1(m1)· · · uk(mk) for weight homogeneous ui ∈ V [ai+Z], ai ∈
-degree to be wt u1 − m1 − 1 + · · · + wt uk − mk − 1.
P (V ), mi ∈ ai + Z, we deﬁne its C
-grading on Hg(M). The actions of g on Ug(V ) and M also induce an action
This gives a C
of g on Hg(M). Moreover, the C/Z-gradings by generalized eigenspaces for the actions of
g on Ug(V ) and M give a C/Z-grading by generalized eigenspaces for the action of g on
Hg(M). The C/Z-grading of Hg(M) can also be given explicitly by deﬁning the C/Z degree

+

+

i=1 ai + b + Z when w ∈ W [b+Z].

of u1(m1)· · · uk(mk)w to be Pk
m)(u1(m1)· · · uk(mk)w) = 0 when m > ℜ(wt u − a − 1 +Pk

Condition 1 in Theorem 3.5 is satisﬁed by Hg(M) because of the deﬁnition of the action
of g on Hg(M). Condition 2 in Theorem 3.5 is also satisﬁed by Hg(M) because u(a +
i=1(wt ui − mi − 1)). It is clear
-degree by wt u − n − 1 and the degree 0 homogeneous subspace of
that un changes the C
Hg(M) is M which is also the subspace of Hg(M) annihilated by Ug(V )−. Moreover, Hg(M)
is a direct sum of generalized eigenspaces for the action of g on Hg(M). Thus Condition 3
is satisﬁed.

+

Since our construction is natural, we obtain a functor Hg from the category of Zg(V )-

modules to the category of C

-graded weak g-twisted V -modules.

+

+

Now let W be a C

-graded weak g-twisted V -module. Then the C

By deﬁnition, M ⊂ Ωg(Hg(M)). Since Hg(M) is spanned by elements of the form
u1(m1)· · · uk(mk)w for homogeneous ui ∈ V [ai+Z], ai ∈ P (V ), mi ∈ ai + Z and w ∈ M
satisfying wt ui − mi − 1 > 0, we see that Ωg(Hg(M)) = M. Thus we have Ωg ◦ Hg = 1.
-graded weak
g-twisted V -submodule of W generated by Ωg(W ) is spanned by elements of the form
u1(m1)· · · uk(mk)w for ui ∈ V [ai+Z], ai ∈ P (V ), mi ∈ ai + Z and w ∈ Ωg(W ). Deﬁne a
linear map from Hg(Ωg(W )) to this submodule of W by sending the elements of the same
form in Hg(Ωg(W )) to these corresponding elements in this submodule. This linear map is
well deﬁned because the only relations among these elements in Hg(Ωg(W )) are given by the
commutator formula, the associator formula, the L(−1)-derivative property, the properties
for the vacuum and the Virasoro relations and these relations are all satisﬁed by the cor-
responding elements in the submodule of W . By deﬁnition, this linear map is a surjective
module map from Hg(Ωg(W )) to this submodule of W .

+

The other conclusions follows immediately.

+
We now discuss ˜Ag(V )- and Ag(V )-modules and C

-graded weak g-twisted V -modules.
As in the case of Zg(V )-modules, we also discuss only ˜Ag(V )- and Ag(V )-modules with
actions of g and are direct sums of generalized eigenspaces of the actions of g. As in the case
of Zg(V )-modules, we are also interested in g-graded ˜Ag(V )-modules with another grading
given by the generalized eigenspaces of ω + ˜Og(V ) ∈ ˜Ag(V ).

28

Deﬁnition 5.4 Let M be an ˜Ag(V )- or Ag(V )-module. If M =`α∈C/Z M [α] where M [α] for
α ∈ C/Z are the generalized eigenspaces of the action of g, then we call M a g-graded ˜Ag(V )-
and Ag(V )-module. Let M =`n∈C,α∈C/Z M [α]
[n] be an ˜Ag(V )-module with double gradings by
C and by C/Z (or equivalently, by a subset of [0, 1) + I). If M[n] =`α∈C/Z M [α]
[n] for n ∈ C are
generalized eigenspaces of the action of ω + ˜Og(V ) on M with eigenvalues n (called weights)
and the C/Z-grading is given by the generalized eigenspaces of an action of g compatible
with the ˜Ag(V )-module structure, then we call M a doubly-graded ˜Ag(V )-module or simply
a graded ˜Ag(V )-module. Let M = `n∈C,α∈C/Z M [α]
[n] be a graded ˜Ag(V )-module, if for each
n ∈ C and each α ∈ C/Z, M [α]
[n+l] = 0 for suﬃciently negative real number l, we call M
a lower bounded ˜Ag(V )-module. A lower bounded ˜Ag(V )-module M = `n∈C,α∈C/Z M [α]
is
called grading restricted if dim M [α]
[n] < ∞ for n ∈ C, α ∈ C/Z. The notions of graded Ag(V )-
module, lower bounded Ag(V )-module and grading-restricted Ag(V )-module are deﬁned in the
same way.

[n]

Note that in particular, ˜Ag(V ) (Ag(V )) itself is a g-graded ˜Ag(V )-module (Ag(V )-module).
,α∈C/Z W [α]
Let W =`n∈C
-graded weak g-twisted V -module. Deﬁne two linear
maps oW and ρW = oW ◦ U(1) from V to End Ωg(W ) by v 7→ oW (v) and v 7→ oW (U(1)v),
respectively, for v ∈ V , where

[n] be a C

+

+

oW (v)w = Resxxa−1Y0(xL(0)v, x)w = v(wt v + a − 1)w

for a ∈ P (V ) ∩ (I), weight homogeneous v ∈ V [a+Z], w ∈ Ωg(W ) and

oW (v)w = 0

We have the following:

when a 6∈ I, v ∈ V [a+Z], w ∈ Ωg(W ). By deﬁnition, oW and ρW are determined by their
restrictions to `a∈P (V )∩(I) V [a+Z].
Theorem 5.5 The spaces Og(V ) and ˜Og(V ) are in the kernels of oW and ρW , respectively,
and the maps given by u + Og(V ) 7→ oW (u) and u + ˜Og(V ) 7→ ρW (u) for u ∈ V give
Ωg(W ) g-graded Ag(V )- and ˜A(V )-module structures, respectively. When W is a lower
bounded g-twisted V -module, Ωg(W ) is a lower bounded Ag(V )- or ˜A(V )-module. In partic-

ular, `n∈r+I(Ωg(W ))[n] for r ∈ R are Ag(V )- and ˜A(V )-submodules of Ωg(W ) .
Proof. As in the proofs of Theorem 4.1 and Corollary 4.2, the proofs of the ﬁrst statement
for ˜Og(V ) and ˜Ag(V ) are the same as the corresponding proofs of the ﬁrst statement in
Proposition 6.4 in [H2] except for the use of (2.14) and for the adjustments involving a ∈
P (V ). The proofs for Og(V ) and Ag(V ) can be obtained either from those for ˜Og(V ) and
˜Ag(V ) using the map U(1) or by directly generalizing the proof in [Z] and [DLM1].

Here we give only the proof of the statement that

ρW  Resx0

2π√−1e2π√−1ax0
(e2π√−1x0 − 1)n

Y (e2π√−1x0N u, x0)v! = 0

(5.6)

29

for u ∈ V [a+Z], a ∈ P (V ), 0 < ℜ(a) < 1, and v ∈ V [b+Z].
by deﬁnition,

If a + b − 1 6∈ I, Y (e2π√−1x0N u, x0)v ∈ V [a+b+Z][[x, x−1]] where a + b + Z 6

ρW (Y (e2π√−1x0N u, x0)v) = 0

6∈ I + Z. Then

and thus (5.6) holds. So we need only consider the case a + b − 1 ∈ I. In this case, for
n ∈ Z+ and w ∈ Ωg(W ), using the deﬁnitions, (1.5) in [H2], the L(0)-conjugation formula,
(2.16), the basic property of the formal delta-function and the Jacobi identity (2.29) for Y0,
we have

Y0(U(x2)Y (e2π√−1x0N u, x0)v, x2)w

ρW  Resx0

2π√−1e2π√−1ax0
(e2π√−1x0 − 1)n

= Resx2

Resx0

1

x(1−a−b)+1
2

Y (e2π√−1x0N u, x0)v! w
2π√−1e2π√−1ax0
(e2π√−1x0 − 1)n

2π√−1e2π√−1ax0

(e2π√−1x0 − 1)n ·

x2−a−b
2

= Resx2Resx0
·Y0(xL(0)
= Resx2Resx0

2 Y (U(e2π√−1x0)e2π√−1x0N u, e2π√−1x0 − 1)U(1)v, x2)w

(e2π√−1x0 − 1)n ·

2π√−1e2π√−1ax0
2 U(e2π√−1x0)e2π√−1x0N u, x2(e2π√−1x0 − 1))xL(0)
2π√−1e2π√−1ax0

x2−a−b
2
·Y0(Y (xL(0)

2 U(1)v, x2)w

2 U(e2π√−1x0)u, x2(e2π√−1x0 − 1))xL(0)

2 U(1)v, x2)w

0 ·
yn

= Resx2Resx0

y0

= Resx2Resy0(cid:18)1 +
·Y0 Y  (cid:18)1 +

1

y0

x2−a−b
2

x3−a−b−n
2

(e2π√−1x0 − 1)n ·
·Y0(Y (e2π√−1x0N xL(0)
x2(cid:19)a−1
x2(cid:19)N
1 δ(cid:18)x2 + y0
x2(cid:19)N
1 δ(cid:18)x2 + y0
x2(cid:19)N

·Y0 Y  (cid:18)1 +

·Y0 Y  (cid:18)1 +

1 x−1

1 x−1

y0

y0

= Resx2Resy0Resx1xa−1

= Resx2Resy0Resx1xa−1

x1 (cid:19)(cid:18)x2 + y0

U(x2 + y0)u, y0!U(x2)v, x2! w
x1 (cid:19)a xb−2+n
·
U(x2 + y0)u, y0!U(x2)v, x2! w
x1 (cid:19)a xb−2+n
·

x1 (cid:19)(cid:18)x2 + y0

2
yn
0

2
yn
0

U(x1)u, y0!U(x2)v, x2! w

30

= Resx2Resy0Resx1

y−1

2
yn
0

xa−1
1 xb−2+n

0 δ(cid:18)x1 − x2
y0 (cid:19) ·
·Y0(U(x2 + y0)u, x1)Y0(U(x2)v, x2)w
0 δ(cid:18) x2 − x1
−y0 (cid:19) ·
·Y0(U(x2)v, x2)Y0(U(x2 + y0)u, x1)w

xa−1
1 xb−2+n

2
yn
0

y−1

−Resx2Resy0Resx1

= Resx2Resx1

−Resx2Resx1

2

1 xb−2+n
xa−1
(x1 − x2)n Y0(U(x1)u, x1)Y0(U(x2)v, x2)w
1 xb−2+n
xa−1
(−x2 + x1)n Y0(U(x2)v, x2)Y0(U(x1)u, x1)w.

2

(5.7)

Since w ∈ Ωg(W ), the right-hand side of (5.7) is 0.
Since the weight of the operator ρW (u) is I, `n∈r+I(Ωg(W ))[n] for r ∈ R are invariant
under ρW (u) and thus are ˜A(V )-submodules of Ωg(W ). The compatibility with the action
of g clear.

+

+

+

+

Theorem 5.6 The functor Ωg from the category of C
-graded weak g-twisted V -modules to
the category of g-graded Ag(V )-modules or ˜Ag(V )-modules given by W 7→ Ωg(W ) has a right
inverse, that is, there exist functors Sg and ˜Sg from the categories of g-graded Ag(V )-modules
and ˜Ag(V )-modules, respectively, to the category of C
-graded weak g-twisted V -modules such
that Ωg ◦ Sg = 1 and Ωg ◦ ˜Sg = ˜1, where 1 and ˜1 are the identity functors on the categories
of Ag(V )-modules and ˜Ag(V )-modules, respectively. Moreover we can ﬁnd such Sg and ˜Sg
-graded weak g-twisted V -module W , there exists a natural surjective
such that for any C
+
-graded weak g-twisted V -modules from Sg(Ωg(W )) or ˜Sg(Ωg(W )) to
homomorphism of C
-graded weak g-twisted V -submodule of W generated by Ωg(W ). The restriction of
the C
Ωg to the category of lower bounded g-twisted V -modules (or (grading-restricted) g-twisted
V -mdoules) is a functor from this subcategory to the category of lower bounded (or grading-
restricted) Ag(V )-modules or ˜Ag(V )-modules. The restrictions of Sg and ˜Sg to the categories
of lower bounded (or grading-restricted) Ag(V )-modules and ˜Ag(V )-modules, respectively, are
right inverses of the restriction of Ωg to the categories of lower bounded (or grading-restricted)
g-twisted V -modules such that for any lower bounded (or grading-restricted) g-twisted V -
module W , there exists a natural surjective homomorphism of such g-twisted V -modules from
Sg(Ωg(W )) or ˜Sg(Ωg(W )) to the lower bounded (or grading-restricted) g-twisted V -submodule
of W generated by Ωg(W ).

Proof. We prove only the results for ˜Ag(V ). The proofs of the results for Ag(V ) can be
derived from the results for ˜Ag(V ). The proofs of these results are the same as the proofs of
the second and third statements of Proposition 6.4 in [H2] except that instead of expressions
corresponding to the commutator formula, the L(−1)-derivative property and the associator
formula for V -modules, here we use the expressions corresponding to (2.31), (2.18) and
(2.34).

31

+

We need to construct a C

-graded weak g-twisted V -module from a g-graded ˜Ag(V )-
module. Recall the space L(V, g), the tensor algebra T (L(V, g)) and the notations we have
used in Section 3.

Let M = `α∈C/Z M [α] be a g-graded ˜Ag(V )-module and let ρ : ˜Ag(V ) → End M be the
map giving the representation of ˜Ag(V ) on M. Consider T (L(V, g))⊗M. Again for simplicity
we shall omit the tensor product sign. So T (L(V, g))⊗ M is spanned by elements of the form
u1(m1)· · · uk(mk)w for ui ∈ V [ai+Z], mi ∈ ai + Z, ai ∈ P (V ), i = 1, . . . , k, and w ∈ M [b+Z]
,
b ∈ [0, 1) + I, n ∈ C. For u ∈ V [a+Z], m ∈ a + Z where a ∈ P (V ), u(m) acts from the left on
T (L(V, g))⊗ M. In the case that ui are homogeneous with respect to the grading by weights,
-degree of u1(m1)· · · uk(mk)w to be (wt u1− m1− 1) +· · ·+ (wt uk− mk− 1)
we deﬁne the C
and its C/Z degree by a1 + · · · + ak + b + Z. For any u ∈ V [a+Z], let
0 (u, x) : T (L(V, g)) ⊗ M → T (L(V, g))[[x, x−1]]
Y t

[n]

+

be deﬁned by

Y t

0 (u, x) = Xm∈a+Z

u(m)x−m−1.

For a homogeneous element u ∈ V [a+Z], a ∈ P (V ) ∩ (I), let ot(u) = u(wt u + a − 1). Using
linearity, we extend ot(u) to inhomogeneous u ∈`a∈P (V )∩(I) V [a+Z].
Let I be the graded T (L(V, g))-submodule of T (L(V, g)) ⊗ M generated by elements
of the forms u(m)w (u ∈ V [a+Z], a ∈ P (V ), m ∈ a + Z, wt u − m − 1 < 0, w ∈ M),
ot(U(1)u)w − ρ(u + ˜O(V ))w (u ∈`a∈P (V )∩(I) V [a+Z], w ∈ M) and the coeﬃcients in x1 and
x2 of

0 (u, x1)Y t
Y t

0 (v, x2)Y t

0 (u, x1)w

0 (v, x2)w − Y t
1 δ(cid:18) x2 + x0

−Resx0x−1

x1 (cid:19)a
x1 (cid:19)(cid:18) x2 + x0

Y t

0  Y  (cid:18)1 +

x0

x2(cid:19)N

u, x0! v, x2! w

g (M) = (T (L(V, g))⊗M)/I. Then S1

(u ∈ V [a+Z], v ∈ V , a ∈ P (V ) and w ∈ T (L(V, g)) ⊗ M). Note that as in the proof
of Proposition 6.4 in [H2], the coeﬃcients of the formal expression above are indeed in
T (L(V, g))⊗M. Let S1
g (M) is also a graded T (L(V, g))-
module. In fact, by the deﬁnition of I, we see that S1
g (M) is spanned by elements of the
form u1(m1)· · · uk(mk)w + I for k ∈ N, homogeneous ui ∈ V [ai+Z], mi ∈ ai + Z, ai ∈ P (V ),
i = 1, . . . , k, and w ∈ M [b+Z], b ∈ [0, 1) + I, satisfying ℜ(wt u1 − m1 − 1) ≥ · · · ≥ ℜ(wt uk −
mk − 1) > 0. In particular, S1
and C/Z. Thus for homogeneous
u ∈ V and w ∈ S1
g (M), u(m)w = 0 when the real part of m is suﬃciently large. Moreover,
S1
g (M) = S1
g (M) spanned by elements of
the form above for k ∈ Z+.
ﬁcients in x of

g (M)+ ⊗ M, where S1

g (M)+ is the subspace of S1

g (M) generated by the coef-

g (M) is doubly graded by C

Let J be the C

+

+

× C/Z-graded T (L(V, g))-submodule of S1
Y t
0 (L(−1)u, x)w −

0 (u, x)w + x−1Y t
Y t

d
dx

0 (N u, x)w

32

and the coeﬃcients in x0 and x2 of

(x0 + x2)lY t

0 (u, x0 + x2)Y t

0 (v, x2)w − (x2 + x0)lY t

0  Y  (cid:18)1 +
g (M)) for u ∈ V [a+Z], v ∈ V , w ∈ S1

x0

x2(cid:19)N

u, x0! v, x2! w

+

Let Sg(M) = S1

g (M)/J . Then Sg(M) is also a C

(which are indeed in S1
g (M) and l ∈ a + Z satisfying
u(n)w = 0 for n ∈ a + Z such that n − a ≥ l − a.
× C/Z-graded T (L(V, g))-module.
We can still use elements of T (L(V, g)) ⊗ M to represent elements of Sg(M). But note
that these elements now satisfy relations. We equip Sg(M) with the vertex operator map
Y g
: V ⊗ Sg(M) → Sg(M)[[x, x−1]] given by u ⊗ w 7→ Y g
0 (u, x)w. As in
0
g (M), for u ∈ V [a+Z], m ∈ a + Z and w ∈ Sg(M), we also have u(m)w = 0 when the
S1
real part of wt u − m − 1 is suﬃciently negative. Clearly Y g
0 (1, x) = 1Sg(M ) (where 1Sg(M )
is the identity operator on Sg(M)). By deﬁnition, we know that the commutator formula,
the weak associativity and the L(−1)-derivative property for Y g
-grading
condition is also clear. Thus Sg(M) is a C

-graded weak g-twisted V -module.

0 all hold. The C

0 (u, x)w = Y t

+

+

We still need to show that Ωg(Sg(M)) = M. To prove this fact, we need only prove that
g (M) to M.

the relations given by J already hold in M. Let πM be the projection from S1
we need only prove that

πM Y t

0 (L(−1)u, x)w − πM

d
dx

and

0 (u, x)w + πM x−1Y t
Y t

(5.8)

0 (N u, x)w = 0
x2(cid:19)N

x0

0 (u, x0+x2)Y t

(x0+x2)l(u)πM Y t

0 (v, x2)w = (x2+x0)l(u)πM Y t

0  Y  (cid:18)1 +
u, x0! v, x2! w.
(5.9)
in S1
g (M) for homogeneous u ∈ V [a+Z], v ∈ V , w ∈ M ⊂ S1
g (M) and recall l(u) ∈ a + Z in
Section 4 deﬁned by wt u−n−1 < 0 (thus u(n)w = 0) for n ∈ a+Z satisfying n−a ≥ l(u)−a.
Since u is homogeneous with respect to the C-grading (weight grading), the terms whose
weights are in I in the series Y t
0 (N u, x) are 0 when
a 6∈ P (V ) ∩ I and are (L(−1)u)(wt u + a)x−wt u−a−1, (−wt u − a)u(wt u + a − 1)x−wt u−a−1
and (N u)(wt u + a − 1)x−wt u−a−1, respectively, when a ∈ P (V ) ∩ I. Then in S1
g (M), for
a ∈ P (V ) ∩ I,
πM Y t

0 (L(−1)u, x)w − πM
= ((L(−1)u)(wt u + a) + (wt u + a)u(wt u + a − 1) + (N u)(wt u + a − 1))wx−wt u−a−1
= ot((L(−1) + L(0) + N )u)wx−wt u−a−1
= ot((L(−1) + L(0) + N )U(1)(U(1))−1u)wx−wt u−a−1.

0 (u, x)w + πM x−1Y t
Y t

0 (L(−1)u, x) ,

0 (u, x) and x−1Y t

0 (N u, x)w

dx Y t

d
dx

d

(5.10)
2π√−1) and the fact that the Virasoro operators

By (1.15) in [H2] ((L(−1)+L(0))U(1) = U(1) L(−1)
commutes with N , we have

(L(−1) + L(0) + N )U(1) = U(1)(cid:18) L(−1)
2π√−1

+ N(cid:19) .

33

Thus the right-hand side of (5.10) is equal to

ot(cid:18)U(1)(cid:18) L(−1)
2π√−1
= ρ(cid:18)(cid:18) L(−1)
2π√−1

+ N(cid:19) (U(1))−1u(cid:19) wx−wt u−a−1
+ N(cid:19) (U(1))−1u + ˜Og(V )(cid:19) wx−wt u−a−1.

(5.11)

But a minor modiﬁcation of the proof of the conclusion (L(−1)u) • v ∈ ˜O(V ) in Theorem
6.1 in [H2] gives

In fact, for v ∈ V , using the properties of the vertex operator map Y and (2.16), we have

L(−1)v = Resx

= Resx

(cid:18) L(−1)
2π√−1
2π√−1e2π√−1x
e2π√−1x − 1
2π√−1e2π√−1x
e2π√−1x − 1
2π√−1e2π√−1x
e2π√−1x − 1

−Resx

+ N(cid:19) (U(1))−1u ∈ ˜Og(V ).

Y (e2π√−1xN L(−1)v, x)1

d
dx

Y (e2π√−1xN v, x)1
Y (e2π√−1xN 2π√−1N v, x)1

= −Resx  d

dx

2π√−1e2π√−1x
e2π√−1x − 1 ! Y (e2π√−1xN v, x)1 − 2π√−1N v

= Resx

(2π√−1)2e2π√−1x
(e2π√−1x − 1)2

Y (e2π√−1xN v, x)1 − 2π√−1N v

Thus

(cid:18) L(−1)
2π√−1

+ N(cid:19) v =

1

=

1

2π√−1
2π√−1
∈ ˜Og(V ).

(L(−1) + 2π√−1N )v
(2π√−1)2e2π√−1x
(e2π√−1x − 1)2

Resx

Y (e2π√−1xN v, x)1

Since ρ(v + ˜Og(V )) = 0 for v ∈ ˜Og(V ), the right-hand side of (5.11) and thus the right-hand
side of (5.10) are 0 in S1
We now prove (5.9). To prove (5.9), we need only prove that coeﬃcients in x0 of the two

g (M), proving (5.8).

sides of (5.9) are equal, that is, for n ∈ Z,

Resx0xn

0 (x0 + x2)l(u)πM Y t

0 (u, x0 + x2)Y t

= Resx0xn

0 (x2 + x0)l(u)πM Y t

0 (v, x2)w
x0

0  Y  (cid:18)1 +

x2(cid:19)N

34

u, x0! v, x2! w.

(5.12)

For n ∈ Z, by changing the variable from x0 to x1, we obtain

Resx0xn

0 (x0 + x2)l(u)πM Y t
= Resx1(x1 − x2)nxl(u)
For n ∈ N, using the commutator formula for Y t
of (5.13) is equal to

0 (u, x0 + x2)Y t
1 πM Y t
0 (u, x1)Y t

0 (v, x2)w
0 (v, x2)w.

(5.13)

0 for S1

g (M), we see that the right-hand side

1 πM Y t

Resx1(x1 − x2)nxl(u)

0 (v, x2)Y t
+Resx1Resx0(x1 − x2)nxl(u)

1 x−1

0 (u, x1)w

1 δ(cid:18)x2 + x0
x2(cid:19)N

x1 (cid:19)a
x1 (cid:19)(cid:18)x2 + x0
u, x0! v, x2! w.

x0

·πM Y t

0  Y  (cid:18)1 +

·

(5.14)

Since u(l(u))w = 0,

Resx1xl(u)+i

1

Y t
0 (u, x1)w = 0

for 0 ≤ i ≤ n. Thus the ﬁrst term in the right-hand side of (5.14) is 0. The second term in
the right-hand side of (5.14) is equal to

x0

Resx0xn

0 (x2 + x0)l(u)πM Y t

0  Y  (cid:18)1 +

u, x0! v, x2! w.

For n ∈ −Z+ − 1, (x1 − x2)nxl(u)

x2(cid:19)N
From (5.14) and (5.15), we obtain (5.12) in the case n ∈ N.
0 (u, x1) contains terms proportional to u(l(u) + n − i)
for i ∈ N. Recall from Section 4 that l(u) = wt u + a when a ∈ I and l(u) = a + wt u − 1
when a ∈ P (V ) ∩ ((0, 1) + I). Together with n ∈ −Z+ − 1 and i ∈ N, we have πM u(l(u) +
n − i)v(k)w = 0 for k ∈ C. Thus the right-hand side of (5.13) is 0. We now show that the
right-hand side of (5.12) is also 0. First note that for homogeneous u ∈ V [a+Z] and w ∈ M,
πM Y g
0 (xL(0)u, x)w = u(wt u + a − 1)w = ot(u)w if a ∈ P (V ) ∩ I and is 0 if otherwise. Now
come back to u, v, w as above. Recall the operator L introduced in Section 3. By changing
the variable x0 to y = x0
x2

, we obtain

1 Y t

(5.15)

Resx0xn

0 (x2 + x0)l(u)πM Y t

= Resyx2(x2y)n(x2 + x2y)l(u)πM Y t
= xl(u)+n+1+wt u+wt v

2

2

2

= xl(u)+n+1+wt u+wt v
= xl(u)+n+1+wt u+wt v

x0

πM Y t

u, x0! v, x2! w

0  Y  (cid:18)1 +
0 (cid:16)xL(0)

x2(cid:19)N
0 (cid:0)Y (cid:0)(1 + y)N u, x2y(cid:1) v, x2(cid:1) w
2 ResyynY (cid:0)(1 + y)L+N u, y(cid:1) v, x2(cid:17) w
ot(ResyynY (cid:0)(1 + y)L+N u, y(cid:1) v)w
ρ(U(1)−1ResyynY (cid:0)(1 + y)L+N u, y(cid:1) v + ˜Og(V ))w.

(5.16)

35

By (4.5) and (4.1),

U(1)−1ResyynY (cid:0)(1 + y)L+N u, y(cid:1) v

= ResyynY (cid:18)(1 + y)L−L(0)+NU(1)−1u,
∈ ˜Og(V ).

1

2π√−1

log(1 + y)(cid:19)U(1)−1v

(5.17)

Thus the right-hand side of (5.16) is 0.

We still need to prove (5.12) in the case n = −1. We ﬁrst prove this formula when
a ∈ P (V )∩ ((0, 1) + I). Since l(u) = wt u + a− 1 and πM u(l(u)− 1− i)v(k)w = πM u(wt u +
a − 2 − i)v(k)w = 0 for i ∈ N and k ∈ C,

Resx0x−1

0 (x0 + x2)l(u)πM Y t
= Resx1(x1 − x2)−1xl(u)
= 0.

0 (u, x0 + x2)Y t
0 (u, x1)Y t
1 πM Y t

0 (v, x2)w
0 (v, x2)w

(5.18)

On the other hand, the same calculation as in (5.16) and (5.17) gives

Resx0x−1

0 (x2 + x0)l(u)πM Y t

0  Y  (cid:18)1 +

x0

x2(cid:19)N

u, x0! v, x2! w

= xl(u)+wt u+wt v

2

= xl(u)+wt u+wt v

2

ρ(U(1)−1Resyy−1Y (cid:0)(1 + y)L+N u, y(cid:1) v + ˜Og(V ))w
ρ Resyy−2Y yL(0)−L+A(1 + y)L−L(0)+N ·

= 0

·U(1)−1u,

1

2π√−1

log(1 + y)!U(1)−1v + ˜Og(V )!w

(5.19)

because a ∈ P (V )∩((0, 1)+I), proving (5.12) in this case (n = −1 and a ∈ P (V )∩((0, 1)+I)).
In the case a ∈ P (V ) ∩ I, since l(u) = wt u + a, we have πM u(l(u) − 1 − i)v(k)w =
πM u(wt u + a − 1 − i)v(k)w = 0 for i ∈ Z+ and k ∈ C, πM u(l(u) − 1)v(k)w = 0 for either
v ∈ V [b], b ∈ P (V ) ∩ ((0, 1) + I), k ∈ C or v ∈ V [b], b ∈ P (V ) ∩ I, k 6= wt v + b − 1 and
πM u(l(u)− 1)v(wt v + b − 1)w = u(wt u + a − 1)v(wt v + b − 1)w for v ∈ V [b], b ∈ P (V ) ∩ I.
Using these formulas, we see that in the case v ∈ V [b] and b ∈ P (V ) ∩ ((0, 1) + I), the
right-hand side of (5.13) is equal to 0. But in this case,

Y t

0  Y  (cid:18)1 +

x0

x2(cid:19)N

u, x0! v, x2! w = 0.

Thus (5.12) holds in this case (n = −1, a ∈ P (V ) ∩ I and b ∈ P (V ) ∩ ((0, 1) + I)). In the

36

case v ∈ V [b] and b ∈ P (V ) ∩ I, the right-hand side of (5.13) is equal to

x−wt v
2

u(wt u + a − 1)v(wt v + b − 1)w

2

2

2

= x−wt v
= x−wt v
= x−wt v
= x−wt v
= x−wt v
= x−wt v
= x−wt v

2

2

2

2

ot(u)ot(v)w
ρ(U(1)−1u + ˜Og(V ))ρ(ρ(U(1)−1v + ˜Og(V ))w
ρ((U(1)−1u •g U(1)−1v) + ˜Og(V ))w
ρ(U(1)−1(u ∗g v) + ˜Og(V ))w
ot(u ∗g v)w
0 (xL(0)
πM Y t
Resyy−1πM Y t

2

u,

x0

πM Y t

= Resx0x−1

0 x−wt v

2

= Resx0x−1

0 (x2 + x0)lπM Y t

x2! v, x2! w

x2(cid:19)L(0)+N
x2(cid:19)N

2 Y ((1 + y)L(0)+N u, y)v, x2)w
x0

(u ∗g v), x2)w
0 (xL(0)
2 Y  (cid:18)1 +
0  xL(0)
0  Y  (cid:18)1 +
proving (5.12) in the case n = −1, a, b ∈ P (V ) ∩ I.
-graded weak g-twisted V -module. We deﬁne a linear map from Sg(Ωg(W ))
to W by mapping u1(m1)· · · uk(mk)w of Sg(M) to u1(m1)· · · uk(mk)w of W for ui ∈ V [ai+Z],
mi ∈ ai+Z (i = 1, . . . , k) and w ∈ Ωg(W ). Note that the only relations among u1(m1)· · · uk(mk)w
for ui ∈ V , mi ∈ Z (i = 1, . . . , k) and w ∈ Ωg(W ) are given by the action of V on Ωg(W ),
the commutator formula, the weak associativity and the L(−1)-derivative property for Y g
0 .
These relations also hold in W . Thus this map is well-deﬁned. Clearly, this is a surjec-
tive homomorphism of C
-graded
weak g-twisted V -submodule of W generated by Ωg(W ).

-graded weak g-twisted V -modules from Sg(Ωg(W )) to C

u, x0! v, x2! w,

Let W be a C

(5.20)

x0

+

+

+

The other statements follow immediately.

6

Isomorphisms between Zg(V ), ˜Ag(V ) and Ag(V )

In this section, using the results obtained in the preceding sections, we prove that the algebras
Zg(V ), ˜Ag(V ) and Ag(V ) arel isomorphic to each other.

Theorem 6.1 The associative algebras Zg(V ) and Ag(V ) are isomorphic.

-
Proof. We view Ag(V ) as an Ag(V )-module. Then by Theorem 5.6, Sg(Ag(V )) is a C
graded g-twisted V -module such that Ωg(Sg(Ag(V ))) = Ag(V ). Then by Proposition 5.2,
Ag(V ) is a Zg(V )-module and, by deﬁnition, the action of Zg(V ) on Ag(V ) is given by the
homomorphism from Zg(V ) to the endomorphism algebra of Ag(V ) determined by [og(v1)] 7→
(v+Og(V )) for v ∈ V , where (v+Og(V )) is viewed as an element of the endomorphism algebra

+

37

+

of Ag(V ). Here we have also used Proposition 3.7. Since the image of this homomorphsim is
in fact in Ag(V ), it is in fact a homomorphism f : Zg(V ) → Ag(V ) of associative algebras.
Conversely, we view Zg(V ) as a Zg(V )-module. Then by Theorem 5.3, Hg(Zg(V )) is a
-graded g-twisted V -module such that Ωg(Hg(Zg(V ))) = Zg(V ). Then by Theorem 5.5,
C
Zg(V ) is an Ag(V )-module and, by deﬁnition, the action of Ag(V ) on Zg(V ) is given by the
homomorphism from Ag(V ) to the endomorphism algebra of Zg(V ) deﬁned by (v+Og(V )) 7→
[og(v)] for v ∈ V , where [og(v)] is viewed as an element of the endomorphism algebra of Zg(V ).
Since the image of this homomorphsim is in fact in Zg(V ), it is in fact a homomorphism
g : Ag(V ) → Zg(V ) of associative algebras.
algebras.

Clearly f and g are inverse to each other. Thus they are isomorphisms of associative

Corollary 6.2 The associative algebras Zg(V ) and ˜Ag(V ) are isomorphic.

From Theorem 6.1, we also obtain an improvement of Proposition 3.7:

Corollary 6.3 The elements of Zg(V ) are of the form [og(v)] for v ∈ V .
Proof. Since an element of Ag(V ) is of the form v + Og(V ) for v ∈ V and under the
isomorphism from Ag(V ) to Zg(V ), such an element is mapped to [og(v)] for v ∈ V , the
conclusion follows.

Remark 6.4 Because of Theorem 6.1, if we have results for the algebra Zg(V ) (or Ag(V )),
we can immediately conclude that the same results hold for Ag(V ) (or Zg(V )). In particular,
we can derive the results in Section 5 on Ag(V ) (or Zg(V )) from the corresponding results
on Zg(V ) (or Ag(V )). But since our proof of Theorem 6.1 has used the results in Section 5
for both Zg(V ) and Ag(V ), the proofs of the results in Section 5 are all needed.

Remark 6.5 In many cases, using Corollary 6.3, it is easier to calculate Zg(V ) than to
calculate Ag(V ) or ˜Ag(V ). The algebra ˜Ag(V ) is more natural for the study of modular
invariance. The algebra Ag(V ) is in some sense a bridge between Zg(V ) and ˜Ag(V ). We
expect that Zg(V ) will play an important role in the future construction and study of twisted
modules and twisted intertwining operators.

References

[B]

[BN]

B. Bakalov, Twisted logarithmic modules of vertex algebras,
arXiv:1504.06381

to appear;

D. Brungs and W. Nahm, The associative algebras of conformal ﬁeld theory, Lett.
Math. Phys. 47 (1999), 379–383.

38

[DLM1] C. Dong, H. Li and G. Mason, Twisted representations of vertex operator algebras,

Math. Ann. 310 (1998), 571-600.

[DLM2] C. Dong, H. Li and G. Mason, Vertex operator algebras and associative algebras,

J. Algebra 206 (1998), 67-96.

[FLM]

I. B. Frenkel, J. Lepowsky and A. Meurman, Vertex Operator Algebras and the
Monster, Pure and Appl. Math., Vol. 134, Academic Press, Boston, 1988.

[FZ]

[H1]

[H2]

[H3]

[HLZ]

[HY]

[NT]

[T]

[Z]

I. B. Frenkel and Y. Zhu, Vertex operator algebras associated to representations
of aﬃne and Virasoro algebras, Duke Math. J. 66 (1992), 123–168.

Y.-Z. Huang, Generalized rationality and a Jacobi identity for intertwining oper-
ator algebras, Selecta Math. 6 (2000), 225–267.

Y.-Z. Huang, Diﬀerential equations, duality and modular invariance, Comm. Con-
temp. Math. 7 (2005), 649–706.

Y.-Z. Huang, Generalized twisted modules associated to general automorphisms
of a vertex operator algebra, Comm. Math. Phys. 298 (2010), 265–292.

Y.-Z. Huang, J. Lepowsky and L. Zhang, Logarithmic tensor category theory, V:
Convergence condition for intertwining maps and the corresponding compatibility
condition, to appear; arXiv:1012.4199.

Y.-Z. Huang and J. Yang, On functors between module categories for associative
algebras and for N-graded vertex algebras, J. Alg. 409 (2014), 344-361.

K. Nagatomo and A. Tsuchiya, Conformal ﬁeld theories associated to regular
chiral vertex operator algebras, I: Theories over the projective line, Duke Math.
J. 128 (2005), 393-471.

V. Turaev, Homotopy ﬁeld theory in dimension 3 and crossed group-categories,
arxiv:math.GT/0005291.

Y. Zhu, Modular invariance of characters of vertex operator algebras, J. Amer.
Math. Soc. 9 (1996), 237–307.

Department of Mathematics, Rutgers University, 110 Frelinghuysen Rd., Piscat-

away, NJ 08854-8019
E-mail address: yzhuang@math.rutgers.edu

Department of Mathematics, University of Notre Dame, 278 Hurley Building, Notre

Dame, IN 46556
E-mail address: jyang7@nd.edu

39

