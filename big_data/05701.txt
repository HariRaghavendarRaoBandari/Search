6
1
0
2

 
r
a

 

M
7
1

 
 
]
I

N
.
s
c
[
 
 

1
v
1
0
7
5
0

.

3
0
6
1
:
v
i
X
r
a

CONTENT CACHING AND DISTRIBUTION IN

SMART GRID ENABLED WIRELESS NETWORKS

XUEQING HUANG
NIRWAN ANSARI

TR-ANL-2016-001
MARCH 17, 2016

ADVANCED NETWORKING LABORATORY

DEPARTMENT OF ELECTRICAL AND COMPUTER ENGINEERING

NEW JERSY INSTITUTE OF TECHNOLOGY

1

Abstract

To facilitate wireless transmission of multimedia content to mobile users, we propose a content
caching and distribution framework for smart grid enabled OFDM networks, where each popular
multimedia ﬁle is coded and distributively stored in multiple energy harvesting enabled serving nodes
(SNs), and the green energy distributively harvested by SNs can be shared with each other through
the smart grid. The distributive caching, green energy sharing and the on-grid energy backup have
improved the reliability and performance of the wireless multimedia downloading process. To minimize
the total on-grid power consumption of the whole network, while guaranteeing that each user can
retrieve the whole content, the user association scheme is jointly designed with consideration of resource
allocation, including subchannel assignment, power allocation and power ﬂow among nodes, where the
user association scheme decides which SN serves which user. First, the optimal power allocated to each
subchannel and the power ﬂows among nodes are derived analytically. Then, the user association problem
is decoupled from the subchannel assignment problem, and the proposed user association scheme has
leveraged the multicasting nature of the content download process. To decide which subchannel is
assigned to which node, the number of subchannels assigned to each node is ﬁrst determined, according
to the green energy generating rate and the associated trafﬁc ofﬂoad, and then the corresponding
subchannels are selected from the total assigned system spectrum. Simulation results demonstrate that
bringing content, green energy and serving node closer to the end user can notably reduce the on-grid
energy consumption.

Distributive content cache, Content distribution, Energy harvesting, Smart grid, Energy sharing.

Index Terms

I. INTRODUCTION

Wireless content distribution, such as live streaming and on-demand video streaming, is
becoming the trending and expected core application for smart phone users. The throughput
performance of the wireless access networks and the life time of the battery-operated end devices
will be two key factors that limit the user experience. To reduce the user experienced latency,
various schemes have been designed to bring the content closer to the users, such as small cell
deployment and cloudlet content caching. Given that the probability of a single transmission from
the base station is useful for more than one user is rather high for the some of the applications,
content reuse schemes have also been designed [1]–[4].

Replication is the simplest cache scheme adopted by many distributed cache systems. For a
system with M disttibutive storage nodes, an identical copy of the ﬁle is kept at each node, and
the whole ﬁle can be downloaded from any node [5]. The effective redundancy factor, which
measures the size ratio between the total cached content and the original ﬁle, is M/1.

Instead of mirroring the entire content, coded content caching is proposed to reduce the
redundancy and improve the storage efﬁciency. The erasure/regeneration code means that a ﬁle
is divided into D initial fragments and then coded into M pieces, which will be separately stored
in each storage node [6], [7]. The whole ﬁle can be retrieved from any D coded pieces, where
D is the reconstruction degree. The effective redundancy factor of the erasure code is decreased
to M/D.

By leveraging the ultra-dense deployment of small cells and the advancement of device-to-
device communications, popular contents can be cached in different tiers, ranging from macro
cells to the device tier. The heterogeneous caching nodes can increase the robustness of the
content availability and further support user mobility [8]. In addition to the reliability, users
can download the desired content without going through backhaul links and retrieve it from
core networks. The shorter transmission distance will save radio resources and improve the user

2

experience in terms of trafﬁc latency. Shanmugam. et al. [9] proposed femtocaching, where
coded/uncoded contents are cached in multiple small cells. Given the ﬁle requests distribution
and the storage size of each femtocell, the placement of the content is studied such that the
downloading time is minimized.

In addition to the content storage schemes, the wireless content distribution scheme design
focuses on how to deliver the cached content to the ultimate destinations. When multiple users
are connected to one serving node, this node can unicast the stored content to each interested
user on a dedicated channel with a customized rate depending on its channel conditions, or the
node can multicast the content once to the interested users with a multicasting rate that is limited
by the worst channel conditions among them. The comparision between unicast and multicast
schemes has been conducted in [10].

The storage space and radio resources available at each storage and transmitting node are
crucial to the performances of the above mentioned coded content cache and distributive schemes.
Although the storage space at a base station or cloudlet is not a big concern because of the
advances of hardware technologies and the low cost of hard disk [11], the radio resources needed
to transmit and receive data will increase with the data size. To improve the energy efﬁciency
of the wireless content caching and distribution, energy harvesting (EH) has been proposed to
take fuel from readily available ambient sources, such as wind, solar, and even radio frequency
signals [12], [13]. Sharma et al. [14] proposed green cache for the off grid EH-enabled base
stations. The servers with multimedia caches will blink dynamically from active to inactive
states according to the available energy level. Zhou et al. [1] proposed green delivery for the
EH-powered small cells. Proactive caching and push have been jointly designed to resolve the
randomness and dynamics of harvested green energy and content requests.

In this paper, we propose the content caching and distribution for the smart grid enabled
heterogeneous networks, where each popular ﬁle is coded and stored in multiple EH-enabled
serving nodes, and the green energy distributively harvested by these nodes can be shared with
each other through the smart grid. The distributive caching, green energy sharing and the on-grid
energy backup have improved the reliability and performance of the wireless access networks.
To minimize the total on-grid power consumption, the user association scheme and the radio
resource allocation including spectrum and power are jointly designed. The simulations results
have shown that the proposed caching scheme with low effective redundancy factor can save
more on-grid energy consumption when the multimedia downloading rate requirement is very
high.

II. SYSTEM MODEL AND PROBLEM FORMULATION

Consider a downlink wireless network with an eNodeB (eNB) and a group of K users (UE)
that are closely located with each other. Suppose all of the UEs are interested in one multimedia
ﬁle. To bring the content and serving node closer to the users, M serving nodes (SNs) are
deployed, where SNs can be small cells or just end devices with the capability of data storage
and transmission. The node set in the system M = {1,··· , M + 1} includes node 1, i.e., eNB,
and SN set M(cid:48) = {2,··· , M + 1}.

In particular, as illustrated in Fig. 1, eNB maintains one full replica of the multimedia ﬁle, and
M coded pieces, each of size S, are distributively stored in serving nodes, with reconstruction
degree D. To retrieve the whole ﬁle, users can either connect with eNB or any D SNs.

The total spectrum resources shared by eNB and SNs are divided into N orthogonal subchan-
nels (SCs), each with bandwidth B. For Node i, deﬁne αi,j and βi,k as the indicator functions

3

Fig. 1: Hybrid distributive cached content in each node.

which will both equal to one when SC j is assigned to the link between node i and UE k, and
otherwise zero. Then, the subchannel set assigned to node i and the user set that will download
the coded content from node i are:

SC Set: Ni = {j ∈ N|αi,j = 1}
UE Set: Ki = {k ∈ K|βi,k = 1}.

(1)
When Ki consists of more than one user, the i-th node will multicast its cached piece to these
multiple users, and the multicasting rate is limited by the worst channel conditions among the
recipients [10]. Denote Pi,j as the power allocated by the i-th node to subchannel j, and the
downloading rate of associated node i can be expressed as follows [15]:

(cid:88)

j∈Ni

i,j}
{hk

Pi,j min
k∈Ki
N0B

Ri =

B log2(1 +

), i ∈ M,

(2)

where hk
i,j is the channel condition of SC j between node i and UE k, which is contributed by
the free space path loss which decreases inversely proportional to the square of the distance, the
multi path fading, and the shadowing fading which occurs when large objects block paths of
propagation. N0B represents the power of additive white Gaussian noise in the j-th subchannel.
All of the nodes in M are equipped with independent energy harvesters, such as solar panel
and wind turbine, as shown in Fig. 2. Suppose the green energy generating rate of node i is Ei,
i ∈ M. In case that the distributively harvested green power is insufﬁcient to support all the
data transmission, each node can also withdraw power from the smart grid; let the on-grid power
consumed by node i be P on

. Note that if the serving node i is an end user device, Ei = 0.

In addition to provide on-grid back up power supply, smart grid can be used as the green
energy transfer unit between any two nodes. The energy forwarding from one node to another
is through the smart grid credit exchange system. Node i can forward δi amount of its own
green energy to the grid in exchange for a grid credit. The grid credit can be used by other
nodes to purchase on-grid power. In addition, θ ≤ 1 is the green energy transfer efﬁciency that
is contributed by the power transmission line and the grid-tie inverter, which converts between
the harvested DC energy and the transferred AC energy.

i

Accordingly, the on-grid power consumption of each node is

(cid:34)(cid:88)

j∈Ni

(cid:35)+

P on

i =

Pi,j − (Ei − δi)

, i ∈ M,

(3)

where [•]+ = max{•, 0}. δi denotes the green energy that node i injects into the smart grid
(δi > 0) or the energy that node i draws from the grid using the grid credit (δi < 0).

12MSNCoded Pieces12DeNBOriginal File4

Fig. 2: Cooperative content distribution system.

Our aim is to minimize the total on-grid power consumption while constructing the original

ﬁle at all of the UEs.

s.t. c1 : Ri =

c2 : δi ≤ Ei, i ∈ M

S,

i = 1
i ∈ M(cid:48)

min

{δi,Pi,j ,αi,j ,βi,k}

P on

(cid:26) DS,

i

i∈M

(cid:80)
c3 : (cid:80)
c4 : (cid:80)
c5 : β1,k + (cid:80)

i∈M

i∈M

i∈M(cid:48)

(4)

δi(θ1{δi>0} + 1{δi<0}) ≥ 0
αi,j = 1, j ∈ N

βi,k

D ≥ 1, k ∈ K

c6 : Pi,j ≥ 0, i ∈ M, j ∈ N
c7 : αi,j, βi,k ∈ {0, 1}, i ∈ M, j ∈ N , k ∈ K

where c1 guarantees the downloading rate of each node so that users can successfully retrieve
the content. c2 imposes that the power injected into the grid should be less than the available
green energy. For c3, the indicator function 1{x} = 1 when x is true; otherwise, 1{x} = 0. c4
indicates that SC j can only be assigned to one node, and c5 indicates that UE k needs to at least
connect to eNB or any D nodes. c5 mandates that the withdrawn power should be no greater
than the total grid credit.

Note that 1) the assumption of users being able to connect with multiple serving nodes simulta-
neously is feasible, owing to recent advances of coordinated multi-point transmission/reception
(CoMP) technology, which has been proposed to improve the cell edge user performance by
allowing mutiple base stations to serve a single user at the same time [16]; 2) the orthogonal
channel allocation scheme is adopted among all of the serving nodes, because if there is a
subchannel overlap between node i1 and i2, users connected to both nodes cannot receive any
data because the data transmitted by two nodes are different. Moreover, because all the SNs
are deployed to serve a group of UEs that are not far away from each other, if the spectrum is
reused, there may be intolerable interference.

…eNBSolar panelSmart GridSN UEWind turbineGrid-tie Inverter…………Smart Meter5

III. PROBLEM ANALYSIS

To obtain the minimum on-grid power consumption, we ﬁrst analytically derive the power
allocated to each subchannel P k
i,j and the power ﬂow among nodes δi. Then, the user association
problem is decoupled from the subchannel assignment problem, and the proposed user association
scheme has taken advantage of the multicasting nature of the content download process. To decide
which subchannel is assigned to which node, the number of SCs assigned to each node is ﬁrst
determined, according to the green energy generating rate and the associated trafﬁc ofﬂoad, and
then the corresponding subchannels are selected from the total assigned system spectrum.

A. Power Allocation

Suppose Ni and Ki are given, and the objective function in (4) will only be subjected to the
data rate requirement in c1 and the law of conservation of energy ﬂow in c2 − c3. Then, the
power allocation problem is decoupled from the power ﬂow design problem, because for any Ni
and Ki, to minimize the total on-grid power consumption in (3), the power allocation scheme
Pi,j while satisfying the rate requirement. Moreover, each node

will have to minimize (cid:80)

can minimize the power consumption by itself without losing the global optimality.

j∈Ni

According to the water-ﬁlling algorithm, the optimal power allocation scheme of node i is

(cid:20)

(cid:21)+

Pi,j =

λi − 1
γmin
i,j

, i ∈ M, j ∈ Ni,

(5)

where the normalized signal to noise ratio (SNR) is deﬁned as follows:

(6)
where the minimum SNR which is decided by the worst channel conditions among users in Ki,
i.e.,

i,j/(N0B),

γk
i,j = hk

γmin
i,j = min
k∈Ki
The Lagrangian multiplier λi is given as follows:
B(cid:81)
B(cid:81)

(cid:32)
(cid:32)

2
j∈Ni

λi =

γmin
i,j

DS

S



2
j∈Ni

γmin
i,j

where Ni = |Ni| is the cardinality of Ni.

{γk

i,j}.
(cid:33) 1
(cid:33) 1

Ni

Ni

, i = 1

, i ∈ M(cid:48)

(7)

(8)

B. Power Flow
Let M+ = {i ∈ M|δi > 0} be the set of nodes which contribute green energy to other nodes,
and M− = {i ∈ M|δi ≤ 0} be the set of nodes, which tap on the grid credit. Then, as stated in
the following Lemma, nodes in M+ will transfer all the residual energy to other nodes through
the power grid.

Lemma 1: The optimal power ﬂow from node i, i ∈ M+, to the grid is

Pi,j

(9)

δi = Ei −(cid:88)

j∈Ni

6

(11)

(12)

(13)

(14)

i(cid:48)∈M+ θδi(cid:48). So, the grid credit available

Pi,j − (Ei − δi)

j∈Ni

is zero,

(cid:105)+

j∈Ni

i∈M− δi becomes
i∈M+ θδi}, and the objective function in (13) can be further

Proof: Since δi in M+ is greater than zero, (9) and c4 in (4) imply the following two

constraints imposed on Pi,j and P on

:

Pi,j < Ei, i ∈ M+

(cid:80)

j∈Ni



i

(cid:34)(cid:80)

j∈Ni

(cid:35)+

P on

i =

Pi,j − (Ei − δi)

= 0, i ∈ M+.

(10)

The intuition behind (9) is that 1) if δ∗

node i remains at zero, but the gird credit will decrease by θ(δi − δ∗
the increment in P on
θ(δ∗

i < δi is optimal, the on-grid power consumption of
i > δi is optimal,
i − δi, which is greater than the increment in the earned power grid
i −δi). So, in both cases, the total on-grid power consumption of all nodes in M will increase.
According to (10), the objective function in (4) becomes

i ); 2) if δ∗

is δ∗

i

maximum needed credit.

As a result, the optimal grid credit is the minimum value of the available credit and the
Pi,j − (Ei − δi) ≥ 0, and (11) is further simpliﬁed as

j∈Ni

i∈M−

θδi(cid:48) +

δi(cid:48)}

P on

i =

P on

.

i

i(cid:48)∈M+

i(cid:48)∈M−\i

(cid:88)

Pi,j − Ei,

(cid:88)
(cid:104)(cid:80)

i(cid:48)∈M+ θδi(cid:48) +(cid:80)

Lemma 2: The optimal grid credit used by node i, i ∈ M−, is

i∈M
Moreover, δi, i ∈ M−, is given as follows.

i(cid:48)∈M−\i δi(cid:48).
Moreover, since the minimum on-grid power consumption
Pi,j − Ei.

(cid:88)
δi = − min{(cid:88)
(cid:88)
Proof: According to c6 in (4), the total grid credit is(cid:80)
to a certain node i, i ∈ M−, is(cid:80)
the maximum grid credit node i needs is(cid:80)
According to (12), we have (cid:80)
(cid:88)
(cid:88)
Based on the optimal δi given in Lemmas 1 (i ∈ M+) and 2 (i ∈ M−),(cid:80)
Pi,j − Ei),(cid:80)
−min{(cid:80)
(cid:80)
((cid:80)
Pi,j − Ei) + (cid:80)
i = (cid:80)
((cid:80)
(cid:80)
Pi,j − Ei), (cid:80)
((cid:80)
min{ (cid:80)
max{0, (cid:80)
Ei − (cid:80)
Pi,j − (cid:80)
(cid:80)
max{0, (cid:80)
(cid:80)
Pi,j + (cid:80)
(cid:80)
Ei − (cid:80)
(cid:80)

i∈M−((cid:80)

Pi,j − (Ei − δi)].

j∈Ni
i∈M−
Pi,j − Ei)−

i∈M+
θPi,j−

(cid:88)

θδi} =

θδi} =

i∈M−

j∈Ni

i∈M−

j∈Ni

i∈M−

j∈Ni

i∈M−

j∈Ni

i∈M+

j∈Ni

θEi}.

[
i∈Ni

i∈M−

P on

i∈M

reduced.

follows.

δi =

i∈M−

j∈Ni

P on

i =

i∈M+

i∈M−

j∈Ni

i∈M

i∈M−

i∈M+

Then, the original problem becomes

(cid:80)

j∈Ni

θPi,j−

i∈M+

i∈M−

{αi,j ,βi,k}

θEi

min

j∈Ni

i∈M−

(cid:80)
Pi,j + (cid:80)
(cid:80)
(cid:80)
Ei − (cid:80)
s.t. M− = {i ∈ M| (cid:80)
M+ = {i ∈ M| (cid:80)
(cid:80)
β1,k + (cid:80)

j∈Ni
αi,j = 1, j ∈ N

i∈M+

j∈Ni

i∈M

βi,k

D ≥ 1, k ∈ K

Pi,j ≥ Ei}
Pi,j < Ei}

j∈M(cid:48)

αi,j, βi,k ∈ {0, 1}, i ∈ M, j ∈ N , k ∈ K,

7

(15)

where Pi,j is given in (5).

The optimization problem in (15) is the integer programming problem, which is NP-hard in
general [17]. The proof of NP-hardness is omitted due to the page limit; detailed proofs for
similar subchannel and power allocation problems are referred to [18]–[20].

C. Decoupling between User Association and Subchannel Assignment

To study the characteristics of the above mentioned NP-hard problem, we ﬁrst make the

following assumptions which will relax the problem.

Assumption 1: For the link between node i and user k, the average value of SNR across all
of the N subchannels will determine the user association scheme and subchannel assignment
scheme.

Deﬁne γk

i as the average value of SNR across all of the N subchannels:

γk
i =

γk
i,j/N.

(16)

(cid:88)

j∈N

is consistent with the current OFDM based wireless access system, where
The design of γk
i
the serving node is selected based on the reference signal receive power (RSRP), which is the
average power of reference signals (RSs) over the entire bandwidth [21].

are allocated to node i.

Consequently, the subchannel assignment problem becomes choosing the number of SCs that
Assumption 2: Ei = 0, i ∈ M.
As we can see from the objective function in (15), for any given M+ and M−, minimizing
the on-grid power consumption of all nodes means minimizing the total power consumption of
all nodes, and the power consumption of nodes in set M+ has an additional discount factor
θ. Based on this observation, M− in (15) becomes the whole node set M, because the above
implies that none of the nodes can harvest energy from the green energy sources.

With the above two assumptions and the optimal power allocation scheme derived in (5), the

objective function becomes minimizing the total power consumption of all nodes.

min

s.t. (cid:80)

{Ni,βi,k}

DS

N1(2

N1B −1)
γmin
1
Ni = N

β1,k + (cid:80)

i∈M

i∈M(cid:48)

+ (cid:80)

i∈M(cid:48)

βi,k

D ≥ 1, k ∈ K,

Ni(2

S

NiB −1)
γmin
i

(17)

where βi,k determines the minimum average SNR of each node γmin

i

γmin
i = min
k∈Ki

{γk
i }.

:

8

(18)

i

In addition to the assigned subchannel number Ni and the minimum average SNR of each
, an implicit variable that will impact the total power consumption is the total trafﬁc
node γmin
load requested in the system. Deﬁne D∗ as the number of coded/uncoded ﬁle fragments to be
transmitted to the users. The corresponding trafﬁc load D∗S is classiﬁed into the following
categories.
Case I: all of the UEs are assigned to eNB, then K1 = K and N1 = N . The trafﬁc load is

D∗ = D.

DS, i.e.,

i.e.,

Case II: all of the UEs are assigned to SNs, and then at least D SNs of the total M nodes
in M(cid:48) are active, where node i being active means node i needs to transmit data to at least one
user. The trafﬁc load is between DS and M S, i.e.,

D ≤ D∗ ≤ M.

Case III: both eNB and SNs are active, and the trafﬁc load is between 2DS and (M + D)S,

2D ≤ D∗ ≤ M + D.

In the following, we decouple the user association scheme βi,k from subchannel assignment
scheme Ni. By solving the two subproblems separately, a good, but not necessarily optimal,
solution is found that limits a certain level of on-grid power consumption for the system.

D. User Association

As we can see, Case I can be chosen as the baseline, because 1) it yields the minimum trafﬁc
load, and 2) the total spectrum can be considered proportionally allocated to the assigned trafﬁc
load. To ofﬂoad the trafﬁc to serving nodes with local cache, we have to make sure that the
will compensate for the increased trafﬁc load D∗, in
increased minimum average SNR γmin
terms of saving total power consumption. With N1 = N D/D∗ and Ni = N/D∗, the trade-off
between the increased trafﬁc load D∗ and increased γmin

is given below.

i

i

+ (cid:80)

N B − 1)( D

N

min{βi,k}

s.t. β1,k + (cid:80)
D∗ (2 D∗S

γmin
1

i∈M∗
D ≥ 1, k ∈ K

βi,k

i∈M(cid:48)

1

γmin
i

)

(19)

1

where M∗ ∈ M(cid:48) is the set of active serving nodes, and |M∗| = D∗ − D.

while decrease with γmin
the following three steps to ﬁnd the user association scheme, that will yield as high γmin
possible.

As we can see, the total power consumption in (19) will increase exponentially with D∗,
. So we iterate D∗ from D to D + M, and in each iteration, we use
as
In the ﬁrst step, Mk, the set of nodes which store D coded/uncoded fragments that are closest
to user k, is found. In the second step, the backup nodes will be found if the user will not degrade
the γmin
that is given in the ﬁrst step. In the third step, if a user k has a backup node, and this
user is the farthest away from node i that is picked in the ﬁrst step, i.e., γk
, then node
i will be dropped from Mk and the backup node is chosen.

i = γmin

i

i

i

9

1.

The intuition for the ﬁrst step is that users should be connected to the most closely located
serving nodes so that the reconstriuction requirement is satisﬁed, and the minimum γk
is high.
i
The intuition for the second step and third step is owing to the multicasting nature of the link
between node i and users in Ki; the ultimate factor that dictates the energy consumption is γmin
.
i1 and γmin
Consequently, even when node i1 is closer to UE k than node i2, if γmin
i2,
i2 < γk
user k will be choose node i2 over i1 as the downloading node. In this case, γmin
i1 will increase,
while γmin
remains the same, and the total power consumption will be reduced.

i1 = γk

The user association algorithm that follows the above mentioned three steps is given in Alg.

i2

i

The user association scheme is designed based upon Assumption 2 in Section III-C, which
means that neither eNB nor SNs can harvest energy. With positive Ei, however, some nodes which
have sufﬁciently large green energy may belong to M+. Since the total power consumption of
these nodes have a discount factor θ, trafﬁc ofﬂoading will occur when the following constraint
is satisﬁed.

(20)
where i1 ∈ M− and i2 ∈ M+. Pi1 and Pi2 are the total power consumption of node i1 and node
i2 before trafﬁc ofﬂoading, respectively. P (cid:48)
i1 and P (cid:48)
i2 are the corresponding power consumption
after trafﬁc ofﬂoading. The left hand is the energy that is saved by node i1, and the right hand
is the increment of energy consumption of node i2.

Instead of designing the trafﬁc ofﬂoading scheme and changing the user association result,
we propose to manipulate the following subchannel assignment scheme, such that node i1 will
get more spectrum resources, and node i2 will be assigned less subchannels.

i2 − Pi2)θ,

Pi1 − P (cid:48)

i1 > (P (cid:48)

E. Subchannel Assignment

Ni such that(cid:80)

Given the user association scheme βi,k in Alg. 1, the minimum average SNR γmin

becomes
known. Then, without Assumption 2 in Section III-C, the problem becomes ﬁnding the optimal
i∈M+ θEi is minimized.
as the total power consumption of node i when it is assigned with Ni SCs.

Denote P Ni

i∈M− Ei −(cid:80)

θPi,j −(cid:80)

Pi,j +(cid:80)

i∈M−(cid:80)

i∈M+

i∈Ni

i∈Ni

i

i

According to the optimal power allocation in (5), P Ni

is given as follows.

(cid:80)
 Ni(2

Ni(2

P Ni

i =

DS

i
BNi −1)
γmin
i
S
BNi −1)
γmin
i

, i = 1
, i ∈ M(cid:48).

(21)

i − Ei) +(cid:80)

To minimize(cid:80)

Since each active node should at least has one SC, the maximum number of SCs that a node can
get is N − Mact + 1, where Mact = |Mact| is the number of serving nodes with at least one user,
and the serving nodes in Mact returned by Alg. 1 will provide the D∗S amount of downloading
trafﬁc. Then, we have the following table with P Ni
i − Ei), where the total available SC is limited
i∈M+ θ(P Ni
by N, we use the subchannel allocation algorithm in Alg. 2. First, we assume each node is
allocated with only one SC. Then, the node with the highest energy consumption will get an
additional SC, until all of the N SCs are assigned.
, i ∈ M, j ∈ N in (7), and the number of subchannels assigned
to each node provided by Alg. 1 and Alg. 2, respectively, we can lift Assumption 1 proposed
in Section III-C. The subchannel selection algorithm yields the highest priority to the node with

, i ∈ M, Ni ∈ {1,··· , N − Mact + 1}.

With the minimum SNR γmin

i∈M−(P Ni

i,j

i

Algorithm 1 Maximal minimum SNR user association algorithm
1: Mk = ∅, k ∈ K
2: for k ∈ K do
3:
4:
5:
6:
7:

Sort nodes in M in the descending order of γk
Index node i with the IX k
if IX k

i -th largest SNR to UE k

i ≤ D + 1}
1 then

i

10

(cid:46) Node set for UE k
(cid:46) Step 1

(cid:46) Step 2

(cid:46) Step 3

i ≤ D}

if (cid:80)

1 ≤ D then
Mk = {i ∈ M|IX k
i > Dγk
γk
i∈Mk\{1}
Mk = Mk\{1}
Mk = {1}

else

else

end if

if γk(cid:48)

for i ∈ Mk do

for k(cid:48) ∈ K\k do

end if
Mk = {i ∈ M|IX k

8:
9:
10:
11:
12:
13:
14:
15: end for
16: for k ∈ K do
17:
18:
19:
20:
21:
22:
23:
24: end for
25: βi,k = 0, i ∈ M, k ∈ K
26: Ki = ∅, i ∈ M
27: Update βi,k, Ki, and γmin
i = γmin
28: K∗ =
29: while K∗ (cid:54)= ∅ do
for k ∈ K∗ do
30:
31:
32:

(cid:12)(cid:12)(cid:12)(cid:12)(cid:12) γk
β1,k + (cid:80)
if i∗ = 1 && (cid:80)

k = {i ∈ Mk|γk
IX k
i

M∗
i∗ = arg max
i∈M∗

k ∈ K

end for

end for

end if

(cid:40)

i∈M(cid:48)

i

i

33:

i then

i > γk
Mk(cid:48) = Mk(cid:48) ∪ {i}

(cid:41)

according to Mk
,∃i ∈ Mk
βi,k
D > 1

i = γmin

i

}

k

i∈M(cid:48)

βi,k

D < 1 then

else

Mk = {i∗}
Mk = Mk\{i∗}
end if
Update βi,k, Ki, γmin

34:
35:
36:
37:
38:
39:
40:
41: end while
42: Mact = {i ∈ M|Ki (cid:54)= ∅}
43: return Mact, βi,k, Ki, i ∈ M, k ∈ K

end for
Update K∗

, and M∗

i

k according to Mk

(cid:46) Node set which has at least one user

TABLE I: Power Consumption Table

11

HHHHHBS

SC

1

...

i

...

1

P 1
1
...

P 1
i
...

M + 1

P 1

M +1

··· N − Mact + 1
···
P N−Mact+1
...
···
...
···

P N−Mact+1

...

P N−Mact+1

M +1

...

1

i

1 − E1
P N1

...

i − Ei
P Ni

...

M +1 − EM
P NM

Algorithm 2 Subchannel allocation algorithm

 1, i ∈ Mact

1: Ni =

0, i /∈ Mact
2: Calculate Table I
3: Ntot = N − Mact + 1
4: while Ntot > 0 do
i∗ = arg max
5:
i∈Mact
Ni∗ = Ni∗ + 1
6:
Update the last column of Table I
7:
Ntot = Ntot − 1
8:
9: end while
10: return Ni, i ∈ M

i − Ei
P Ni

the largest on-grid energy consumption. That is, node i∗ in (22) will select the Ni SCs with the
highest SNR.

So far, we have proposed separate algorithms for four sets of variables in (4). To get the
optimal solution, the maximal minimum SNR algorithm in Alg. 1 is ﬁrst adopted to obtain the
user association scheme, and then the subchannel assignment scheme in Alg. 2 and Alg. 3 are
employed to assign the spectrum to each node. Then, the power is allocated according to (5),
and subsequently the power ﬂows given in Lemmas 1-2 will yield the minimum on-grid power
power consumption.

IV. SIMULATION RESULTS

In this section, we assume that the average solar green energy density is 15 mW/cm2. Different
sizes of solar panels equipped in eNB and serving nodes result in diverse average green energy
generating rate. For time duration of T = 1 ms, the green energy generating rate for eNB is
E1 = 20 W , and for SNs, Ei = 0.5 W , i ∈ M(cid:48).

The four SNs form a square area with 60 m length. As illustrated in Fig. 3, the center of
the square area is named the virtual SN center, and users are uniformly distributed within the
area of 80 m radius. The rest of the simulation parameters are listed in Table II, where R is

12

(22)

Algorithm 3 Subchannel selection algorithm
1: N = {1,··· , N}
2: while Mact (cid:54)= ∅ do

3:

4:
5:
6:
7:
8:

i∗ = arg max
i∈Mact

i − Ei
P Ni
Sort SCs in N in the descending order of γi∗,j
Index SC with the IXj-th largest SNR to node i∗
Ni∗ = {j ∈ N|IXj ≥ Ni}
αi∗,j = 1, j ∈ Ni∗
N = N\{Ni∗}
9: Mact = Mact\{i∗}
10: end while
11: N = {1,··· , N}
12: return αi,j, Ni, i ∈ M, j ∈ N

Fig. 3: Illustration of the system deployment (Triangle: SN; Cross: Virtual SN center; Dot: UE;
Square: eNB).

the multimedia downloading rate required by each user, and R/T is the size of the total trafﬁc
demand.

The on-grid power consumption are averaged over 100 independent snapshots by Monte-
Carlo simulations. Using Case I, where only eNB is active, as the base line, we compare the
total on-grid power consumption of our proposed algorithm versus the downloading rate R.

A. Cell Edge Users

First, we measure the performance of the virtual SN center located at the cell edge, i.e., the
distance between the virtual SN center and eNB is at least 0.6 times the radius of the cell. As
illustrated in Fig. 4, the on-grid power consumption will reduce as θ increases. More importantly,

−300−200−1000100200300−300−200−1000100200300X−Coordinate (m)Y−Coordinate (m)  13

(a) θ = 0

(b) θ = 0.4

Fig. 4: Total on-grid power consumption versus multimedia download rate (cell edge).

(c) θ = 0.8

10011012013014015016017018019002468101214161820R (Gbps)On−grid Power Consumption (W)  Case IM/D=4/1M/D=4/2M/D=4/3M/D=4/410011012013014015016017018019002468101214161820R (Gbps)On−grid Power Consumption (W)  Case IM/D=4/1M/D=4/2M/D=4/3M/D=4/410011012013014015016017018019002468101214161820R (Gbps)On−grid Power Consumption (W)  Case IM/D=4/1M/D=4/2M/D=4/3M/D=4/414

TABLE II: Simulation Parameters

Carrier Frequency

B

M

N

K

2000 M Hz

180 kHz

4

100

30

Cell Radius

250 m (eNB)

Path Loss Model

LeN B = 128.1 + 37.6log10(d/1000)

LSN = 37 + 30log10(d) + 18.3(4

4+2

4+1 −0.46)

Shadowing

10 dB Log Normal Fading

N0

Noise Figure

Antenna Gain

Fragment size

−174 dBm/Hz

5 dB (eNB/SN), 9 dB (UE)

16 dB (eNB), 5 dB (SN)

S = R/(T D)

the reduction of on-grid power consumption in Case I is less obvious than the proposed algorithm.
This is because in setting the parameters, E1 is signiﬁcantly higher than the energy generating
rate of SNs. So, the power ﬂow from SN to eNB will be signiﬁcantly less than the power ﬂow
from eNB to SNs, and thus the latter power ﬂow is more prone to be affected by the energy
transfer efﬁciency.

At the same time, the on-grid power consumption will increase with the data rate, and the
proposed scheme outperforms the traditional multicast case. This shows that bringing serving
nodes, cached content, and green energy closer to the cell edge users can save energy. Moreover,
D = 1 means the replication caching scheme. It has the highest effective redundancy factor M/D,
and yet brings the least power reduction. The reason is that increased trafﬁc load due to high
redundancy trumps the diversity gain in terms of choosing different serving nodes.

Diverse serving nodes provide the potential to increase the minimum SNR and reduce the
power consumption. To leverage this potential, multiple SNs need to be activated. When D = 1,
the active SNs bring the most amount of trafﬁc load, since S in Table II will decrease with D.
So, as analyzed in Section III-C, with a given number of subchannels, the increased trafﬁc load
can offset the channel diversity gain.

The on-grid power, however, does not always decrease with D. For example, D = 4 means
no diversity gain, because users have to connect with all SNs, but it always has the minimum
trafﬁc load. With D3 = 3 and D4 = 4, the corresponding trafﬁc size in each SN is S3 and S4,
respectively. By the deﬁnition given in Table II, S3 − S4 = (1/D3 − 1/D4)R/T will increase
with R. When R is small, the trafﬁc load size S3 is not that large as compared to S4, and so
the diversity gain may cancel out the trafﬁc load increment. When R exceeds a certain point,
the relatively decreased trafﬁc load in D4 = 4 will trump the diversity gain.

15

B. Cell Center Users

As we can see from Fig. 4, the maximum on-grid power is limited by 20 W , and so the
maximum transmission power of eNB and SN are nearly 40 W . For the eNB in Case I, which is
located at the cell center, this power limit complies with the current LTE standard. For the virtual
SN center located at the cell edge, the maximum transmission power of each SN is between 10
W to 40 W , in which unbearable interference may cause the performance degradation of the
other virtual SN center which happens to locate at the edge of the neighboring cell.

So, in this section, we measure the performance for the virtual SN center located at the
cell center, i.e., the distance between the virtual SN center and eNB is less than 0.6 times the
radius of the cell. As illustrated in Fig. 5, the on-grid power consumption for Case I is less, as
compared with the cell edge case. This is straight forward because users are closer to the eNB.
The improvement for SNs are less obvious because the relative positions of SN and users remain
the same. However, the proposed algorithm still outperforms Case I; this proves that bringing
content, green energy and serving node closer to users can save the on-grid energy consumption.
Moreover, the caching scheme with low effective redundancy factor (small M/D) can actually
save more energy than high redundancy caching scheme when the data rate is high.

V. CONCLUSION

In this paper, we have proposed the content caching and distribution framework for the
smart grid enabled wireless multimedia transmission system, where the green energy can be
transferred to the serving node that is closer to end users through the grid credit exchange
system. To investigate the on-grid energy reduction that is brought by closely located content,
downlink node and green energy, the user association problem is designed jointly with radio
resource allocation schemes, including power allocation, subchannel allocation, and power ﬂow
design. We have analytically derived the optimal power allocation and power ﬂow scheme.
Moreover, the user association problem has been successfully decoupled from the subchannel
allocation problem. A novel maximal minimum SNR algorithm is proposed along with a two
step subchannel assignment algorithm, which takes into account of the green energy generating
rate of each node. Simulation results have proven that the proposed schemes outperform the
traditional eNB multicasting scheme. That is, bringing content, serving node and green energy
closer to the user can save the on-grid power consumption. Moreover, when the downloading
rate requirement of each user is high, the caching scheme with low redundancy has been shown
to save more energy than the high redundancy caching scheme.

REFERENCES

[1] S. Zhou, J. Gong, Z. Zhou, W. Chen, and Z. Niu, “Greendelivery: proactive content caching and push with energy-

harvesting-based small cells,” Communications Magazine, IEEE, vol. 53, no. 4, pp. 142–149, April 2015.

[2] M. Ji, G. Caire, and A. F. Molisch, “The throughput-outage tradeoff of wireless one-hop caching networks,” IEEE

Transactions on Information Theory, vol. 61, no. 12, pp. 6833–6859, Dec 2015.

[3] T. Han, N. Ansari, M. Wu, and H. Yu, “On accelerating content delivery in mobile networks,” IEEE Communications

Surveys Tutorials, vol. 15, no. 3, pp. 1314–1333, Third 2013.

[4] X. Sun, N. Ansari, and Q. Fan, “Green energy aware avatar migration strategy in green cloudlet networks,” in 2015 IEEE

7th International Conference on Cloud Computing Technology and Science (CloudCom), Nov 2015, pp. 139–146.

[5] R. Rodrigues and B. Liskov, “High availability in dhts: Erasure coding vs. replication,” in Proceedings of the 4th
International Conference on Peer-to-Peer Systems, ser. IPTPS’05. Berlin, Heidelberg: Springer-Verlag, 2005, pp. 226–239.
[6] A. Dimakis, P. Godfrey, Y. Wu, M. Wainwright, and K. Ramchandran, “Network coding for distributed storage systems,”

Information Theory, IEEE Transactions on, vol. 56, no. 9, pp. 4539–4551, Sept 2010.

[7] C. Gong and X. Wang, “On partial downloading for wireless distributed storage networks,” Signal Processing, IEEE

Transactions on, vol. 60, no. 6, pp. 3278–3288, June 2012.

16

(a) θ = 0

(b) θ = 0.4

Fig. 5: Total on-grid power consumption versus multimedia download rate (cell center).

(c) θ = 0.8

10011012013014015016017018019002468101214161820R (Gbps)On−grid Power Consumption (W)  Case IM/D=4/1M/D=4/2M/D=4/3M/D=4/410011012013014015016017018019002468101214161820R (Gbps)On−grid Power Consumption (W)  Case IM/D=4/1M/D=4/2M/D=4/3M/D=4/410011012013014015016017018019002468101214161820R (Gbps)On−grid Power Consumption (W)  Case IM/D=4/1M/D=4/2M/D=4/3M/D=4/417

[8] X. Vasilakos, V. A. Siris, G. C. Polyzos, and M. Pomonis, “Proactive selective neighbor caching for enhancing
the ICN Workshop on
mobility support
Information-centric Networking, ser. ICN ’12. New York, NY, USA: ACM, 2012, pp. 61–66. [Online]. Available:
http://doi.acm.org/10.1145/2342488.2342502

in information-centric networks,” in Proceedings of

the Second Edition of

[9] K. Shanmugam, N. Golrezaei, A. Dimakis, A. Molisch, and G. Caire, “Femtocaching: Wireless content delivery through

distributed caching helpers,” Information Theory, IEEE Transactions on, vol. 59, no. 12, pp. 8402–8413, Dec 2013.

[10] L. Al-Kanj, Z. Dawy, W. Saad, and E. Kutanoglu, “Energy-aware cooperative content distribution over wireless networks:
Optimized and distributed approaches,” Vehicular Technology, IEEE Transactions on, vol. 62, no. 8, pp. 3828–3847, Oct
2013.

[11] F. Chang, J. Dean, S. Ghemawat, W. C. Hsieh, D. A. Wallach, M. Burrows, T. Chandra, A. Fikes, and R. E. Gruber,
“Bigtable: A distributed storage system for structured data,” ACM Trans. Comput. Syst., vol. 26, no. 2, pp. 4:1–4:26, Jun.
2008. [Online]. Available: http://doi.acm.org/10.1145/1365815.1365816

[12] X. Huang, T. Han, and N. Ansari, “On green-energy-powered cognitive radio networks,” Communications Surveys Tutorials,

[13] X. Huang and N. Ansari, “Energy sharing within EH-enabled wireless communication networks,” Wireless Communications,

IEEE, vol. 17, no. 2, pp. 827–842, Secondquarter 2015.

IEEE, vol. 22, no. 3, pp. 144–149, June 2015.

[14] N. Sharma, D. K. Krishnappa, D. Irwin, M. Zink, and P. Shenoy, “Greencache: Augmenting off-the-grid cellular towers
with multimedia caches,” in Proceedings of the 4th ACM Multimedia Systems Conference, ser. MMSys ’13. New York,
NY, USA: ACM, 2013, pp. 271–280. [Online]. Available: http://doi.acm.org/10.1145/2483977.2484009

[15] C. Suh and J. Mo, “Resource allocation for multicast services in multicarrier wireless communications,” Wireless

Communications, IEEE Transactions on, vol. 7, no. 1, pp. 27–31, Jan 2008.

[16] X. Huang and N. Ansari, “Joint spectrum and power allocation for multi-node cooperative wireless systems,” Mobile

Computing, IEEE Transactions on, vol. 14, no. 10, pp. 2034–2044, Oct 2015.

[17] C. H. Papadimitriou, “On the complexity of integer programming,” J. ACM, vol. 28, no. 4, pp. 765–768, Oct. 1981.

[Online]. Available: http://doi.acm.org/10.1145/322276.322287

[18] P.-H. Huang, Y. Gai, B. Krishnamachari, and A. Sridharan, “Subcarrier allocation in multiuser ofdm systems: Complexity
and approximability,” in Wireless Communications and Networking Conference (WCNC), 2010 IEEE, April 2010, pp. 1–6.
[19] D. Yuan, J. Joung, C. K. Ho, and S. Sun, “On tractability aspects of optimal resource allocation in ofdma systems,”

Vehicular Technology, IEEE Transactions on, vol. 62, no. 2, pp. 863–873, Feb 2013.

[20] Y.-F. Liu, “Complexity analysis of joint subcarrier and power allocation for the cellular downlink ofdma system,” Wireless

Communications Letters, IEEE, vol. 3, no. 6, pp. 661–664, Dec 2014.

[21] G. L. Didem Kivanc and H. Liu, “Computationally efﬁcient bandwidth allocation and power control for ofdma,” IEEE

Transactions on Wireless Communications, vol. 2, no. 6, pp. 1150–1158, Nov 2003.

