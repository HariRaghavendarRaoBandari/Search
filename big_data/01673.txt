6
1
0
2

 
r
a

M
5

 

 
 
]

.

G
D
h
t
a
m

[
 
 

1
v
3
7
6
1
0

.

3
0
6
1
:
v
i
X
r
a

MEASURES ON DIFFERENTIABLE STACKS

MARIUS CRAINIC AND JO ˜AO NUNO MESTRE

Abstract. We introduce and study measures and densities (= geometric mea-
sures) on diﬀerentiable stacks, using a rather straightforward generalization of
Haeﬂiger’s approach to leaf spaces and to transverse measures for foliations.
In general we prove Morita invariance, a Stokes formula which provides rein-
terpretations in terms of (Ruelle-Sullivan type) algebroid currents, and a Van
Est isomorphism. In the proper case we reduce the theory to classical (Radon)
measures on the underlying space, we provide explicit (Weyl-type) formulas
that shed light on Weinstein’s notion of volumes of diﬀerentiable stacks; in par-
ticular, in the symplectic case, we prove the conjecture left open in [33]. We
also revisit the notion of modular class and of Haar systems (and the existence
of cut-oﬀ functions). Our original motivation comes from the study of Poisson
manifolds of compact types [8, 9, 10], which provide two important examples
of such measures: the aﬃne and the Duistermaat-Heckman measures.

Contents

Introduction

1.
2. Measures on manifolds
3. Transverse measures
4. Geometric transverse measures (= transverse densities)
Intermezzo: the case of proper Lie groupoids
5.
Intermezzo: the case of regular Lie groupoids
6.
7.
Intermezzo: the case of symplectic groupoids
8. Stokes formula and (Ruelle-Sullivan) currents
9. Cohomological insight and the Van Est isomorphism
10. The modular class(es) revisited
11. Appendix: Haar systems and cut-oﬀ functions, revisited
References

1
5
11
18
21
25
27
32
35
43
47
53

1. Introduction

In this paper we study measures on diﬀerentiable stacks or, equivalently, trans-
verse measures on Lie groupoids. We use the point of view that diﬀerentiable stacks
can be represented by Morita equivalence classes of Lie groupoids; the intuition is
that the stack associated to a Lie groupoid G over a manifold M models the space
of orbits M/G of G (very singular in general!). Accordingly, one uses the notation
M//G to denote the stack represented by G. The framework that diﬀerentiable

This research was supported by the NWO Vici Grant no. 639.033.312. The second author

was supported also by FCT grant SFRH/BD/71257/2010 under the POPH/FSE programmes.

1

2

MARIUS CRAINIC AND JO ˜AO NUNO MESTRE

stacks provide for studying singular spaces is a rather obvious extension of Hae-
ﬂiger’s philosophy [18] on leaf spaces (and the transverse geometry of foliations),
just that one allows now general Lie groupoids and not only ´etale ones.

We will show that a rather straightforward extension of Haeﬂiger’s approach
to transverse measures for foliations [17] allows one to talk about measures and
geometric measures ( = densities) for diﬀerentiable stacks. For geometric measures
(densities), when we compute the resulting volumes, we will recover the formulas
that are taken as deﬁnition by Weinstein [33]; also, using our viewpoint, we prove
the conjecture left open in loc.cit.

We would also like to stress that the original motivation for this paper comes
from the study of Poisson manifolds of compact types [8, 9, 10]; there, the space
of symplectic leaves comes with two interesting measures: the integral aﬃne and
the Duistermaat-Heckman measures. Although the leaf space is an orbifold, the
measures are of a “stacky” nature that goes beyond Haeﬂiger’s framework. From
this point of view, this paper puts those measures into the general framework of
measures on stacks; see also the comments below and our entire Section 7.

The measures that we have in mind in this paper are Radon measures on locally
compact Hausdorﬀ spaces X, interpreted as positive linear functionals on the space
Cc(X) of compactly supported continuous functions, or C∞
c (X) if X is a mani-
fold (the basic deﬁnitions are collected in Section 2). Therefore, for a stack M//G
represented by a Lie groupoid G ⇒ M , the main problem is to deﬁne the space
C∞
c (M//G); this is done in Haeﬂiger’s style, by thinking about “compactly sup-
ported smooth functions on the orbit space M/G”. To make sure that the resulting
notion of measure, called transverse measures for G, is intrinsic to the stack, we
have to prove the following (see Theorem 3.8 for a more precise statement):

Theorem 1.1. The notion of transverse measure for Lie groupoids is invariant
under Morita equivalences.

We will also look at measures that are geometric. On a manifold X, these
correspond to densities ρ ∈ D(X) on X - for which the resulting integration is
based on the standard integration on Rn. We will show that the same discussion
applies to diﬀerentiable stacks. For a groupoid G ⇒ M , the object that is central to
the discussion (and which replaces the density bundle DX from the classical case)
is the transverse density bundle

Dtr
G := DA∗ ⊗ DT M

(the tensor product of the density bundle of the dual of the Lie algebroid A of G
and the density bundle of T M ). This is a representation of G or, equivalently, it
represents a vector bundle of the stack M//G; morally, this is the density bundle
DM//G of the stack M//G.
While geometric measures on a manifold X correspond to sections of DX , geo-
metric measures on M//G correspond to sections of the vector bundle represented
by Dtr
G or, more precisely, by G-invariant sections of Dtr
G . Following Haeﬂiger’s view-
point, these will be called transverse densities for G. Such a transverse density σ
can be decomposed as

where ρ is a density on the Lie algebroid and τ one on M ; such decompositions are
useful for writing down explicit formulas for the resulting measures.

σ = ρ∨ ⊗ τ,

MEASURES ON DIFFERENTIABLE STACKS

3

While the general theory may seem rather abstract, it becomes more concrete
when applied to stacks represented by Lie groupoids G ⇒ M which are proper in
the sense that the map (s, t) : G → M is proper (s is the source map, and t is the
target). This notion generalizes compactness of Lie groups and properness of Lie
group actions; in Haeﬂiger’s picture, it corresponds to leaf spaces that are orbifolds.
Section 5 is devoted to the proper case. The key remark is that the orbit space

B := M/G

(with the quotient topology) is not so pathological anymore: it is a locally compact
Hausdorﬀ space and there is even a well-behaved notion of “smooth functions on
B”: functions that, when pulled-back to M , are smooth. In particular, one can
look at (standard) Radon measure on the topological space B. We will prove:
Theorem 1.2. For proper groupoids G, averaging induces a 1-1 correspondence:

on the orbit space B (cid:27) .
measures for G (cid:27) 1−1←→(cid:26)standard Radon measures
(cid:26) transverse

For a more detailed statement, please see Theorem 5.3. This theorem is rather
it says that, from the point of view of measure theory, proper stacks
surprising:
can be treated as ordinary topological spaces. Although this may sound a bit
disappointing, there is a very important gain here: the geometric measures on B,
which depend on the full stack structure and not just on the underlying space. More
concretely: one obtains abstract Radon measures µσ on B out of more geometric
data, namely the transverse densities σ = ρ∨ ⊗ τ mentioned above; the resulting
integration can be computed by rather explicit Weyl-type formulas:

ZM

f (x) dµτ (x) =ZB(cid:18)ZOb

f (y) dµρOb

(y)(cid:19) dµσ(b),

(1.1)

This is explained in our Proposition 5.4, which is one of the main results of this
paper (see also the comment that follows the proposition).

Another digression is provided by the case of symplectic groupoids, which is
treated in Section 7. This case presents several particularities, due to the presence
of symplectic/Poisson geometry. In particular, we recast the measures from [9]:
Theorem 1.3. Any regular proper symplectic groupoid (G, Ω) over M carries a
canonical transverse density. This gives rise to a canonical measure µaﬀ on the leaf
space B = M/G, called the aﬃne measure.
If G is s-proper, but not necessarily regular, then it carries a canonical transverse
density. This gives rise to a canonical measure µDH on B, called the Duistermaat-
Heckman measure; it is the push forward of the Liouville measure induced by Ω.

See Corollary 7.5 and Subsection 7.1. In [9] it is shown that the two measures
are related by a Duistermaat-Heckman formula. As application of our framework,
we will provide a new proof of the Weyl-type integration formula from [9] using
(1.1), and we will prove the characterization of the aﬃne measure µaﬀ that is left
as a conjecture in [33].

Returning to the general theory, a surprising (at ﬁrst) feature of transverse mea-

sures (geometric or not!) is that:

4

MARIUS CRAINIC AND JO ˜AO NUNO MESTRE

Theorem 1.4. Any transverse measure for a Lie groupoid G satisﬁes the Stokes
formula; hence it gives rise to a closed algebroid current. When G is s-connected,
this gives rise to a 1-1 correspondence:

(cid:26) transverse
measures for G (cid:27) 1−1←→(cid:26) (positive) closed A-currents of top degree

with coeﬃcients in the orientation bundle oA (cid:27) .

The precise statement is given in Propositions 8.1 and 8.4. The surprise comes
from the fact that Stokes formulas are usually satisﬁed only by geometric measures.
The explanation is that the Stokes formula in this setting involves derivatives only in
the longitudinal direction. Note that, when applied to foliations, this construction
gives rise to the standard Ruelle-Sullivan current associated to a transverse measure.
c (M//G) that we use to deﬁne the notion of transverse
measure is best understood in terms of diﬀerentiable cohomology with compact
supports (which, modulo re-indexing, will also be called “diﬀerentiable homology”);
one has, directly from the deﬁnitions,

Conceptually, the space C∞

C∞
c (M//G) = H0(G) = H r

c (G),

where r is the dimension of the s-ﬁbers of G. We will prove
Theorem 1.5. H•(G) = H r−•
compactly supported cohomology of the Lie algebroid by a Van Est map

(G) is Morita invariant and it is related to the

c

V E• : H •

c (A, oA) → H •

c (G).

If the s-ﬁbers of G are homologically k-connected, where k ∈ {0, 1, . . . , r − 1} (and
r is the rank of A), then V E0, . . . , V Ek are isomorphisms.

This is Theorem 9.3 and Theorem 9.7 in the main body. This theorem provides
the tools to prove some of the previous results (e.g. the Stokes formula and the
reinterpretation in terms of currents).

The main body of the paper provides the details for the story we have just
described. However, along the way, we also have to revisit some of the standard
material that is, we believe, not so clearly treated in the existing literature. One
such standard material concerns Haar systems for Lie groupoids G, i.e., families

µ = {µx}

of measures on the s-ﬁbers of G that are invariant under right translations.
In
the “geometric case”, i.e., when the measures come from densities, this boils down
to (certain) sections of the density bundle DA of the algebroid A of G; we call
them Haar densities. When trying to use such Haar systems/densities to perform
“standard averaging”, one is lead to the notion of properness of µ: which means
that the source map is proper when restricted to the support of µ. We will show:

Proposition 1.6. For any Lie groupoid G ⇒ M , the following are equivalent:

1. G is proper.
2. G admits a proper Haar system.
3. G admits a proper Haar density.

In particular, if ρ ∈ C∞(M,DA) is a full Haar density then there exists a function
c ∈ C∞(M ) such that c · ρ is a proper Haar density which, moreover, may be
arranged to be normalized. Such a c is called a cut-oﬀ function for ρ.

MEASURES ON DIFFERENTIABLE STACKS

5

Cut-oﬀ functions are an important technical tool since they allow to perform
averaging in order to produce invariant objects (functions, metrics, etc); the stan-
dard reference for the existence of such functions is [30]; our previous proposition
is the result of our attempt to understand the proof from loc. cit. and the actual
meaning of such cut-oﬀ functions. Given the independent interest on Haar systems,
all these results are put together into an appendix.

Another piece of standard material that we revisit concerns the notion of modular
class of Lie algebroids and Lie groupoids;
in particular, we point out that the
representation QA [15] that is commonly used when talking about modular classes
is a rather unfortunate choice, since it is not really an object associated to the
stack (in general, it is not a representation of the groupoid!); as we will explain,
one should use the transverse density bundle Dtr
Finally, we would like to point our that our approach is very much compati-
ble with the non-commutative approach to measures on orbit spaces [4, 5], as the
“localization at units” of the non-commutative measures arising as traces on the
convolution algebras (see Proposition 3.6 and 4.4). Of course, the non-commutative
viewpoint calls for more: understanding higher traces (Hochschild/cyclic cohomol-
ogy computations) and other localizations (not just at units) in more geometric
terms. We hope that our study of transverse measures/densities is a useful step in
that direction; it would be interesting to combine it with the related computations
of Pﬂaum-Posthuma-Tang from [25].

A instead of QA.

Acknowledgements. We would also like to acknowledge various discussions

with R. L. Fernandes, I. M˘arcut, and D. Mart´ınez Torres.

Notation and conventions: All the vector bundles in this paper are assumed to
be of constant rank. Given a vector bundle E over a manifold M , we denote by
Γ(E) = C∞(M, E) the space of smooth sections of E and by C∞
c (M, E) the space
of smooth sections with compact support.

We use the notation G ⇒ M to indicate that G is a Lie groupoid over M . The
source and target maps are denoted by s and t, respectively. The ﬁbers of s will
be called s-ﬁbers. We only work with groupoids whose s-ﬁbers have the same
dimension or, equivalently, whose algebroid A has constant rank. More notation
related to groupoids and algebroids can be found in the Appendix.

All the groupoids appearing in this paper are assumed to be Hausdorﬀ.

2. Measures on manifolds

2.1. Radon measures. To ﬁx the notations, we start by recalling some back-
ground on (Radon) measures on manifolds.

Deﬁnition 2.1. Let X be a locally compact Hausdorﬀ topological space. A
(Radon) measure on X is a linear functional
µ : Cc(X) → R

which is positive, i.e., satisﬁes µ(f ) ≥ 0 for all f ∈ Cc(X) with f ≥ 0.

Via the Riesz duality theorem (cf. e.g. [28, Ch. 2]), this notion is equivalent to

the more intuitive one in terms of set-measures, i.e., measures

µ : B(X) → [0,∞]

for any compact K ⊂ X. Such a measure gives rise to an integration map

µ(K) = inf{µ(U ) : K ⊂ U, U − open}

Iµ : Cc(X) → R, Iµ(f ) =ZX

f (x) dµ(x).

deﬁned on the space of compactly supported continuous functions on X, i.e., a
measure in the sense of the previous deﬁnition. The way in which µ can be recovered
from Iµ comes from the formula

µ(U ) = sup{Iµ(f ) : f ∈ Cc(X),

0 ≤ f ≤ 1,

supp(f) ⊂ U}

valid for all open subsets U ⊂ X (together with the previous remark that µ is
uniquely determined by what it does on open subsets).

Remark 2.2 (a handy notation). Although the point of view of set-measures will
not be used in the paper, we will still use the formula

µ(f ) =ZX

f (x) dµ(x)

6

MARIUS CRAINIC AND JO ˜AO NUNO MESTRE

deﬁned on the σ-algebra generated by the topology of X, with the property that µ
is ﬁnite on compacts, and is inner regular in the sense that, for every Borel set B,

µ(B) = sup{µ(K) : K ⊂ B, K − compact}.

This condition implies that µ is uniquely determined by what it does on compacts;
it is also determined by what it does on opens, since it follows that

(2.1)

(2.2)

as a notation that indicates which is the function on X that µ acts on. For instance,

if µ is a Radon measure on a group G, then writingRG f (gh, h2g3) dµ(h) indicates

that g is ﬁxed and one applies µ to the function G ∋ h 7→ f (gh, h2g3).
Remark 2.3 (automatic continuity + a guiding idea for our approach). The
deﬁnition that we adopted is often convenient to work with because it is purely al-
gebraic. However, Cc(X) carries its standard topology: the inductive limit topology
that arises by writing Cc(X) as the union over all compacts K ⊂ X of the spaces
CK(X) of continuous functions supported in K, where each such space is endowed
with the sup-norm; convergence fn → f in this topology means convergence in the
sup-norm together with the condition that there exists a compact K ⊂ M such
that supp(fn) ⊂ K for all n.
The main reason that continuity is not mentioned in the deﬁnition is because it
follows from the positivity condition (see also below). However, it is very important.
For instance, if one wants to allow more general measures (real-valued), then one
gives up on the positivity condition but one requests continuity.

In contrast with the continuity property (which is important but not explicitly
required), the space Cc(X) on which µ is deﬁned is not so important. A very
good illustration of this remark is the fact that, if X is a manifold, we could use
the space C∞
c (X) (which is more natural in the smooth setting) to deﬁne the
notion of measure. All that matters is that the (test) spaces Cc(X) and C∞
c (X)
contain enough “test functions” to model the topology of X (hence to characterize
completely the Radon measures). This remark is important for our approach to
transverse measures, approach that is centred around the question: what is the
correct space of “transverse test functions”?

The following brings together some known results that we were alluding to; we

include the proof for completeness and also for later use.

MEASURES ON DIFFERENTIABLE STACKS

7

Proposition 2.4. For any smooth manifold M ,

c (M ) is dense in Cc(M ).

1. C∞
2. any positive linear functional on Cc(M ) is automatically continuous; and

the same holds for C∞

c (M ) with the induced topology.

3. the construction µ 7→ µ|C∞
{(Radon) measures on M} ∼←→ {positive linear functionals on C∞

c (M) induces a 1-1 correspondence:

c (M )}.

Proof. The density statement is well-known, but here is a less standard argument:
use Stone-Weierstrass (cf. [12, Thm. 10.A.2]). When M is compact this is straight-
forward. In general, consider A = C∞
c (M ) as a subspace of the space of continuous
functions vanishing at inﬁnity
C0(M ) := {f ∈ C(M ) : ∀ ǫ > 0 , ∃ K ⊂ M compact, such that |f|M\K| < ǫ};
the Stone-Weierstrass theorem for locally compact Hausdorﬀ spaces (as it follows
from the one for compact spaces applied to the one-point compactiﬁcation of M
and the unitization of A) tells us that A is dense in C0(M ) with respect to the
sup-norm, provided it is:

1. a sub-algebra of C0(M ).
2. point-separating: for any x, y ∈ M distinct, there exists f ∈ A with f (x) 6= f (y).
3. non-vanishing at any point: for any x ∈ M , there exists f ∈ A with f (x) 6= 0.
Since this is clearly satisﬁed by our A, we deduce that for any f ∈ C0(M ) one
can ﬁnd a sequence (fn)n≥1 in C∞
c (M ) that converges to f in the sup-norm. If f
has compact support K then, choosing φ ∈ C∞
c (M ) with φ|K = 1, we have that
{φ · fn}n≥1 converges uniformly to φ · f = f and the support of all these functions
are inside the compact supp(φ); hence the last convergence holds in Cc(M ).
For part 2 recall that the continuity of a function µ on Cc(M ) means that for

every compact K ⊂ X, there exists a constant CK such that
|µ(f )| ≤ CK||f||sup ∀ f ∈ CK(X).

To see that this is implied by the positivity of µ, for K ⊂ X compact, we choose a
function φK ∈ Cc(X) that is 1 on K, for any f ∈ CK (X) we have that

hence, by the positivity of µ,

−||f||supφK ≤ f ≤ ||f||supφK

|µ(f )| ≤ CK||f||sup, where CK = µ(φK ).

Exactly the same argument (just that one chooses φK smooth) works for C∞

c (M ).
With 1 and 2 at hand, 3 is basically the standard result that continuous func-
tionals on a dense subspace of a locally convex vector space extend uniquely to
continuous linear functionals on the entire space; starting with µ on C∞
c (M ), the
extension ˜µ is (and must be given by) ˜µ(f ) = limn→∞ µ(fn) where {fn}n≥1 is a
sequence in C∞
c (M ) converging to f (the continuity of µ implies that the sequence
{µ(fn)}n≥1 is Cauchy, hence the limit is well deﬁned and is easily checked to be
independent of the choice of the sequence). What does not follow right away from
the standard argument is the positivity of ˜µ, but this is arranged by a simple trick:
for f ∈ Cc(M ) one can ﬁnd a sequence of smooth functions gn such that g2
n → f
(because √f ∈ Cc(M )), and then ˜µ(f ) is the limit of µ(g2

n) ≥ 0.

(cid:3)

8

MARIUS CRAINIC AND JO ˜AO NUNO MESTRE

Sometimes one would like to integrate more than just compactly supported func-
tions. One way to do so is by working with measures with compact supports. The
notion of support of a measure µ, denoted supp(µ) can be deﬁned since measures
on X form a sheaf (due to the existence of partitions of unity). Explicitly, it is the
smallest closed subspace of X with the property that

µ(f ) = 0 ∀f ∈ Cc(X \ supp(µ)).
Note that, when X is a manifold, one could also use C∞
c (X) to characterize the
support. In the next lemma, continuity refers to the topology on C(X) of uniform
convergence on compacts. We now assume that X is also second countable.

Lemma 2.5. For a measure µ on X, the following are equivalent:

1. µ is compactly supported.
2. µ has an extension (necessarily unique) to a linear continuous map

µ : C(X) → R

(and, for manifolds, the similar statement that uses C∞(X)).
Proof. Assume ﬁrst that µ has compact support and choose φ ∈ Cc(X) that is 1
on the support. Deﬁne the extension of µ to C(X) by

˜µ(f ) := µ(φ · f ).

This is an extension because, for f ∈ Cc(X), one has that f − φ · f has compact
support inside X \ supp(µ), hence µ(f − φ · f ) = 0 and then µ(f ) = ˜µ(f ). Also, ˜µ
is continuous because if fn → f in C(X) (uniform convergence on compacts) then
clearly φ · fn → φ · f in Cc(X). The extension is unique because Cc(X) is dense in
C(X): choosing an exhaustion {Kn}n≥1 of X by compacts and φn ∈ Cc(X) that is
1 on Kn, then for any f ∈ C(X), {φn · f}n≥1 is a sequence of compactly supported
continuous functions that converges to f uniformly on compacts.
For the converse, start with an extension, still denoted by µ. Using an exhaustion
of X as above, the topology on C(X) is the one induced by the increasing family
of norms given by the sup-norms on the Kn’s. Hence the continuity of µ translates
into the existence of a compact K and a constant C > 0 such that

|µ(f )| ≤ C · sup{|f (x)|

: x ∈ K}.

In particular, µ(f ) = 0 if f ∈ Cc(X \ K); hence supp(µ) ⊂ K must be compact. (cid:3)
2.2. Geometric measures: densities. In the case of manifolds there is a distin-
guished class of measures to consider: the ones for which, locally, the corresponding
integration is the standard integration on Rn. This brings us to the notion of den-
sities on manifolds, that we recall next (cf. [2] for a textbook account).

Remark ﬁrst that any group homomorphism δ : GLr → R∗ allows us to associate

to any r-dimensional vector space a canonical 1-dimensional vector space

Lδ(V ) := {ξ : Fr(V ) → R : ξ(e · A) = δ(A)ξ(e) for all e ∈ Fr(V ), A ∈ GLr},

where Fr(V ) = Isom(Rr, V ) is the space of frames on V , endowed with the standard
(right) action of GLr. The cases that are of interest for us are:

• δ = det, for which we obtain the top exterior power ΛtopV ∗.
• δ = sign ◦ det, for which we obtain the orientation space oV of V .
• δ = |det| which deﬁnes the space DV of densities of V . More generally,

for l ∈ Z, δ = |det|l deﬁnes the space Dl

V of l-densities of V .

MEASURES ON DIFFERENTIABLE STACKS

9

It is clear that there are canonical isomorphisms:

DV ⊗ oV ∼= ΛtopV ∗, Dl1

V ⊗ Dl2

V ∼= Dl1+l2

.

V

When V = L is 1-dimensional, DL is also denoted by |L|; so, in general,

DV = |ΛtopV ∗|,

which ﬁts well with the fact that for any ω ∈ ΛtopV ∗, |ω| makes sense as an
element of DV . For 1-dimensional vector spaces W1 and W2, one has a canonical
isomorphism |W1| ⊗ |W2| ∼= |W1 ⊗ W2| (in particular |W ∗| ∼= |W|∗). From the
properties of ΛtopV ∗ (or by similar arguments), one obtains canonical isomorphisms:

V ∼= DV ∗ for any vector space V .

1. D∗
2. For any short exact sequence of vector spaces
0 → V → U → W → 0

(e.g. for U = V ⊕ W ), one has an induced isomorphism DU ∼= DV ⊗ DW .

Since the previous discussion is canonical (free of choices), it can applied (ﬁber-
wise) to vector bundles over a manifold M so that, for any such vector bundle E,
one can talk about the associated line bundles over M

DE, ΛtopE∗, oE

and the previous isomorphisms continue to hold at this level. However, at this
stage, only DE is trivializable, and even that is in a non-canonical way.
Deﬁnition 2.6. A density on a manifold M is any section of the density bundle
DT M . We denote by D(M ) the space of densities on M .

The main point about densities is that they can be integrated in a canonical

fashion: one has an integration map

ZM

: C∞

c (M,DT M ) → R.

(2.3)

Locally, for densities ρ supported in a coordinate chart (x1, . . . , xn), writing ρ =
f|dx1 . . . dxn|, the integral of ρ is the usual integral of f . Of course, the integral is
well-deﬁned because of the change of variables formula

Zh(U)

f =ZU

f ◦ h|Jac(h)|

and the fact that the coeﬃcient f of ρ changes precisely to f ◦ h|Jac(h)|. In what
follows, the integration (2.3) of compactly supported densities will be called the
canonical integration on M .

It is customary to avoid working with densities by
Remark 2.7 (why densities?).
making an extra choice that allows one to rewrite the density bundle. For instance,
the choice of a Riemannian metric induces a volume density which trivializes the
density bundle and then one can integrate functions. Or the choice of an orientation
trivializes the orientation bundle, hence it identiﬁes the density bundle with the
volume bundle and one can integrate top-diﬀerential forms. In general, there are
no problems in making such choices (one needs to require at most orientability).
However, for our purposes, it is useful to proceed in a fully canonical way; indeed,
when looking at transverse measures, there will be many line bundles that may be
trivialised under mild conditions; however, such trivializations would obscure large
parts of the discussion (and would make some proofs extremely tricky).

10

MARIUS CRAINIC AND JO ˜AO NUNO MESTRE

Deﬁnition 2.8. The measure associated to a positive density ρ ∈ D(M ) is:

µρ : C∞

c (M ) → R, µρ(f ) =ZM

f · ρ.

Radon measures of this type will be called geometric measures.

2.3. Some basic examples/constructions.

Example 2.9 (Haar measures and densities). Let G be a Lie group. Recall that
a right Haar measure on G is any non-zero measure on G that is invariant
under right translations (and similarly for left Haar measures). This notion makes
sense for general locally compact Hausdorﬀ topological groups, and a highly non-
trivial theorem says that such measures exist and are unique up to multiplication
by scalars. However, for Lie groups the situation is much easier; for instance, for
the existence, one can search among the geometric measures, i.e., the ones induced
by densities ρ on G. The invariance condition means that ρ is obtained from its
value at 1, ρ1 ∈ Dg (where g is the Lie algebra of G), by right translation. Hence
Haar densities on G are in 1-1 correspondence with non-zero-elements of the 1-
dimensional vector space of densities on g.

Recall also that, while the right and left Haar measures are in general diﬀerent,
for compact groups, they coincide. Actually, in the compact case, it follows that
there exists a unique right (and left) Haar measure on G for which G has volume
1. This is called the Haar measure of the compact group G. Of course, to
obtain it, one just starts with any non-zero density ρ1 on g and one rescales it by
the resulting volume of G. Note that, due to this normalization condition, when
dealing with a non-connected compact Lie group G, the Haar density of G diﬀers
from the one of the identity component G0 by a factor which is the number of
connected components of G. We refer to [14, Sec. 3.13] for a textbook account on
Haar measures and densities on Lie groups.

With the basic understanding that when passing from groups to groupoids the
source-ﬁbers of the groupoid are used for making sense of right translations, there
is a rather obvious generalization of the notion of Haar measures/densities to the
world of groupoids - called Haar systems/densities. Although this is well known,
some of the basic facts are hard to ﬁnd or have been overlooked. They are collected
in the (self-contained) Appendix.

Example 2.10 (push-forward measures/densities).
then measures I on P can be pushed-down to measures π!(I) on B by:

If π : P → B is a proper map

or, in the integral notation (cf. Remark 2.2),

π!(I)(f ) = I(f ◦ π),

ZB

f (b) dµπ!(I)(b) :=ZP

f (π(p)) dµI (p).

If π is a submersion, then the construction I 7→ π!(I) takes geometric measures on
P to geometric measures on B. The key remark is that integration over the ﬁbers
makes sense (canonically!) for densities, to give a map

π! =Zﬁbers

: D(P ) → D(B).

MEASURES ON DIFFERENTIABLE STACKS

11

Here is the deﬁnition of π!(ρ)(b) for a density ρ on P and for b ∈ B: restrict ρ to
the ﬁber Pb = π−1(b); one ﬁnds for each p ∈ Pb:

ρ(p) ∈ DTpP ∼= DTpPb ⊗ DTbB,

where the last isomorphism is the one induced by the short exact sequence

Hence we can interpret

0 → TpPb → TpP → TbB → 0.

integrating over Pb (compact because π is proper) we ﬁnd the desired element

ρ|Pb ∈ D(Pb) ⊗ DTbB;

(2.4)

π!(ρ)(b) :=ZPb

ρ ∈ DTbB.

The fact that this operation is compatible with the one on measures, i.e., that
π!(Iρ) = Iπ!(ρ), follows from the Fubini formula for densities:

ZP

ρ =ZB

π!(ρ) (cid:18)=ZBZﬁbers

ρ(cid:19)

Example 2.11. (invariant measures/densities) The previous discussion can be con-
tinued further in the case of a (right) principal G-bundle

π : P → B

for a compact Lie group G (cf. [14, Sec. 3.13]). One of the main outcomes will be
that the construction I 7→ π!(I) induces a bijection

{invariant measures/densities on P} ∼←→ {measures/densities on B}.

We concentrate here on densities. What is special in this case is that each ﬁber Pb
(b ∈ B) carries a canonical “Haar density” ρb
Haar: to see this one chooses p ∈ Pb
and one uses the diﬀeomorphism mp : G → Pb, g 7→ pg, to transport ρG
Haar to a
density on Pb; the independence of the choice of p follows from the bi-invariance of
Haar. Using ρb
ρG

Haar, arbitrary densities on P can be decomposed, via (2.4), as

ρ(p) = ρb

Haar ⊗ ρB(p) for some ρB(p) ∈ DTbB.

A simple check shows that ρ is invariant if and only if ρB(p) does not depend
on p but only on b = π(p). Of course, in this case ρB = π!(ρ) (because of the
normalization of the Haar density of G). Therefore one obtains an isomorphism:

π! : D(P )G ∼= D(B).

For ρB ∈ D(B), we denote by ρHaar ⊗ ρB the corresponding invariant density on P .

3. Transverse measures

In this section we introduce the notion of transverse measures for groupoids using
a rather straightforward generalization of Haeﬂiger’s interpretation of transverse
measures for foliations (and for ´etale groupoids).

12

MARIUS CRAINIC AND JO ˜AO NUNO MESTRE

3.1. Making sense of “orbit spaces”; transverse objects. Intuitively, given
a groupoid G over M , transverse structures on G are structures that are intrinsic
to the geometry of G that lives in the direction transverse to the orbits of G; more
suggestively (but less precisely), one may think that they are structures associated
to the orbit space

M/G := M/(x ∼ y iﬀ ∃ g ∈ G from x to y).

Of course, the actual quotient topological space M/G may be very pathological and
uninteresting; for that reason, when one refers to the “orbit space” one often has in
mind much more than just the topological space itself. There are several points of
view that allow one to make sense of “singular spaces” (like M/G) in a satisfactory
but precise way. We recall here a few.

Leaf spaces as ´etale groupoids: This is Haeﬂiger’s approach to the study of
the transverse geometry of foliated spaces (M,F ), giving a satisfactory meaning to
“the spaces of leaves M/F ” [16, 18]. The ﬁrst point is that any foliated manifold
(M,F ) has an associated holonomy groupoid Hol(M,F ); it is a groupoid over
M whose arrows are determined by germs of holonomy transformations. In this
way the leaf space M/F is realised as the orbit space of a groupoid, and one may
think that Hol(M,F ) represents (as some kind of “desingularization”) M/F . The
second point is that this representative can be simpliﬁed by restricting to a complete
transversal T ⊂ M of the foliation:

HolT (M,F ) := Hol(M,F )|T

will have the same orbit space (at least intuitively) and has a rather special extra
property: it is ´etale, in the sense that its source and target maps are local diﬀeo-
morphisms. The last property make it possible to handle ´etale groupoids (and their
orbit spaces) very much like one handles usual manifolds (think of a manifold M
as the ´etale groupoid over M with only identity arrows).

To make the entire story precise, one also has to give a precise meaning to “two
groupoids give rise to (or model) the same orbit space”. This is precisely what the
notion of Morita equivalence of groupoids does; the basic example is the holonomy
groupoid Hol(M,F ) of a foliation being Morita equivalent to HolT (M,F ); hence,
staying within the world of ´etale groupoids, Haeﬂiger’s philosophy is: the leaf space
M/F is represented by an ´etale groupoid (namely HolT (M,F ) for some complete
transversal T ), which is well-deﬁned up to Morita equivalence.

Diﬀerentiable stacks: Stacks originate in algebraic geometry, where they are
used to model moduli spaces that are not well-deﬁned otherwise (note the similarity
with leaf spaces). The topological and smooth versions of the theory were stud-
ied in more detail only later (see for example [1, 20, 23]), and it was immediately
noticed that the resulting notion of “diﬀerentiable stack” can be represented by
Lie groupoids, two Lie groupoids representing the same stack if and only if they
are Morita equivalent. Actually, a large part of the existing literature views (by
deﬁnition) diﬀerentiable stacks as Morita equivalence classes of Lie groupoids; the
Morita class (stack) of a Lie groupoid G over M is then suggestively denoted by
M//G. In our opinion, this is a rather obvious extension of Haeﬂiger’s philosophy
from ´etale to general Lie groupoids (but, sadly enough, Haeﬂiger is often forgotten
by the literature on diﬀerentiable stacks. In this paper we use the groupoid point of

MEASURES ON DIFFERENTIABLE STACKS

13

view on stacks; with these in mind, what we do here is again rather straightforward:
just extend Haeﬂiger’s approach to transverse integration from ´etale groupoids to
general Lie groupoids.

Non-commutative spaces: Another approach to “singular spaces” is provided
by Connes’ non-commutative geometry [5]; while standard spaces (e.g. compact
Hausdorﬀ spaces) are fully characterized by their (commutative) algebra of contin-
uous scalar-valued functions, the idea is that non-commutative algebras (possibly
with extra structure) should be interpreted as algebras of functions on a “non-
commutative space”. Therefore, when one deals with a singular space X, one does
not look at its points or at its topological/smooth structure (usually ill-behaved)
but one tries to model it via a non-commutative algebra. In general, this modelling
step is not precisely deﬁned and it very much depends on the speciﬁc X one looks
at. However, in most examples, one uses groupoids as an intermediate step.

More precisely: one ﬁrst realizes X as the orbit space of a Lie groupoid G (i.e., one
makes sense of X as a diﬀerentiable stack) and then one appeals to a standard cons-
truction that associates to a Lie groupoid G over M a (usually non-commutative)
algebra, namely the convolution algebra of the groupoid. Before we recall its
deﬁnition let us mention that, intuitively, the convolution algebra of G should be
thought of as a “non-commutative model” for the algebra of (compactly supported)
functions on the singular orbit space M/G (or better: of the stack M//G). For that
reason, we will denote the convolution algebra by NC∞
c (M//G). As a vector space,
it is simply C∞
c (G) - the space of compactly supported smooth functions on G. The
convolution product is, in principle, given by a convolution formula

u1(g1)u2(g2)′′.

(3.1)

“(u1 ⋆ u2)(g) =Zg1g2=g
(u1 ⋆ u2)(g) = Xg1g2=g

The simplest case when this makes sense is when G is ´etale, case in which

u1(g1)u2(g2).

For general Lie groupoids, it is customary to choose a full Haar system (see Deﬁni-
tion 11.1) or, even better, to take advantage of the smooth structure and start with
a full Haar density ρ ∈ C∞(M,DA) (Haar densities are recalled in the appendix -
see Deﬁnition 11.3). Using the induced integration (of functions) along the s-ﬁbers,
one can now make precise sense of (3.1) as:

(u1 ⋆ρ u2)(g) =Zs−1(x)

u1(gh−1)u2(h) dµ→

ρ (h) where x = s(g).

(3.2)

It is not diﬃcult to see that the choice of the full Haar density does not aﬀect
the isomorphism class of the resulting convolution algebra. However, at the price
of becoming a bit more abstract, but keeping (3.1) as intuition, one can proceed
A of half densities, pull

intrinsically as follows (cf. e.g. [5]): consider the bundle D1/2
it back to G via s and t and deﬁne

NC∞

c (M//G) := C∞

c (G, t∗D1/2

A ⊗ s∗D1/2
A ).

(3.3)

Given u1 and u2 in this space, we look at the expression (3.1). For

x

g1← z

g2← y

14

MARIUS CRAINIC AND JO ˜AO NUNO MESTRE

such that g = g1g2, u(g1)u(g2) makes sense as a tensor product; since

(where we use the right translations for the last identiﬁcation), we see that

D1/2
A,z ⊗ D1/2

A,z = DA,z ∼= DTg2 (s−1(y)),

(3.4)
hence, when g = g1g2 is ﬁxed, we deal with a density in the g2 ∈ s−1(y) argument;
integrated, this gives rise to

A,x ⊗ DTg2 (s−1(y)) ⊗ D1/2
A,y;

u(g1)v(g2) ∈ D1/2

hence to a new element u1 ⋆ u2 in our space (3.3).

(u1 ⋆ u2)(g) ∈ D1/2

A,x ⊗ D1/2
A,y,

3.2. Transverse integration `a la Haeﬂiger. The notion of transverse measure
and transverse integration is best understood in the case of foliated manifolds
(M,F ); the idea is that such a measure should measure the size of transversals
to the foliation in a way that is invariant under holonomy transformations (so that,
morally, they measure not the transversals but the subspaces that they induce in
the leaf space). This idea can be implemented either by working directly with set-
measures, as done e.g. by Plante [26], or by working with the dual picture (via the
Riesz theorem) in terms of linear functionals, as done by Haeﬂiger [17].

Here we follow Haeﬂiger’s approach, but applied to a general Lie groupoid G over
a manifold M . The main point is to deﬁne what deserves to be called “the space of
compactly supported smooth functions on the orbit space M/G”. It is instructive
to ﬁrst think about the meaning of “the space of smooth functions on the orbit
space M/G”; indeed, there is an obvious candidate, namely

C∞(M//G) := C∞(M )G−inv,

the space of smooth functions on M that are G-invariant (i.e., constant on the orbits
of G). In this way, intuitively, a “smooth function on M/G” is represented by its
pull-back to M . One may try to add compact supports to the previous discussion
(to deﬁne C∞
c (M//G)), but one encounters a serious problem: smooth invariant
functions may fail to have compact support (this happens already for actions of
groups). Moreover, this approach would be too naive; the point is that the theory
with compact supports should not be seen just as a subtheory of the one without
support conditions, but as a dual theory (think e.g. of DeRham cohomology and
its version with compact supports, which are related by Poincare duality).

Example 3.1 (A simple example that illustrates the general philosophy). Proba-
bly the best example is that of an action groupoid G = Γ⋉M associated to an action
of a discrete group Γ on a manifold M . As for smooth functions, there is an obvi-
ous approach to “measures on the orbit space”: measures on M , µ : C∞
c (M ) → R,
which are Γ-invariant in the sense that

µ(γ∗(f )) = µ(f ) ∀ f ∈ C∞

c (M ), γ ∈ Γ,

where γ∗ denotes the induced action on smooth functions (γ∗(u)(x) = u(γ · x)).
Therefore, if we want to represent such measures as linear functionals, we have to
consider the quotient of C∞
c (M ) by the linear span of elements of type f − γ∗(f ).
This is a construction that is deﬁned more generally, for actions of Γ on a vector
space V ; the resulting quotient is the space VΓ of co-invariants (dual to the space

MEASURES ON DIFFERENTIABLE STACKS

15

of invariants V Γ - cf. e.g. [31]). Therefore we arrive at the following model for the
space of compactly supported smooth functions on the orbit space:

C∞

c (M//Γ) := C∞

c (M )Γ,

(3.5)

and invariant measures correspond to (positive) linear functionals on C∞

c (M//Γ).
When the action is free and proper, then B = M/Γ is itself a manifold, and the

integration over the ﬁbers of the canonical projection π,

π! : C∞

c (M ) → C∞

c (B), π!(u)(b) = Xx∈π−1(b)

u(x),

descends to an isomorphism of our model (3.5) with C∞
invariant part of C∞

c (M ) is trivial if Γ is inﬁnite.

c (B).

In contrast, the

For general actions, C∞

c (M )Γ has a nicer description if Γ is ﬁnite; actually, in
that case, V Γ ∼= VΓ for any Γ-vector space V (where the isomorphism is induced
by the canonical projection and the inverse by averaging). Also, although M/Γ
may fail to be a manifold, it is a locally compact Hausdorﬀ space, and there is a
satisfactory deﬁnition for the spaces of smooth functions on M/Γ:
C∞(M/Γ) := {f ∈ C(M/Γ) : f ◦ π is smooth},
C∞
c (M/Γ) := {f ∈ C∞(M/Γ) : supp(f ) − compact}.

We deduce that, if Γ is ﬁnite,

c (M//Γ) ∼= C∞
C∞
hence the elements of C∞
c (M//Γ) can be seen as compactly supported functions on
M/Γ. This phenomena is at the heart of our separate section on proper groupoids.

c (M )Γ ∼= C∞

c (M/Γ),

Example 3.2 (´Etale groupoids; leaf spaces). The deﬁnition (3.5) (and the heuris-
tics behind it) easily extend to general ´etale groupoids G over M . One deﬁnes

C∞(M//G) := C∞(M )G−inv,

(3.6)

or, equivalently but easier to dualise,

C∞(M//G) = Ker(s∗ − t∗ : C∞(M ) → C∞(G)),

where s∗(u) = u ◦ s and similarly for t∗. Dual to s∗ we have:

s! : C∞

c (G) → C∞

and similarly t! and then one deﬁnes

u(g)

c (M ), s!(u)(x) = Xs(g)=x
c (G) → C∞

C∞
c (M//G) := Coker(s! − t! : C∞

c (M )).

(3.7)

This space, as well as (3.6), is invariant under Morita equivalences; this is implicit
in Haeﬂiger’s work and will be discussed in full generality later in the paper.

This construction can be applied to the ´etale holonomy groupoids associated
to a foliation (M,F ): for any complete transversal T one considers C∞
c (T //F ) :=
C∞
c (T //HolT (M,F )). These are precisely the spaces denoted Ω0
c(T /F ) by Haeﬂiger
[17] and used to handle transverse integration; our deﬁnition is basically the same
as his, just that we use the groupoids explicitly. Morita invariance shows that,
up to canonical isomorphisms, C∞
c (T //F ) does not depend on the choice of T ;
it serves as a model for “C∞
c (M/F )”. Of course, transverse measures are now
understood as positive linear functionals on C∞
c (T //F ). One point that is not
clariﬁed by Haeﬂiger and which may serve as motivation for extending the theory to

16

MARIUS CRAINIC AND JO ˜AO NUNO MESTRE

more general groupoids is whether there is an intrinsic description of “C∞
deﬁned directly using objects that live on M .

c (M/F )”

3.3. Transverse measures: the general case. To extend the previous discussion
to general Lie groupoids G over M one only needs to make sense of the integration
over the s and t-ﬁbers of G. This issue is identical to the one we encountered when
making sense of the convolution product (the last part of Subsection 3.1); so, it is
not surprising that one can proceed as there: either ﬁx a strictly positive density
ρ ∈ C∞(M,DA) and deﬁne a version of C∞
c (M//G) that depends on ρ but whose
isomorphism class does not depend on ρ, or provide a more abstract but intrinsic
version of C∞

c (M//G). We prefer to start with the choice-free approach.

Hence, as in Subsection 3.1, we use the Lie algebroid A of G, the associated
density bundle DA and its pull-backs to G via the source and target maps. One has
a canonical integration over the s-ﬁbres map

(3.8)
indeed, for u in the left hand side, its restriction to an s-ﬁber s−1(x) is a section of

c (G, t∗DA ⊗ s∗DA) → C∞

c (M,DA);

s! : C∞

(t∗DA)|s−1(x) ⊗ DA,x ∼= DT (s−1(x)) ⊗ DA,x.

This allows us to integrate u|s−1(x) and obtain an element in DA,x; varying x, this
gives rise to s!(u). A similar reasoning makes sense of t!.

Deﬁnition 3.3. Deﬁne the intrinsic model for compactly supported smooth
functions on the orbit space as

C∞
c (M//G) := C∞

c (M,DA)/Im(s! − t!).

A transverse measure for G is a positive linear functional on C∞
equivalently, a linear map

c (M//G) or,

which is positive and which satisﬁes the invariance condition

µ : C∞

c (M,DA) → R

µ ◦ s! = µ ◦ t!.

(3.9)
Remark 3.4 (some intuition). The intuition is that elements ρ ∈ C∞
c (M,DA)
represent “compactly supported smooth functions on M/G” as follows: while sec-
tions ρ of DA can be interpreted as invariant family of densities {ρx} (as in the
Appendix - see (11.3)), their integrals (when deﬁned) will give an invariant function
of x, hence a function on M/G:

Av(ρ) : M/G → R, Av(ρ)(Ox) =Zs−1(x)

ρx.

Of course, there are problems to make this precise, and that is the reason for
working on M . Nevertheless, we will see that such problems will disappear in one
important case: for proper Lie groupoids. That is the subject of Section 5.

Remark 3.5 (the relationship with the non-commutative approach). It is instruc-
tive to compare our more classical approach with the non-commutative one (see
Subsection 3.1). In the non-commutative approach one looks at linear maps τ on
NC∞

c (M//G) (see (3.3)) which are traces, i.e., which satisfy:
c (M//G).

τ (u ⋆ v) = τ (v ⋆ u), ∀ u, v ∈ NC∞

A general well-known phenomena is that classical approaches are recovered as “lo-
calization at units” of the non-commutative ones (see e.g. [3]). Hence, one expects

(3.10)

MEASURES ON DIFFERENTIABLE STACKS

17

that our notion of transverse measure induces, by restricting to units, such traces.
And, indeed, this ﬁts perfectly with our approach (and even with our use of DA).
First of all, for u ∈ NC∞

c (M//G), its restriction to units gives elements

u(1x) ∈ D1/2

A,x ⊗ D1/2

A,x = DA,x,

so that u|M ∈ C∞

c (M,DA). Hence any linear µ as before induces

˜µ : NC∞

c (M//G) → R, u 7→ µ(u|M ).

Proposition 3.6. µ satisﬁes the invariance condition (3.9) if and only if ˜µ satisﬁes
the tracial condition (3.10).

Proof. Applying the deﬁnition of u ⋆ v at points 1x and comparing the resulting
formula with the one deﬁning s! we ﬁnd that

(u ⋆ v)|M = s!(φ),
where φ(g) = u(g−1)v(g) deﬁnes an element in C∞
c (G, t∗DA ⊗ s∗DA). Similarly, or
as a consequence, we have (v ⋆ u)|M = t!(φ). This explains the statement (strictly
speaking, one has to check that any compactly supported φ can be written as
φ(g) = u(g−1)v(g) for some compactly supported u and v. Trivializing the density
bundles this becomes a question about functions, which is clear: just take v = φ
and u ∈ C∞
(cid:3)
Remark 3.7 (the more down to earth approach).
If we choose a strictly positive
density ρ ∈ C∞(M,DA) (see the Appendix), then one can use ρ to trivialize all the
density bundles. Then s! becomes identiﬁed with

c (G) any function which is 1 on the inverse of the support of φ.)

sρ
! : C∞

c (G) → C∞

c (M ), sρ

! (u)(x) =Zs−1(x)

u(g)

→
ρ (g)

→
ρ , see (11.3) in the Appendix); similarly for t!, hence C∞

(for
with its more concrete (but ρ-dependent) model

c (M//G) is identiﬁed

c (M//G, ρ) := Coker(sρ
C∞

! − tρ

! : C∞

c (G) → C∞

c (M )).

Let us state right away one of the most basic properties of our deﬁnition: Morita
invariance. This will follow from a more general result - Theorem 9.3 of Section 9.
Theorem 3.8. Any Morita equivalence between two groupoids G (over M ) and H
(over N ) gives rise to an isomorphism between C∞
c (N//H) and
induces a 1-1 correspondence between the transverse measures of G and of H.
Example 3.9 (the case of submersions). When looking at “transverse notions”,
i.e., notions that morally live on the orbit space, the “test case” is provided by
the groupoids whose orbit spaces B are already smooth or, more precisely, by the
groupoids that are (Morita) equivalent to smooth manifolds B. Such groupoids are
associated to smooth submersions π : P → B. Explicitly, any such submersion π
gives rise to a Lie groupoid G(π):

c (M//G) and C∞

G(π) = P ×B P = {(p, q) ∈ P × P : π(p) = π(q)},

with the source and target being the second, respectively the ﬁrst, projection, and
the multiplication (p, q)· (q, r) = (p, r). The Lie algebroid of G(π) is the sub-bundle
of T P consisting of vectors that are tangent to the ﬁbers of π,

F (π) := Ker(dπ) ⊂ T P.

18

MARIUS CRAINIC AND JO ˜AO NUNO MESTRE

In this case the intuition mentioned in Remark 3.4 works without problems and
tells us that we should look at the ﬁber integration map
c (P,DF (π)) → C∞

c (B),

(3.11)

: C∞

Zπ−ﬁbers

Even more, it motivates the use of the density bundle starting with the question:
how can one represent compactly supported smooth functions on B by functions
on P , in a canonical way? Of course, the main problem is then to understand the
kernel of this map. The deﬁnition of C∞

c (M//G) suggests the answer: look at

s! − t! : C∞

c (P ×B P, t∗DF (π) ⊗ s∗DF (π)) → C∞

c (P,DF (π)).

Lemma 3.10. For the groupoid G(π) associated to a submersion π : P → B, the
integration over the ﬁber (3.11) is surjective and its kernel is the image of s! − t!;
therefore it induces an isomorphism

c (P//G(π)) ∼= C∞
C∞

c (B).

Proof. Let C∞
supports. We claim that the integration over the ﬁber, now viewed as a map

π−c(P,DF (π)) be the space of sections of DF (π) with ﬁberwise compact

is surjective. SinceRπ π∗(f )u = fRπ u, it suﬃces to show that there exists:

c = 1.

π−c(P,DF (π)) → C∞(B),

Zπ

: C∞

:=Zπ−ﬁbers
π−c(P,DF (π)) such that Zπ

c ∈ C∞

To see this, choose an open cover {Vi}i∈I of B such that, for each i, there exists
an open Ui ⊂ P with the property that π|Ui is diﬀeomorphic to the projection
Vi × Rq → Vi. On each Ui choose

ci ∈ C∞

π|Ui −c(Ui,DF (π))

ci = 1. Choose also a partition of unity {ηi}i∈I with ηi supported

such thatRπ|Ui
in Vi. Set now c =Pi ηici.
π∗(f )· c has compact support andRπ π∗(f )· c = f . Let now u ∈ C∞
thatRπ−ﬁbers u = 0. Construct

The surjectivity from the statement follows immediately using c: for f ∈ C∞

v ∈ C∞
where φ ∈ C∞
compact support. Compute now:

c (P ×B P, t∗DF (π) ⊗ s∗DF (π)), v(p, q) = φ(π(q))u(p) ⊗ c(q)
c (B) is chosen to be 1 on π(supp(u)). The role of φ is to make v have

c (B),
c (P,DF (π)) such

s!(v)(p) = φ(π(b))c(p)Zπ

u = 0, t!(v)(q) = u(p)φ(π(p))Zπ

c = u(p);

(cid:3)

therefore u is in the image of s! − t!.

4. Geometric transverse measures (= transverse densities)

4.1. The transverse volume and density bundles. We are now interested in
geometric transverse measures, i.e., the analogues of the measures induced by den-
sities (Deﬁnition 2.8). Looking for linear functionals on C∞
c (M,DA) that arise from
sections of a vector bundle combined with the canonical integration on M (like for
standard densities) one immediately is led to the transverse density bundle:

MEASURES ON DIFFERENTIABLE STACKS

19

Deﬁnition 4.1. For a Lie algebroid A over M , the the transverse density
bundle of A is the vector bundle over M deﬁned by:

Dtr
A := DA∗ ⊗ DT M .

Given a section σ of Dtr
A , a decomposition of σ is any writing of σ of type
σ = ρ∨ ⊗ τ with ρ ∈ C∞(M,DA) strictly positive and τ a density on M (where ρ∨
is the dual section induced by ρ).

Similarly one can deﬁne the transverse volume and orientation bundles

A := VA∗ ⊗ VT M = ΛtopA ⊗ ΛtopT ∗M,
V tr

tr

o

A := oA∗ ⊗ oT M

and the usual relations between these bundles continue to hold in this setting; e.g.:

Dtr
A = |ΛtopA ⊗ ΛtopT ∗M| = |V tr
A|.

One of the main properties of these bundles is that they are representations of
A and, even better, of G, whenever G is a Lie groupoid with algebroid A; hence
they do deserve the name of “transverse” vector bundles. We describe the canonical
action of G on the transverse density bundle Dtr
A; for the other two the description is
identical. We have to associate to any arrow g : x → y of G a linear transformation
A,x → Dtr

g∗ : Dtr

A,y.

The diﬀerential of s and the right translations induce a short exact sequence

which, in turn (cf. item 2 in Subsection 2.2), induces an isomorphism:

0 → Ay → TgG ds→ TxM → 0,

(4.1)
Using the similar isomorphism at g−1 and the fact that the diﬀerential of the
inversion map gives an isomorphism TgG ∼= Tg−1G, we ﬁnd an isomorphism

D(TgG) ∼= D(Ay) ⊗ D(TxM ).

and therefore an isomorphism:

D(Ay) ⊗ D(TxM ) ∼= D(Ax) ⊗ D(TyM ).

D(A∗

x) ⊗ D(TxM ) ∼= D(A∗

y) ⊗ D(TyM ),

Explicitly, if σ = ρ∨ ⊗ τ is a decomposition of σ,

µσ(f · ρ) =ZM

f · τ =ZM

f (x) dµτ (x) ∀ f · ρ ∈ C∞

c (M,DA).

Of course, the question is: when does µσ deﬁne a transverse measure (i.e., descends
to C∞

c (M//G))? We have:

and this deﬁnes the action g∗ we were looking for (it is straightforward to check
that this deﬁnes indeed an action).
Deﬁnition 4.2. A transverse density for the Lie groupoid G is any G-invariant
section of the transverse density bundle Dtr
A. When we want to stress the structure
of G-representation present on Dtr
4.2. Transverse densities as transverse measures. Returning to the relevance
of the transverse density bundle to transverse measures, note that the canonical
pairing between DA and DA∗ and the integration of densities on M allows us to
interpret any section σ of Dtr

A , we will denote it by Dtr
G .

A as a linear map

µσ : C∞

c (M,DA) → R.

20

MARIUS CRAINIC AND JO ˜AO NUNO MESTRE

Proposition 4.3. For a section σ ∈ C∞(M,Dtr

G ), the following are equivalent:

1. µσ ◦ s! = µσ ◦ t! (i.e., σ gives rise to a transverse measure, if it is positive).
2. σ is an invariant section of Dtr

G (i.e., it is a transverse density).

Hence transverse densities appear as transverse measures of geometric type. The

proof of the proposition will be given together with the proof of Proposition 4.4.

4.3. The compatibility with other view-points. Here we give two more equi-
valent characterizations of the invariance of a section σ ∈ C∞(M,Dtr
A ) which show
the compatibility of this condition with the points of view of measure groupoids [19]
and of non-commutative geometry [5]. However, unlike the previous proposition,
the next one depends on a decomposition σ = ρ∨ ⊗ τ (see Deﬁnition 4.1) that we
now ﬁx. In this situation, we have:
1. an induced measure µG (to be deﬁned) on the manifold G and, from the
point of view of measure groupoids, the main condition to require is the
invariance of µG under the inversion map. Of course, since we are in the
geometric setting, µG = µρG will be associated to a density ρG on G. Finally,
ρG is deﬁned as the density whose value at an arrow g : x → y of G equals
to ρy ⊗ τx modulo the isomorphism (4.1).
c (G), ⋆ρ) (using ρ) of the convolution algebra
and, using τ , the associated integration over the units

2. the concrete realization (C∞

˜µτ : C∞

c (G) → R, u 7→ µτ (u|M ) =ZM

u(1x)τ (x).

The interesting condition is, again, the trace condition.

Proposition 4.4. Given σ = ρ∨ ⊗ τ as above, the following are equivalent:

2. σ is invariant (i.e., it is a transverse density).
3. the measure µρG on G is invariant under the inversion map.
4. ˜µτ is a trace on the algebra (C∞

c (G), ⋆ρ).

Proof. (of Propositions 4.3 and 4.4) We show that that 1-4 from the last two propo-
sitions are all equivalent. In order to handle the invariance of σ, we write more
explicitly the action of G on Dtr
G from Section 4.1. If g : x → y is an arrow of G, we
use the canonical identiﬁcations
x) ⊗ D(A∗
x) ⊗ D(A∗

y) ⊗ D(Ay) ⊗ D(TxM )
y) ⊗ D(Ax) ⊗ D(TyM )

c23→ Dtr
c13→ Dtr
A,y,

D(A∗
D(A∗

A,x

A,x corresponds to ρ∨

where cij denotes the map given by contraction of the i-th and j-th factors of
the tensor product in the left-hand side. Since ρ is strictly positive, under these
identiﬁcations σx ∈ Dtr
y ⊗ ρy ⊗ τx and σy corresponds to
ρ∨
x ⊗ ρ∨
A,y, when written in terms of these
x)⊗D(A∗
identiﬁcations, is given by the tensor product of the identity map of D(A∗
y)
with the map dig induced by the diﬀerential of the inversion of G at g. Therefore,
σ is an invariant section if and only if for all g ∈ G with g : x → y,

y ⊗ ρx ⊗ τy. The action g∗ : Dtr

x ⊗ ρ∨
A,x → Dtr

dig(ρy ⊗ τx) = ρx ⊗ τy.

This is the same as the condition that i∗(ρG) = ρG which, of course, is equivalent
to the fact that the associated measure µρG is invariant under the inversion of G.
This proves the equivalence of 2 and 3.

MEASURES ON DIFFERENTIABLE STACKS

21

The equivalence between 1 and 4 is just a rewriting of Proposition 3.6 via the
c (G), ⋆ρ). We are left

identiﬁcation of the intrinsic convolution algebra with (C∞
with the equivalence of 3 and 4. Rewrite 3 as:

(4.2)
c (G), where u∗(g) = u(g−1). Using the deﬁnition of ρG we obtain the

µρG (u) = µρG (u∗)

for all u ∈ C∞
formula for the associated integration

µρG (f ) =ZG

f (g)ρG(g) =ZG

f (g)ρt(g) ⊗ τs(g) =ZM Zs−1(x)

f (g) dµ→

ρ (g)! τx.

As in the proof of Proposition 3.6, it suﬃces to require (4.2) on elements of type
f = u∗v (hence f (g) = u(g−1)v(g)). But, on such elements, the previous formula

combined with the deﬁnition (3.2) of ⋆ρ givesRM (u ⋆ρ v)(1x)τx = ˜µτ (u ⋆ρ v); then,

on f ∗ = v∗u we obtain ˜µτ (v ⋆ρ u). Hence 3 is equivalent to ˜µτ being a trace.

(cid:3)

Remark 4.5. The non-commutative view-point indicates that one should look also
at higher versions of traces; this is related to the Hochschild and cyclic cohomology
of the convolution algebra [5] (see also [3]) from which traces emerge in degree zero.
On the other hand also the invariant sections of Dtr
A show up as degree zero elements
in a cohomology: the diﬀerentiable cohomology of G with coeﬃcients in Dtr
A. It is
natural to expect that, via restriction at units, the diﬀerentiable cohomology in
higher degrees will give rise to higher (non-commutative) traces; such higher traces
will be “geometric” in the same way that measures induced by densities are. Our
comments are very much in line with the work of Pﬂaum-Posthuma-Tang [25].

5. Intermezzo: the case of proper Lie groupoids

In this section we will show that “the general nonsense” from the previous sec-
tions takes a much more concrete (but not so obvious) form in the case of proper
groupoids. Throughout this section we ﬁx a proper groupoid G over M , and we
consider the orbit space

B := M/G, with quotient map π : M → B.

Properness implies that B is Hausdorﬀ and locally compact; however, B has much
more structure. The upshot of this section is that the abstract transverse measures
discussed in the previous two sections descend to (standard) measures on B. We
start with the existence result for transverse densities.

Proposition 5.1. Any proper Lie groupoid admits strictly positive transverse den-
sities.

Proof. This is an immediate application of averaging, completely similar to our
illustrative Lemma 11.7: using any proper Haar system µ, if one starts with a
strictly positive section ρ ∈ C∞(M,Dtr

A ), then

remains strictly positive and it is equivariant: for a : x → y,
a∗g∗ρt(g) dµy(g);

g∗ρt(g) dµx(g)

Avµ(ρ)x :=Zs−1(x)
a∗Avµ(ρ)y =Zs−1(y)

22

MARIUS CRAINIC AND JO ˜AO NUNO MESTRE

using a∗g∗ = (ga)∗, t(g) = t(ga) and invariance of µ, the last expression is

Zs−1(y)

(ga)∗ρt(ga) dµy(g) =Zs−1(x)

g∗ρt(g) dµx(g) = Avµ(ρ)x.

Hence the existence of invariant transverse densities and measures follows from the
existence of proper Haar systems (Proposition 11.6).
(cid:3)

5.1. Classical measures on the orbit space B. We have already mentioned
that B = M/G is a quite nicely behaved space. Although it is not a manifold in
general, in many respects it behaves like one. For instance, one has a well-behaved
algebra of smooth functions:

C∞(B) := {f : B → R : f ◦ π ∈ C∞(M )},

(and one can show that one can recover the topological space B out of the algebra
C∞(B) as its spectrum - see [22]). The algebra of compactly supported smooth
functions is deﬁned as usual, by just adding the compact support condition:

C∞
c (B) := {f ∈ C∞(B) :

supp(f ) − compact}.

Of course, one can deﬁne similarly Ck
c (B) for any integer k ≥ 0; for k = 0, since B
is endowed with the quotient topology, one recovers the usual space of compactly
supported continuous functions on the space B. As in the case of smooth manifolds
(Proposition 2.4), one has:
Proposition 5.2. If G is a proper Lie groupoid over M , B = M/G, then

c (B) is dense in Cc(B).

1. C∞
2. any positive linear functional on Cc(B) is automatically continuous; and

the same holds for C∞

c (B) with the induced topology.

3. the construction I 7→ I|C∞

c (B) induces a 1-1 correspondence:
{measures on B} ∼←→ {positive linear functionals on C∞

c (B)}.

Proof. The proof of Proposition 2.4 was written so that it can be applied, word by
word, also to this context. The only ingredient used there and which is still missing
for us is the fact that C∞(M//G) separates closed subsets, which is precisely our
main illustration of the averaging procedure (Lemma 11.7 in the Appendix).

(cid:3)

5.2. Transverse measures ≡ classical measures on B. Next, we relate trans-
verse measures to classical measures on B. The main point is that the intuition
described in Remark 3.4 can now be made precise; consider the intrinsic averaging:

Av G = Av : C∞

c (M,DA) → C∞

c (B), Av(ρ)(π(x)) =Zs−1(x)

−→ρ |s−1(x).

(5.1)

Theorem 5.3. The averaging map (5.1) induces an isomorphism

c (M//G)
In particular, this induces a 1-1 correspondence

Av G = Av : C∞

∼→ C∞

c (B).

(5.2)

{transverse measures on G} ∼←→ {measures on B = M/G}.

For the inverse of Av, choose any proper normalized Haar density ρ (Def. 11.5)
and then, for f ∈ C∞
c (M//G) is the one
represented by π∗(f )ρ ∈ C∞

c (B), the corresponding element in C∞

c (M,DA).

MEASURES ON DIFFERENTIABLE STACKS

23

Proof. To check that the map Av is well-deﬁned, recall that if two elements of
c (M,DA) represent the same class in C∞
C∞
c (M//G), they diﬀer by a density in
the image of (s! − t!).
If, as in Remark 3.7, we ﬁx any strictly positive density
ρ0 ∈ C∞(M,DA) to trivialize all the density bundles, we then check that

Av((sρ

! − tρ

! )(u))(π(x)) =Zs−1(x) Zs−1(t(g))

u(g)−→ρ0 −Zs−1(t(g))

u(g−1)−→ρ0!−→ρ0,

which is equal to zero, being the diﬀerence of two double integrals that have the
same value. This is because both correspond to taking the integral of u over all
arrows g whose source (and target) belong to the orbit π(x).

Next, choosing any proper normalized Haar density ρ, the inverse to Av, given
as above by mapping f ∈ C∞
c (M//G) is well
deﬁned. Indeed, for such an f , there is a compact subset K of M such that π(K)
is the support of f . This means that the support of π∗f is the saturation of K,
and the intersection of it with the support of ρ is compact, because ρ is a proper
Haar density, so π∗(f )ρ has compact support as well.

c (B) into the class of π∗(f )ρ in C∞

Finally, to see that this is indeed the inverse to Av, we ﬁrst check that

Av([π∗(f )ρ])(π(x)) =Zs−1(x)

π∗(f )(t(g))−→ρ

= f (π(x))Zs−1(x)

−→ρ = f (π(x)).

Next, suppose that the proper normalized Haar density ρ is of the form ρ = c · ρ′,
where c is a cut-oﬀ function and ρ′ is full. Then, for any other density h · ρ′ ∈
C∞
c (M,DA), we have that

(h · ρ′ − π∗Av(h · ρ′)ρ)(x) = h(x)ρ′(x) − Zs−1(x)

h(t(g))−→ρ′! c(x)ρ′(x)

and this expression represents zero in C∞
density bundles, it becomes precisely (sρ′

= Zs−1(x)

c(x)h(t(g))−→ρ′! ρ′(x),

h(x)c(t(g))−→ρ′ −Zs−1(x)
c (M//G). Indeed, using ρ′ to trivialize the
! − tρ′

! )(s∗h · t∗c).

(cid:3)

5.3. The measure on B induced by a transverse density. The previous cons-
tructions show that a positive transverse density σ ∈ C∞(M,Dtr
A ) induces a trans-
verse measure for G, hence a measure on B, which we still denote by

µσ : C∞

c (B) → R.

To make this more explicit, we need the notion of cut-oﬀ function for a full Haar
density ρ ( Proposition 11.6): a smooth positive function c on M satisfying:

1. the restriction of s to t−1(supp(c)) is proper (as a map to M ).

ρ(g) = 1 for all x ∈ M .

2. Rs−1(x) c(t(g)) dµx
ZB

h(b) dµσ(b) =ZM

Proposition 5.4. If σ is a positive transverse density for G, then the induced
measure µσ on B is given by

c(x)h(π(x)) dµτ (x)

(5.3)

24

MARIUS CRAINIC AND JO ˜AO NUNO MESTRE

where, to write the right hand side, we choose any decomposition σ = ρ∨ ⊗ τ as in
Deﬁnition 4.1, and we use a cut-oﬀ function c for ρ.

Moreover, µσ is uniquely characterized by the formula

ZM

f (x) dµτ (x) =ZB(cid:18)ZOb

f (y) dµρOb

(y)(cid:19) dµσ(b),

where ρO denotes the density induced by ρ on the orbit (cf. Section 11.4).

Note that it is rather remarkable that the right hand side of the formula (5.3) for
µσ does not depend on the choice of the decomposition or of the cut-oﬀ function.

Proof. The formula deﬁning µσ on C∞
deﬁnition of µσ on C∞

c (B) is obtained simply by transferring the
c (M//G) through the isomorphism described in Theorem 5.3.

For the second part we also use the discussion on ρO from 11.4 to compute:

ZB(cid:18)ZOb

f (y) dµρOb

f (y) dµρOb

c(x)(cid:18)ZOx
(y)(cid:19) dµσ(b) =ZM
c(x) Zs−1(x)
=ZM
=ZM Zs−1(x)

(y)(cid:19) dµτ (x)
f (t(g)) dµ−→ρ (g)! dµτ (x)
c(s(g))f (t(g)) dµ−→ρ (g)! dµτ (x).

The last integral is the same as the integral of the function (s∗c) · (t∗f ) over G
with respect to the density ρG induced by ρ and τ . Since σ = ρ∨ ⊗ τ is invariant,
Proposition 4.4 implies that ρG is invariant under the inversion, hence

ZB(cid:18)ZOb

f (y) dµρOb

(y)(cid:19) dµσ(b) =ZM Zs−1(x)

c(t(g))f (s(g)) dµ−→ρ (g)! dµτ (x)
(c(t(g)) dµ−→ρ (g)! dµτ (x)

f (x) Zs−1(x)

f (x) dµτ (x)

(cid:3)

=ZM
=ZM

5.4. Some interesting consequences. Here are some immediate but interesting
consequences of Theorem 5.3 and the integral formula from Proposition 5.4.
Corollary 5.5. With the same notations as above, if G is compact and σ is a
transverse density then, for any h ∈ C∞(B),

ZM

h(π(x)) dµτ (x) =ZB

h(b) · Vol(Ob, µOb ) dµσ(b).

In particular, the volume function Volρ : b 7→ Vol(Ob, µOb) is a continuous function
on B, smooth in the sense that its pull-back to M is smooth, and its integral with
respect to µσ is Vol(M, µτ ).

Note that, in terms of set-measures, this reads as

µσ =

1

Volρ

π!(µτ ).

MEASURES ON DIFFERENTIABLE STACKS

25

Smoothness of the volume function is a simple consequence of the equality
Vol(Ox, µOx) = Vol(s−1(x), µ−→ρ ) (see Section 11.4); this function is smooth, by
condition 2 of the deﬁnition of a Haar system (Deﬁnition 11.1).
Corollary 5.6. With the same notations as above, if G is compact and σ is a
transverse density, then the volume of B = M/G with respect to µσ is given by

Vol(B, µσ) =ZM

1

Vol(Ox, µOx)

dµτ (x).

We see that this expression for the volume of B with respect to µσ corresponds
to the deﬁnition given by Weinstein (cf. Deﬁnition 2.3 and Theorem 3.2 in [33]) for
the volume of the stack M//G with data (ρ, τ ).

6. Intermezzo: the case of regular Lie groupoids

6.1. The general regular case. We now have a closer look at the regular case,
i.e., when all the orbits of G have the same dimension. In this case the connected
components of the orbits form a regular foliation on the base manifold M ; we denote
it by F . We interpret F as an involutive sub-bundle of T M ; as such, it is the image
of the anchor ♯ : A → T M of the algebroid A of G.
One special feature of the regular case is that the naive orbit space M/G coincides
with the orbit space M/E of some smaller groupoid E, namely one that integrates F
as an algebroid. For instance, when G has connected s-ﬁbers, then E could be any
s-connected integration of F , such as the holonomy or the monodromy groupoid of
F . However, for any regular G (even without s-connected ﬁbers) there is a canonical
choice for E: the quotient of G obtained by dividing out the action of the connected
components G0
x of the isotropy groups Gx (for the smoothness, see Proposition 2.5
in [24]). We denote it by
(6.1)

E = E(G)

and call it the foliation groupoid associated to G.
The previous discussion indicates that there should be a close relationship be-
tween transverse measures for G and for E = E(G). To see that this is indeed the
case, we pass to another special feature of the regular case: the vector bundles

g = Ker(♯), ν = T M/F

are representations of G in a canonical way, called the isotropy and the normal
representations, respectively (cf. e.g. [15]). For the action of an arrow g : x → y
on g we use the adjoint action Adg(a) = gag−1 going from the isotropy group of
G at x to the one at y; by diﬀerentiation, we obtain the action going from gx to
gy. For the action on ν, start with v ∈ νx and choose a curve g(t) : x(t) → y(t)
with g(0) = g and such that ˙x(0) ∈ TxM represents v; then g · v ∈ νy is the vector
represented by ˙y(0) ∈ TyM .
Lemma 6.1. One has a canonical isomorphism of representations of G:

(6.2)

(6.3)

For σ ∈ Γ(Dtr

A ), κ ∈ Γ(Dg) nowhere vanishing and β ∈ Γ(Dν ) we write

if the two elements correspond to each other by the previous isomorphism.

G ∼= Dg
Dtr

∗ ⊗ Dν

σ ≡ κ∨ ⊗ β

26

MARIUS CRAINIC AND JO ˜AO NUNO MESTRE

For the proof, consider the two exact sequences of vector bundles over M :

0 → g → A

ρ

→ F → 0, 0 → F → T M → ν → 0.

to deduce that there are canonical isomorphism (see 1 and 2 in 2.2):

DA ∼= Dg ⊗ DF , DT M ∼= DF ⊗ Dν .

Working out the actions, one obtains the lemma. Note that the lemma applied to
E = E(G) (or just the previous argument) gives Dtr
isomorphism of representations of G:
G ∼= Dg
Dtr

E ∼= Dν, hence also to a canonical

∗ ⊗ Dtr
E .

Hence, to talk about strictly positive transverse densities for both G and E, we have
to assume the existence of κ ∈ Γ(Dg) strictly positive and invariant. On the other
hand, since DA = Dg ⊗ DF , the pairing with κ∨ ∈ Γ(Dg
c (M,DF ).

c (M,DA) → C∞

∗ ) induces a map

κ∨ : C∞

The next result follows now by a straightforward computation:
Proposition 6.2. Assume that κ ∈ Γ(Dg) is strictly positive and invariant. Then
the pairing with κ∨ descends to an isomorphism
c (M//G) ∼→ C∞

c (M//E),

κ∨ : C∞

(6.4)

and it induces a 1-1 correspondence

{transverse measures for G} ∼←→ {transverse measures for E}.

Moreover, this preserves the geometricity of measures; more precisely, via the rela-
tion σ ≡ κ∨ ⊗ β (see (6.3)), κ induces a 1-1 correspondence between
• invariant sections β of Dν (i.e., transverse densities for E)
• invariant sections σ of Dtr
A (i.e., transverse densities for G).

uniquely characterized by the commutative diagram:

C∞
c (M//G)

%❏❏❏❏❏❏❏❏❏❏

µσ

κ∨

R

C∞
c (M//E)

ytttttttttt

µβ

6.2. The proper regular case. We now assume that G is both regular and proper.
In this case there are two new features that are present:

c (M//G) and C∞

c (M//E) are isomorphic to C∞

• Both C∞
aging of Theorem 5.3 applied to G and E, respectively.
• There is a preferred choice of a strictly positive invariant section κ: since the
isotropy groups Gx are compact, their Lie algebras gx come with induced
Haar densities; we consider the ones associated to the identity components
of Gx - they deﬁne a strictly positive invariant section

c (B), by the aver-

κHaar ∈ Γ(Dg).

Note that choosing the Haar densities associated to the identity components (rather
than of the entire Gx’s) is essential for the smoothness of κHaar; indeed, while the
bundle consisting of the full isotropy groups may fail to be smooth, passing to
identity components does produce a smooth bundle of Lie groups (cf. Proposition

/
/
%
y
MEASURES ON DIFFERENTIABLE STACKS

27

2.5 in [24]). Using the normalization and the invariance conditions for the Haar
densities, the following is immediate:
Proposition 6.3. κHaar is the only strictly positive invariant section of Dg with the
property that the isomorphism (6.4) becomes the identity after identifying C∞
c (M//G)
and C∞

c (M//F ) with C∞

c (B).

Putting this and Proposition 6.2 together we ﬁnd in particular:

Corollary 6.4. The relation σ ≡ κ∨

Haar ⊗ β (see (6.3)) induces a bijection between

• invariant sections β of Dν (i.e., transverse densities for E)
• invariant sections σ of Dtr
A (i.e., transverse densities for G).

Moreover, the measures µσ and µβ induced on B by σ and β coincide.

Or, on a commutative diagram:

C∞
c (M//G)

C∞
c (M//E)

C∞

c (B)

∼

AvG

8qqqqqqqqqq
&◆◆◆◆◆◆◆◆◆◆◆◆

µσ

κ∨
∼

R

∼

AvE

f▼▼▼▼▼▼▼▼▼▼
x♣♣♣♣♣♣♣♣♣♣♣♣

µβ

7. Intermezzo: the case of symplectic groupoids

7.1. The general case. In this section we look at another particular class of
groupoids: those that come from Poisson Geometry, i.e., symplectic groupoids [6,
32]. As mentioned in the introduction, this case and its relevance to compactness
in Poisson Geometry [8, 9, 10] was one of our original motivations for this paper.
Recall (cf. e.g. [6]) that a symplectic groupoid (G, Ω) is a Lie groupoid G endowed
with a symplectic form Ω ∈ Ω2(G) which is multiplicative.
In this case the Lie
algebroid A of G is, as a vector bundle, canonically isomorphic to T ∗M by
A ∼= T ∗M, αx 7→ (Xx 7→ Ωx(αx, Xx)),

where we identify x ∈ M with 1x ∈ G. Therefore we obtain, as vector bundles,

Dtr
A = DT M ⊗ DT M

(7.1)

and similarly when replacing D by V or o.
In the remaining part of this section we ﬁx a symplectic groupoid (G, Ω) with
connected s-ﬁbers. Recall that the base M carries an induced Poisson structure,
uniquely determined by the fact that the source map is a Poisson map [6]. For
f ∈ C∞(M ) we will denote by Xf the corresponding Hamiltonian vector ﬁeld on
M . We say that a density τ on M is invariant under Hamiltonian ﬂows if

LXf (τ ) = 0 ∀ f ∈ C∞(M ).

Proposition 7.1. The correspondence

induces a bijection between strictly positive:

τ ∈ Γ(DT M ) 7→ σ := τ ⊗ τ ∈ Γ(Dtr
A )

• transverse densities σ for G.
• densities τ on M which are invariant under Hamiltonian ﬂows.

/
/
&
8
x
f
28

MARIUS CRAINIC AND JO ˜AO NUNO MESTRE

Furthermore, DT M can be made into a representation of G in a canonical way,
uniquely determined by the conditions:

1. (7.1) becomes an isomorphism of representations of G
2. the action preserves the (ﬁberwise) positivity of densities.

With respect to this action, a density τ on M is invariant as a section of DT M if
and only if τ is invariant under Hamiltonian ﬂows.
Proof. In general, the action of G on Dtr
action of A, i.e., a ﬂat A-connection ∇ on Dtr
(but using Dtr
the symplectic groupoid G, we have that

A induces, by diﬀerentiation, an inﬁnitesimal
A. Using the formula for ∇ from [15]
A ), in the case where A = T ∗M is the Lie algebroid of

A instead of V tr

∇df (τ1 ⊗ τ2) = (LXf τ1) ⊗ τ2 + τ1 ⊗ (LXf τ2).

Therefore, if τ is a strictly positive density on M invariant under Hamiltonian
ﬂows, then ∇df (τ ⊗ τ ) = 0 for all f ∈ C∞(M ). Hence τ ⊗ τ is invariant with respect
to the inﬁnitesimal action of A. Since G is s-connected, τ ⊗ τ is G-invariant as well.
Moreover, the mapping τ 7→ τ ⊗ τ is injective on strictly positive densities.
Conversely, if σ is a strictly positive transverse density for G, we can choose a
decomposition of the form σ = τ ⊗ uτ , where u ∈ C∞(M ) is strictly positive. Then
τ ′ = √uτ is a strictly positive smooth density on M and σ = τ ′ ⊗ τ ′. Since σ is a
transverse density for G, we have:

0 = ∇df σ = (LXf τ ′) ⊗ τ ′ + τ ′ ⊗ (LXf τ ′)

τ ′ is strictly positive, v = 0. Therefore τ ′ is invariant under Hamiltonian ﬂows.

Writing LXf τ ′ = vτ ′, where v ∈ C∞(M ), we conclude that 2vτ ′ ⊗ τ ′ = 0. Since
In order to make DT M into a representation of G as in the statement, pick a

strictly positive density τ on M . Then, for any arrow g : x → y in G,

(g · τx) ⊗ (g · τx) = g · (τx ⊗ τx).

Since the action of G on Dtr
positive smooth function cτ ∈ C∞(G), such that

A preserves the positivity of sections, there exists a

for any arrow g of G from x to y. We are then forced to set

g · (τx ⊗ τx) = cτ (g)(τy ⊗ τy),

g · τx =pcτ (g)τy.

This deﬁnes an action of G on DT M . We check that it does not depend on the
choice of τ : if τ ′ is another strictly positive density on M , then τ ′ = f τ , where f
is a positive smooth function on M . Then

x) = f (x)2g · (τx ⊗ τx) = f (x)2cτ (g)(τy ⊗ τy) =(cid:18) f (x)
f (y)(cid:19)2

x ⊗ τ ′

g · (τ ′
and, on the other hand,

cτ (g)(τ ′

y ⊗ τ ′
y),

so cτ ′

f (y)(cid:17)2
(g) =(cid:16) f (x)
qcτ ′(g)τ ′

g · (τ ′

x ⊗ τ ′
cτ (g). Therefore

x) = cτ ′

(g)(τ ′

y ⊗ τ ′
y),

y =

f (x)

f (y)pcτ (g)τ ′

y = f (x)pcτ (g)τy = g · τ ′

x.

MEASURES ON DIFFERENTIABLE STACKS

29

Finally, since (7.1) is now an isomorphism of representations and the action
preserves positivity of densities, a density τ on M is invariant with respect to the
representation of G on DT M if and only if τ ⊗ τ is an invariant section of Dtr
A . (cid:3)
Remark 7.2 (on the existence). By the general theory (Proposition 5.1), in the
proper case, strictly positive transverse densities do exist. However, it is interesting
to search for natural ones, associated to the symplectic/Poisson geometry that is
present in this context. Searching for a canonical σ is the same thing as searching
for a canonical τ or, setting ρ = τ ∨, searching for a Haar density

ρ ∈ Γ(DA)

(see Deﬁnition 11.3 in the Appendix). With the intuition that such Haar densities
are “smooth” families of densities along the orbits (see Corollary 11.9 in the Ap-
pendix), there is an obvious candidate: the one that uses the Liouville forms of the
symplectic leaves! However, the resulting family is not smooth, unless we are in
the regular case (and we choose the normalizations carefully). Nevertheless, in the
general case one can still make sense of the resulting measure (just that it might
not come from a transverse density); see [10].

Despite the previous remark, under a slightly stronger condition on G, namely
that s : G → M is proper, one does obtain a canonical transverse density. First one
integrates along the s-ﬁbers the Liouville density of the groupoid:

ρM

DH :=Zs−ﬁbers

|Ωtop|
top!

(note that, since we do not assume any orientability, although the Liouville density
comes from a volume form, integration over the s-ﬁbers gives only a density). As
explained in [8, 9], ρM
DH is an invariant density on M ; hence it induces (by the
previous proposition) a canonical (strictly positive) transverse density for G,

σDH = ρM

DH ⊗ ρM

DH ∈ Γ(Dtr
A ),

and an associated transverse measure µDH (“DH” stands for Duistermaat-Heckman).

Remark 7.3. Even when the procedure from the previous remark works, the result-
ing transverse density is diﬀerent from σDH ; the two are related by a Duistermaat-
Heckman formula (see [9] and also our next subsection).

7.2. The regular case. In the regular case there is yet another description of
transverse densities: using the normal bundle
ν = T M/F

of the symplectic foliation F associated to Poisson structure π on M ; recall that, as
an involutive sub-bundle of T M , F is the image of π♯ : T ∗M → T M (the Poisson
bivector interpreted as a linear map). As for any foliation, ν comes with an action
of the holonomy groupoid of F ; hence one can talk about sections of Dν which are
invariant under holonomy.
We are in the setting of Subsection 6.1: the symplectic groupoid G is regular, F is
the associated foliation and the resulting action of G on ν (see the subsection) factors
through the holonomy action. One special feature of this case is that g = Ker(π♯)
is just the dual of ν, as representations. Hence the isomorphism (6.2) becomes

A ∼= Dν ⊗ Dν,
Dtr

(7.2)

30

MARIUS CRAINIC AND JO ˜AO NUNO MESTRE

an isomorphism of representations of G. More explicitly: the Liouville forms in-
duced by the leafwise symplectic forms deﬁne a section which trivializes DF :

|ωtop|
top! ∈ Γ(DF )

Using again the identiﬁcation DT M = DF ⊗ Dν , we obtain an isomorphism

DT M ∼= Dν ,

|ωtop|
top! ⊗ β ←→ β.

We now apply Proposition 6.2; given the fact that g = ν∗, the (positive) sections
κ of Dg appearing in the proposition will be written as duals β∨ of sections β of
Dν. To avoid confusion, the resulting map κ∨ (now given by pairing with β) will
be denoted hβ,·i. Combining the proposition also with Proposition 7.1, we ﬁnd:
Proposition 7.4. Consider the relations

Γ(DT M ) ∋ τ = |ωtop|
Γ(Dtr

top! ⊗ β ∈ Γ(DF ⊗ Dν )
A ) ∋ σ = τ ⊗ τ ∈ Γ(DT M ⊗ DT M )

and σ ≡ β ⊗ β modulo (7.2). These induce bijections between strictly positive:

1. transverse densities σ for G.
2. densities τ on M invariant under Hamiltonian ﬂows.
3. sections β of Dν invariant under holonomy (= transverse densities for E).

Moreover, in this case the pairing with β descends to an isomorphism

hβ,·i : C∞

c (M//G) ∼→ C∞

c (M//E)

which relates the transverse measure µσ for G with the transverse measure µβ for
E through the commutative diagram

C∞
c (M//G)

C∞
c (M//E)

hβ,·i

%❏❏❏❏❏❏❏❏❏❏

µσ

∼

R

ytttttttttt

µβ

7.3. The proper regular case. Under the condition that the symplectic groupoid
G is both regular and proper we can further specialize the discussion from Subsection
6.2 and use Corollary 6.4. In this case we have at our disposal the Haar densities
associated to the identity components of the isotropy groups Gx, which give rise to
a strictly positive section

βHaar ∈ Γ(Dν ).

This is just the dual of κHaar from Subsection 6.2 (as above, in the Poisson case we
pass from g = ν∗ to ν).
Corollary 7.5. Any proper regular symplectic groupoid (G, Ω) carries a canonical
transverse density: the σ that corresponds to βHaar⊗ βHaar modulo the isomorphism
(7.2) or, equivalently, corresponding to the density on M given by

|ωtop|
top! ⊗ βHaar.

Moreover, the measure µσ induced by σ on B = M//G coincides with the measure
µβ induced by β on B = M//E.

/
/
%
y
MEASURES ON DIFFERENTIABLE STACKS

31

C∞
c (M//G)

C∞
c (M//E)

C∞

c (B)

hβHaar,·i

∼

AvG

8qqqqqqqqqq
&◆◆◆◆◆◆◆◆◆◆◆◆

µσ =µaff

∼

R

∼

AvE

f▼▼▼▼▼▼▼▼▼▼
x♣♣♣♣♣♣♣♣♣♣♣♣

µβHaar

Remark 7.6. Let us also point out that, in the case of symplectic groupoids, the
Haar density βHaar has a nice Poisson geometric interpretation. For instance, if
the symplectic groupoid has 1-connected s-ﬁbers, then the variation of the leafwise
symplectic areas gives rise (because of properness) to a lattice in ν (a transverse
integral aﬃne structure), see e.g. [33]; then βHaar is just the corresponding density.
If also the leaves are 1-connected - condition that ensures that B = M/G is smooth,
then this induces an integral aﬃne structure on B and βHaar is the canonical density
associated to it. A similar interpretation holds for general symplectic groupoids G
- see [9]. For this reason, the resulting measure on B is called the aﬃne measure
induced by G, denoted µaﬀ . This is related to the Duistermaat-Heckman measure
from Subsection 7.1 by a Duistermaat-Heckman formula - see [9].

Of course, one can use Proposition 5.4 to obtain a Weyl-type integration formula

for µaﬀ . One obtains the following result from [9] (but with a diﬀerent proof):

Corollary 7.7. For the aﬃne measure µaﬀ on B, denoting by µM the measure on
M induced by the corresponding density on M (τ above), one has

ZM

f (x) dµM (x) =ZB

ι(b)(cid:18)ZOb

f (y) dµOb(y)(cid:19) dµaﬀ (b),

c (M ), where µO denotes the Liouville measure of the symplectic leaf

for all f ∈ C∞
O, ι(b) = ι(x) is the number of connected components of Gx with x ∈ Ob (any).
Proof. We just have to be careful with computing the resulting densities on the
orbits: they arise when looking at the principal Gx-bundles t : s−1(x) → Ox and
decomposing the resulting density on s−1(x) using the Haar density associated to
Gx (see (11.7) in the Appendix). This diﬀers from the density βHaar that we used
before precisely by the factor ι(x) (see Example 2.9). And the ﬁnal conclusion is
that the resulting measure on Ox is ι(x) times the Liouville measure µOx.
(cid:3)
Corollary 7.8. If G is compact then the aﬃne volume of B = M/G is given by

Vol(B, µaﬀ ) =ZM

1

ι(x)Vol(Ox, µOx)

dµM (x).

Finally, we point out that Proposition 6.3 immediately implies Conjecture 5.2

from [33] (even without the simplifying assumptions from loc.cit).

Corollary 7.9. Let σ be a transverse density for the regular proper symplectic
groupoid (G, Ω) (denoted λ in [33]). Write σ = τ ⊗ τ with τ an invariant density on
M and write τ = |ωtop|
top! ⊗ β with β ∈ Γ(Dν ) invariant. Then µσ = µβ (an equality
of measures on B) if and only if β = βHaar.

/
/
&
8
x
f
32

MARIUS CRAINIC AND JO ˜AO NUNO MESTRE

8. Stokes formula and (Ruelle-Sullivan) currents

We now return to the general theory. In this section we point out that, as in the
case of our motivating example of foliations, transverse measures for groupoids give
rise to closed r-currents on the base manifold M , where r is the dimension of the
s-ﬁbers (or the rank of the Lie algebroid); one advantage of Haeﬂiger’s approach is
that it makes such constructions rather obvious.

8.1. Stokes formula and Poincare duality for usual densities. The main
property of the canonical integration of densities (2.3), which distinguishes it from
other linear functionals on C∞
c (M,DM ), is the Stokes formula. To state it for
general densities, one ﬁrst reinterprets the sections of DM as top-forms with values
in the orientation bundle,

c (M,DT M ) = Ωtop
C∞

c

(M, oM ),

(8.1)

The orientation bundle comes with a ﬂat connection. By a ﬂat vector bundle we
mean a vector bundle E together with a ﬁxed ﬂat connection

∇ : C∞(M, T M ) × C∞(M, E) → C∞(M, E), (X, e) 7→ ∇X (e).

They provide the geometric framework for local coeﬃcients; the main point for us
is that, for such E, one has the spaces of E-valued forms
Ω•(M, E) = C∞(M, Λ•T ∗M ⊗ E),

(8.2)

the ﬂat connection ∇ gives rise to a DeRham operator d∇ on Ω•(M, E) given
explicitly by the standard Koszul-type formula:

d∇ω(X1, . . . , Xk+1) =Xi
(−1)i+1∇Xi (ω(X1, . . . ,cXi, . . . , Xk+1))+
+Xi<j
(−1)i+jω([Xi, Xj], . . . ,cXi, . . . ,cXj, . . . , Xk+1),

(8.3)

and the ﬂatness of ∇ is equivalent to d2
∇ = 0. Therefore one can talk about DeRham
cohomology with coeﬃcients in E, denoted H •(M, E). Back to densities, one uses
the DeRham diﬀerential with coeﬃcients in oM

d : Ωtop−1

c

(M, oM ) → Ωtop

c

(M, oM ),

and the Stokes formula for the canonical integration reads, via (8.1):

ZM

dω = 0

for all ω ∈ Ωtop−1

c

(M, oM ).

Equivalently,RM descends to a linear map

ZM

: H top

c

(M, oM ) → R.

The fact that the domain is always 1-dimensional shows that the Stokes formula
characterizes the integration of densities uniquely, up to multiplication by scalars.

MEASURES ON DIFFERENTIABLE STACKS

33

8.2. Stokes for transverse measures. For a Lie algebroid A, the basic construc-
tions that allows us to talk about the Stokes formula have an obvious A-version,
mainly by replacing the tangent bundle T M by A; one obtains the notion of A-
ﬂat vector bundle (E,∇) (implement the mentioned replacement in (8.2)), also
known as representations of A, A-diﬀerential forms with values in E, Ω•(A, E) =
C∞(M, Λ•A∗⊗E), DeRham diﬀerential given by the same Koszul formula as above,
the cohomology of A with coeﬃcients in E, H •(A, E); for details, see e.g. [7, 15]. Of
course, considering only compactly supported sections one obtains the cohomology
with compact supports (with coeﬃcients in an arbitrary representation E), denoted

H •

c (A, E).

Via the anchor map ♯ : A → T M , any ﬂat vector bundle over M can be seen as a
representation of A (this applies in particular to vector bundles of type oE where E
is any vector bundle over M ). One has the analogue of (8.1) describing the domain
of deﬁnition for transverse measures:

C∞
c (M,DA) = Ωtop

c

(A, oA)

where top stands for the rank of A. Therefore we will use the ﬂat vector bundle oA
and the DeRham operator:

dA : Ωtop−1

c

(A, oA) → Ωtop

c

(A, oA).

Proposition 8.1. Any transverse measure µ for G a Lie groupoid satisﬁes the
Stokes formula

µ(dAω) = 0 ∀ ω ∈ Ωtop−1

c

(A, oA).

Equivalently, but at the level of cohomology: the quotient map
c (M//G)

c (M,DA) → C∞

(A, oA) = C∞

Ωtop

c

descends to a surjection

V E : H top

c

(A, oA) → C∞

c (M//G).

(8.4)

The proof will be given in Subsection 9.3. Similarly to the classical case, this
(A, oA)

implies that a transverse measure µ descends to a linear functional on H top
hence, composing with the pairing induced by wedge products, one obtains

c

h·,·iµ : H k(A) × H top−k

c

(A, oA) ∧→ H top

c

(A, oA)

µ

→ R,

called the Poincare pairing induced by µ. In many interesting examples this
pairing is non-degenerate; however, that cannot happen in general since V E may
fail to be an isomorphism (but see Theorem 8.4 below).

8.3. Reformulation in terms of (Ruelle-Sullivan) currents. The previous
discussion on the integration of densities can be slightly reformulated using currents
[13]. Recall that a p-current on a manifold M is a continuous linear map

where the continuity is in the distributional sense, i.e., it uses the inductive limit
topology arising from writing

ξ : Ωp

c (M ) → R,

c (M ) = ∪K−compactΩp
Ωp

K(M ),

34

MARIUS CRAINIC AND JO ˜AO NUNO MESTRE

where the space Ωp
K(M ) of p-forms supported in K is endowed with the topology of
uniform convergence for all derivatives. The resulting spaces Ωp(M ) of p-currents
ﬁt into a chain complex

where d∗(ξ) = ξ ◦ d. By construction, the resulting homology H•(M ) is in duality
with the compactly supported DeRham cohomology; moreover, this pairing induces
a canonical isomorphism

Similarly one talks about currents on M with values in a ﬂat vector bundle E and
the homology H•(M, E). Back to densities we see that the canonical integration

becomes a top-current on M with coeﬃcients in oM , RM ∈ Ωtop(M, oM ), and the

Stokes formula says that this is a closed current. Hence it gives rise to a completely
canonical homology class

(8.5)

(8.6)

. . . d∗

→ Ω1(M ) d∗

→ Ω0(M )

H•(M ) ∼= H •

c (M )∗.

(cid:20)ZM(cid:21) ∈ Hn(M, oM ),

Cσ(ω) = R∆p σ∗ω); with these identiﬁcations, [RM ] becomes the standard funda-

where M is assumed to be connected, of dimension n. When M is compact and
oriented, the orientation trivializes oM and H•(M ) is canonically isomorphic to
singular homology (associate to a singular p-chain σ : ∆p → R the p-current
mental class [M ] ∈ Hn(M ) of the compact oriented manifold M .
Remark 8.2. Note also that, via the isomorphism (8.5), the Poincare duality can
now be stated in terms of currents as an isomorphism
H •(M ) ∼= Hn−•(M, oM ).

(8.7)

In turn, this follows easily by a sheaf-theoretic argument.
computing H•(M, oM ) can be arranged into a chain complex augmented by R,

Indeed, the complex

R → Ωn(M, oM ) → Ωn−1(M, oM ) → . . . ,

where the ﬁrst map takes a scalar λ to λ ·RM . This complex is local, i.e., can be

seen as a complex of sheaves over M ; as such, it is actually a resolution of R by
ﬁne sheaves (basically the Poincare lemma), therefore it computes the cohomology
of M , giving rise to the Poincare duality isomorphism (8.7).

The basic constructions from the previous discussion have an obvious general-
ization to algebroids, allowing us to talk about the space Ωp(A, E) of A-currents
of degree p with coeﬃcients in a representation E of A and the resulting homology
H•(A, E). With this, a transverse measure µ can be interpreted as a top A-current,
µ ∈ Ωtop(A, oA), and the Stokes formula can be reformulated as:
Corollary 8.3. (reformulation of Proposition 8.1) Any transverse measure, inter-
preted as a top A-current, is closed.

In particular, when A is oriented, composing with the anchor ♯ induces a map

♯∗ : Ωr(A) → Ωr(M )

(r = the rank of A),

hence any transverse measure µ of G induces an r-current on M , called the Ruelle-
Sullivan current on M induced by µ. Of course, the standard notion [29] is
obtained in the case of foliations. Finally, we have the following converse of the
previous corollary.

MEASURES ON DIFFERENTIABLE STACKS

35

Proposition 8.4. If G is a Lie groupoid with connected s-ﬁbers then (8.4) is an
isomorphism. As a consequence, transverse measures on G are the same thing as
closed top A-currents with coeﬃcients in oA,

which are positive in the sense that, if ρ ∈ Ωtop
a density, then µ(ρ) ≥ 0.

c

(A, oA) = C∞

c (M,DA) is positive as

µ ∈ Ωtop(A, oA),

The proof of this result and of Proposition 8.1 are given in the next section.

9. Cohomological insight and the Van Est isomorphism

Another way to look at the intrinsic model C∞

c (M//G) is via a compactly sup-
ported version of diﬀerentiable cohomology; then Propositions 8.1 and 8.4 will be-
come part of a compactly supported version of the Van Est isomorphism [7]. Here
we give the details.

9.1. Diﬀerentiable cohomology with compact supports. A version of diﬀer-
entiable cohomology with compact supports was brieﬂy sketched in Remark 4 of [7].
While loc.cit made use of a Haar system, in our context, there is a clear intrinsic
model. For each k ≥ 0 integer, we denote by Gk the manifold consisting of strings
(9.1)
of k composable arrows of G. Recall that these spaces are related by the face maps

g1← x1 . . . xk−1

gk← xk

x0

δi : Gk → Gk−1, δi(g1, . . . , gk) =

On each of the spaces Gk one considers the line bundle
kDA

0DA ⊗ . . . ⊗ p∗

Dk+1 = p∗

(g2, . . . , gk)
(g1, . . . , gigi+1, . . . , gk)
(g1, . . . , gk−1)

if i = 0
if 1 ≤ i ≤ k − 1
if i = k

where pi
c (Gk,Dk+1) come with the diﬀerential
C∞

: Gk → M (0 ≤ i ≤ k) takes a k-string (9.1) to xi. The spaces

δ =Xi=0

(−1)iδi ! : C∞

c (Gk,Dk+1) → C∞

c (Gk−1,Dk).

Since we end up with a chain complex we will talk about the diﬀerentiable ho-
mology of G and to use the notation H diﬀ
(G). However, it is sometimes useful to
think of it as a cohomology with compact supports; then we use the notation

•

H •
c (G) := Hr−•(G),

where r is the rank of the Lie algebroid of G. For instance, in this way, the Van Est
map will become a map between cohomologies with compact support, preserving
the degree. With these, C∞

c (M//G) is simply the homology in degree zero:
C∞
c (M//G) = H diﬀ

(G) = H r

c (G).

0

Let us also remark that, as in the case of diﬀerentiable cohomology, there is also a
version H •
c (G, E) := Hr−•(G, E) with coeﬃcients in a representation E of G. The
only subtlety is that (still as in the case of diﬀerentiable cohomology) one has to

36

MARIUS CRAINIC AND JO ˜AO NUNO MESTRE

use the action of E in order to deﬁne the diﬀerential. For instance, in the lowest
degree, while the integration over the s-ﬁbers with coeﬃcients,

sE
!

: C∞

c (G, s∗E ⊗ t∗DA ⊗ s∗DA) → C∞

c (M, E ⊗ DA),

is deﬁned exactly as (3.8)), for tE
t∗E induced by the action of G on E (so that sE
space). Similarly in higher degrees.

! one ﬁrst composes with the isomorphism s∗E ∼=
! are deﬁned on the same

! and tE

Example 9.1 (the case of submersions, continued). Let us continue the discussion
for the groupoid G(π) associated to a submersion π : P → B (see Example 3.9). For
this groupoid, the representations of G(π) are simply pull-backs of vector bundles
E over B endowed with the tautological action (the arrow from x to y, which exists
only when π(x) = π(y), sends (π∗E)x = Eπ(x) to (π∗E)y = Eπ(y) by the identity
map). Note that this can also be seen as a consequence of the fact that G(π) is
Morita equivalent to B viewed as a groupoid with only unit arrows.
While Lemma 3.10 (and its obvious version with coeﬃcients) can be seen as a
computation of degree zero homology, we have the following (itself a particular case
of Morita invariance, but used in the proof of the main theorem):
Lemma 9.2. For the groupoid G(π) associated to a submersion π : P → B,

H k

c (G(π), E) = Hr−k(G(π), E) ∼=(cid:26) C∞

0

where r is the rank of the Lie algebroid of G.

c (B, E)

if k = r
otherwise

This lemma is it the compactly supported version of Lemma 1 from [7], and it

follows by the same type of arguments as there.
Theorem 9.3. The homology H•(G,·) is Morita invariant.
Proof. The proof goes exactly as the proof of the Morita invariance of diﬀerentiable
cohomology from [7]: given a Morita equivalence between G (over M ) and H (over
N ), i.e., a principal bi-bundle P (with α : P → M , β : P → N ) one forms a double
complex C•,•(P ) together with quasi-isomorphisms

C•(G)

Rα← tot(C•,•(P ))

Rβ→ C•(H);

the fact that the two maps are quasi-isomorphism is ensured by the fact that each

column Cp,•(P ) comes with an augmentation Rα : Cp,•(P ) → Cp(G) compatible
with the diﬀerentials, and similarly for the rows. Explicitly, Cp,q(P ) is built on the
subspace Pp,q ⊂ Gp × P × Hq consisting of elements (g1, . . . , gp, x, h1, . . . , hq) with
the property that the product g1 . . . gpxh1 . . . hq is deﬁned. On each such space one
has a line bundle Dp,q deﬁned as follows: one pulls-back the line bundle Dp+1
that
appears in the deﬁnition of C•(G) via the projection Pp,q → Gp, similarly for Dq+1
H ;
then, on P , one has the pull-back algebroid C = α!A ∼= β!B (see e.g. Example 5 in
[7]) and one pulls-back D := DC to Pp,q; with these,
G ⊗ D ⊗ Dq+1
H .

Dp,q = Dp+1

deﬁne Cp,q(P ) = Γc(Dp,q). Fixing p, the diﬀerential of the p-column is deﬁned
so that it becomes the diﬀerentiable complex with compact supports of the action
groupoid associated to the right action of H on Pp,0; since this action is principal,
the previous lemma implies that the cohomology of the p-column is zero everywhere,

G

MEASURES ON DIFFERENTIABLE STACKS

37

except in degree zero where it is Cp(G), with the isomorphism induced by Rα.

Similarly for the rows, but using H instead of G. Hence the conclusion follows. (cid:3)
Remark 9.4. Of course, the same holds in the presence of coeﬃcients. Also, with
arguments similar to the ones from [7], these isomorphisms are compatible with
respect to the tensor product of bi-bundles (hence they are functorial). Even more,
if P is only principal as an H-bundle, i.e., a generalized morphism from G to H,
then a careful look at the previous argument (especially at the coeﬃcients) gives
rise to the “integration over the P -ﬁbers map” (which is functorial in P ).

Remark 9.5 (Co-invariants). The deﬁnition of C∞
c (M//G) can also be thought of
as making sense of “the space of G-coinvariants associated to C∞
c (M )” (see Example
3.1). This viewpoint becomes important when looking for compactly supported
versions of statements with no conditions on the support. For that purpose, we use a
more suggestive notation and we extend the notion to a slightly larger setting. First
of all, for a representation E of G deﬁne the space of coinvariants C∞
c (M, E)G−coinv
(dual to the obvious space C∞(M, E)G−inv of invariants) as

C∞
c (M, E)G−coinv := H0(G, E).

Morally, while representations E of G can be thought of as vector bundles E/G over
M/G, C∞(M, E)G−inv plays the role of “C∞(M/G, E/G)” and C∞
c (E)G−coinv plays
the role of “C∞
c (M/G, E/G)”. These heuristics become precise in the case of the
groupoid G(π) associated to a submersion π : P → B when, by Lemma 3.10, the
ﬁber integration induces an isomorphism

c (B, E).

c (π∗E)G(π)−coinv ∼= C∞
C∞

(9.2)
We will use the same notations in a slightly more general context: when G acts
on a manifold P (say from the right) and E is a G-equivariant vector bundle over
P . To put ourselves in the previous setting, one considers the associated action
groupoid P ⋊ G and interprets E as a representation of it. The resulting space of
P ⋊ G-coinvariants will still be denoted by C∞
Corollary 9.6. If π : P → B is a principal G-bundle over a manifold B, then G-
equivariant vector bundles on P are necessarily of type π∗E with E a vector bundle
over B (so that the action on π∗E is the tautological action) and

c (P, E)G−coinv.

c (P, π∗E)G−coinv ∼= C∞
C∞
Moreover, in degrees k > 0, Hk(P ⋊ G, π∗E) = 0.
Proof. In this situation one has a diﬀeomorphism P ×M G ∼= P ×B P , given by
(p, g) 7→ (p, pg), and this identiﬁes the action groupoid with the groupoid G(π).
The statement becomes that of Lemma 9.2.

c (B, E).

(cid:3)

Next we mention another important property of the diﬀerentiable cohomology

with compact supports: the Van Est theorem.
Theorem 9.7. For any Lie groupoid G, with Lie algebroid denoted by A, and for
any representation E of G, there is a canonical map
c (A, E ⊗ oA) → H •

c (G, E).

V E• : H •

Moreover, if k ∈ {0, 1, . . . , r − 1} where r is the rank of A and if the ﬁbers of s
are homologically k-connected, then V E0, . . . , V Ek are isomorphisms. The same is
true for k ≥ r except for the case when some s-ﬁber is compact and orientable.

38

MARIUS CRAINIC AND JO ˜AO NUNO MESTRE

Example 9.8 (the case of submersions, continued). Let us continue our discussion
on the basic example associated to a submersion π : P → B.
In this case the
algebroid is A = Ker(dπ) = F (π) - the foliation induced by π. While the resulting
diﬀerentiable cohomology vanishes except in degree r (the rank of A), we are looking
at a vanishing result for the foliated cohomology with compact supports. For trivial
coeﬃcients, the complex under discussion is

where dπ = dF (π) is now just DeRham diﬀerentiation along the ﬁbers of π. One
may think that the role of the orientation bundle is to make the top degree

(Ω•

c (F (π), oF (π)), dπ)

Ωtop

c

(F (π), oF (π)) = C∞

c (P,DF (π)),

the domain of the canonical ﬁber integration Rπ with values in C∞(B). For the

version with coeﬃcients, necessarily of type π∗E for some vector bundle E over B
(cf. Example 9.1), (Ω•
c (F (π), oF (π)⊗ π∗E), dπ) uses the ﬂat F (π)-connection which
is the inﬁnitesimal counterpart of the tautological action of G(π) on π∗E; this is
uniquely characterized by the condition that sections of type π∗s are ﬂat. Although
the following is a particular case of the Theorem 9.7, it will be used to prove the
theorem. Note that it clariﬁes why the degree r is special: for an r-dimensional
manifold F , H 0

c (F, oF ) is non-zero if and only if F is compact and orientable.

Lemma 9.9. For the foliation F (π) associated to a submersion π : P → B, if
the ﬁbers of π are homologically k-connected, where k ∈ {0, 1, . . . , r − 1}, then the
following sequence is exact:

c

(F (π), oF (π)⊗ π∗E)

Ωr−k−1
c (B, E) → 0.
(hence the corresponding compactly supported cohomology is zero in degrees r − k,
. . . , r − 1 and is C∞
c (B, E) in degree r). The same is true for k = r except for the
case when some ﬁber of π is compact and orientable.

c(F (π), oF (π)⊗ π∗E)

dπ−→ . . .

dπ−→ Ωr

Rπ−→ C∞

Proof. This is just the version of compact supports of Theorem 2 from [7] applied to
the zero Lie algebroid; the ﬁrst few lines of the proof in loc.cit. adapt immediately
to compact supports. Alternatively, one can ﬁrst show that the Poincare pairing
(with respect to any positive measure on B) is non-degenerate and obtain our
lemma as a consequence of the result from [7].
(cid:3)

9.2. The compactly supported A-DeRham complex via forms along s-
ﬁbers. The deﬁnition of algebroid cohomology often comes with the remark that
the deﬁning complex can be interpreted as the complex of right-invariant forms
along the s-ﬁbers of G. This makes the complex Ω•(A) into a subcomplex of
the DeRham complex associated to the foliation F (s) := Ker(ds) induced by s
(ﬁberwise diﬀerential forms):

t∗ : (Ω•(A), dA) ֒→ (Ω•(F (s)), ds),

(Hence ds = dF (s) is the DeRham diﬀerential of F (s) viewed as a Lie algebroid
or, equivalently, DeRham diﬀerential along the ﬁbers of s). Recalling that the
right translations allow us to extend a section α of A to a vector ﬁeld −→α on G
(tangent to the s-ﬁbers) and to identify t∗A with F (s) (so that t∗α corresponds
to −→α ), the inclusion above identiﬁes ω ∈ Ω•(A) with the foliated form −→ω deﬁned

MEASURES ON DIFFERENTIABLE STACKS

39

by −→ω (−→α1, . . .) = ω(α1, . . .); the foliated forms of type −→ω are precisely the foliated
forms that are right-invariant; i.e., ω 7→ −→ω gives an isomorphism

t∗ : (Ω•(A), dA) ∼= (Ω•(F (s)), ds)G−inv.

For the later discussions, it is worth keeping in mind the structure that allows us
to talk about G-invariance: one has a space P = G together with a vector bundle
E = F (s) over P , and G acts on both from the right: on P by right translations,
while the action on F (s) = t∗A is the tautological one ((t∗A)ag = (t∗A)a).
We would like to understand the compactly supported counterpart of the previ-
ous discussion; the main point is that, in the resulting dual picture, subcomplexes
(like Ω•(A) sitting as a sub-complex of (Ω•(F (s)), ds)) will turn into quotient com-
plexes, the inclusions will turn to into integrations over ﬁbers and invariants into
coinvariants. Let us also allow as coeﬃcients any representation E of A. The
relevant complex at the level of G is then

(Ω•

c (F (s), t∗E ⊗ s∗DA), ds),

where F (s) is the foliation induced by the source map s. Regarding the coeﬃcients,
we have mentioned above that pull-backs by s are canonically representations of
F (s); for t∗E, the F (s)-action is the pull-back of the action of A on E: ∇−→α (t∗e) =
t∗∇α(e) for α ∈ C∞(M, A) and e ∈ C∞(M, E)). Recalling the identiﬁcations
F (s) = t∗A, s∗A = F (t), we see that

Ω•
c (F (s), t∗E ⊗ s∗DA) = C∞

c (G, t∗(Λ•A∗ ⊗ E) ⊗ DF (t))

hence the integration along the t-ﬁbers makes sense as a map

: Ω•

c (F (s), t∗E ⊗ s∗DA) → C∞

c (M, Λ•A∗ ⊗ E) = Ω•

c (A, E).

(9.3)

Zt

descends to an isomorphism

c (F (s), t∗E),
Note also that we are in the position of talking about G-coinvariants of Ω•
in the sense of Remark 9.5 where, as above, G acts on G from the right and F (s) is
viewed as an equivariant G-bundle over G.

Lemma 9.10. The map Rt is a surjective morphism of cochain complexes which
Proof. The fact thatRt descends to a degreewise isomorphism follows from Corollary

9.6 since the action of G on G is principal, with quotient map t : G → M . The main
issue is the compatibility with the diﬀerentials. For that we use the Koszul formula
for the diﬀerential dA (and the analogous formula for ds):

Ω•
c (F (s), t∗E ⊗ s∗DA)G−coinv

∼−→ Ω•

c (A, E).

dAω(α1, . . . , αk+1) =Xi
(−1)i+1∇αi (ω(α1, . . . , bαi, . . . , αk+1))+
+Xi<j
(−1)i+jω([αi, αj], . . . , bαi, . . . ,cαj, . . . , αk+1),

ω = Rt ω ∈ Ω•

where ∇ stands for the action of A on E. For ω ∈ Ω•
C∞
c (G, t∗E ⊗ DF (t)) and

c (F (s), t∗E ⊗ s∗DA), denote
c (A, E). Explicitly, for α1, . . . , αk ∈ C∞(M, A), ω(−→α1, . . . ,−→αk) ∈
ω(α1, . . . , αk) =Zt

ω(−→α1, . . . ,−→αk) ∈ C∞(M, E).

40

MARIUS CRAINIC AND JO ˜AO NUNO MESTRE

We have to show that dsω = dAω. Writing this out using the previous formulas,
and using that [−→α ,−→β ] = −−−→[α, β], we see that the identities we have to check will

follow provided we prove the commutativity of the following diagram:

C∞
c (G, t∗E ⊗ DF (t))

∇−→

α /

C∞
c (G, t∗E ⊗ DF (t))

Rt

Rt

C∞

c (M, E)

∇α

/ C∞

c (M, E)

c (M,DF (t)) (which are mapped byRt to e·Rt ρ) we see that one may assume

Writing the elements in the right upper corner as t∗e ⊗ ρ with e ∈ C∞(M, E),
ρ ∈ C∞
that E is the trivial representation. In this case the bottom ∇α becomes the Lie
derivative along ♯α, the image of α by the anchor map of A. For the upper horizontal
arrow, ∇−→α , recall that it is the canonical F (s)-connection on s∗A = F (t), hence
it is uniquely determined by the Leibniz identity and the fact that sections of type
s∗β ∼= ←−β are ﬂat (where ←−β is the left-invariant vector ﬁeld induced by β). On the
other hand, since [−→α ,←−β ] = 0 holds in general, we see that the usual Lie derivative
L−→α (deﬁned as variations along the ﬂow φǫ
−→α ) has exactly the same properties; hence
∇−→α = L−→α . Therefore, denoting −→α = ˜V , ♯α = V , the new diagram becomes

C∞
c (M,DF (t))

L ˜V /

C∞
c (M,DF (t))

.

Rt

C∞

c (M )

Rt

/ C∞

c (M )

LV

This diagram is commutative for any submersion t : G → M between two manifolds
and any vector ﬁeld ˜V on G that is t-projectable to V . To see this, we interpret it
as the inﬁnitesimal counterpart of the diagram involving the ﬂows:

C∞
c (M,DF (t))

Rt

C∞

c (M )

φǫ
˜V

φǫ
V

C∞
c (M,DF (t))

.

Rt

/ C∞

c (M )

The commutativity of the last diagram follows immediately from the fact that the
ﬂow of ˜V covers the ﬂow of V and from the invariance of integration of densities. (cid:3)

9.3. The missing proofs. We now ﬁll in the missing proofs.

Proof. (of Proposition 8.1) We have to show that

Im(dA : Ωr−1

c

(A, oA) → Ωr

c(A, oA)) ⊂ Im(s! − t!).

Let u = dA(v) in the left hand side; to show that it is on the right hand side, we
will use the following diagram

C∞

c (M, D)

s!

C∞

c (G, D2) = Ωr

c(F(s), oF (s) ⊗ s∗D)

ds

Ωr−1

c

(F(s), oF (s) ⊗ s∗D)

t!

Ωr

c(A, oA)

dA

t!

Ωr−1

c

(A, oA)

/




/
/




/
/
/




/


o
o


o
o
o
o
MEASURES ON DIFFERENTIABLE STACKS

41

In this diagram, the ﬁrst horizontal sequence is of the type considered in Lemma
9.9 (hence the composition of the two maps is zero, and the sequence is even exact
if the s-ﬁbers are connected). The vertical maps are the ones of type (9.3) (for
E = oA), they are surjective and the square is commutative by Lemma 9.10. We
can now look at v as an element sitting in the bottom right corner and write it as

Rt ξ for some ξ in the upper right corner. Consider then w = ds(ξ). It follows that

u = t!(w) and s!(w) = 0. Hence u is in the image of s! − t!.
Proof. (of Proposition 8.4) Here we have to prove the reverse inclusion. So, let
u ∈ Im(s! − t!). Since G is s-connected, it is clear that the previous argument can
be reversed to conclude that u ∈ Im(dA), provided we can show that we can write
u = t!w for some w that is killed by s!. For that we work on another diagram:

(cid:3)

c (G,D2)
C∞

δ

C∞
c (M,D)

δ0 !

s!

c (G2,D3)
C∞

δ′

c (G,D2) =
C∞

c (G, t∗DA ⊗ s∗DA)
C∞

t!

where δ = s! − t!, δ′ = δ1 ! − δ2 ! and δi : G2 → G are given by (cf. Subsection 9.1)

δ0(g, h) = h, δ1(g, h) = gh, δ2(g, h) = g.

C∞
c (M,DA)

The commutativity of the diagram follows from the functoriality of the ﬁber
integration and the obvious identities s ◦ δ0 = s ◦ δ1, t ◦ δ0 = s ◦ δ2. Lemma 9.2
applied to E = DA implies that the left vertical sequence is exact. Look now at u
sitting in the lowest left corner; the hypothesis is that u = δ(v) for some v. Write
v = δ0
c (G2,D3) and consider w′ = δ′(ξ), Then u = s!(w′) and
also t!(w′) = 0 since t! ◦ δ′ = 0. Of course, using the inversion ι of the groupoid,
w = ι∗(w′) will have the desired properties.

! (ξ) for some ξ ∈ C∞

(cid:3)

Proof. (of the Van Est isomorphism - Theorem 9.7) For notational simplicity we
assume that E is the trivial representation. As in [7], we use an augmented double
complex argument; it is obtained by extending the last two diagrams:

. . .

δ

C∞

c (G2 , D3)

δ

C∞

c (G, D2)

δ0 !

δ0 !

. . .

δ

C∞

c (G3 , D4)

δ

C∞

c (G2 , D3)

δ

δ

dδ0

dδ0

. . .

. . .

. . .

dδ0

dδ0

. . .

δ

C1,2

δ

C1,1

δ

C∞

c (M, D)

δ0 ! =s!

C∞

c (G, D2) = Ωr

c (F (s), oF(s) ⊗ s∗D)

ds

Ωr−1

c

(F (s), oF(s) ⊗ s∗D)

ds

. . .

t!

Ωr

c (A, oA)

t!

dA

Ωr−1

c

(A, oA)

dA

. . .





o
o


o
o










o
o
o
o


o
o




o
o
o
o


o
o


o
o


o
o
o
o
o
o
o
o
42

MARIUS CRAINIC AND JO ˜AO NUNO MESTRE

The ﬁrst vertical row and the bottom horizontal one compute the cohomologies
from the statement, and they are the augmentations of the rows/columns of the
actual double complex C•,•. Explicitly, the double complex is deﬁned as:

Ci,k = C∞

c (Gk+1, p∗

0(Λr−iA∗ ⊗ oA) ⊗ p∗

1DA ⊗ . . . ⊗ p∗

k+1DA).

For the diﬀerentials, let us look at the columns and the rows separately. Start with
the ith column, for a ﬁxed i. We will describe it as the complex computing the com-
pactly supported cohomology of a groupoid ˜G with coeﬃcients in a representation
that depends on i. For that, we consider the action of G on itself from the right,
which makes G into a (right) principal G-bundle over M with projection t : G → M ,

G

~⑦⑦⑦⑦⑦⑦⑦

t

&◆◆◆◆◆◆◆◆◆◆◆◆◆

s

G

M

M

Let ˜G be the resulting action groupoid: ˜G = G2 viewed as a groupoid over G with

(g, h)

s=δ1−→ gh,

(g, h)

t=δ2−→ g,

(g, h) · (gh, k) = (g, hk).

The algebroid ˜A of ˜G is ˜A = F (t) ∼= s∗A. The representations of ˜G that are relevant
here are tautological, i.e., pull-backs along the principal bundle projection t; more
precisely, they are:

It is now straightforward to check that, as vector spaces,

Ei = t∗(Λr−iA∗ ⊗ oA).

Ci,k = Ck

c ( ˜G, Ei).

This deﬁnes the augmented ith column which, by Corollary 9.6, is exact.

We now describe the kth row. For that, we ﬁrst remark that δ0 : Gk+1 → Gk is

a left principal G-bundle over M , with the action deﬁned along p0:

G

M

w♦♦♦♦♦♦♦♦♦♦♦♦♦

p0

Gk+1

"❉❉❉❉❉❉❉❉

δ0

Gk

This gives an identiﬁcation of p∗

0(A) with the foliation F (δ0), so that

c

Ci,k = Ωr−i

(F (δ0), oF (δ0)⊗p∗

(F (δ0), oF (δ0)⊗(δ0)∗Dk+1).
We see that we deal with spaces of the type that appear in Lemma 9.9 - and this
interpretation describes the horizontal diﬀerentials dδ0 so that (by the lemma) the
augmented rows have vanishing cohomology in the relevant degrees.

1DA⊗. . .⊗p∗

k+1DA) = Ωr−i

c

Of course, one still has to check the compatibility of the (augmented) horizontal
and the vertical diﬀerentials; in low degree, this is contained in the previous two
proofs; in arbitrary degrees it is tedious but straightforward (and rather standard-
see e.g. [7]); the trickiest part is for the squares in the bottom (involving t!), but
that was dealt with in Lemma 9.10.
(cid:3)

~
&
~
~








!
!
w
"
MEASURES ON DIFFERENTIABLE STACKS

43

10. The modular class(es) revisited

The deﬁnition of the modular class of a Lie algebroid always comes with the
slogan, inspired by various examples, that it is “the obstruction to the existence of
a transverse measure”. Here we would like to point out that the transverse density
bundle Dtr
A and our discussions makes this slogan precise. In particular, we point
out that the canonical representation QA [15] (see also below) that is commonly
used in the context of modular classes should actually be replaced by Dtr
A .
Throughout this section G is a Lie groupoid over M and A is its Lie algebroid.
We will be using the transverse density bundle Dtr
A and orien-
A, viewed as representations of G as explained in Section 4. Let us
tation bundle o
mention, right away, the relation between these bundles. As vector bundles over
M , we already know (see Subsection 2.2) that there are canonical vector bundle
isomorphism between
A and V tr
A and Dtr
A ⊗ o
tr
A and (o

A, volume bundle V tr

tr
A and the trivial line bundle.

A ⊗ o
A ⊗ o
A)∗.
tr

tr
A.
tr
A.

tr

• Dtr
• V tr
• o
• o

tr

Lemma 10.1. All these canonical isomorphisms are isomorphisms of representa-
tions of G (where the trivial line bundle is endowed with the trivial action).
Proof. Given the way that the action of G was deﬁned (Section 4), the direct check
can be rather lengthy and painful. Here is a more conceptual approach. The main
remark is that these actions can be deﬁned in general, whenever we have a functor
F which associates to a vector space V a 1-dimensional vector space F (V ) and to a
(linear) isomorphism f : V → W an isomorphism F (f ) : F (V ) → F (W ) such that:
1. F commutes with the duality functor D, i.e., F ◦D and D◦F are isomorphic
2. for any exact sequence 0 → U → V → W → 0 there is an induced isomor-

through a natural transformation η : F ◦ D → D ◦ F .
phism between F (V ) and F (U ) ⊗ F (W ), natural in the obvious sense.

Let’s call such F ’s “good functors”. The construction from Section 4 shows that
for any good functor F ,

F tr
A := F (A∗) ⊗ F (T M )

′ tr

A and F

is a representation of G. Given two good functors F and F ′, an isomorphism η : F →
F ′ will be called good if it is compatible with the natural transformations from 1.
and 2. above. It is clear that, for any such η, there is an induced map ηtr that is an
isomorphism between F tr
A , as representations of G. It should also be clear
that, for any two good functors F and F ′, so is their tensor product. We see that
we are left with proving that certain isomorphisms involving the functors D, V and
o (e.g. D ∼= V ⊗ o) are good in the previous sense; and that is straightforward. (cid:3)
10.1. The modular class of G. Let us concentrate on the question of whether
G admits a strictly positive transverse density (these are the “measures” from the
slogan at the start of the section, or “geometric measures” in our terminology).
Start with any strictly positive section σ of Dtr
A. Then any other such section is of
type ef σ for some f ∈ C∞(M ); moreover ef σ is invariant if and only if

ef (y)σ(y) = ef (x)g(σ(x))

44

MARIUS CRAINIC AND JO ˜AO NUNO MESTRE

for all g : x → y an arrow of G. Considering

cσ(g) := ln(cid:18) σ(y)

g(σ(x))(cid:19) ,

one has cσ ∈ C∞(G) and one checks right away that it is a 1-cocycle, i.e.,

cσ(gh) = cσ(g) + cσ(h)

for all g and h composable. The condition on f that we were considering reads:

f (x) − f (y) = cσ(g)

for all g : x → y, i.e., cσ = δ(f ) in the diﬀerentiable cohomology complex (C•
Furthermore, an easy check shows that the class [cσ] ∈ H 1
on the choice of σ. Therefore it gives rise to a canonical class

diﬀ(G), δ).
diﬀ(G) does not depend

mod(G) ∈ H 1

diﬀ(G),

called the modular class of the Lie groupoid G. By construction:
Lemma 10.2. G admits a strictly positive transverse density iﬀ mod(G) = 0.

With this, Proposition 5.1 (and its proof) is just about the vanishing of diﬀer-

entiable cohomology of proper groupoids.

The construction of mod(G) can be seen as a very particular case of the cons-
truction from [7] of characteristic classes of representations of G, classes that live
in the odd diﬀerentiable cohomology of G. Here we are interested only in the
1-dimensional representations L, with corresponding class denoted

θG(L) ∈ H 1

diﬀ(G).

For a direct description, similar to that of mod(G), we ﬁrst assume that L is trivi-
alizable as a vector bundle and we choose a nowhere vanishing section σ. Then, for
g : x → y, we can write

and this deﬁnes a function

g · σ(x) = ˜cσ(g)σ(x)

(˜cσ(g) ∈ R∗)

that is a groupoid homomorphism. The cocycle of interest is

˜cσ : G → R∗

cσ = ln(|˜cσ|) : G → R;

(10.1)

(10.2)

its cohomology class does not depend on the choice of σ and deﬁnes θG(L). It is
clear that for two such representations L1 and L2 (trivializable as vector bundles),

(10.3)
This indicates how to proceed for a general L: consider the representation L ⊗ L
which is (noncanonically) trivializable and deﬁne:

θG(L1 ⊗ L2) = θG(L1) + θG(L2).

θG(L) :=

1
2

θG(L ⊗ L).

(10.4)

The multiplicativity formula for θG remains valid for all L1 and L2. By construction:
Lemma 10.3. One has mod(G) = θG(Dtr
A ).

MEASURES ON DIFFERENTIABLE STACKS

45

Remark 10.4 (a warning). It is not true (even if L is trivializable as a vector
bundle!) that θG(L) is the obstruction to L being isomorphic to the trivial repre-
sentation. Lemma 10.2 holds because the transverse density bundle is more than
trivializable: one can also talk about positivity of sections of Dtr
A is trivi-
alizable as an oriented representation of G.

A and Dtr

The tendency in existing literature, at least for the inﬁnitesimal version of the
modular class (see below), is to use simpler representations instead of Dtr
A. Here we
would like to clarify the role of the transverse volume bundle V tr
A : can one use it to
deﬁne mod(G)? On short, the answer is: yes, but one should not do it because it
would give rise to the wrong expectations (because of the previous warning!). We
summarise this into the following:
Proposition 10.5. For any groupoid G, mod(G) = θG(V tr
A ). However, it is not
true that that mod(G) = 0 happens if and only if G admits a transverse volume
form (i.e., a nowhere vanishing G-invariant section of V tr
A ).

Counterexamples for the last part are provided already by manifolds M , viewed
as groupoids with unit arrows only. Indeed, in this case the associated transverse
(density, volume) bundles are the usual bundles of M ; hence the modular class
is zero even if M is not orientable. For the ﬁrst part of the proposition, using
the multiplicativity (10.3) of θG and the canonical isomorphisms discussed at the
beginning of the section, we have to show that

θG(o

tr
A) = 0.

(10.5)

In turn, this follows by applying again the multiplicativity of θG and the canonical
isomorphism between o

tr
A and the trivial representation.

tr

A ⊗ o

10.2. The modular class of A. The construction of the modular class of a Lie
algebroid A, introduced by Evens, Lu and Weinstein [15], is based on the geometry
of a certain 1-dimensional representation QA of the Lie algebroid A: mod(A) is the
characteristic class of QA. Let us ﬁrst recall the construction of the characteristic
class θA(L) ∈ H 1(A) associated to any 1-dimensional representation L of A (the
inﬁnitesimal version of the construction of the classes θG(L) of groupoid representa-
tions). First one uses the analogue of (10.4) to reduce the construction to the case
when L is trivializable as a vector bundle; then, for such L, one chooses a nowhere
vanishing section σ and one writes the inﬁnitesimal action ∇ of A on L as

∇α(σ) = cσ(α) · σ,

therefore deﬁning cσ as an element cσ(L) ∈ Ω1(A). Similar to the previous discus-
sion, the ﬂatness of ∇ implies that cσ(L) is a closed A-form and its cohomology
class does not depend on the choice of σ; therefore it deﬁnes a class, called the
characteristic class of L, and denoted

θA(L) ∈ H 1(A).

Note that the situation is simpler than at the level of G: for L trivializable as a
vector bundle, θA(L) = 0 if and only if L is isomorphic to the trivial representation
of A (compare with the warning from Remark 10.4!).

Inspired by the previous subsection, we deﬁne:

Deﬁnition 10.6. The modular class of a Lie algebroid A, denoted mod(A),
is the characteristic class of Dtr
A.

46

MARIUS CRAINIC AND JO ˜AO NUNO MESTRE

When A is the Lie algebroid of a Lie groupoid G, since Dtr

G, we deduce (cf. Theorem 7 in [7]):
Proposition 10.7. For any Lie groupoid G, the Van Est map in degree 1,

A is a representation of

V E : H 1

diﬀ(G) → H 1(A)

sends mod(G) to mod(A).
groupoid (e.g. by a proper Lie groupoid), then its modular class vanishes.

In particular, if A is integrable by a unimodular Lie

In particular, since the Van Est map in degree 1 is injective if G is s-connected

(see e.g. Theorem 4 in [7]) we deduce:

Corollary 10.8. If G is an s-connected Lie group with Lie algebroid A, then
mod(A) is the obstruction to the existence of a strictly positive transverse density
of G.
10.3. (Not) QA. The modular class of a Lie algebroid A can be deﬁned as the
characteristic class of various 1-dimensional representations of A. We have used
Dtr
A, but the common choice in the literature (starting with [15]) is the line bundle

QA = ΛtopA ⊗ |ΛtopT ∗M|.

The inﬁnitesimal action of A on QA is explained in [15]; equivalently, one writes

A ⊗ oA
in which both terms are representations of A: Dtr
is a representation of A since it is a ﬂat vector bundle over M .

QA = Dtr

A was already discussed, while oA

(10.6)

Lemma 10.9. The representations QA, Dtr
teristic class (namely mod(A)).

A and V tr

A of A have the same charac-

A ⊗ o

A ∼= V tr
Proof. Using Dtr
tr
A, (10.6) and the multiplicativity of θA, it suﬃces to
tr
A) = 0 and similarly for oA. Using again multiplicativity, it suﬃces
show that θA(o
tr
A ⊗ o
to show that θA(o
A is isomorphic to
the trivial representation (Lemma 10.1); and similarly for oA just that, this time,
oA ⊗ oA is isomorphic to the trivial line bundle already as a ﬂat vector bundle. (cid:3)

tr
A) = 0 - which is true because o

A ⊗ o

tr

tr

Despite the previous lemma, because of Proposition 10.5 and the discussion
around it, using V tr
A to deﬁne mod(A), although correct, may give rise to the wrong
expectations. However, using QA to deﬁne mod(A) is even more unfortunate, for
even more fundamental reasons:
in general, QA is not a representation of the
groupoid G! Indeed, using (10.6), the condition that QA can be made into a rep-
resentation of G is equivalent to the same condition for oA. But the orientation
bundles oA are the typical examples of algebroid representations that do not come
from groupoid ones. That is clear already in the case of the pair groupoid of a
manifold M , whose representations are automatically trivial as vector bundles, but
for which oA = oT M is not trivializable if M is not orientable.

Note also that the fact that Dtr

A, unlike QA, is a representation of G, was abso-

lutely essential for obtaining Proposition 10.7 and Corollary 10.8.

MEASURES ON DIFFERENTIABLE STACKS

47

11. Appendix: Haar systems and cut-off functions, revisited

The notion of Haar systems on groupoids, extending the notion of the Haar mea-
sures on Lie groups, is well-known [27]. In some sense, Haar systems are orthogonal
to the transverse measures of this paper. They are used in the paper but are of
independent interest. Therefore, we collect some of the basics on Haar systems in
this Appendix. This will also give us the opportunity of clarifying a few points that
are perhaps not so well-known.
11.1. Haar systems. Throughout this appendix G is a Lie groupoid over a mani-
fold M . To talk about right-invariance, one ﬁrst remarks that the right multiplica-
tion by an arrow g : x → y of G is no longer deﬁned on the entire G (as for groups)
but only between the s-ﬁbers:

Rg : s−1(y) → s−1(x).

(11.1)

Hence, roughly speaking, right-invariance makes sense only for families of objects
that live on the s-ﬁbers of G.
Deﬁnition 11.1. A smooth Haar system on a Lie groupoid G is a family

µ = {µx}x∈M

of non-zero measures µx on s−1(x) which is right-invariant and smooth, i.e.:

1. via any right-translation (11.1) by an element g : x → y, µx is pulled-back

to µy; or, in the integral notation (Remark 2.2),

2. for any f ∈ C∞

c (G), the function obtained by integration over the s-ﬁbers,

f (hg) dµy(h) =Zs−1(x)
Zs−1(y)
M ∋ x 7→ µx(f|s−1(x)) =Zs−1(x)

f (h) dµx(h).

f (h) dµx(h) ∈ R

is smooth.

The Haar system is called full if the support each µx is the entire s−1(x).

In general, the support of Haar system µ is deﬁned as
supp(µ) = ∪x∈M supp(µx) ⊂ G.

Due to the invariance of µ, supp(µ) is right G-invariant, i.e., ag ∈ supp(µ) for all
a ∈ supp(µ) and g ∈ G composable. Therefore supp(µ) is made of t-ﬁbers, hence it
is determined by its t-projection, which is denoted

More precisely, we have:

suppM (µ) := t(supp(µ)).

supp(µ) = t−1(suppM (µ)).

(11.2)

Remark 11.2. In the existing literature one often restricts to what we call here
full Haar systems. However, some important constructions (e.g. already for the
averaging process for proper groupoids) are based on systems that are not full. For
us, the fullness is replaced by the condition that each µx is non-trivial. In turn,
our condition has consequences on the supports, expressed in one of the following
equivalent ways

• s|supp(µ) : supp(µ) → M is surjective.

48

MARIUS CRAINIC AND JO ˜AO NUNO MESTRE

• the G-saturation of suppM (µ) is the entire M .

11.2. Geometric Haar systems (Haar densities). We now pass to Haar sys-
tems that are of geometric type, i.e., for which each µx comes from a density on
s−1(x); this will bring us to sections

ρ ∈ C∞(M,DA)

of the density bundle associated to the Lie algebroid A of G. To see this, recall the
construction of A: it is the vector bundle over M whose ﬁber above a point x ∈ M
is the tangent space at the unit 1x of the s-ﬁber above x :

Ax = T1xs−1(x).

(Globally, A is the restriction to M , via the unit map M ֒→ G, of the bundle
T sG = Ker(ds) of vector tangent to the s-ﬁbers, also denoted by F (s)). With
this, the right translation (11.1) associated to an arrow g : x → y induces, after
diﬀerentiation at the unit at y, an isomorphism:

Rg : Ay → Tg(s−1(x)) = T s

gG.

In this way any section α ∈ Γ(A) gives rise to a vector ﬁeld −→α on G and this
identiﬁes Γ(A) with the space of vector ﬁelds on G that are tangent to the s-ﬁbers
and invariant under right translations; the Lie algebroid bracket [·,·] on Γ(A) is
induced by the usual Lie bracket of vector ﬁelds on G: −−−→[α, β] = [−→α ,−→β ]).
Stated in the spirit of the previous deﬁnition, this reinterprets elements α ∈ Γ(A)
as families of vector ﬁelds on the s-ﬁbers of G, that are right-invariant and smooth.
It is clear that the same reasoning applies to sections ρ ∈ Γ(DA) = C∞(M,DA),
so that such sections can be interpreted as families of densities on the s-ﬁbers of
G, that are right-invariant and smooth. Explicitly, right translating ρ we obtain a
(right-invariant) density on the vector bundle F (s),
−→ρ ∈ C∞(G,DF (s)),

hence a family of densities

ρx := −→ρ |s−1(x) ∈ D(s−1(x))

(x ∈ M ).

(11.3)

Note that, for the usual notion of support of sections of vector bundles, we have
the analogue of (11.2):

supp(−→ρ ) = t−1(supp(ρ)).

Of course, the two are related.
Deﬁnition 11.3. A Haar density for G is any positive density ρ ∈ C∞(M,DA)
of the Lie algebroid A of G with the property that the G-saturation of its support
is the entire M . It is called a full Haar density if it is strictly positive.

The previous discussion shows that these correspond to (full) Haar systems of
geometric type, i.e., for which each of the measures is induced by a density. For ρ
such a Haar density, we will denote by

µρ = {µρx}x∈M
the corresponding Haar system (given by (11.3)).

MEASURES ON DIFFERENTIABLE STACKS

49

Remark 11.4. Sections ρ ∈ C∞(M,DA) can be multiplied by smooth functions
f ∈ C∞(M ). At the level of measures we ﬁnd

µf ρ(g) = f (t(g))µρ(g).

Hence we are led to the operation of multiplying a Haar system µ by a positive
function f ∈ C∞(M ) which, on G, corresponds to the standard multiplication by
t∗(f ). Note that

suppM (f · µ) ⊂ supp(f )

hence, even if µ is full, for f · µ to be a Haar system one still has to require that
the G-saturation of the support of f is M .
11.3. Proper Haar systems; proper groupoids. One of the standard uses of
the Haar measure of compact Lie groups is to produce G-invariant objects out of
arbitrary ones, by averaging. On the other hand it is well-known that the correct
generalization of compactness when going from Lie groups to groupoids is proper-
ness. Recall here that a Lie groupoid G over M is called proper if the map

(s, t) : G → M × M

is proper i.e., for every K, L ⊂ M compacts, the subspace G(K, L) ⊂ G of arrows
that start in K and end in L is compact. The point is that averaging arguments
do work well for proper groupoids. However, there is a small subtlety due to the
fact that we would have to integrate over the s-ﬁbers which may fail to be compact
even if G is proper. For that reason, we need Haar systems µ = {µx} in which each
µx is compactly supported (see Lemma 2.5).
Deﬁnition 11.5. A Haar system on a Lie groupoid G is said to be proper if

s|supp(µ) : supp(µ) → M

is proper. A Haar density ρ is said to be proper if µρ is proper, i.e., if the restriction
of s to t−1(supp(ρ)) is proper.

In this case one can talk about the volume of the s-ﬁbers,

Vol(s−1(x), µx) =Zs−1(x)

dµx

and this deﬁnes a smooth function on M which is strictly positive; hence, rescaling
µ by it (in the sense of the previous remark), we obtain a new proper Haar system
satisfying the extra condition

Such proper Haar systems are called normalized. Similarly for Haar densities.

Vol(s−1(x), µx) = 1.

Note that full Haar systems cannot be proper even for proper non-compact
groupoids. Also, while full Haar systems exist on all Lie groupoids, proper ones do
not. Actually, we have:
Proposition 11.6. For a Lie groupoid G, the following are equivalent:

1. G is proper.
2. G admits a proper Haar system.
3. G admits a proper Haar density.

In particular, if ρ ∈ C∞(M,DA) is a full Haar density then there exists a function
c ∈ C∞(M ) such that c · ρ is a proper Haar density which, moreover, may be
arranged to be normalized. Such c is called a cut-oﬀ function for ρ (cf. [30]).

50

MARIUS CRAINIC AND JO ˜AO NUNO MESTRE

Proof. The fact that G is proper if a proper Haar system µ exists will follow from
the properties of supp(µ) (right G-invariance plus the fact that the restriction of s
to supp(µ) is proper and surjective) or, equivalently, those of T := suppM (µ):

• the G-saturation of T is the entire M
• G(K, T ) (arrows that start in K and end in T ) is compact if K is.

Indeed, the ﬁrst property implies that for any K, L ⊂ M one has

G(K, L) ⊂ G(K, T )−1 · G(L, T )

(for g in the left hand side, choose any a from t(g) to an element in T and write
g = a−1 · (ag)); therefore, if if K and L are compacts, then so will be G(K, L) (as
closed inside a compact).
Recall that a full Haar density ρ always exists and if we multiply it by a pos-
itive function c then the M -support of the resulting Haar system coincides with
supp(cρ) = supp(c). Therefore, to close the proof, it suﬃces to show that if G is
proper then one ﬁnds a smooth function c such that its support T := supp(c) has
the properties mentioned above. We ﬁrst construct T . Recall that a slice through
x ∈ M is any T ⊂ M that intersects transversally all the orbits that it meets,
intersects the orbit through x only at x and its dimension equals the codimension
of that orbit. We construct T as a union of such slices (enough, but not too many).
For that we need the basic properties of slices for proper groupoids (cf. e.g. [11]):
through each point of M one can ﬁnd a slice and, for any slice Σ, its saturation
GΣ is open in M (in particular, π(Σ) is open in M/G). Since M/G is paracompact,
we ﬁnd a family {Σ
i) deﬁnes a
locally ﬁnite cover of M/G. As usual, we reﬁne this cover to a new cover {Vi}i∈I
with V i ⊂ V

i}i∈I of locally compact slices such that V

i and write Vi = π(Σi) with Σi = π−1(Vi) ∩ Σ
i)
i = π(Σ

i. Note that

:= π(Σ

′
i

′

′

′

′

π(Σi) ⊂ π(Σi) = V i ⊂ V

′

′

hence Σi is contained in the saturation of Σ

i!).
We claim that T := ∪iΣi will have the desired properties; the saturation prop-
erty is clear (even before taking closures) since the Vi’s cover M/G. Next, the
compactness of G(K, T ) when K is compact: if B(K, Σi) is non-empty, then π(K)
must intersect π(Σi) hence also V
i ; but, since π(K) is compact, it can intersects
only a ﬁnite number of V

i (but may fail to be contained in Σ

i ; therefore we ﬁnd indices i1, . . . , ik such that

′

′

B(K, T ) = B(K, Σi1 ) ∪ . . . ∪ B(K, Σi1 ),

hence B(K, T ) is compact. Note that the proof shows a bit more: instead of Σi we
can use any Ci relatively compact, with

′

′

Σi ⊂ Ci ⊂ Ci ⊂ GΣ

′

i,

and then T = ∪iCi still has the desired properties. This is important for con-
structing c since not every closed subspace can be realized as the support of a
smooth function. Since each Σi is compact and sits inside the open GΣ
i, we ﬁnd
ci : M → [0, 1] smooth, supported in GΣ
i with ci > 0 on Σi. Hence, in the previous
construction we can set Ci = {ci > 0} to deﬁne T . By construction, π(supp(ci))
sits inside V
function. Moreover, {c 6= 0} = ∪i{ci 6= 0} is a locally ﬁnite union, hence

i , hence {ci}i∈I is locally ﬁnite and c =Pi ci makes sense as a smooth

′

′

′

supp(c) = ∪isupp(ci) = T.

(cid:3)

MEASURES ON DIFFERENTIABLE STACKS

51

Let us also illustrate the averaging technique with one simple example.

Lemma 11.7. If G is a proper Lie groupoid over M and A, B ⊂ M are two closed
disjoint subsets that are saturated, then there exists a smooth function f : M → [0, 1]
that G-invariant (i.e., constant on the orbits of G) such that f|A = 0, f|B = 1.

Without the invariance condition, this is a basic property of smooth functions
on manifolds. The idea is that, choosing any f as above but possibly non-invariant,
one replaces it by its average with respect to a proper normalized Haar system µ:

Avµ(f )(x) =Zs−1(x)

f (t(g)) dµx(g).

While it is clear that Av(f ) vanishes on A, the normalization implies that it is 1 on
B. Also the invariance is immediate: if x and y are in the same orbit, i.e., if there
exists an arrow a : x → y then, using the invariance of µ and t(ga) = t(g), we ﬁnd

Avµ(f )(x) =Zs−1(x)

f (t(g)) dµx(g) =Zs−1(y)

f (t(ga)) dµy(g) = Avµ(f )(y).

By similar techniques one proves the existence of invariant metrics on G-vector
bundles, or of other geometric structures.

11.4. Induced measures/densities on the orbits. The slogan that Haar sys-
tems and densities are related to measure theory along the orbits can be made very
precise in the case of proper groupoids:
in that case they induce (in a canonical
fashion) measures/densities on the orbits (and conversely!). To explain this, let G
be a proper groupoid over M and let µ = {µx} be a Haar system for G. Above
each x ∈ M one has the isotropy Lie group Gx consisting of arrows that start and
end at x and the s-ﬁber above x ∈ M is a principal Gx-bundle over the orbit Ox of
G through x, with projection map

(11.4)
The invariance of the family {µx} implies that each µx is an invariant measure on
this bundle hence, since Gx is compact, µx corresponds to a measure on Ox (cf.
Example 2.11), namely µOx = t!(µx) or, in the integral formulation,

t : s−1(x) → Ox.

ZOx

f (y) dµOx(y) =Zs−1(x)

f (t(g)) dµx(g).

Using again the invariance of µ, we see that each such µOx depends only on the orbit
itself and not on the point x in the orbit. Therefore any Haar system µ determines
(and is determined by) a family of measures on the orbits of G,

{µO}O−orbit of G.

(11.5)
Of course, this is compatible with “geometricity”, so that any Haar density ρ ∈
C∞(M,DA) determines (and is determined by) a family of densities on the orbits
of G,
(11.6)

{ρO ∈ D(O)}O−orbit of G.

in such a way that (µρ)O = µρO . Explicitly, given ρ, the density ρO on the orbit

through x is t!(ρx), where ρx = −→ρ |s−1(x) is the induced density on the s-ﬁber - see

(11.3). Also, the discussion from Example 2.11 tells us how to recover ρ from this

52

MARIUS CRAINIC AND JO ˜AO NUNO MESTRE

family (and similarly for µ): consider gx = the isotropy Lie algebra at x (the Lie
algebra of Gx), with corresponding Haar density denoted by µHaar and then

ρ(x) ∈ DAx ∼= Dgx ⊗ D(TxO) equals to µHaar ⊗ ρO(x).

(11.7)

Remark 11.8. Therefore, for proper groupoids, a Haar system µ (Haar density
ρ) is the same thing as a family of measures (densities) on the orbits, satisfying
a certain smoothness condition that ensures that the reconstructed µ is smooth.
Working this out we ﬁnd the condition that for any f ∈ C∞

c (G), the function

M ∋ x 7→ZOxZGx,y

f (g) dµHaar

x,y (g)dµρOx (y) ∈ R

is smooth. Here Gx,y is the space of arrows from x to y; they are ﬁbers of (11.4),
hence they come with a canonical Haar density (cf. Example 2.11) obtained by
transporting the Haar density on Gx and dµHaar
stands for the resulting integration.
Corollary 11.9. If G is proper, there is a 1-1 correspondence between:

x,y

1. Haar densities ρ of G.
2. families (11.6) of non-trivial densities on the orbits of G, smooth in the

previous sense.

Similarly for Haar systems.

The situation is even nicer in the regular case. For densities, we make use of the
foliation on M by the (connected components of the) orbits of G, identiﬁed with
the vector bundle F ⊂ T M of vectors tangent to the orbits.
Corollary 11.10. If G is proper and regular, there is a 1-1 correspondence between

1. Haar densities ρ of G,
2. positive densities of the bundle F , ρF ∈ C∞(M,DF ), with the property that

the support of ρF meets each orbit of G.

Moreover, ρ is full if and only if ρF is strictly positive, and ρ is proper if and only
if the intersection of the support of ρF with each leaf is compact.

For Haar systems we obtain:

Corollary 11.11. If G is proper and regular, there is a 1-1 correspondence between:

1. Haar systems µ of G.
2. families of non-trivial measures µO on the orbits of G which are smooth in

the sense that, for any f ∈ C∞

c (M ), the function

x 7→ZOx

f (y) dµOx(y)

is smooth.

The last two corollaries imply that, for proper regular Lie groupoids with con-
nected s-ﬁbers, having a Haar system/density for G is equivalent to having one for
F , where the notion of Haar measure/density for a foliation F is the one described
by points 2. of the previous corollaries.

MEASURES ON DIFFERENTIABLE STACKS

53

References

[1] K. Behrend, P. Xu, Diﬀerentiable stacks and gerbes. J. Symplectic Geom. 9, 285–341, 2011.
[2] N. Berline, E. Getzler, M. Vergne, Heat kernels and Dirac operators. Corrected reprint of the

1992 original. Grundlehren Text Editions. Springer-Verlag, Berlin, 2004.

[3] J.-L. Brylinski, V. Nistor, Cyclic cohomology of ´etale groupoids. K-Theory 8, 341–365, 1994.
[4] A. Connes, Sur la th´eorie non commutative de l’int´egration. (Alg`ebres d’op´erateurs (S´em.,
Les Plans-sur-Bex, 1978), pp. 19–143, Lecture Notes in Math., 725, Springer, Berlin, 1979.

[5] A. Connes, Noncommutative geometry. Academic Press, Inc., San Diego, CA, 1994.
[6] A. Coste, P. Dazord, A. Weinstein, Groupo¨ıdes symplectiques, Publ. Dept. Math. Univ.

Claude-Bernard Lyon I, 1987.

[7] M. Crainic, Diﬀerentiable and algebroid cohomology, van Est isomorphisms, and character-

istic classes. Comment. Math. Helv. 78, 681–721, 2003.

[8] M. Crainic, R. L. Fernandes, D. M. Torres, Poisson Manifolds of Compact Types (PMCT 1).

Preprint arXiv:1510.07108.

[9] M. Crainic, R. L. Fernandes, D. M. Torres, Regular Poisson manifolds of compact types

(PMCT 2). Preprint arXiv:1603.00064 .

[10] M. Crainic, R. L. Fernandes, D. M. Torres, PMCT3. In progress.
[11] M. Crainic, I. Struchiner, On the linearization theorem for proper Lie groupoids. Ann. Sci.

´Ec. Norm. Sup´er. (4) 46, 723–746, 2013.

[12] A. Deitmar, S. Echterhoﬀ, Principles of Harmonic analysis. Universitext, Springer, 2008.
[13] G. de Rham, Vari´et´es diﬀ´erentiables. Formes, courants, formes harmoniques. 3`eme ´edition
revue et augment´ee. Publications de l’Institut de Math´ematique de l’Universit´e de Nancago,
III. Actualit´es Scientiﬁques et Industrielles, No. 1222b. Hermann, Paris, 1973.

[14] J.J. Duistermaat, J. Kolk, Lie Groups. Universitext, Springer-Verlag Berlin, 2000.
[15] S. Evens, J.-H. Lu, A. Weinstein, Transverse measures, the modular class and a cohomology

pairing for Lie algebroids. Quart. J. Math. Oxford Ser. (2) 50, 417–436, 1999.

[16] A. Haeﬂiger, Homotopy and integrability. Manifolds–Amsterdam 1970 pp. 133–163. Lecture

Notes in Mathematics, Vol. 197 Springer, Berlin, 1971.

[17] A. Haeﬂiger, Some remarks on foliations with minimal leaves. J. Diﬀerential Geom. 15 (1980),

269–284, 1981.

[18] A. Haeﬂiger, Groupo¨ıdes d’holonomie et classiﬁants. Transversal structure of foliations

(Toulouse, 1982). Ast´erisque No. 116, 70–97, 1984.

[19] P. Hahn, Haar measure for measure groupoids. Trans. Amer. Math. Soc. 242, 1–33, 1978.
[20] J. Heinloth, Notes on diﬀerentiable stacks. Mathematisches Institut, Georg-August-
Universit¨at G¨ottingen: Seminars Winter Term 2004/2005, 1–32, Universit¨atsdrucke G¨ottin-
gen, G¨ottingen, 2005.

[21] D. Husemoller, Fibre bundles. Third edition. Graduate Texts in Mathematics, 20. Springer-

Verlag, New York, 1994.

[22] J. N. Mestre, Diﬀerentiable stacks: stratiﬁcations, measures and deformations. Ph.D. thesis,

Utrecht University, 2016.

[23] D. S. Metzler, Topological and smooth stacks. Preprint arXiv:math/0306176.
[24] I. Moerdijk, Lie groupoids, gerbes, and non-abelian cohomology, K-Theory 28, 207–258,

2003.

[25] M. J. Pﬂaum, H. Posthuma, X. Tang, The localized longitudinal index theorem for Lie

groupoids and the van Est map. Adv. Math. 270, 223–262, 2015.

[26] J. F. Plante, Foliations with measure preserving holonomy. Ann. of Math. 102, 327–361,

1975.

[27] J. Renault, A groupoid approach to C ∗-algebras. LNM 793. Springer, Berlin, 1980.
[28] W. Rudin, Real and complex analysis. McGraw-Hill Book Co., New York, 1987.
[29] D. Ruelle, D. Sullivan, Currents, ﬂows and diﬀeomorphisms. Topology 14, 319–327, 1975.
[30] J. L. Tu, La conjecture de Novikov pour les feuilletages hyperboliques. K-Theory 16, 129–184,

1999.

[31] C. A. Weibel, An introduction to homological algebra. Cambridge Studies in Advanced Math-

ematics, 38. Cambridge University Press, Cambridge, 1994.

[32] A. Weinstein, Symplectic groupoids and Poisson manifolds. Bull. Amer. Math. Soc. (N.S.)

16, 101–104, 1987.

[33] A. Weinstein, The volume of a diﬀerentiable stack. Lett. Math. Phys. 90, 353–371, 2009.

54

MARIUS CRAINIC AND JO ˜AO NUNO MESTRE

Depart. of Math., Utrecht University, 3508 TA Utrecht, The Netherlands
E-mail address: crainic@math.uu.nl

Depart. of Math., Utrecht University, 3508 TA Utrecht, The Netherlands
E-mail address: j.n.mestre@uu.nl

