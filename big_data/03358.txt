6
1
0
2

 
r
a

 

M
0
1

 
 
]

.

O
L
h
t
a
m

[
 
 

1
v
8
5
3
3
0

.

3
0
6
1
:
v
i
X
r
a

Ordinal analysis of Intuitionistic Power and Exponentiation Kripke

Platek Set Theory∗

Jacob Cook and Michael Rathjen

Department of Pure Mathematics, University of Leeds

Leeds LS2 9JT, United Kingdom

mmjcoo@leeds.ac.uk

rathjen@maths.leeds.ac.uk

March 11, 2016

Abstract

Until the 1970s, proof theoretic investigations were mainly concerned with theories of induc-
tive deﬁnitions, subsystems of analysis and ﬁnite type systems. With the pioneering work of
Gerhard J¨ager in the late 1970s and early 1980s, the focus switched to set theories, furnishing
ordinal-theoretic proof theory with a uniform and elegant framework. More recently it was
shown that these tools can even sometimes be adapted to the context of strong axioms such as
the powerset axiom, where one does not attain complete cut elimination but can nevertheless
extract witnessing information and characterize the strength of the theory in terms of provable
heights of the cumulative hierarchy. Here this technology is applied to intuitionistic Kripke-
Platek set theories IKP(P) and IKP(E), where the operation of powerset and exponentiation,
respectively, is allowed as a primitive in the separation and collection schemata. In particular,
IKP(P) proves the powerset axiom whereas IKP(E) proves the exponentiation axiom. The
latter expresses that given any sets A and B, the collection of all functions from A to B is a
set, too. While IKP(P) can be dealt with in a similar vein as its classical cousin, the treatment
of IKP(E) posed considerable obstacles. One of them was that in the inﬁnitary system the
levels of terms become a moving target as they cannot be assigned a ﬁxed level in the formal
cumulative hierarchy solely based on their syntactic structure.

As adumbrated in an earlier paper, the results of this paper are an important tool in showing
that several intuitionistic set theories with the collection axiom possess the existence property,
i.e., if they prove an existential theorem then a witness can be provably described in the theory,
one example being intuitionistic Zermelo-Fraenkel set theory with bounded separation.

1

Introduction

In his early work, Gerhard J¨ager laid the foundations for a direct proof-theoretic treatment of set
theories (cf.
[11, 12]) which then began to a large extent to supplant earlier work on theories of
inductive deﬁnitions and subsystems of analysis. By and large, ordinal analyses for set theories
are more uniform and transparent than for the latter theories. The primordial example of a set
theory amenable to ordinal analysis is Kripke-Platek set theory, KP. It is an important theory
for various reasons, one being that a great deal of set theory requires only the axioms of KP.

∗Dedicated to Gerhard J¨ager on the occasion of his 60th birthday.

1

Another reason is that admissible sets, the transitive models of KP, have been a major source of
interaction between model theory of inﬁnitary languages, recursion theory and set theory (cf. [4]).
KP arises from ZF by completely omitting the power set axiom and restricting separation and
collection to bounded formulae. Many of the familiar subsystems of second order arithmetic can
be viewed as reduced versions of set theories based on the notion of admissible set. This applies for
example to a fairly strong theory like ∆1
2-CA plus bar induction which is of the same strength as
KP augmented by an axiom saying that every set is contained in an admissible set, whose ordinal
analysis is due to J¨ager and Pohlers [15]. By restricting or completely omitting induction principles
in theories of admissible sets, J¨ager was also able to give a uniﬁed proof-theoretic treatment of
many predicative theories in [14]. Systematic accounts and surveys of admissible proof theory can
be found in [13, 14, 7, 16, 20] and other places.

2 comprehension or iterations thereof (cf.

Ordinal analyses of ever stronger theories have been obtained over the last 20 years. The
strongest systems for which proof-theoretic ordinals have been determined are extensions of KP
augmented by Σ1-separation that correspond to subsystems of second-order arithmetic with com-
prehension restricted to Π1
[3, 19, 23]). Thus it appears
that it is currently impossible to furnish an ordinal analysis of any set theory which has the power
set axiom among its axioms as such a theory would dwarf the strength of second-order arithmetic.
It is, however, possible to relativize the techniques of ordinal analysis developed for Kripke-Platek
set theory to obtain useful information about Power Kripke-Platek set theory as shown in [27]. The
kind of information one can extract concerns bounds for the transﬁnite iterations of the power set
operation that are provable in the latter theory. In this paper the method is applied to intuitionis-
tic Kripke-Platek set theories IKP(P) and IKP(E), where the operation of powerset, respectively,
exponentiation, is allowed as a primitive in the separation and collection schemata. In particular,
IKP(P) proves the powerset axiom whereas IKP(E) proves the exponentiation axiom. The latter
expresses that given any sets A and B, the collection of all functions from A to B is a set, too.
While IKP(P) can be dealt with in a similar vein as its classical cousin in [27], the treatment of
IKP(E) posed considerable obstacles, one of them being that in the inﬁnitary system terms cannot
be assigned a ﬁxed level in the formal cumulative hierarchy.

It was outlined in [25] that the results of this paper are an important tool for showing that
several intuitionistic set theories with the collection axiom possess the existence property, i.e., if
they prove an existential theorem then a witness can be provably described in the theory. One
example for such a theory is intuitionistic Zermelo-Fraenkel set theory with bounded separation.
Details will be presented in [28].

1.1

Intuitionistic set theories and the existence property

Intuitionistic theories are known to often possess very pleasing metamathematical properties such
as the disjunction property and the numerical existence property. While it is fairly easy to establish
these properties for arithmetical theories and theories with quantiﬁcation over sets of natural num-
bers or Baire space (e.g. second order arithmetic and function arithmetic), set theories with their
transﬁnite hierarchies of sets of sets and the extensionality axiom can pose considerable technical
challenges.

Deﬁnition 1.1. Let T be a theory whose language, L(T ), encompasses the language of set theory.
T has the existence property, EP, if whenever T ⊢ ∃xA(x) holds for a formula A(x) having at most

2

the free variable x, then there is a formula C(x) with exactly x free, so that

T ⊢ ∃!x [C(x) ∧ A(x)].

A theory that does not have the existence property is intuitionistic Zermelo-Fraenkel set theory,
IZF, formulated with Collection, as was shown in [10]. Since the version of IZF with replacement
in lieu of collection has the existence property, collection is clearly implicated in the failure of EP.
This prompted Beeson in [5, IX.1] to ask the following question:

Does any reasonable set theory with collection have the existence property?

An important theory that is closely related to Martin-L¨of type theory is Constructive Zermelo-
Fraenkel set theory, CZF (cf.
[1, 2]). It has been shown in [30] that CZF lacks the EP. While
the proof is quite diﬃcult, the failure of EP is perhaps not that surprising since CZF features
an axiom, Subset Collection, that is a consequence of exponentiation and a choice principle called
the presentation axiom.1 However, in [25] it was shown that three perhaps more natural versions
of CZF possess the weak existence property, which requires a provably deﬁnable inhabited set of
witnesses for every existential theorem. Tellingly, neither IZF nor CZF has the weak existence
property (see [30] and [25, Proposition 1.3]). The three versions of CZF shown to have the weak
existence property are CZF without subset collection (CZF−), CZF with exponentiation instead of
subset collection (CZFE ), and CZF augmented by the powerset axiom (CZFP ). [25] also provided
reductions of these three theories to pertaining versions of intuitionistic Kripke-Platek set theories
in such a way that if the latter theories possessed the existence property for pertaining syntactically
restricted classes of existential theorems, then the former would possess the full EP. This gave rise
to the strategy of ﬁrst embedding these extended theories of intuitionistic Kripke-Platek set theory
into inﬁnitary proof systems and use techniques of ordinal analysis to remove those inferences which
embody collection. The second step, then, consists in showing that the inﬁnitary systems have the
term existence property, i.e., for each provable existential theorem there is a witnessing term. It
will then ensue from the fact that the numerical existence property holds for CZF−, CZFE , and
CZFP that the existence property holds for these theories, too. The numerical existence property
was veriﬁed in [22] and also holds for CZF, even when augmented by various choice principles [24]

1.2

Intuitionistic power and exponentiation Kripke-Platek set theories

We call a formula bounded or ∆0 if all its quantiﬁers are of the form ∀x ∈ a and ∃y ∈ b. The axioms
of classical KP consist of Extensionality, Pair, Union, Inﬁnity, Bounded Separation

for all bounded formulae A(u), Bounded Collection

∃x ∀u [u ∈ x ↔ (u ∈ a ∧ A(u))]

∀x ∈ a ∃y B(x, y) → ∃z ∀x ∈ a ∃y ∈ z B(x, y)

for all bounded formulae B(x, y), and Set Induction

1Although sometimes even set theories with strong choice principles can have the EP (see [21]).

∀x [(∀y ∈ x C(y)) → C(x)] → ∀x C(x)

3

for all formulae C(x).

We denote by IKP the version of KP where the underlying logic is intuitionistic logic.
We use subset bounded quantiﬁers ∃x ⊆ y . . . and ∀x ⊆ y . . . as abbreviations for ∃x(x ⊆

y ∧ . . .) and ∀x(x ⊆ y → . . .), respectively.

We call a formula of L∈ ∆P

0 if all its quantiﬁers are of the form Q x ⊆ y or Q x∈y where Q is ∀

or ∃ and x and y are distinct variables.

Let Fun(f, x, y) be a acronym for the bounded formula expressing that f is a function with
domain x and co-domain y. We use exponentiation bounded quantiﬁers ∃f ∈ xy . . . and ∀f ∈ xy . . .
as abbreviations for ∃f (Fun(f, x, y) ∧ . . .) and ∀x(Fun(f, x, y) → . . .), respectively.

Deﬁnition 1.2. The ∆P
closed under ∧, ∨, →, ¬ and the quantiﬁers

0 -formulae are the smallest class of formulae containing the atomic formulae

∀x ∈ a, ∃x ∈ a, ∀x ⊆ a, ∃x ⊆ a.

The ∆E
∧, ∨, →, ¬ and the quantiﬁers

0 -formulae are the smallest class of formulae containing the atomic formulae closed under

∀x ∈ a, ∃x ∈ a, ∀f ∈ ab, ∃f ∈ ab.

Deﬁnition 1.3. IKP(E) has the same language and logic as IKP. Its axioms are the following:
Extensionality, Pairing, Union, Inﬁnity, Exponentiation, Set Induction, ∆E
0 -Separation and ∆E
0 -
Collection.

IKP(P) has the same language and logic as IKP. Its axioms are the following: Extensionality,

Pairing, Union, Inﬁnity, Powerset, Set Induction, ∆P

0 -Separation and ∆P

0 -Collection.

The transitive classical models of IKP(P) have been termed power admissible sets in [9]. There
is also a close connection between IKP(P) and versions of Martin-L¨of type theory with an impred-
icative type of propositions and the calculus of constructions (see [26]).

Remark 1.4. Alternatively, IKP(P) can be obtained from IKP by adding a function symbol P
for the powerset function as a primitive symbols to the language and the axiom

∀y [y ∈ P(x) ↔ y ⊆ x]

and extending the schemes of ∆0-Separation and Collection to the ∆0-formulae of this new language.
Likewise, IKP(E) can be obtained from IKP by adding a primitive function symbol E for the

exponentiation and the pertaining axioms.

Deﬁnition 1.5. The class of Σ-formulae in the strict sense, denoted by strict-Σ, is the smallest
class of formulae containing the ∆0-formulae closed under ∧, ∨ and the quantiﬁers

∀x ∈ a, ∃x ∈ a, ∃x.

The strict-ΣP -formulae are the smallest class of formulae containing the ∆P
∧, ∨ and the quantiﬁers

0 -formulae closed under

∀x ∈ a, ∃x ∈ a, ∀x ⊆ a, ∃x ⊆ a, ∃x.

The strict-ΣE -formulae are the smallest class of formulae containing the ∆E
∧, ∨ and the quantiﬁers

0 -formulae closed under

∀x ∈ a, ∃x ∈ a, ∀f ∈ ab, ∃f ∈ ab, ∃x.

4

Later on we shall have occasion to introduce the wider class of Σ-formulae. A crucial property
that singles out the strict-Σ-formulae is that every such formula is equivalent to a Σ1-formula
provably in IKP, where a Σ1-formula is a formula that starts with a single existential quantiﬁer
and thereafter continues with a ∆0-formula. A similar characterization holds for the strict-ΣP and
strict-ΣE -formulae. It is standard to show that IKP(P) proves strict-ΣP-Collection and IKP(E)
proves strict-ΣE -Collection (for details in the case of IKP see [1, 2]).

1.3 Outline of the paper

The main objective of the paper is an in-depth presentation of the ordinal analyses of the three
theories IKP, IKP(P), and IKP(E).
In the case of IKP this means characterising the proof
theoretic ordinal in the sense of [20], this is done in such a way that we can also extract witness
terms from cut-free derivations of existential statements in the inﬁnitary system. In the cases of
IKP(P) and IKP(E) we present a type of relativised ordinal analysis similar to that given in
[27], we characterise the number of iterations of the relevant hierarchy of sets (Von Neumann and
Exponentiation respectively) that can be proven to exist within the theory. These details cannot be
found in the existing research literature. They are needed for term extraction and, moreover, have
to be shown to be formalizable in CZF−, i.e., constructive Zermelo-Fraenkel set theory without
subset collection. Naturally, the ﬁrst system to be analyzed is the simplest. Section 2 treats IKP,
so is basically a detailed rendering of the intuitionistic version of the classical analysis of KP.
However, this section is also used later since several parts of it are modular and thus transfer to the
stronger systems without any changes. Section 3 deals with IKP(P) and adapts the machinery of
classical [27] to the intuitionistic case. The system IKP(E) is the most diﬃcult to handle and is
addressed in Section 4. A particular challenge is provided by the problem of assigning a rank to
the formal terms of the inﬁnitary system. Ultimately this turned out to be impossible and we had
to deal with it in a new way by allowing for rank declarations as extra hypothesis.

A further reason to document these ordinal analyses in the literature is that the second author
fosters hopes that this framework can be used to analyze much stronger theories such as ones
with full negative separation. It appears that in striking diﬀerence to classical theories, negative
separation does not block the the methods of ordinal analysis that bring about the elimination of
collection inferences in intuitionistic derivations.

Acknowledgement

The work of the second author was supported by a Leverhulme Research Fellowship and the Engi-
neering and Physical Sciences Research Council under grant number EP/K023128/1.

2 The case of IKP

This section provides a detailed rendering of the ordinal analysis of Kripke-Platek set theory for-
mulated with intuitionistic logic, IKP. This is done in such a way that we are able to extract
witness terms from the resulting cut-free derivations of Σ sentences in the inﬁnitary system. This
results in a proof that IKP has the existence property for Σ sentences, which in conjunction with
results in [25] veriﬁes that CZF− has the full existence property. Many of the arguments in this
section are modular and transfer over to the stronger systems analysed in subsequent sections with
minimal changes.

5

2.1 A sequent calculus formulation of IKP

Deﬁnition 2.1. The language of IKP consists of free variables a0, a1, ..., bound variables x0, x1, ...,
the binary predicate symbol ∈ and the logical symbols ¬, ∨, ∧, →, ∀, ∃ as well as parentheses ), (.

The atomic formulas are those of the form a ∈ b.

The formulas of IKP are deﬁned inductively by:

i) All atomic formulas are formulas.

ii) If A and B are formulas then so are ¬A, A ∨ B, A ∧ B and A → B.

iii) If A(b) is a formula in which the bound variable x does not occur, then ∀xA(x), ∃xA(x),

(∀x ∈ a)A(x) and (∃x ∈ a)A(x) are also formulas.

Quantiﬁers of the form ∃x and ∀x will be called unbounded and those of the form (∃x ∈ a) and
(∀x ∈ a) will be referred to as bounded quantiﬁers.

A ∆0-formula is one in which no unbounded quantiﬁers appear.

The expression a = b is to be treated as an abbreviation for (∀x ∈ a)(x ∈ b) ∧ (∀x ∈ b)(x ∈ a).

The derivations of IKP take place in a two-sided sequent calculus. The sequents derived are
intuitionistic sequents of the form Γ ⇒ ∆ where Γ and ∆ are ﬁnite sets of formulas and ∆ contains
at most one formula. The intended meaning of Γ ⇒ ∆ is that the conjunction of formulas in Γ
implies the formula in ∆, or if ∆ is empty, a contradiction. The expressions ⇒ ∆ and Γ ⇒ are
shorthand for ∅ ⇒ ∆ and Γ ⇒ ∅ respectively. Γ, A stands for Γ ∪ {A}, Γ ⇒ A stands for Γ ⇒ {A},
etc.
The axioms of IKP are:

Logical axioms: Γ, A ⇒ A for every ∆0 formula A.
Extensionality:
Pair:
Union:
∆0-Separation:

Γ ⇒ a = b ∧ B(a) → B(b) for every ∆0 formula B(a).
Γ ⇒ ∃z(a ∈ z ∧ b ∈ z).
Γ ⇒ ∃z(∀y ∈ z)(∀x ∈ y)(x ∈ z).
Γ ⇒ ∃y[(∀x ∈ y)(x ∈ a ∧ B(x)) ∧ (∀x ∈ a)(B(x) → x ∈ y)]
for every ∆0-formula B(a).
Γ ⇒ ∀x[(∀y ∈ xF (y) → F (x)] → ∀xF (x) for any formula F (a).
Γ ⇒ ∃x[(∃z ∈ x)(z ∈ x) ∧ (∀y ∈ x)(∃z ∈ x)(y ∈ z)].
Γ ⇒ (∀x ∈ a)∃yG(x, y) → ∃z(∀x ∈ a)(∃y ∈ z)G(x, y) for any ∆0-formula G.

Set Induction:
Inﬁnity:
∆0-Collection:

The rules of inference are

(∧L)

Γ, C ⇒ ∆

Γ, A ∧ B ⇒ ∆

for C ∈ {A, B}.

(∧R)

Γ ⇒ A

Γ ⇒ B

Γ ⇒ A ∧ B

(∨L)

Γ, A ⇒ ∆

Γ, B ⇒ ∆

Γ, A ∨ B ⇒ ∆

(∨R)

Γ ⇒ C

Γ ⇒ A ∨ B

for C ∈ {A, B}.

6

(¬L)

Γ ⇒ A
Γ, ¬A ⇒

(¬R)

Γ, A ⇒
Γ ⇒ ¬A

(⊥)

Γ ⇒

Γ ⇒ A

(→ L)

Γ, B ⇒ ∆

Γ ⇒ A

Γ, A → B ⇒ ∆

(→ R)

Γ, A ⇒ B

Γ ⇒ A → B

(b∃L)

Γ, a ∈ b ∧ F (a) ⇒ ∆
Γ, (∃x ∈ b)F (x) ⇒ ∆

(b∃R)

Γ ⇒ a ∈ b ∧ F (a)
Γ ⇒ (∃x ∈ b)F (x)

(b∀L)

Γ, a ∈ b → F (a) ⇒ ∆
Γ, (∀x ∈ b)F (x) ⇒ ∆

(b∀R)

Γ ⇒ a ∈ b → F (a)
Γ ⇒ (∀x ∈ b)F (x)

(∃L)

Γ, F (a) ⇒ ∆
Γ, ∃xF (x) ⇒ ∆

(∃R)

Γ ⇒ F (a)
Γ ⇒ ∃xF (x)

(∀L)

Γ, F (a) ⇒ ∆
Γ, ∀xF (x) ⇒ ∆

(∀R)

Γ ⇒ F (a)
Γ ⇒ ∀xF (x)

(Cut)

Γ ⇒ A

Γ, A ⇒ ∆

Γ ⇒ ∆

In each of the inferences (b∃L), (∃L) (b∀R) and (∀R) the variable a is forbidden from occurring in
the conclusion. Such a variable is known as the eigenvariable of the inference.

The minor formulae of an inference are those rendered prominently in its premises, the other
formulae in the premises will be referred to as side formulae. The principal formula of an inference
is the one rendered prominently in the conclusion. Note that in inferences where the principal
formula is on the left, the principal formula can also be a side formula of that inference, when this
happens we say that there has been a contraction.

2.2 An ordinal notation system

Given below is a very brief description of how to carry out the construction of a primitive recursive
ordinal notation system for the Bachmann-Howard ordinal.

Deﬁnition 2.2. Let Ω be a ‘big’ ordinal, eg. ℵ1. (In fact we could have chosen ωCK
1
We deﬁne the sets BΩ(α) and ordinals ψΩ(α) by transﬁnite recursion on α as follows

, see [18].)

(1)

(2)

BΩ(α) = 


closure of {0, Ω} under:
+, (ξ, η 7→ ϕξη)
(ξ 7−→ ψΩ(ξ))ξ<α

ψΩ(α) ≃ min{ρ < Ω : ρ /∈ B(α)}.

7

It can be shown that ψΩ(α) is always deﬁned and thus ψΩ(α) < Ω. Moreover, it can also be shown
that BΩ(α) ∩ Ω = ψΩ(α).

Let εΩ+1 be the least orinal η > Ω such that ωη = η. The set BΩ(εΩ+1) gives rise to a primitive
recursive ordinal notation system [6] [17]. The ordinal ψΩ(εΩ+1) is known as the Bachmann-Howard
ordinal. There are many slight variants in the speciﬁc ordinal functions used to build up a notation
system for this ordinal, for example rather than ‘closing oﬀ’ under the ϕ function at each stage,
we could have chosen ω-exponentiation, all the systems turn out to be equivalent, in that they
eventually ‘catch-up’ with one another and the speciﬁc ordinal functions used can be deﬁned in
terms of one another. Here the functions ϕ and ψ are chosen as primitive since they correspond to
the ordinal operations arising from the two main cut elimination theorems of the next section.

2.3 The inﬁnitary system IRSΩ

The purpose of this section is to deﬁne an intuitionistic style inﬁnitary system IRSΩ within which
we will be able to embed IKP and then extract useful information about IKP derivations.

Henceforth all ordinals will be assumed to belong to the primitive recursive ordinal representation
system arising from BΩ(εΩ+1).

The system is based around the constructible hierarchy up to level Ω.

L0 := ∅

Lα+1 = {X ⊆ Lα | X is deﬁnable over Lα in the language of IKP with parameters}

Lλ := [

ξ<λ

Lξ

if λ is a limit ordinal

Deﬁnition 2.3. We inductively deﬁne the terms of IRSΩ. To each term t we also assign an ordinal
level |t|.

i) For each α < Ω, Lα is a term with |Lα| := α.

ii) If F (a, b1, ..., bn) is a formula of IKP with all free variables indicated and s1, ..., sn are IRSΩ

terms with levels less than α, then

[x ∈ Lα | F (x, s1, ..., sn)Lα]

is a term of level α. Here F Lα indicates that all unbounded quantiﬁers in F are restricted to
Lα.

The formulae of IRSΩ are of the form F (s1, ..., sn) where F (a1, ..., an) is a formula of IKP with
all free variables displayed and s1, ..., sn are IRSΩ-terms.

Note that the system IRSΩ does not contain free variables. We can think of the universe made
up of IRSΩ-terms as a formal, syntactical version of LΩ, unbounded quantiﬁers in IRSΩ-formulas
can be thought of as ranging over LΩ.

8

For the remainder of this section IRSΩ-terms and IRSΩ-formulae will simply be referred to as
terms and formulae.
A formula is said to be ∆0 if it contains no unbounded quantiﬁers.
We inductively (and simultaneously) deﬁne the class of Σ-formulae and the class of Π-formulae by
the following clauses:
(i) Every ∆0-formula is a Σ and a Π-formula.
(ii) If A and B are Σ-formulae (Π-formulae) then so are A ∨ B, A ∧ B, (∀x ∈ s)A, and (∃x ∈ s)A.
(iii) If A is a Σ-formula (Π-formula) then so is ∃xA (∀xA).
(iv) If A is Π-formula and B is a Σ-formula, then A → B and ¬A are Σ-formulae while B → A
and ¬B are Π-formulae.

The strict Σ-formulae of Deﬁnition 1.5 are Σ-formulae but the latter form a larger collection.
It’s perhaps worth noting that in classical KP every Σ-formula is equivalent to a Σ1-formula and
every Π-formula is equivalent to a Π1-formula, and therefore both are equivalent to strict versions.
This, however, does not extend to IKP. These formulae, though, satisfy well-known persistence
properties.

Lemma 2.4. For a formula C and free variable a, let C a be the result of replacing each unbounded
quantiﬁer ∀x and ∃y in C by ∀x ∈ a and ∃y ∈ a, respectively. Suppose A is a Σ-formula and B is
a Π-formula. Then the following are provable in IKP:

(i) a ⊆ b ∧ Aa → Ab,

(ii) a ⊆ b ∧ Bb → Ba.

Proof. Straightforward by simultaneously induction on the buildup of A and B.

⊓⊔

Abbreviation 2.5. For ⋄ a binary propositional connective, A a formula and s, t terms with
| s | < | t | we deﬁne the following abbreviation:

s ˙∈ t ⋄ A :=A

if t is of the form Lα

:=B(s) ⋄ A if t is of the form [x ∈ Lα | B(x)]

Like in IKP, derivations in IRSΩ take place in a two sided sequent calculus. Intuitionistic sequents
of the form Γ ⇒ ∆ are derived, where Γ and ∆ are ﬁnite sets of formulae and at most one formula
occurs in ∆. Γ, ∆, Λ, ... will be used as meta variables ranging over ﬁnite sets of formulae.

IRSΩ has no axioms, although note that some of the rules can have an empty set of premises. The
inference rules are as follows:

9

(∈ L)∞

(∈ R)

(b∀L)

Γ, p ˙∈ t ∧ r = p ⇒ ∆ for all | p | < | t |

Γ, r ∈ t ⇒ ∆

Γ ⇒ s ˙∈ t ∧ r = s

Γ ⇒ s ∈ t

if | s | < | t |

Γ, s ˙∈ t → A(s) ⇒ ∆
Γ, (∀x ∈ t)A(x) ⇒ ∆

if | s | < | t |

(b∀R)∞

Γ ⇒ p ˙∈ t → A(p) for all | p | < | t |
Γ ⇒ (∀x ∈ t)A(x)

(b∃L)∞

Γ, p ˙∈ t ∧ A(p) ⇒ ∆ for all | p | < | t |
Γ, (∃x ∈ t)A(x) ⇒ ∆

(b∃R)

Γ ⇒ s ˙∈ t ∧ A(s)
Γ ⇒ (∃x ∈ t)A(x)

if | s | < | t |

(∀L)

Γ, A(s) ⇒ ∆

Γ, ∀x A(x) ⇒ ∆

(∀R)∞

(∃L)∞

(∃R)

Γ ⇒ A(p) for all p
Γ ⇒ ∀xA(x)

Γ, A(p) ⇒ ∆ for all p
Γ, ∃xA(x) ⇒ ∆

Γ ⇒ A(s)
Γ ⇒ ∃xA(x)

(Σ-RefΩ)

Γ ⇒ A
Γ ⇒ ∃zAz

if A is a Σ-formula,

as well as the rules (∧L), (∧R), (∨L), (∨R), (¬L), (¬R), (⊥), (→ L), (→ R) and (Cut) which are
deﬁned identically to the rules of the same name in IKP.

In general we are unable to remove cuts from IRSΩ derivations, one of the main obstacles to full
cut elimination comes from (Σ-RefΩ) since it breaks the symmetry of the other rules. However we
can still perform cut elimination on certain derivations, provided they are of a very uniform kind.
Luckily, certain embedded proofs from IKP will be of this form. In order to express uniformity
in inﬁnite proofs we draw on [7], where Buchholz developed a powerful method of describing such
uniformity, called operator control.

Deﬁnition 2.6. Let

A class function

P (ON ) = {X : X is a set of ordinals}.

H : P (ON ) → P (ON )

will be called an operator if H satisﬁes the following conditions for all X ∈ P (ON ):

10

1. X ⊆ Y ⇒ H(X) ⊆ H(Y ) (monotone)

2. X ⊆ H(X) (inclusive)

3. H(H(X)) = H(X) (idempotent)

4. 0 ∈ H(X) and Ω ∈ H(X).

5. If α has Cantor normal form ωα1 + · · · + ωαn, then

α ∈ H(X)

iﬀ α1, ..., αn ∈ H(X).

The latter ensures that H(X) will be closed under + and σ 7→ ωσ, and decomposition of its mem-
bers into additive and multiplicative components.

From now on α ∈ H and {α1, ..., αn} ⊆ H will be considered shorthand for α ∈ H(∅) and
{α1, ..., αn} ⊆ H(∅) respectively.

Deﬁnition 2.7. If A is a formula let

k(A) := {α ∈ ON : the symbol Lα occurs in A, subterms included}.

Likewise we deﬁne

k({A1, ..., An}) := k(A1) ∪ ... ∪ k(An)

and k(Γ ⇒ ∆) := k(Γ) ∪ k(∆).

Now for H an arbitrary operator, s a term and X a formula, set of formulae or a sequent we deﬁne

H[s](X) :=H(X ∪ {|s|})
H[X](X) :=H(X ∪ k(X)).

Lemma 2.8. Let H be an operator, s a term and X a formula, set of formulae or sequent.

(i) For any X, X ′ ∈ P (ON ), if X ′ ⊆ X then H(X ′) ⊆ H(X)].

(ii) H[s] and H[X] are operators.

(iii) If k(X) ⊆ H(∅) then H[X] = H.

(iv) If | s | ∈ H then H[s] = H.

Proof. This result is demonstrated in full in [17].

⊓⊔

We also need to keep track of the complexity of cuts appearing in derivations.

Deﬁnition 2.9. The rank of a term or formula is determined by

1. rk(Lα) := ω · α

2. rk([x ∈ Lα | F (x)]) := max{ω · α + 1, rk(F (L0)) + 2}

3. rk(s ∈ t) := max{rk(s) + 6, rk(t) + 1}

11

4. rk(A ∧ B) = rk(A ∨ B) = rk(A → B) := max{rk(A) + 1, rk(B) + 1}

5. rk(¬A) := rk(A) + 1

6. rk((∃x ∈ t)A(x)) = rk((∀x ∈ t)A(x)) := max{rk(t), rk(F (L0)) + 2}

7. rk(∃xA(x)) = rk(∀xA(x)) := max{Ω, rk(F (L0)) + 1}

Observation 2.10. i) rk(s) = ω · |s| + n for some n < ω.

ii) If A is ∆0, rk(A) = ω · max(k(A)) + m for some m < ω.

iii) If A contains unbounded quantiﬁers rk(A) = Ω + m for some m < ω.

iv) rk(A) < Ω if and only if A is ∆0.

There is plenty of leeway in deﬁning the actual rank of a formula, basically we need to make sure
the following lemma holds.

Lemma 2.11. In every rule of IRSΩ other than (Σ-RefΩ) and (Cut), the rank of the minor formulae
is strictly less than the rank of the principal formula.

Proof. This result is demonstrated for a diﬀerent set of propositional connectives in [17], the adapted
⊓⊔
proof to the intuitionistic system is similar.

Deﬁnition 2.12 (Operator controlled derivability for IRSΩ). Let H be an operator and Γ ⇒ ∆
an intuitionistic sequent of IRSΩ, we deﬁne the relation H
We require always that k(Γ ⇒ ∆) ∪ {α} ⊆ H, this condition will not be repeated in the inductive
clauses for each of the inference rules of IRSΩ below. The column on the right gives the ordinal
requirements for each of the inference rules.

α
ρ Γ ⇒ ∆ by recursion on α.

(∈ L)∞

(∈ R)

H[r]

αr
ρ Γ, r ˙∈ t ∧ r = s ⇒ ∆ for all | r | < | t |

H

α
ρ Γ, s ∈ t ⇒ ∆

H

α0
ρ Γ ⇒ r ˙∈ t ∧ r = s
H

α
ρ Γ ⇒ s ∈ t

| r | ≤ αr < α

α0 < α
| r | < | t |
| r | < α

12

(b∀L)

(b∀R)∞

(b∃L)∞

(b∃R)

H

H

α0
ρ Γ, s ˙∈ t → A(s) ⇒ ∆
α
ρ Γ, (∀x ∈ t)A(x) ⇒ ∆

H[s]

αs
ρ Γ ⇒ s ˙∈ t → F (s) for all | s | < | t |

H

α
ρ Γ ⇒ (∀x ∈ t)F (x)

α0 < α
| s | < | t |
| s | < α

| s | ≤ αs < α

H[s]

αs
ρ Γ, s ˙∈ t ∧ F (s) ⇒ ∆ for all | s | < | t |

H

α
ρ Γ, (∃x ∈ t)F (x) ⇒ ∆

| s | ≤ αs < α

H

H

α0
ρ Γ ⇒ s ˙∈ t ∧ A(s)
α
ρ Γ ⇒ (∃x ∈ t)A(x)

α0 < α
| s | < | t |
| s | < α

(∀L)

(∀R)∞

(∃L)∞

(∃R)

H

H

α0
ρ Γ, F (s) ⇒ ∆
α
ρ Γ, ∀xF (x) ⇒ ∆

α0 + 1 < α
| s | < α

H[s]

αs
ρ Γ ⇒ F (s) for all s
H

α
ρ Γ ⇒ ∀xF (x)

H[s]

αs
ρ Γ, F (s) ⇒ ∆ for all s
H

α
ρ Γ, ∃xF (x) ⇒ ∆

| s | < αs + 1 < α

| s | < αs + 1 < α

H

H

α0
ρ Γ ⇒ F (s)
α
ρ Γ, ⇒ ∃xF (x)

α0 + 1 < α
| s | < α

(Cut)

H

(Σ-RefΩ)

α0
ρ Γ, B ⇒ ∆
α
ρ Γ ⇒ ∆

H

H

α1
ρ Γ ⇒ B

α0, α1 < α
rk(B) < ρ

H

H

α0
ρ Γ ⇒ A
ρ Γ ⇒ ∃z Az

α

α0 + 1, Ω < α
A is a Σ-formula

Lastly if Γ ⇒ ∆ is the result of a propositional inference of the form (∧L), (∧R), (∨L), (∨R), (¬L),
α0
ρ Γi ⇒ ∆i (for each i) we
(¬R), (⊥), (→ L) or (→ R), with premise(s) Γi ⇒ ∆i then from H
may conclude H

α
ρ Γ ⇒ ∆ , provided α0 < α.

Lemma 2.13 (Weakening and Persistence for IRSΩ).
α0
ρ0

i) If Γ0 ⊆ Γ, k(Γ) ⊆ H, α0 ≤ α ∈ H, ρ0 ≤ ρ and H

Γ0 ⇒ ∆ then

H

α
ρ Γ ⇒ ∆ .

13

ii) If β ≥ γ ∈ H and H

α
ρ Γ, (∃x ∈ Lβ)A(x) ⇒ ∆ then H

α
ρ Γ, (∃x ∈ Lγ)A(x) ⇒ ∆ .

iii) If β ≥ γ ∈ H and H

α
ρ Γ ⇒ (∀x ∈ Lβ)A(x) then H

α
ρ Γ ⇒ (∀x ∈ Lγ)A(x)

iv) If γ ∈ H and H

α
ρ Γ, ∃xA(x) ⇒ ∆ then H

α
ρ Γ, (∃x ∈ Lγ)A(x) ⇒ ∆ .

v) If γ ∈ H and H

α
ρ Γ ⇒ ∀xA(x) then H

α
ρ Γ ⇒ (∀x ∈ Lγ)A(x) .

Proof. We show i), ii) and v).

i) is proved by an easy induction on α.

α
ii) Is also proved using induction on α, suppose β ≥ γ ∈ H(∅) and H
ρ Γ, (∃x ∈ Lβ)A(x) ⇒ ∆ .
If (∃x ∈ Lβ)A(x) was not the principal formula of the last inference or the last inference was not
(b∃L)∞ then we may apply the induction hypotheses to it’s premises followed by the same inference
again. So suppose (∃x ∈ Lβ)A(x) was the principal formula of the last inference which was (b∃L)∞,
so we have

H[s]

αs
ρ Γ, (∃x ∈ Lβ)A(x), A(s) ⇒ ∆ for all |s| < β, with αs < α.

From the induction hypothesis we obtain

H[s]

αs
ρ Γ, (∃x ∈ Lγ)A(x), A(s) ⇒ ∆ for all |s| < β, with αs < α

but since β ≥ γ this also holds for all |s| < γ. So by another application of (b∃L)∞ we get

H

α
ρ Γ, (∃x ∈ Lγ)A(x) ⇒ ∆

as required.

For v) suppose H
of the last inference, which was (∀R)∞, in this case we have

α
ρ Γ ⇒ ∀xA(x) . The interesting case is where ∀xA(x) was the principal formula

H[s]

αs
ρ Γ ⇒ A(s)

for all s, with | s | < αs + 1 < α.

So taking just the cases where | s | < γ and noting that in these cases A(s) ≡ s ˙∈ Lγ → A(s), we
may apply (b∀R) to obtain

as required.

H

α
ρ Γ ⇒ (∀x ∈ Lγ)A(x)

The proofs of iii) and iv) may be carried out in a similar manner to those above.

⊓⊔

2.4 Cut elimination for IRSΩ

Lemma 2.14 (Inversions of IRSΩ). i) If H

α
ρ Γ, A ∧ B ⇒ ∆ then H

α
ρ Γ, A, B ⇒ ∆ .

ii) If H

α
ρ Γ ⇒ A ∧ B then H

α
ρ Γ ⇒ A and H

α
ρ Γ ⇒ B .

iii) If H

α
ρ Γ, A ∨ B ⇒ ∆ then H

α
ρ Γ, A ⇒ ∆ and H

α
ρ Γ, B ⇒ ∆ .

14

iv) If H

α
ρ Γ, A → B ⇒ ∆ then H

α
ρ Γ, B ⇒ ∆ .

v) If H

α
ρ Γ ⇒ A → B then H

α
ρ Γ, A ⇒ B .

vi) If H

α
ρ Γ ⇒ ¬A then H

α
ρ Γ, A ⇒ .

vii) If H

α
ρ Γ, r ∈ t ⇒ ∆ then H[s]

α
ρ Γ, s ˙∈ t ∧ r = s ⇒ ∆ for all |s| < |t|.

viii) If H

α
ρ Γ, (∃x ∈ t)A(x) ⇒ ∆ then H[s]

α
ρ Γ, s ˙∈ t ∧ A(s) ⇒ ∆ for all |s| < |t|.

ix) If H

α
ρ Γ ⇒ (∀x ∈ t)A(x) then H[s]

α
ρ Γ ⇒ s ˙∈ t → A(s) for all |s| < |t|.

x) If H

α
ρ Γ, ∃xA(x) ⇒ ∆ then H[s]

α
ρ Γ, A(s) ⇒ ∆ for all s.

xi) If H

α
ρ Γ, ⇒ ∀xA(x) then H[s]

α
ρ Γ ⇒ A(s) for all s.

Proof. All proofs are by induction on α, we treat three of the most interesting cases, iv), vi) and x).

α
ρ Γ, A → B ⇒ ∆ , If the last inference was not (→ L) or the principal formula of
iv) Suppose H
that inference was not A → B we may apply the induction hypothesis to the premises of that
inference, followed by the same inference again. Now suppose A → B was the principal formula of
the last inference, which was (→ L). Thus, with the possible use of weakening, we have

(1)

(2)

H

H

α0
ρ Γ, B, A → B ⇒ ∆
α1
ρ Γ, A → B ⇒ A

for some α0 < α.

for some α1 < α.

Applying the induction hypothesis to (1) yields H
desired result by weakening.

α0
ρ Γ, B ⇒ ∆ from which we may obtain the

α
vi) Now suppose H
ρ Γ ⇒ ¬A . If ¬A was the principal formula of the last inference which was
α0
(¬R) then we have H
ρ Γ, A ⇒ for some α0 < α, from which we may obtain the desired result
α0
by weakening. If the last inference was (⊥) then H
ρ Γ ⇒ for some α0 < α, from which we also
obtain the desired result by weakening. If the last inference was diﬀerent to (¬R) and (⊥) we may
apply the induction hypothesis to the premises of that inference followed by the same inference
again.

x) Finally suppose H
which was (∃L)∞ then we have

α
ρ Γ, ∃xA(x) ⇒ ∆ . If ∃xA(x) was the principal formula of the last inference

H[s]

αs
ρ Γ, ∃xA(x), A(s) ⇒ ∆ with αs < α for each s.

Applying the induction hypothesis yields

H[s]

αs
ρ Γ, A(s) ⇒ ∆

from which we get the desired result by weakening. If ∃xA(x) was not the principal formula of the
last inference or the last inference was not (∃L)∞ then we may apply the induction hypothesis to
⊓⊔
the premises of that inference followed by the same inference again.

15

Lemma 2.15 (Reduction for IRSΩ). Let ρ := rk(C) 6= Ω

If H

α
ρ Γ, C ⇒ ∆ and H

β
ρ Ξ ⇒ C then H

α#α#β#β
ρ

Γ, Ξ ⇒ ∆

Proof. The proof is by induction on α#α#β#β. Assume that

(1)

(2)

(3)

ρ := rk(C) 6= Ω

H

H

α
ρ Γ, C ⇒ ∆
β
ρ Ξ ⇒ C

If C was not the principal formula of the last inference in both derivations then we may simply use
the induction hypothesis on the premises and then the ﬁnal inference again.

So suppose C was the principal formula of the last inference in both (2) and (3). Note also that
(1) gives us immediately that the last inference in (3) was not (Σ-RefΩ).

We treat three of the most interesting cases.

Case 1. Suppose C ≡ r ∈ t, thus we have

(4)

and

(5)

H[p]

αp
ρ Γ, C, p ˙∈ t ∧ r = p ⇒ ∆ for all | p | < | t | with αp < α

H

β0
ρ Ξ ⇒ s ˙∈ t ∧ r = s

for some | s | < | t | with β0 < β.

Now from (5) we know that | s | ∈ H and thus from (4) we have

(6)

H

αs
ρ Γ, C, s ˙∈ t ∧ r = s ⇒ ∆ .

Applying the induction hypothesis to (6) and (3) yields

(7)

H

αs#αs#β#β
ρ

Ξ, Γ, s ˙∈ t ∧ r = s ⇒ ∆ .

Finally a (Cut) applied to (5) and (7) yields

H

α#α#β#β
ρ

Ξ, Γ ⇒ ∆

as required.

Case 2. Now suppose C ≡ (∀x ∈ t)F (x) so we have

(8)

and

(9)

H

α0
ρ Γ, C, s ˙∈ t → F (s) ⇒ ∆ for some | s | < | t | with α0, | s | < α

H[p]

βp
ρ Ξ ⇒ p ˙∈ t → F (p)

for all | p | < | t | with βp < β.

16

Now (8) gives s ∈ H and thus from (9) we have

(10)

H

βs
ρ Ξ ⇒ s ˙∈ t → F (s) .

Applying the induction hypothesis to (3) and (8) gives

(11)

H

α0#α0#β#β
ρ

Γ, Ξ, s ˙∈ t → F (s) ⇒ ∆ .

Finally (Cut) applied to (10) and (11) yields the desired result.

Case 3. Now suppose C ≡ A → B so we have

(12)

(13)

(14)

H

H

H

α0
ρ Γ, C ⇒ A with α0 < α
α1
ρ Γ, C, B ⇒ ∆ with α1 < α
β0
ρ Ξ, A ⇒ B with β0 < β

The induction hypothesis applied to (12) and (3) gives

(15)

H

α0#α0#β#β
ρ

Γ, Ξ ⇒ A .

Now an application of (Cut) to (15) and (14) gives

(16)

H

α0#α#β#β
ρ

Γ, Ξ ⇒ B .

Inversion (Lemma 2.14 iv)) applied to (13) gives

(17)

H

α1
ρ Γ, B ⇒ ∆ .

Finally a single application of (Cut) to (16) and (17) yields the desired result.

⊓⊔

Theorem 2.16 (Predicative Cut Elimination for IRSΩ). Suppose H
[ρ, ρ + ωβ) and β ∈ H, then

α

ρ+ωβ Γ ⇒ ∆ , where Ω /∈

Provided H is an operator closed under ϕ.

Proof. The proof is by main induction on β and subsidiary induction on α.

H

ϕβα
ρ

Γ ⇒ ∆ .

If the last inference was anything other than (Cut) or was a cut of rank < ρ then we may apply the
subsidiary induction hypothesis to the premises and then re-apply the ﬁnal inference. So suppose
the last inference was (Cut) with cut-formula C and rk(C) ∈ [ρ, ρ + ωβ). So we have

(1)

(2)

H

H

α0

ρ+ωβ Γ, C ⇒ ∆ with α0 < α,
ρ+ωβ Γ ⇒ C with α1 < α.

α1

17

First applying the subsidiary induction hypothesis to (1) and (2) gives

(3)

(4)

H

H

ϕβα0
ρ
ϕβα1
ρ

Γ, C ⇒ ∆

Γ, ⇒ C .

Now if rk(C) = ρ then one application of the Reduction Lemma 2.15 gives the desired result (once
it is noted that ϕβα0#ϕβα0#ϕβα1#ϕβα1 < ϕβα since ϕβα is additive principal.)

Now let us suppose that β > 0 and rk(C) ∈ (ρ, ρ + ωβ). Since rk(C) < ρ + ωβ we can ﬁnd some
β0 < β and some n < ω such that

rk(C) < ρ + n · ωβ0.

Thus applying (Cut) to (3) and (4) gives

Now by the main induction hypothesis we obtain

H

ϕβα

ρ+n·ωβ0

Γ ⇒ ∆ .

H

ϕβ0(ϕβα)

ρ+(n−1)·ωβ0

Γ ⇒ ∆

But by deﬁnition ϕβα is a ﬁxed point of the function ϕβ0(·) ie. ϕβ0(ϕβα) = ϕβα, so we have

H

ϕβα

ρ+(n−1)·ωβ0

Γ ⇒ ∆ .

From here a further (n − 1) applications of the main induction hypothesis yields the desired result.
⊓⊔

Lemma 2.17 (Boundedness for IRSΩ). If A is a Σ-formula, B is a Π-formula, α ≤ β < Ω and
β ∈ H then

i) If H

α
ρ Γ ⇒ A then H

α
ρ Γ ⇒ ALβ .

ii) If H

α
ρ Γ, B ⇒ ∆ then H

α
ρ Γ, B Lβ ⇒ ∆ .

Proof. Suppose that H

α
ρ Γ ⇒ A . We prove i) and ii) simultaneously by induction on α.

First we look at i). If A was not the principal formula of the last inference then we can simply use
the induction hypothesis. If A was the principal formula of the last inference and is of the form ¬C,
C ∧ D, C ∨ D, C → D, (∃x ∈ t)C(x) or (∀x ∈ t)C(x), then again the result follows immediately
from the induction hypothesis.

Note that the last inference cannot have been (∀R)∞ or (Σ-RefΩ) since A is a Σ formula and α < Ω.

So suppose A ≡ ∃xC(x) and

H

α0
ρ Γ ⇒ C(s)

18

for some α0, | s | < α. By induction hypothesis we obtain

Which may be written as

H

α0
ρ Γ ⇒ C(s)Lβ .

H

α0
ρ Γ ⇒ s ˙∈ Lβ ∧ C(s)Lβ .

Now an application of (b∃R) yields the desired result.

As part ii) is proved in a similar manner, we shall conﬁne ourselves to the case when the last
inference was (→ L) with principal formula B. So suppose B ≡ C → D and

H

α0
ρ Γ ⇒ C and H

α0
ρ Γ, D ⇒ ∆

for some α0, | s | < α. By induction hypothesis we obtain

H

α0
ρ Γ ⇒ C Lβ and H

α0
ρ Γ, DLβ ⇒ ∆ .

Now an application of (→ L) yields the desired result.

Deﬁnition 2.18. For each η we deﬁne

Hη : P(BΩ(εΩ+1)) −→ P(BΩ(εΩ+1))

Hη(X) : = \{BΩ(α) : X ⊆ BΩ(α) and η < α}.

Lemma 2.19. i) Hη is an operator for each η.

ii) η < η′ =⇒ Hη(X) ⊆ Hη′(X).

iii) If ξ ∈ Hη(X) and ξ < η + 1 then ψΩ(ξ) ∈ Hη(X).

Proof. This is proved in [7].

Lemma 2.20. Suppose η ∈ Hη and let ˆβ := η + ωΩ+β.

i) If α ∈ Hη then ˆα, ψΩ(ˆα) ∈ H ˆα.

ii) If α0 ∈ Hη and α0 < α then ψΩ( ˆα0) < ψΩ(ˆα).

⊓⊔

⊓⊔

Proof. i) From α, η ∈ Hη = BΩ(η + 1) we get ˆα ∈ BΩ(η + 1) and hence ˆα ∈ BΩ(ˆα) by 2.19ii). Thus
ψΩ(ˆα) ∈ BΩ(ˆα + 1) = H ˆα(∅).

ii) Suppose that α > α0 ∈ Hη. By the argument above we get ψΩ( ˆαo) ∈ BΩ( ˆα0 + 1) ⊆ BΩ(ˆα), thus
⊓⊔
ψΩ( ˆα0) < ψΩ(ˆα).

Theorem 2.21 (Collapsing for IRSΩ). Suppose that η ∈ Hη, ∆ is a set of at most one Σ-formula
and Γ a ﬁnite set of Π-formulae. Then

Hη

α

Ω+1

Γ ⇒ ∆ implies H ˆα

ψΩ(ˆα)

ψΩ(ˆα)

Γ ⇒ ∆ .

19

Proof. We proceed by induction on α. If the last inference was propositional then the assertion
follows easily from the induction hypothesis.

Case 1. Suppose the last inference was (b∀R)∞, then ∆ = {(∀x ∈ t)F (x)} and

Hη[p]

αp

Ω+1

Γ ⇒ p ˙∈ t → F (p)

for all | p | < | t | with αp < α.

Since k(t) ⊆ Hη, we know that | t | ∈ B(η + 1) and thus | t | < ψΩ(η + 1). Thus k(p) ⊆ Hη for all
| p | < | t |, so Hη[p] = Hη for all such p. Since p ˙∈ t → F (p) is also a Σ-formula we can invoke the
induction hypothesis to give

H ˆαp

ψΩ( ˆαp)

ψΩ( ˆαp)

Γ, p ˙∈ t ⇒ F (p) .

Since ψΩ( ˆαp) + 1 < ψΩ(ˆα) for all p, we may apply (→ R) and then (b∀R)∞ to obtain the desired
result.

Case 2. Suppose the last inference was (b∀L) so (∀x ∈ t)F (x) ∈ Γ and

Hη

α0
Ω+1

Γ, s ˙∈ t → F (s) ⇒ ∆ for some | s | < | t | with α0 < α.

Noting that s ˙∈ t → F (s) is itself a Π-formula, we may apply the induction hypothesis to give

H ˆα0

ψΩ ˆα0
ψΩ ˆα0

Γ, s ˙∈ t → F (s) ⇒ ∆

from which we obtain the desired result using one application of (b∀L).

Case 3. (b∃L)∞ and (b∃R) are similar to cases 1 and 2.

Case 4. Suppose the last inference was (∃R), so ∆ = {∃xF (x)} and

Hη

α0
Ω+1

Γ ⇒ F (s)

for some | s | < α and α0 < α.

Since F (s) is Σ we may immediately apply the induction hypothesis to obtain

H ˆα0

ψΩ ˆα0
ψΩ ˆα0

Γ ⇒ F (s) .

Now since | s | ∈ Hη = B(η + 1) we know that | s | < ψΩ(η + 1) < ψΩ ˆα, so we may apply (∃R) to
obtain the desired result.

Case 5. If the last inference was (∀L) we may argue in a similar fashion to case 4.

It cannot be the case that the last inference was (∃L) or (∀R) since Γ contains only Π formulae
and ∆ only Σ formulae.

Case 6. Suppose the last inference was (Σ-RefΩ), so ∆ = {∃zF z} for some Σ formula F and

Hη

α0
Ω+1

Γ ⇒ F .

20

The induction hypothesis yields

Now applying Boundedness 2.17 yields

H ˆα0

ψΩ ˆα0
ψΩ ˆα0

Γ ⇒ F .

From which one application of (∃R) yields the desired result.

H ˆα0

ψΩ ˆα0
ψΩ ˆα0

Γ ⇒ F L

ψΩ( ˆα0) .

Case 7. Finally suppose the last inference was (Cut), then there is a formula C with rk(C) ≤ Ω
and α0 < α such that

(1)

(2)

Hη

Hη

α0
Ω+1
α0
Ω+1

Γ, C ⇒ ∆

Γ ⇒ C .

7.1 If rk(C) < Ω then C contains only bounded quantiﬁcation and as such is both Σ and Π, thus
we may apply the induction hypothesis to both (1) and (2) to give

(3)

(4)

H ˆα0

H ˆα0

ψΩ( ˆα0)

ψΩ( ˆα0)
ψΩ( ˆα0)

ψΩ( ˆα0)

Γ, C ⇒ ∆

Γ ⇒ C .

Since k(C) ⊆ Hη and rk(C) < Ω, we have rk(C) < ψΩ(η + 1), so we may apply (Cut) to (3) and
(4) to obtain the desired result.

7.2 If rk(C) = Ω then C ≡ ∃xF (x) or C ≡ ∀xF (x) with F (L0) a ∆0 formula. The two cases are
similar so for simplicity just the case where C ≡ ∃xF (x) is considered.

We can begin by immediately applying the induction hypothesis to (2) since C is a Σ formula,
giving

H ˆα0

ψΩ( ˆα0)

ψΩ( ˆα0)

Γ ⇒ C .

Now applying Boundedness 2.17 yields

(5)

H ˆα0

ψΩ( ˆα0)

ψΩ( ˆα0)

Γ ⇒ C L

ψΩ( ˆα0) .

Since ψΩ( ˆα0) ∈ H ˆα0 we may apply 2.13ii) to (1) to obtain

H ˆα0

α0
Ω+1

Γ, (∃x ∈ L

ψΩ( ˆα0))F (x) ⇒ ∆ .

Now (∃x ∈ LψΩ( ˆα0))F (x) is bounded and hence Π so by the induction hypothesis we obtain

(6)

H ˆα1

ψΩ(α1

ψΩ(α1)

Γ, (∃x ∈ LψΩ( ˆα0))F (x) ⇒ ∆ .

Where α1 := ˆα0 + ωΩ+α0. Since α1 < η + ωΩ+α := ˆα and rk((∃x ∈ LψΩ( ˆα0))F (x)) < ψΩ(α) we may
⊓⊔
apply (Cut) to (5) and (6) to complete the proof.

21

2.5 Embedding IKP into IRSΩ

In this section we show how IKP derivations can be carried out in a very uniform manner within
IRSΩ. First some preparatory deﬁnitions.

Deﬁnition 2.22. i) Given ordinals α1, ..., αn. The expression ωα1#...#ωαn denotes the ordinal

ωαp(1) + ... + ωαp(n)

where p : {1, ..., n} 7→ {1, ..., n} such that αp(1) ≥ ... ≥ αp(n). More generally α#0 := 0#α := 0
and if α =N F ωα1+...+ωαn and β =N F ωβ1+...+ωβm then α#β := ωα1#...#ωαn#ωβ1#...#ωβm.

ii) If A is any IRSΩ-formula then no(A) := ωrk(A) and if Γ ⇒ ∆ is an IRSΩ-sequent containing

formulas {A1, ..., An}, then no(Γ ⇒ ∆) := no(A1)#...#no(An).

iii) (cid:13) Γ ⇒ ∆ will be used to abbreviate that

H[Γ ⇒ ∆]

no(Γ⇒∆)

0

Γ ⇒ ∆ holds for any operator H.

iv) (cid:13)ξ

ρ Γ ⇒ ∆ will be used to abbreviate that

H[Γ ⇒ ∆]

no(Γ⇒∆)#ξ
ρ

Γ ⇒ ∆ holds for any operator H.

We would like to be able to use (cid:13) as a calculus since it dispenses with a lot of superﬂuous notation,
luckily under certain conditions this is possible.

Lemma 2.23. i) If Γ ⇒ ∆ follows from premises Γi ⇒ ∆i by an inference other than (Cut) or
(Σ-RefΩ) and without contractions then

if (cid:13)α

ρ Γi ⇒ ∆i

then (cid:13)α

ρ Γ ⇒ ∆.

ii) If (cid:13)α

ρ Γ, A, B ⇒ ∆ then (cid:13)α

ρ Γ, A ∧ B ⇒ ∆.

Proof. The ﬁrst part follows from the additive principal nature of ordinals of the form ωα and
Lemma 2.11.

For the second part suppose (cid:13)α

ρ Γ, A, B ⇒ ∆ which means we have

H[Γ, A, B ⇒ ∆]

no(Γ⇒∆)#no(A)#no(B)#α
ρ

Γ, A, B ⇒ ∆ .

Two applications of (∧L) yields

H[Γ, A, B ⇒ ∆]

no(Γ⇒∆)#no(A)#no(B)#α+2
ρ

Γ, A ∧ B ⇒ ∆ .

It remains to note that H[Γ, A, B ⇒ ∆] = H[Γ, A ∧ B ⇒ ∆] and

no(A)#no(B) + 2 = ωrk(A)#ωrk(B) + 2 < ωrk(A∧B) = no(A ∧ B)

to complete the proof.

⊓⊔

22

Lemma 2.24. For any IRSΩ formulas A, B and terms s, t we have

i) (cid:13) Γ, A ⇒ A .

ii) (cid:13) s ∈ s ⇒ .

iii) (cid:13)⇒ s ⊆ s here s ⊆ s is shorthand for (∀x ∈ s)(x ∈ s).

iv) (cid:13)⇒ s ˙∈ t → s ∈ t and (cid:13) s ˙∈ t ⇒ s ∈ t, for | s | < | t |.

v) (cid:13) s = t ⇒ t = s .

vi) If (cid:13) Γ, A ⇒ B then Γ, s ˙∈ t ∧ A ⇒ s ˙∈ t ∧ B for | s | < | t |.

vii) If (cid:13) Γ, A, B ⇒ ∆ then (cid:13) Γ, s ˙∈ t → A, s ˙∈ t ∧ B ⇒ ∆ for | s | < | t |.

viii) If | s | < β then (cid:13)⇒ s ∈ Lβ .

Proof. i) By induction of rk(A). We split into cases based on the form of the formula A.

Case 1. If A ≡ (r ∈ t) then by the induction hypothesis we have

(cid:13) Γ, s ˙∈ t ∧ r = s ⇒ s ˙∈ t ∧ r = s

for all | s | < | t |.

The following is a template for IRSΩ derivations.

(cid:13) s ˙∈ t ∧ r = s ⇒ s ˙∈ t ∧ r = s
(cid:13) s ˙∈ t ∧ r = s ⇒ r ∈ t

(∈ R)
(∈ L)∞ (cid:13) r ∈ t ⇒ r ∈ t

for all | s | < | t |

for all | s | < | t |

Case 2. If A ≡ (∃x ∈ t)F (x) then by the induction hypothesis we have

(cid:13) s ˙∈ t ∧ F (s) ⇒ s ˙∈ t ∧ F (s)

for all | s | < | t |.

We have the following template for IRSΩ derivations.

(b∃R)
(b∃L)∞

(cid:13) s ˙∈ t ∧ F (s) ⇒ s ˙∈ t ∧ F (s)
(cid:13) s ˙∈ t ∧ F (s) ⇒ (∃x ∈ t)F (x)
(cid:13) (∃x ∈ t)F (x) ⇒ (∃x ∈ t)F (x)

for all | s | < | t |
for all | s | < | t |

Case 3. All remaining cases can be proved in a similar fashion to above.

ii) The proof is by induction on rk(s), inductively we get (cid:13) r ∈ r ⇒ for all | r | < | s |. Now if s is of
the form Lα, then r ∈ r ≡ r ˙∈ s → r ∈ r and we have the following template for IRSΩ derivations.

(b∀L)
(∧L)

(cid:13) r ∈ r ⇒ for all | r | < | s |
(cid:13) (∀x ∈ s)(x ∈ r) ⇒ for all | r | < | s |
(cid:13) s = r ⇒ for all | r | < | s |

(∈ L)∞ (cid:13) s ∈ s ⇒

Now if s ≡ [x ∈ Lα | B(x)] then we have the following template for derivations in IRSΩ.

23

(→ L)

i)

Induction Hypothesis

(cid:13) B(r) ⇒ B(r)

for all | r | < | s |

(cid:13) r ∈ r ⇒ for all | r | < | s |

(b∀L)
(∧L)
Lemma 2.23ii)

(cid:13) B(r), B(r) → r ∈ r ⇒
(cid:13) B(r), (∀x ∈ s)(x ∈ r) ⇒
(cid:13) B(r), r = s ⇒
(cid:13) B(r) ∧ r = s ⇒

(∈ L)∞ (cid:13) s ∈ s ⇒

iii) Again we use induction on rk(s).
s ≡ [x ∈ Lα | B(x)] then we have the following template for derivations in IRSΩ.

Inductively we have (cid:13)⇒ r ⊆ r for all | r | < | s |.

If

i)

(cid:13) B(r) ⇒ B(r)

(∧R)

(∈ R)
(→ R)
(b∀R)∞

(∧R)

for all | r | < | s |
(cid:13) B(r) ⇒ B(r) ∧ r = r
(cid:13) B(r) ⇒ r ∈ s
(cid:13)⇒ r ˙∈ s → r ∈ s
(cid:13)⇒ (∀x ∈ s)(x ∈ s)

Induction Hypothesis
(cid:13) B(r) ⇒ r ⊆ r
(cid:13) B(r) ⇒ r = r

for all | r | < | s |

If s ≡ Lα then we have the following template for derivations in IRSΩ.

for all | r | < | s |

Induction Hypothesis
(cid:13)⇒ r ⊆ r
(cid:13)⇒ r = r
(cid:13)⇒ r ∈ s
(cid:13)⇒ (∀x ∈ s)(x ∈ s)

(∧R)
(∈ R)
(b∀R)∞

iv) Was shown whilst proving iii).

v) The following is a template for IRSΩ derivations

i)

i)

(cid:13) s ⊆ t ⇒ s ⊆ t
(cid:13) s = t ⇒ s ⊆ t

(∧L)

(cid:13) t ⊆ s ⇒ t ⊆ s
(cid:13) s = t ⇒ t ⊆ s

(cid:13) s = t ⇒ t = s

(∧L)
(∧R)

vi) Trivial for t ≡ Lα, now if t ≡ [x ∈ Lα | C(x)] then we have the following template for IRSΩ
derivations.

(∧L)
(∧R)

(cid:13) Γ, A ⇒ B
(cid:13) Γ, C(s) ∧ A ⇒ B

(∧L)

(cid:13) Γ, C(s) ⇒ C(s)
(cid:13) Γ, C(s) ∧ A ⇒ C(s)

(cid:13) Γ, C(s) ∧ A ⇒ C(s) ∧ B

vii) This is also trivial for t ≡ Lα so suppose t ≡ [x ∈ Lα | C(x)] and we have the following template
for IRSΩ derivations.

(∧L)
(→ L)

(cid:13) Γ, C(s) ⇒ C(s)
(cid:13) Γ, C(s) ∧ B ⇒ C(s)

(∧L)

(cid:13) Γ, A, B ⇒ ∆
(cid:13) Γ, A, C(s) ∧ B ⇒ ∆

(cid:13) Γ, C(s) → A, C(s) ∧ B ⇒ ∆

viii) Suppose | s | < β then we have the following template for derivations in IRSΩ.

24

iii)

(∈ R)

(cid:13)⇒ s = s
(cid:13)⇒ s ∈ Lβ

⊓⊔

Lemma 2.25. For any terms s1, ..., sn, t1, ..., tn and any formula A(s1, ..., sn) we have

(cid:13) [s1 = t1], ..., [sn = tn], A(s1, ..., sn) ⇒ A(t1, ..., tn)

Where [si = ti] is shorthand for si ⊆ ti, ti ⊆ si.

Proof. We proceed by induction on rk(A(s1, ..., sn))#rk(A(t1, ..., tn)).

Case 1. Suppose A(x1, x2) ≡ (x1 ∈ x2), then for all | s | < | s2 | and | t | < | t2 | we have the following
template for derivations in IRSΩ.

Lemma 2.23ii)
2.24vi)
(∈ R)
(∈ L)∞
2.24vii)
(∀L)
(∈ L)∞
Lemma 2.13i)

(cid:13) [s1 = t1], [t = s], s1 = s ⇒ t1 = t
(cid:13) [s1 = t1], t = s, s1 = s ⇒ t1 = t
(cid:13) [s1 = t1], t ˙∈ t2 ∧ t = s, s1 = s ⇒ t ˙∈ t2 ∧ t1 = t
(cid:13) [s1 = t1], t ˙∈ t2 ∧ t = s, s1 = s ⇒ t1 ∈ t2
(cid:13) [s1 = t1], s ∈ t2, s1 = s ⇒ t1 ∈ t2
(cid:13) [s1 = t1], s ˙∈ s2 → s ∈ t2, s ˙∈ s2 ∧ s1 = s ⇒ t1 ∈ t2
(cid:13) [s1 = t1], (∀x ∈ s2)(x ∈ t2), s ˙∈ s2 ∧ s1 = s ⇒ t1 ∈ t2
(cid:13) [s1 = t1], (∀x ∈ s2)(x ∈ t2), s1 ∈ s2 ⇒ t1 ∈ t2
(cid:13) [s1 = t1], [s2 = t2], s1 ∈ s2 ⇒ t1 ∈ t2

Case 2. If A(x1, x2) ≡ x1 ∈ x1 then the assertion follows by Lemma 2.24ii) and weakening.

Case 3. Suppose A(x1, ..., xn) ≡ (∃y ∈ xi)B(y, x1, ..., xn), for simplicity let us suppose that i = 1.
Inductively for all | r | < | s1 | we have

(b∃R)
(b∃L)∞

(cid:13) [s1 = t1], ..., [sn = tn], r ˙∈ s1 ∧ B(r, s1, ..., sn) ⇒ r ˙∈ t1 ∧ B(r, t1, ..., tn)
(cid:13) [s1 = t1], ..., [sn = tn], r ˙∈ s1 ∧ B(r, s1, ..., sn) ⇒ (∃y ∈ s1)B(y, t1, ..., tn)
(cid:13) [s1 = t1], ..., [sn = tn], (∃y ∈ s1)B(y, t1, ..., tn) ⇒ (∃y ∈ s1)B(y, t1, ..., tn)
Case 4. The bounded universal quantiﬁcation case is dual to the bounded existential one.

Case 5. If A(x1, ..., xn) ≡ ∃yB(y, x1, ..., xn) then inductively for all terms r we have

(cid:13) [s1 = t1], ..., [sn = tn], B(r, s1, ..., sn) ⇒ B(r, t1, ..., tn)

subsequently applying (∃R) followed by (∃L)∞ yields the desired result.

Case 6. The unbounded universal quantiﬁcation case is dual to the unbounded existential one.

Case 7. All propositional cases follow immediately from the induction hypothesis.

⊓⊔

25

Corollary 2.26 (Equality). For any IRSΩ-formula A(s1, ..., sn)

(cid:13) ⇒ s1 = t1 ∧ ... ∧ sn = tn ∧ A(s1, ..., sn) → A(t1, ..., tn) .

Lemma 2.27 (Set Induction). For any formula F

(cid:13)ωrk(A)

0

⇒ ∀x[(∀y ∈ x)F (y) → F (x)] → ∀xF (x).

Where A := ∀x[(∀y ∈ x)F (y) → F (x)].

Proof. First we verify the following claim:

(*)

H[A, s]

ωrk(A)#ω| s |+1
0

A ⇒ F (s)

for all s.

The claim is veriﬁed by induction on | s |, inductively suppose that

H[A, t]

ωrk(A)#ω| t |+1
0

A ⇒ F (t)

holds for all | t | < | s |.

If necessary we may apply (→ R) to obtain

H[A, t, s]

ωrk(A)#ω| t |+1+1
0

A ⇒ t ˙∈ s → F (t) .

Next applying (b∀R)∞ yields

H[A, s]

ωrk(A)#ω| s |+2
0

A ⇒ (∀y ∈ s)F (y) .

Also by Lemma 2.24i) we have

H[A, s]

ωrk(F (s))#ωrk(F (s))
0

F (s) ⇒ F (s) .

Now one may note that ωrk(F (s))#ωrk(F (s)) ≤ ωrk(F (s))+1 ≤ ωmax(Ω,rk(F (L0))+3) = ωrk(A) to see that
by weakening we can conclude

H[A, s]

ωrk(A)#ω|s|+2
0

F (s) ⇒ F (s) .

Hence using one application of (→ L) we get

H[A, s]

ωrk(A)#ω|s|+3
0

A, (∀y ∈ s)F (y) → F (s) ⇒ F (s) .

Applying (b∀L) yields

H[A, s]

ωrk(A)#ω|s|+4
0

A ⇒ F (s) .

Thus the claim (*) is veriﬁed. A single application of (∀R)∞ to (*) furnishes us with

Finally applying (→ R) gives

as required.

H[A]

ωrk(A)#Ω
0

A ⇒ ∀xF (x) .

(cid:13)ωrk(A)

0 ⇒ A → ∀xF (x)

26

⊓⊔

Lemma 2.28 (Inﬁnity). For any ordinal α > ω we have

(cid:13) ⇒ (∃x ∈ Lα)[(∃z ∈ x)(z ∈ x) ∧ (∀y ∈ x)(∃z ∈ x)(y ∈ z)] .

Proof. The following is a template for derivations in IRSΩ:

(b∃R)
(∧R)

Lemma 2.24 viii)
(cid:13)⇒ L0 ∈ Lω
(cid:13)⇒ (∃z ∈ Lω)(z ∈ Lω)

(b∃R)
(b∀R)∞

Lemma 2.24 viii)
(cid:13)⇒ s ∈ Lα
(cid:13)⇒ (∃z ∈ Lω)(s ∈ z)
(cid:13)⇒ (∀y ∈ Lω)(∃z ∈ Lω)(y ∈ z)

for all |s| < α < ω

for all |s| < ω

(b∃R)

(cid:13)⇒ (∃z ∈ Lω)(z ∈ Lω) ∧ (∀y ∈ Lω)(∃z ∈ Lω)(y ∈ z)
(cid:13)⇒ (∃x ∈ Lα)[(∃z ∈ x)(z ∈ x) ∧ (∀y ∈ x)(∃z ∈ x)(y ∈ z)]

⊓⊔

Lemma 2.29 (∆0-Separation). Suppose |s|, |t1|, ..., |tn| < λ where λ is a limit ordinal and A(a, b1, ..., bn)
is a ∆0-formula of IKP with all free variables displayed, then

(cid:13) ⇒ (∃y ∈ Lλ)[(∀x ∈ y)(x ∈ s ∧ A(x, t1, ..., tn)) ∧ (∀x ∈ s)(A(x, t1, ..., tn) → x ∈ y)] .

Proof. First let β := max{|s|, |t1|, ..., |tn|} + 1 and note that β < λ since λ is a limit. Now let

t := [u ∈ Lβ | u ∈ s ∧ A(u, t1, ..., tn)].

Let B(x) := A(x, t1, ..., tn), in what follows r ranges over terms with | r | < | t | and p ranges over
terms with | p | < | s |. We have the following two templates for derivations in IRSΩ:

Derivation (1)

Derivation (2)

Lemma 2.24i)
(cid:13) r ∈ s ∧ B(r) ⇒ r ∈ s ∧ B(r)
(cid:13)⇒ r ˙∈ t → (r ∈ s ∧ B(r))
(cid:13)⇒ (∀x ∈ t)(x ∈ s ∧ B(x))

(→ R)
(b∀R)∞

Lemma 2.24iv)
(cid:13) p ˙∈ s, B(p) ⇒ p ∈ s

Lemma 2.24i)
(cid:13) p ˙∈ s, B(p) ⇒ B(p)

(cid:13) p ˙∈ s, B(p) ⇒ p ∈ s ∧ B(p)

Lemma 2.24iii)
(cid:13)⇒ p ⊆ p
(cid:13)⇒ p = p

(∧R)

(∧R)

(∈ R)
(→ R)
(→ R)
(b∀R)∞

(cid:13) p ˙∈ s, B(p) ⇒ (p ∈ s ∧ B(p)) ∧ p = p
(cid:13) p ˙∈ s, B(p) ⇒ p ∈ t
(cid:13) p ˙∈ s ⇒ B(p) → p ∈ t
(cid:13)⇒ p ˙∈ s → (B(p) → p ∈ t)
(cid:13)⇒ (∀x ∈ s)(B(x) → x ∈ t)

27

Now applying (∧R) to the conclusions of derivations (1) and (2) we obtain

(cid:13)⇒ (∀x ∈ t)(x ∈ s ∧ B(x)) ∧ (∀x ∈ s)(B(x) → x ∈ t).

Finally note that |t| = β < λ so we may apply (b∃R) to obtain

(cid:13)⇒ (∃y ∈ Lλ)[(∀x ∈ y)(x ∈ s ∧ B(x)) ∧ (∀x ∈ s)(B(x) → x ∈ y)]

as required.

⊓⊔

Lemma 2.30 (Pair). If λ is a limit ordinal and |s|, |t| < λ, then

(cid:13) ⇒ (∃z ∈ Lλ)(s ∈ z ∧ t ∈ z) .

Proof. Let δ := max{|s|, |t|} + 1 and note that δ < λ since λ is a limit. We have the following
template for IRSΩ derivations:

Lemma 2.24viii)
(cid:13)⇒ s ∈ Lδ

Lemma 2.24viii)
(cid:13)⇒ t ∈ Lδ

(∧R)

(b∃R)

(cid:13)⇒ (s ∈ Lδ ∧ t ∈ Lδ)
(cid:13)⇒ (∃z ∈ Lλ)(s ∈ z ∧ t ∈ z)

Lemma 2.31 (Union). If λ is a limit ordinal and |s| < λ then

(cid:13) ⇒ (∃z ∈ Lλ)(∀y ∈ s)(∀x ∈ y)(x ∈ z) .

Proof. Let α = |s|, we have the following template for derivations in IRSΩ:

(→ R)
(b∀R)∞
(→ R)
(b∀R)∞
(b∃R)

for all |q| < |r| < α

Lemma 2.24viii)
(cid:13) r ˙∈ s, q ˙∈ r ⇒ q ∈ Lα
(cid:13) r ˙∈ s ⇒ q ˙∈ r → q ∈ Lα
(cid:13) r ˙∈ s ⇒ (∀x ∈ r)(x ∈ Lα)
(cid:13)⇒ r ˙∈ s → (∀x ∈ r)(x ∈ Lα)
(cid:13)⇒ (∀y ∈ s)(∀x ∈ y)(x ∈ Lα)
(cid:13)⇒ (∃z ∈ Lλ)(∀y ∈ s)(∀x ∈ y)(x ∈ z)

⊓⊔

⊓⊔

Lemma 2.32 (∆0-Collection). For any ∆0 formula F (x, y),

(cid:13) ⇒ (∀x ∈ s)∃yF (x, y) → ∃z(∀x ∈ s)(∃y ∈ z)F (x, y) .

Proof. Using Lemma 2.24 we have

(cid:13) (∀x ∈ s)∃yF (x, y) ⇒ (∀x ∈ s)∃yF (x, y) .

Now let ¯H := H[(∀x ∈ s)∃yF (x, y)] and α := no((∀x ∈ s)∃yF (x, y) ⇒ (∀x ∈ s)∃yF (x, y)), by
applying (Σ-RefΩ) we obtain

¯H

α+1
0

(∀x ∈ s)∃yF (x, y) ⇒ ∃z(∀x ∈ s)(∃y ∈ z)F (x, y) .

28

Applying (→ R) gives

¯H

α+2
0

⇒ (∀x ∈ s)∃yF (x, y) → ∃z(∀x ∈ s)(∃y ∈ z)F (x, y) .

It remains to note that

α + 2 = α =no((∀x ∈ s)∃yF (x, y) ⇒ (∀x ∈ s)∃yF (x, y)) + 2

<no(⇒ (∀x ∈ s)∃yF (x, y) → ∃z(∀x ∈ s)(∃y ∈ z)F (x, y))

and ¯H = H[⇒ (∀x ∈ s)∃yF (x, y) → ∃z(∀x ∈ s)(∃y ∈ z)F (x, y)] to complete the proof.

⊓⊔

Theorem 2.33. If IKP ⊢ Γ(¯a) ⇒ ∆(¯a) where Γ(¯a) ⇒ ∆(¯a) is an intuitionistic sequent containing
exactly the free variables ¯a := a1, ..., an, then there is an m < ω (which we may compute from the
IKP-derivation) such that

H[Γ(¯s) ⇒ ∆(¯s)]

Γ(¯s) ⇒ ∆(¯s)

Ω·ωm
Ω+m

for any IRSΩ terms ¯s := s1, ...sn and any operator H.

Proof. Let A be any IRSΩ formula, note that by Observation 2.10, we have rk(A) ≤ Ω + l for some
l < ω. Therefore

no(A) = ωrk(A) ≤ ωΩ+l = ωΩ · ωl = Ω · ωl .

Thus for any choice of terms ¯s we have

no(Γ(¯s) ⇒ ∆(¯s)) ≤ Ω · ωm for some m < ω.

The remainder of the proof is by induction on the derivation IKP ⊢ Γ(¯a) ⇒ ∆(¯a).

If Γ(¯a) ⇒ ∆(¯a) is an axiom of IKP then the assertion follows by Lemmas 2.26, 2.27, 2.28, 2.29,
2.30, 2.31 or 2.32. If Γ(¯a) ⇒ ∆(¯a) was the result of a propositional inference then we may apply
the induction hypothesis to the premises and then the corresponding inference in IRSΩ. In order
to cut down on notation we make the following abbreviation, let

¯H := H[Γ(¯s) ⇒ ∆(¯s)].

Case 1. Suppose that Γ(¯a) ⇒ ∆(¯a) was the result of the inference (b∀R), then ∆(¯s) = {(∀x ∈
si)F (x)}. The induction hypothesis furnishes us with an k < ω such that

¯H[p]

Ω·ωk

Ω+k

Γ(¯s) ⇒ p ∈ si → F (p)

for all | p | < | s |i.

Now by Lemma 2.14v) we have

Also by 2.24iv) we have

¯H[p]

Ω·ωk

Ω+k

Γ(¯s), p ∈ si ⇒ F (p) .

(cid:13) p ˙∈ si ⇒ p ∈ si .

Applying (Cut) to these two yields

¯H[p]

Ω·ωk+1
Ω+k

Γ(¯s), p ˙∈ si ⇒ F (p) .

29

Now by (→ R) we have

Hence by (b∀R)∞ we have

as required.

¯H[p]

Ω·ωk+2
Ω+k

Γ(¯s) ⇒ p ˙∈ si → F (p) .

¯H

Ω·ωk+1
Ω+k

Γ(¯s) ⇒ (∀x ∈ si)F (x)

Case 2. Now suppose that Γ(¯a) ⇒ ∆(¯a) was the result of the inference (b∀L). So (∀x ∈ ai)F (x) ∈
Γ(¯a) and we are in the following situation in IKP

(b∀L)

Γ(¯a), c ∈ ai → F (c) ⇒ ∆(¯a)

Γ(¯a) ⇒ ∆(¯a)

If c is not a member of ¯a then by the induction hypothesis we have an m < ω such that

(1)

¯H

Ω·ωm
Ω+m

Γ(¯s), s1 ∈ si → F (s1) ⇒ ∆(¯s) .

Now if c is a member of ¯a, for simplicity let us suppose that c = a1. Inductively we can ﬁnd an
m < ω such that (1) is also satisﬁed. First we verify the following claim:

(2)

(cid:13) Γ, (∀x ∈ si)F (x) ⇒ s1 ∈ si → F (s1) .

2.1 Suppose si is of the form Lα. The claim is veriﬁed by the following template for derivations in
IRSΩ, here r ranges over terms with |r| < |si|.

Lemma 2.25

(b∀L)
Lemma 2.23ii)
(∈ L)∞
(→ R)

(cid:13) Γ, F (r), r ∈ si, r = s1 ⇒ F (s1)
(cid:13) Γ, (∀x ∈ si)F (x), r ∈ si, r = s1 ⇒ F (s1)
(cid:13) Γ, (∀x ∈ si)F (x), r ∈ si ∧ r = s1 ⇒ F (s1)
(cid:13) Γ, (∀x ∈ si)F (x), s1 ∈ si ⇒ F (s1)
(cid:13) Γ, (∀x ∈ si)F (x) ⇒ s1 ∈ si → F (s1)

2.2 Now supposing si is of the form [x ∈ Lα | B(x)], we have the following template for derivations
in IRSΩ, where r and p range over terms with level below | si |.

Lemma 2.25

(cid:13) p ˙∈ si, r = p, r = si ⇒ r ˙∈ si
(cid:13) p ˙∈ si ∧ r = p, r = si ⇒ r ˙∈ si
(cid:13) r ∈ si, r = si ⇒ r ˙∈ si

Lemma 2.25

(cid:13) F (r), r ∈ si, r = s1 ⇒ F (s1)

Lemma 2.23ii)
(∈ L)∞
(→ L)

(b∀L)
Lemma 2.23ii)
(∈ L)∞
(→ R)

(cid:13) Γ, r ˙∈ si → F (r), r ∈ si, r = s1 ⇒ F (s1)
(cid:13) Γ, (∀x ∈ si)F (x), r ∈ si, r = s1 ⇒ F (s1)
(cid:13) Γ, (∀x ∈ si)F (x), r ∈ si ∧ r = s1 ⇒ F (s1)
(cid:13) Γ, (∀x ∈ si)F (x), s1 ∈ si ⇒ F (s1)
(cid:13) Γ, (∀x ∈ si)F (x) ⇒ s1 ∈ si → F (s1)

30

Now that the claim is veriﬁed we may apply (Cut) to (1) and (2) to obtain

¯H

Ω·ωm′
Ω+m′ Γ(¯s) ⇒ ∆(¯s)

where Ω + m′ := max{Ω + m, rk(s1 ∈ si → F (s1))}, which is the desired result.

All other quantiﬁcation cases are similar to Cases 1 and 2.

Finally suppose Γ(¯a) ⇒ ∆(¯a) was the result of (Cut). So we are in the following situation in IKP.

Γ(¯a), F (¯a, ¯c) ⇒ ∆(¯a)

Γ(¯a) ⇒ F (¯a, ¯c)

Γ(¯a) ⇒ ∆(¯a)

where ¯c are the free variables occurring in F (¯a, ¯c) that are distinct from ¯a. By the induction
hypothesis we can ﬁnd m0, m1 < ω such that

¯H

¯H

Γ·ωm0
Ω+m0
Γ·ωm1
Ω+m1

Γ(¯s), F (¯s, L0) ⇒ ∆(¯s)

Γ(¯s) ⇒ F (¯s, L0) .

Note that k(F (¯s, L0)) ⊆ ¯H so we may apply (Cut) to ﬁnish the proof.

⊓⊔

2.6 An ordinal analysis of IKP

Lemma 2.34. If A is a Σ-sentence and IKP ⊢ ⇒ A, then there is some m < ω, which we may
compute explicitly from the derivation, such that

Hγ

ϕ(ψΩ(γ))(ψΩ (γ))
0

⇒ A where γ := ωm(Ω · ωm).

Here ω0(α) := α and ωk+1(α) := ωωk(α).

Proof. Suppose that A is a Σ-sentence and that IKP ⊢ ⇒ A, then by Theorem 2.33 there is some
1 ≤ m < ω such that

(1)

H0

Ω·ωm

Ω+m

⇒ A .

By applying Predicative Cut Elimination 2.16 (m − 1) times we obtain

(2)

H0

ωm−1(Ω·ωm)
Ω+1

⇒ A .

Applying Collapsing 2.21 to (2) gives

(3)

Hγ

ψΩ(γ)

ψΩ(γ)

⇒ A where γ := ωm(Ω · ωm).

Finally by applying Predicative Cut Elimination 2.16 again we get

Hγ

ϕ(ψΩ(γ))(ψΩ (γ))
0

⇒ A

completing the proof.

⊓⊔

31

Theorem 2.35. If A ≡ ∃xC(x) is a Σ-sentence such that IKP ⊢ ⇒ A then there is an ordinal
term α < ψΩ(εΩ+1), which we may compute from the derivation, such that

Lα |= A.

Moreover, there is a speciﬁc IRSΩ term s, with | s | < α, which we may compute explicitly from
the IKP derivation, such that

Lα |= C(s).

Proof. Suppose IKP ⊢ ⇒ A for some Σ-sentence A, from Lemma 2.34 we may compute some
1 ≤ m < ω such that

Hγ

ϕ(ψΩ(γ))(ψΩ (γ))
0

⇒ A where γ := ωm(Ω · ωm).

Let α := ϕ(ψΩ(γ))(ψΩ(γ)), applying Boundedness 2.17 we obtain

(2)

Hγ

α

0

⇒ ALα .

Since the derivation (2) contains no instances of (Cut) or (Σ-RefΩ) and the correctness of the
remaining rules within Lα is easily veriﬁed by induction on the derivation, it may be seen that

Lα |= A.

For the second part of the theorem note that it must be the case that the ﬁnal inference in (2) was
(b∃R) and thus by the intuitionistic nature of IRSΩ there must be some s, with | s | < α, such that

(3)

Thus

(4)

Hγ

α

0

⇒ C(s)Lα .

Lα |= C(s).

The remainder of the proof is by checking that each part of the embedding and cut elimination of
⊓⊔
the previous two sections may be carried out eﬀectively, details will appear in [28].

Remark 2.36. In fact Theorem 2.35 can be veriﬁed within IKP, this is not immediately obvious
since we do not have access to induction up to ψΩ(εΩ+1). However one may observe that in an
inﬁnitary proof of the form (3) above, no terms of level higher than α are used. By carrying out the
construction of IRSΩ just using ordinals from B(ωm+1(Ω · ωm)) we get a restricted system, but a
system still capable of carrying out the embedding and cut elimination necessary for the particular
derivation of the sentence A. This can be done inside IKP since we do have access to induction up
to ψΩ(ωm+1(Ω · ωm+1)). It follows that IKP has the set existence property for Σ sentences. More
details will be found [28].

Finally it is also worth pointing out that we can improve on Theorem 2.33. Instead of just
verifying ∆0-Collection in the inﬁnitary system (Lemma 2.32) we could have shown the embedding
result for Σ-Reﬂection. As result we get a new conservativity result.

Theorem 2.37. IKP and IKP + Σ-Reﬂection prove the same Σ-sentences. In particular if IKP ⊢
A with A a Σ-sentence, then IKP ⊢ ∃x Ax.

32

3 The case of IKP(P)

This section provides a relativised ordinal analysis for intuitionistic power Kripke-Platek set theory
IKP(P). The relativised ordinal analysis for the classical version of the theory, KP(P), was carried
out in [27], the work in this section adapts the techniques from that paper to the intuitionistic case.
We begin by deﬁning an inﬁnitary system IRSP
Ω can contain sub
terms of a higher level, or from higher up the Von-Neumann hierarchy in the intended interpretation.
This reﬂects the impredicativity of the power set operation. Next we prove some cut elimination
theorems, allowing us to transform inﬁnite derivations of Σ formulae into inﬁnite derivations with
only power-bounded cut formulae. The following section provides an embedding of IKP(P) into
IRSP

Ω. The ﬁnal section collates these results into a relativised ordinal analysis of IKP(P).

Ω, unlike in IRSΩ the terms in IRSP

3.1 A sequent calculus formulation of IKP(P)

Deﬁnition 3.1. The formulas of IKP(P) are the same as those of IKP except we also allow subset
bounded quantiﬁers of the form

(∀x ⊆ a)A(x)

and (∃x ⊆ a)A(x).

These are treated as quantiﬁers in their own right, not abbreviations.
a ⊆ b is still viewed as an abbreviation for the formula (∀x ∈ a)(x ∈ b)

In contrast, the formula

Quantiﬁers ∀x, ∃x will still be referred to as unbounded, whereas the other quantiﬁers (including
the subset bounded ones) will be referred to as bounded.

A ∆P

0 -formula of IKP(P) is one that contains no unbounded quantiﬁers.

As with IKP, the system IKP(P) derives intuitionistic sequents of the form Γ ⇒ ∆ where at most
one formula can occur in ∆.

The axioms of IKP(P) are the following:

0 –Separation: Γ ⇒ ∃y[(∀x ∈ y)(x ∈ a ∧ B(x)) ∧ (∀x ∈ a)(B(x) → x ∈ y)]

Logical axioms:
Extensionality:
Pair:
Union:
∆P

∆P

0 –Collection:

Set Induction:

Inﬁnity:
Power Set:

0 –formula A.

Γ, A ⇒ A for every ∆P
Γ ⇒ a = b ∧ B(a) → B(b) for every ∆P
Γ ⇒ ∃x[a ∈ x ∧ b ∈ x]
Γ ⇒ ∃x(∀y ∈ a)(∀z ∈ y)(z ∈ x)

0 -formula B(a).

0 -formula B(a).

0 –formula G(a, b).

for every ∆P
Γ ⇒ (∀x ∈ a)∃yG(x, y) → ∃z(∀x ∈ a)(∃y ∈ z)G(x, y)
for every ∆P
Γ ⇒ ∀u [(∀x ∈ u) G(x) → G(u)] → ∀u G(u)
for every formula G(b).
Γ ⇒ ∃x [(∃y ∈ x) y ∈ x ∧ (∀y ∈ x)(∃z ∈ x) y ∈ z].
Γ ⇒ ∃z (∀x ⊆ a)x ∈ z.

The rules of IKP(P) are the same as those of IKP (extended to the new language containing
subset bounded quantiﬁers), together with the following four rules:

33

(pb∃L)

Γ, a ⊆ b ∧ F (a) ⇒ ∆
Γ, (∃x ⊆ b)F (x) ⇒ ∆

(pb∃R)

Γ ⇒ a ⊆ b ∧ F (a)
Γ ⇒ (∃x ⊆ b)F (x)

(pb∀L)

Γ, a ⊆ b → F (a) ⇒ ∆
Γ, (∀x ⊆ b)F (x) ⇒ ∆

(pb∀R)

Γ ⇒ a ⊆ b → F (a)
Γ ⇒ (∀x ⊆ b)F (x)

As usual it is forbidden for the variable a to occur in the conclusion of the rules (pb∃L) and (pb∀R),
such a variable is referred to as the eigenvariable of the inference.

3.2 The inﬁnitary system IRSP
Ω

The purpose of this section is to introduce an inﬁnitary proof system IRSP
will be assumed to be members of BΩ(εΩ+1).

Ω. As before all ordinals

Deﬁnition 3.2. We deﬁne the IRSP
| t |.

Ω terms. To each IRSP

Ω term t we also assign its ordinal level,

1. For each α < Ω, Vα is an IRSP

Ω term with | Vα | = α.

2. For each α < Ω, we have inﬁnitely many free variables aα

0 , aα

1 , aα

2 , ...., with | aα

i | = α.

3. If F (x, ¯y ) is a ∆P

¯s ≡ s1, ..., sn are IRSP
with | [x ∈ Vα | F (x, ¯s )] | := α.

0 -formula of IKP(P) (whose free variables are exactly those indicated) and
Ω term

Ω terms, then the formal expression [x ∈ Vα | F (x, ¯s )] is an IRSP

The IRSP
all free variables indicated and s1, ..., sn are IRSP

Ω formulae are of the form A(s1, ..., sn), where A(a1, ..., an) is a formula of IKP(P) with

Ω terms.

A formula A(s1, ..., sn) of IRSP

Ω is ∆P

0 if A(a1, ..., an) is a ∆P

0 formula of IKP(P).

Ω are the smallest collection containing the ∆P

The ΣP formulae of IRSP
0 -formulae and containing
A ∨ B, A ∧ B, (∀x ∈ s)A, (∃x ∈ s)A, (∀x ⊆ s)A, (∃x ⊆ s)A, ∃xA, ¬C and C → A whenever it
contains A and B and C is a ΠP -formula. The ΠP -formulae are the smallest collection containing
the ∆P
0 formulae and containing A ∨ B, A ∧ B, (∀x ∈ s)A, (∃x ∈ s)A, (∀x ⊆ s)A, (∃x ⊆ s)A, ∀xA,
¬D and D → A whenever it contains A and B and D is a ΣP -formula.

The axioms of IRSP

Ω are:

(A1) Γ, A ⇒ A for A in ∆P
0 .
(A2) Γ ⇒ t = t.
(A3) Γ, s1 = t1, ..., sn = tn, A(s1, ..., sn) ⇒ A(t1, ..., tn) for A(s1, . . . , sn) in ∆P
0 .
(A4) Γ ⇒ s ∈ Vα if | s | < α.
(A5) Γ ⇒ s ⊆ Vα if | s | ≤ α.
(A6) Γ, t ∈ [x ∈ Vα | F (x, ¯s)] ⇒ F (t, ¯s) for F (t, ¯s) is ∆P
for F (t, ¯s) is ∆P
(A7) Γ, F (t, ¯s) ⇒ t ∈ [x ∈ Vα | F (x, ¯s)]

0 and | t | < α.
0 and | t | < α.

34

The inference rules of IRSP

Ω are:

(b∀L)

(b∀R)∞

(b∃L)∞

(b∃R)

(pb∀L)

Γ, s ∈ t → F (s) ⇒ ∆
Γ, (∀x ∈ t)F (x) ⇒ ∆

if | s | < | t |

Γ ⇒ s ∈ t → F (s) for all | s | < | t |
Γ ⇒ (∀x ∈ t)F (x)

Γ, s ∈ t ∧ F (s) ⇒ ∆ for all | s | < | t |
Γ, (∃x ∈ t)F (x) ⇒ ∆

Γ ⇒ s ∈ t ∧ F (s)
Γ ⇒ (∃x ∈ t)F (x)

if | s | < | t |

Γ, s ⊆ t → F (s) ⇒ ∆
Γ, (∀x ⊆ t)F (x) ⇒ ∆

if | s | ≤ | t |

(pb∀R)∞

Γ ⇒ s ⊆ t → F (s) for all | s | ≤ | t |
Γ ⇒ (∀x ⊆ t)F (x)

(pb∃L)∞

Γ, s ⊆ t ∧ F (s) ⇒ ∆ for all | s | ≤ | t |
Γ, (∃x ⊆ t)F (x) ⇒ ∆

(pb∃R)

Γ ⇒ s ⊆ t ∧ F (s)
Γ ⇒ (∃x ⊆ t)F (x)

if | s | ≤ | t |

(∀L)

(∀R)∞

(∃L)∞

(∃R)

(∈ L)∞

(∈ R)

(⊆ L)∞

Γ, F (s) ⇒ ∆

Γ, ∀x F (x) ⇒ ∆

Γ ⇒ F (s) for all s
Γ ⇒ ∀x F (x)

Γ, F (s) ⇒ ∆ for all s
Γ, ∃x F (x) ⇒ ∆

Γ ⇒ F (s)
Γ ⇒ ∃x F (x)

Γ, r ∈ t ∧ r = s ⇒ ∆ for all | r | < | t |

Γ, s ∈ t ⇒ ∆

Γ ⇒ r ∈ t ∧ r = s

Γ, s ∈ t

if | r | < | t |

Γ, r ⊆ t ∧ r = s ⇒ ∆ for all | r | ≤ | t |

Γ, s ⊆ t ⇒ ∆

(⊆ R)

Γ ⇒ r ⊆ t ∧ r = s

Γ ⇒ s ⊆ t

if | r | ≤ | s |

35

(Cut)

Γ, A ⇒ ∆ Γ ⇒ A

Γ ⇒ ∆

(ΣP -Ref )

Γ ⇒ A
Γ ⇒ ∃z Az

if A is a ΣP-formula,

as well as the rules (∧L), (∧R), (∨L), (∨R), (¬L), (¬R), (⊥), (→ L), (→ R) from IRSΩ. As usual
Az results from A by restricting all unbounded quantiﬁers to z.

Deﬁnition 3.3. The rank of a formula is determined as follows.

1. rk(s ∈ t) := max{| s | + 1, | t | + 1}.

2. rk((∃x ∈ t)F (x)) := rk((∀x ∈ t)F (x)) := max{| t |, rk(F (V0)) + 2}.

3. rk((∃x ⊆ t)F (x)) := rk((∀x ⊆ t)F (x)) := max{| t | + 1, rk(F (V0)) + 2}.

4. rk(∃x F (x)) := rk(∀x F (x)) := max{Ω, rk(F (V0)) + 2}.

5. rk(A ∧ B) := rk(A ∨ B) := rk(A → B) := max{rk(A), rk(B)} + 1.

6. rk(¬A) := rk(A) + 1

Note that the deﬁnition of rank for IRSP
Ω formulae is much less complex than for IRSΩ, this is
because we are only aiming for partial cut-elimination for this system. In general it will not be
possible to remove cuts with ∆P
0 cut formulae. Note however that we still have rk(A) < Ω if and
only if A is ∆P
0 .

We also have the following useful lemma.

Lemma 3.4. If A is a formula of IRSP
and A was the result of an IRSP
minor formulae of that inference is strictly less than rk(A).

Ω with rk(A) ≥ Ω (ie. A contains unbounded quantiﬁers),
Ω inference other than (ΣP -Ref ) and (Cut) then the rank of the

Deﬁnition 3.5 (Operator controlled derivability for IRSP
then let

Ω). If A(s1, ..., sn) is a formula of IRSP
Ω

| A(s1, ...sn) | := {| s1 |, ..., | sn |}.

Likewise if Γ ⇒ ∆ is an intuitionistic sequent of IRSP

Ω containing formulas A1, ..., An, we deﬁne

| Γ ⇒ ∆ | := | A1 | ∪ ... ∪ | An |.

Deﬁnition 3.6. Let H be an operator and Γ ⇒ ∆ an intuitionistic sequent of IRSP
deﬁne the relation H

α
ρ Γ ⇒ ∆ by recursion on α.

Ω formulae. We

If Γ ⇒ ∆ is an axiom and | Γ ⇒ ∆ | ∪ {α} ⊆ H, then H

α
ρ Γ ⇒ ∆ .

We require always that | Γ ⇒ ∆ | ∪ {α} ⊆ H where Γ ⇒ ∆ is the sequent in the conclusion, this
condition will not be repeated in the inductive clauses pertaining to the inference rules of IRSP
Ω

36

given below. The column on the right gives the ordinal requirements for each of the inference rules.

(∈ L)∞

(∈ R)

(⊆ L)∞

(⊆ R)

H[r]

αr
ρ Γ, r ∈ t ∧ r = s ⇒ ∆ for all | r | < | t |

H

α
ρ Γ, s ∈ t ⇒ ∆

H

α0
ρ Γ ⇒ r ∈ t ∧ r = s
H

α
ρ Γ ⇒ s ∈ t

H[r]

αr
ρ Γ, r ⊆ t ∧ r = s ⇒ ∆ for all | r | ≤ | t |

H

α
ρ Γ, s ⊆ t ⇒ ∆

H

α0
ρ Γ ⇒ r ⊆ t ∧ r = s
H

α
ρ Γ ⇒ s ⊆ t

| r | ≤ αr < α

α0 < α
| r | < | t |
| r | < α

| r | ≤ αr < α

α0 < α
| r | ≤ | t |
| r | < α

37

(b∀L)

(b∀R)∞

(b∃L)∞

(b∃R)

(pb∀L)

(pb∀R)∞

(pb∃L)∞

(pb∃R)

(∀L)

(∀R)∞

(∃L)∞

(∃R)

H

H

α0
ρ Γ, s ∈ t → A(s) ⇒ ∆
α
ρ Γ, (∀x ∈ t)A(x) ⇒ ∆

H[s]

αs
ρ Γ ⇒ s ∈ t → F (s) for all | s | < | t |

H

α
ρ Γ ⇒ (∀x ∈ t)F (x)

H[s]

αs
ρ Γ, s ∈ t ∧ F (s) ⇒ ∆ for all | s | < | t |

H

α
ρ Γ, (∃x ∈ t)F (x) ⇒ ∆

H

H

α0
ρ Γ ⇒ s ∈ t ∧ A(s)
α
ρ Γ ⇒ (∃x ∈ t)A(x)

H

H

α0
ρ Γ, s ⊆ t → A(s) ⇒ ∆
α
ρ Γ, (∀x ⊆ t)A(x) ⇒ ∆

H[s]

αs
ρ Γ ⇒ s ⊆ t → F (s) for all | s | ≤ | t |

H

α
ρ Γ ⇒ (∀x ⊆ t)F (x)

H[s]

αs
ρ Γ, s ⊆ t ∧ F (s) ⇒ ∆ for all | s | ≤ | t |

H

α
ρ Γ, (∃x ⊆ t)F (x) ⇒ ∆

H

H

α0
ρ Γ ⇒ s ⊆ t ∧ A(s)
α
ρ Γ ⇒ (∃x ⊆ t)A(x)

H

H

α0
ρ Γ, F (s) ⇒ ∆
α
ρ Γ, ∀xF (x) ⇒ ∆

H[s]

αs
ρ Γ ⇒ F (s) for all s
H

α
ρ Γ ⇒ ∀xF (x)

H[s]

αs
ρ Γ, F (s) ⇒ ∆ for all s
H

α
ρ Γ, ∃xF (x) ⇒ ∆

H

H

α0
ρ Γ ⇒ F (s)
α
ρ Γ, ⇒ ∃xF (x)

38

α0 < α
| s | < | t |
| s | < α

| s | ≤ αs < α

| s | ≤ αs < α

α0 < α
| s | < | t |
| s | < α

α0 < α
| s | ≤ | t |
| s | < α

| s | ≤ αs < α

| s | ≤ αs < α

α0 < α
| s | ≤ | t |
| s | < α

α0 + 1 < α
| s | < α

| s | < αs + 1 < α

| s | < αs + 1 < α

α0 + 1 < α
| s | < α

(Cut)

H

(ΣP -Ref )

α0
ρ Γ, B ⇒ ∆
α
ρ Γ ⇒ ∆

H

H

α0
ρ Γ ⇒ B

α0 < α
rk(B) < ρ

H

H

α0
ρ Γ ⇒ A
ρ Γ ⇒ ∃z Az

α

α0 + 1, Ω < α
A is a ΣP -formula

Lastly if Γ ⇒ ∆ is the result of a propositional inference of the form (∧L), (∧R), (∨L), (∨R), (¬L),
α0
ρ Γi ⇒ ∆i (for each i) we
(¬R), (⊥), (→ L) or (→ R), with premise(s) Γi ⇒ ∆i then from H
may conclude H

α
ρ Γ ⇒ ∆ , provided α0 < α.

3.3 Cut elimination for IRSP
Ω

Lemma 3.7 (Weakening and Persistence for IRSP

Ω).
α0
ρ0

i) If Γ0 ⊆ Γ, | Γ | ⊆ H, α0 ≤ α ∈ H, ρ0 ≤ ρ and H

Γ0 ⇒ ∆ then

H

α
ρ Γ ⇒ ∆.

ii) If γ ∈ H and H

α
ρ Γ, ∃xA(x) ⇒ ∆ then H

α
ρ Γ, (∃x ∈ Vγ)A(x) ⇒ ∆ .

iii) If γ ∈ H and H

α
ρ Γ ⇒ ∀xA(x) then H

α
ρ Γ ⇒ (∀x ∈ Vγ)A(x) .

α
ρ Γ, ∃xA(x) ⇒ ∆ .
Proof. All proofs are by induction on α. We show ii), suppose γ ∈ H and H
The interesting case is where ∃xA(x) was the principal formula of the last inference which was
αs
(∃L)∞, in this case we have H[s]
ρ Γ, ∃xA(x), A(s) ⇒ ∆ for each term s with | s | < αs + 1 < α
(If ∃xA(x) was not a side formula we can use part i) to make it one). By the induction hypothesis
we obtain H[s]

αs
ρ Γ, (∃x ∈ Vγ)A(x), A(s) ⇒ ∆ for all | s | < γ. By (∧L) we get

H[s]

αs+1
ρ

Γ, (∃x ∈ Vγ)A(x), s ∈ Vγ ∧ A(s) ⇒ ∆.

Hence we may apply (b∃L)∞ to obtain H

α
ρ Γ, (∃x ∈ Vγ)A(x) ⇒ ∆ as required.

⊓⊔

Lemma 3.8 (Inversions of IRSP

Ω).

i) If H

α
ρ Γ, A ∧ B ⇒ ∆ and rk(A ∧ B) ≥ Ω then H

α
ρ Γ, A, B ⇒ ∆ .

ii) If H

α
ρ Γ ⇒ A ∧ B and rk(A ∧ B) ≥ Ω then H

α
ρ Γ ⇒ A and H

α
ρ Γ ⇒ B .

iii) If H

α
ρ Γ, A ∨ B ⇒ ∆ and rk(A ∨ B) ≥ Ω then H

α
ρ Γ, A ⇒ ∆ and H

α
ρ Γ, B ⇒ ∆ .

iv) If H

α
ρ Γ, A → B ⇒ ∆ and rk(A → B) ≥ Ω then H

α
ρ Γ, B ⇒ ∆ .

v) If H

α
ρ Γ ⇒ A → B and rk(A → B) ≥ Ω then H

α
ρ Γ, A ⇒ B .

vi) If H

α
ρ Γ ⇒ ¬A and rk(A) ≥ Ω then H

α
ρ Γ, A ⇒ .

39

vii) If H
|t|.

α
ρ Γ, (∃x ∈ t)A(x) ⇒ ∆ and rk(A(V0)) ≥ Ω then H[s]

α
ρ Γ, s ∈ t ∧ A(s) ⇒ ∆ for all |s| <

viii) If H

α
ρ Γ ⇒ (∀x ∈ t)A(x) and rk(A(V0)) ≥ Ω then H[s]

α
ρ Γ ⇒ s ∈ t → A(s) for all |s| < |t|.

ix) If H
|t|.

α
ρ Γ, (∃x ⊆ t)A(x) ⇒ ∆ and rk(A(V0)) ≥ Ω then H[s]

α
ρ Γ, s ⊆ t ∧ A(s) ⇒ ∆ for all |s| ≤

x) If H

α
ρ Γ ⇒ (∀x ⊆ t)A(x) and rk(A(V0)) ≥ Ω then H[s]

α
ρ Γ ⇒ s ⊆ t → A(s) for all |s| ≤ |t|.

xi) If H

α
ρ Γ, ∃xA(x) ⇒ ∆ then H[s]

α
ρ Γ, F (s) ⇒ ∆ for all s.

xii) If H

α
ρ Γ, ⇒ ∀xA(x) then H[s]

α
ρ Γ ⇒ F (s) for all s.

Proof. The proof is by induction on α and many parts are standard for many intuitionistic systems
of a similar nature. We show viii) and ix).

α
ρ Γ ⇒ (∀x ∈ t)A(x) and rk(A(V0)) ≥ Ω. Since A must contain an unbounded
viii) Suppose that H
quantiﬁer, the sequent Γ ⇒ (∀x ∈ t)A(x) cannot be an axiom. If the last inference was not (b∀R)∞
then we may apply the induction hypothesis to the premises of that inference, and then the same
inference again. Finally suppose the last inference was (b∀R)∞ so we have

H[s]

αs
ρ Γ ⇒ s ∈ t → A(s)

for all | s | < | t |, with αs < α.

Applying weakening completes the proof of this case.

α
ix) Suppose that H
ρ Γ, (∃x ⊆ t)A(x) ⇒ ∆ and rk(A(V0)) ≥ Ω. Since A(x) contains an un-
bounded quantiﬁer ∃x ⊆ t)A(x) cannot be the active part of an axiom, thus if Γ, (∃x ⊆ t)A(x) ⇒ ∆
is an axiom then so is Γ, s ⊆ t ∧ A(x) ⇒ ∆ for any | s | ≤ | t |. As in viii) the remaining interesting
case is where (∃x ⊆ t)A(x) was the principal formula of the last inference, which was (pb∃L)∞. In
this case we have

H[s]

αs
ρ Γ, (∃x ⊆ t)A(x), s ⊆ t ∧ A(s) ⇒ ∆ for all | s | ≤ | t | with αs < α.

Now applying the induction hypothesis yields H[s]
weakening to complete the proof of this case.

αs
ρ Γ, s ⊆ t ∧ A(s) ⇒ ∆ , to which we may apply
⊓⊔

Lemma 3.9 (Reduction .). If rk(C) := ρ > Ω, H

α
ρ Γ, C ⇒ ∆ and H

β
ρ Ξ ⇒ C then

H

α#α#β#β
ρ

Γ, Ξ ⇒ ∆

Proof. The proof is by induction on α#α#β#β. The interesting case is where C was the princi-
pal formula of both ﬁnal inferences, notice that in this case the last inference cannot have been
(ΣP -Ref ) since rk(C) > Ω and the conclusion of an application of (ΣP -Ref ) always has rank Ω.
Thus the rest of the proof follows in the usual way by the symmetry of the rules and Lemmas 3.4

40

and 3.8, we treat the case where C ≡ (∀x ⊆ t)A(x) and C was the principal formula of both last
inferences, so we have

(1)

(2)

(3)

(4)

H

H

H

α
ρ Γ, C ⇒ ∆
β
ρ Ξ ⇒ C
α0
ρ Γ, C, s ⊆ t → A(s) ⇒ ∆

H[p]

βp
ρ Ξ ⇒ p ⊆ t → A(p)

with α0, | s | < α and | s | ≤ | t |.

for all | p | ≤ | t | with | p | ≤ αp < α.

From (3) we know that s ∈ H, so from (4) we get

(5)

H

βs
ρ Ξ ⇒ s ⊆ t → A(s) .

Applying the induction hypothesis to (2) and (3) yields

(6)

H

α0#α0#β#β
ρ

Γ, s ⊆ t → A(s) ⇒ ∆ .

Finally by applying (Cut) to (5) and (6), whilst noting that by Lemma 3.4 rk(s ⊆ t → A(s)) < ρ,
we obtain

H

α#α#β#β
ρ

Γ, Ξ ⇒ ∆

as required.

⊓⊔

Lemma 3.10. If H

α

Ω+n+1

Γ ⇒ ∆ then H

ωα

Ω+n

Γ ⇒ ∆ for any n < ω.

Proof. The proof is by induction on α, suppose H
Γ ⇒ ∆ . If Γ ⇒ ∆ is an axiom there is
nothing to show. If Γ ⇒ ∆ was the result of an inference other that (Cut) or a cut with cut-rank
< Ω + n then we may apply the induction hypothesis to the premises of that inference and then
the same inference again. So suppose the last inference was (Cut) with cut-formula C, and that
rk(C) = Ω + n. So we have

Ω+n+1

α

(1)

(2)

H

H

α0
Ω+n+1
α1
Ω+n+1

Γ, C ⇒ ∆

Γ ⇒ C

with α0 < α.

with α1 < α.

Applying the induction hypothesis to (1) and (2) gives

(3)

(4)

H

H

ωα0

Ω+n
ωα1

Ω+n

Γ, C ⇒ ∆

Γ ⇒ C .

Now applying the Reduction Lemma 3.9 to (3) and (4) provides us with

H

ωα0 #ωα0 #ωα1 #ωα1

Ω+n

.

It remains to note that ωα0#ωα0#ωα1#ωα1 < ωα since ωα is additive principal, so we can complete
⊓⊔
the proof by weakening.

41

Theorem 3.11 (Partial cut elimination for IRSP
where ω0(β) := β and ωk+1(β) := ωωk(β).

Ω). If H

α

Ω+n+1

Γ ⇒ ∆ then H

ωn(α)

Ω+1

Γ ⇒ ∆

Proof. The proof uses an easy induction on n and the previous Lemma.

⊓⊔

Note that 3.11 is much weaker than the full predicative cut elimination result we obtained for IRSΩ
(Theorem 2.16), this is because in general we cannot eliminate cuts with ∆P
0 cut-formulae from
IRSP

Ω derivations.

Lemma 3.12 (Boundedness). If A is a ΣP -formula, B is a ΠP -formula, α ≤ β < Ω and β ∈ H
then

i) If H

α
ρ Γ ⇒ A then H

α
ρ Γ ⇒ AVβ .

ii) If H

α
ρ Γ, B ⇒ ∆ then H

α
ρ Γ, B Vβ ⇒ ∆ .

Proof. The proofs are by induction on α, we show ii), the proof of i) is similar. As with Lemma
2.17 the only interesting case is where B was the principal formula of the last inference and B is
of the form ∀xC(x). So we have

H

α0
ρ Γ, B, C(s) ⇒ ∆ for some |s| < α with α0 + 1 < α.

Using the induction hypothesis we obtain

H

α0
ρ Γ, B Vβ , C(s) ⇒ ∆ for some |s| < α with α0 + 1 < α.

Now since Γ, B Vβ ⇒ s ∈ Vβ is an axiom, we have H

α0
ρ Γ, B Vβ ⇒ s ∈ Vβ , so by (→ L) we obtain

H

α0+1
ρ

Γ, B Vβ , s ∈ Vβ → C(s) ⇒ ∆ for some |s| < α with α0 + 1 < α.

Finally an application of (b∀L) yields

H

α
ρ Γ, B Vβ ⇒ ∆

as required.

⊓⊔

Theorem 3.13 (Collapsing). Suppose that η ∈ Hη, ∆ is a set of at most one ΣP-formula and Γ a
set of ΠP -formulae. Then

Hη

α

Ω+1

Γ ⇒ ∆ implies H ˆα

ψΩ(ˆα)

ψΩ(ˆα)

Γ ⇒ ∆.

Here ˆβ = η + ωΩ+β and the operators Hξ are those deﬁned in Deﬁnition 2.18.

Proof. Note ﬁrst that from η ∈ Hη and Lemma 2.20 we obtain

(1)

ˆα, ψΩ(ˆα) ∈ H ˆα.

The proof is by induction on α.

42

Case 0. If Γ ⇒ ∆ is an axiom then the result follows immediately from (1).

Case 1. If the last inference was propositional then the assertion follows easily by applying the
induction hypothesis and then the same inference again.

Case 2. Suppose the last inference was (pb∀R)∞, then ∆ = {(∀x ⊆ t)F (x)} and

Hη[p]

αp

Ω+1

Γ ⇒ p ⊆ t → F (p)

for all | p | ≤ | t | with αp < α.

Since | t | ∈ Hη(∅) = BΩ(η + 1) and | t | < Ω, we have | t | < ψΩ(η + 1), thus | p | ∈ Hη for all
| p | ≤ | t |. So we have

Hη

Γ ⇒ p ⊆ t → F (p) .

αp

Ω+1

Since p ⊆ t → F (p) is also in ΣP we may apply the induction hypothesis to obtain

H ˆαp

ψΩ( ˆαp)

ψΩ( ˆαp)

Γ ⇒ p ⊆ t → F (p)

for all | p | ≤ | t | with αp < α.

Now noting that ψΩ( ˆαp) + 1 < ψΩ(ˆα), by applying (pb∀R)∞ we obtain the desired result. The cases
where the last inference was (b∀R)∞, (pb∃L)∞, (b∃L)∞, (∈ L)∞ or (⊆ L)∞ are similar.

Case 3. Now suppose the last inference was (pb∀L), so (∀x ⊆ t)F (x) ∈ Γ and

Hη

α0
Ω+1

Γ, s ⊆ t → F (s) ⇒ ∆ for some | s | ≤ | t | with α0 < α.

Noting that s ⊆ t → F (s) is in ΠP , too, we may apply the induction hypothesis to obtain

H ˆα0

ψΩ( ˆα0)

ψΩ( ˆα0)

Γ, s ⊆ t → F (s) ⇒ ∆

to which we may apply (pb∀L) to complete this case. The cases where the last inference was (b∀L),
(pb∃R), (b∃R), (∈ R) or (⊆ R) are similar.

Case 4. Now suppose the last inference was (∀L), so ∀xA(x) ∈ Γ and

Hη

α0
Ω+1

Γ, F (s) ⇒ ∆ for some | s | < α and α0 < α.

Since F (s) is ΠP we may apply the induction hypothesis to obtain

H ˆα0

ψΩ( ˆα0)

ψΩ( ˆα0)

Γ, F (s) ⇒ ∆ .

Now since | s | ∈ Hη = BΩ(η + 1) we have | s | < ψΩ(η + 1) < ψΩ(ˆα). So we may apply (∀L) to
complete the case. The case where the last inference was (∃R) is similar.

The rest of the proof is completely analogous to that of Theorem 2.21, using boundedness for IRSP
Ω
⊓⊔
(3.12) instead of for IRSΩ.

43

3.4 Embedding IKP(P) into IRSP
Ω

Deﬁnition 3.14. As in the embedding section for the case of IKP, (cid:13) Γ ⇒ ∆ will be used to
abbreviate that

H[Γ ⇒ ∆]

0

no(Γ⇒∆)

Γ ⇒ ∆ holds for any operator H.

Also (cid:13)ξ

ρ Γ ⇒ ∆ will be used to abbreviate that

H[Γ ⇒ ∆]

no(Γ⇒∆)#ξ
ρ

Γ ⇒ ∆ holds for any operator H.

Only this time we are referring to operator controlled derivability in IRSP
Ω.

Lemma 3.15. For any formula A

(cid:13) A ⇒ A .

Proof. We proceed by induction on the complexity of A. If A is ∆P

0 then this is axiom (A1) of IRSP
Ω.

Suppose A is of the form ∃xF (x). Let αs = | s | + no(F (s) ⇒ F (s)) and α = no(A ⇒ A), note that
| s | < αs + 1 < αs + 2 < α for all s. By the induction hypothesis we have

H[F (s), s]

αs
0

Now using (∃R) we get

F (s) ⇒ F (s)

for all terms s and for an arbitrary operator H.

H[F (s), s]

αs+1
0

F (s) ⇒ ∃xF (x) .

Finally since H[F (s), s](∅) ⊆ H[∃xF (x)][s](∅) we may apply (∃L)∞ to obtain the desired result.
⊓⊔
The other cases are similar.

Lemma 3.16 (Extensionality). For any formula A and any terms s1, ..., sn, t1, ..., tn

(cid:13) s1 = t1, ..., sn = tn, A(s1, ..., sn) ⇒ A(t1, ..., tn).

Proof. If A is ∆P
note that rk(A(s1, ..., sn) = rk(A(t1, ..., tn) since A is not ∆P
0 .

0 then this is an axiom. The remainder of the proof is by induction on rk(A(s1, ..., sn)),

Case 1. Suppose A(s1, ..., sn) ≡ ∃xB(x, s1, ..., sn), we know that rk(B(r, s1, ..., sn)) < rk(A(s1, ..., sn))
for all r by Lemma 3.4, so by induction hypothesis we have

(cid:13) s1 = t1, ..., sn = tn, B(r, s1, ..., sn) ⇒ B(r, t1, ..., tn)

for all terms r.

Now successively applying (∃R) and then (∃L)∞ yields the desired result.

Case 2. Now suppose A(s1, ..., sn) ≡ (∃x ⊆ si)B(x, s1, ..., sn). Since A is not ∆P
0 , B must contain an
unbounded quantiﬁer, and thus by Lemma 3.4 Ω ≤ rk(r ⊆ si ∧ B(r, s1, ..., sn)) < rk(A(s1, ..., sn))
for any | r | ≤ | si |, thus by induction hypothesis we have

(cid:13) s1 = t1, ..., sn = tn, r ⊆ si ∧ B(r, s1, ..., sn) ⇒ r ⊆ ti ∧ B(r, t1, ..., tn)

for all | r | ≤ | si |.

Thus successively applying (pb∃R) and then (pb∃L)∞ yields the desired result. The other cases are
⊓⊔
similar.

44

Lemma 3.17 (∆P

0 -Collection). For any ∆P

0 formula F

(cid:13)⇒ (∀x ∈ s)∃yF (x, y) → ∃z(∀x ∈ s)(∃y ∈ z)F (x, y).

Proof. Lemma 3.15 provides us with

(cid:13) (∀x ∈ s)∃yF (x, y) ⇒ (∀x ∈ s)∃yF (x, y) .

Noting that (∀x ∈ s)∃yF (x, y) is a ΣP formula and that rk((∀x ∈ s)∃yF (x, y)) = ωΩ+2 we may
apply (ΣP -Ref ) to obtain

¯H

ωΩ+2·2+2
0

(∀x ∈ s)∃yF (x, y) ⇒ ∃z(∀x ∈ s)(∃y ∈ z)F (x, y)

where ¯H = H[(∀x ∈ s)∃yF (x, y)] and H is an arbitrary operator. Now applying (→ R) we get

¯H

ωΩ+2·2+3
0

⇒ (∀x ∈ s)∃yF (x, y) → ∃z(∀x ∈ s)(∃y ∈ z)F (x, y).

It remains to note that ωΩ+2 · 2 + 3 < ωΩ+3 = no((⇒ ∀x ∈ s)∃yF (x, y) → ∃z(∀x ∈ s)(∃y ∈
⊓⊔
z)F (x, y)) to see that the result is veriﬁed.

Lemma 3.18 (Set Induction). For any formula F

(cid:13)⇒ ∀x[(∀y ∈ x)F (y) → F (x)] → ∀xF (x).

Proof. Let H be an arbitrary operator and let A := ∀x[(∀y ∈ x)F (y) → F (x)]. First we prove the
following

Claim: H[A, s]

ωrk(A)#ω| s |+1
0

A ⇒ F (s)

for all terms s.

The claim is proved by induction on | s |. By the induction hypothesis we have

H[A, t]

ωrk(A)#ω| t |+1
0

A ⇒ F (t)

for all | t | < | s |.

Using weakening and then (→ R) we get

H[A, s, t]

ωrk(A)#ω| t |+1+1
0

A ⇒ t ∈ s → F (t)

for all | t | < | s |.

Hence by (b∀R)∞ we get

H[A, s]

ωrk(A)#ω| s |+2
0

A ⇒ (∀x ∈ s)F (x)

(the extra +2 is needed when | s | is not a limit). Now let ηs := ωrk(A)#ω| s | + 2. By Lemma 3.15
we have H[A, s]

F (s) ⇒ F (s) , so by (→ L) we get

ηs

0

H[A, s]

ηs+1

0

A, (∀y ∈ s)F (y) → F (s) ⇒ F (s) .

Finally by applying (∀L) we get

H[A, s]

ηs+3
0

A ⇒ F (s) ,

since ηs + 3 < ωrk(A)#ω| s |+1 the claim is veriﬁed. Now by applying (∀R)∞ we deduce from the
claim that

H[A]

ωrk(A)+Ω
0

A ⇒ ∀xF (x) .

Hence by (→ R) we obtain the desired result.

⊓⊔

45

Lemma 3.19 (Inﬁnity). For any operator H we have

H

ω+2
0

⇒ ∃x[(∃y ∈ x)(y ∈ x) ∧ (∀y ∈ x)(∃z ∈ x)(y ∈ z)]

Proof. First note that for any | s | < α we have H
n < ω, we have the following derivation in IRSP
Ω:

0

0

s ∈ Vα by virtue of axiom (A4). Let | s | =

H

0

0

⇒ Vn+1 ∈ Vω

H

0

0

⇒ s ∈ Vn+1

(∧R)

H

H

H

H

(b∃R)

(→ R)

(b∀R)∞

(∧R)

1

0
n+2
0
n+3
0
ω

0

⇒ Vn+1 ∈ Vω ∧ s ∈ Vn+1

⇒ (∃z ∈ Vω)(s ∈ z)

⇒ s ∈ Vω → (∃z ∈ Vω)(s ∈ z)

⇒ (∀y ∈ Vω)(∃z ∈ Vω)(y ∈ z)

(∧R)

(b∃R)

H

H

H

0

0
1

0
2

0

⇒ V0 ∈ Vω

⇒ V0 ∈ Vω ∧ V0 ∈ Vω

⇒ (∃z ∈ Vω)(z ∈ Vω)

(∃R)

H

H

ω+1
0
ω+2
0

⇒ (∀y ∈ Vω)(∃z ∈ Vω)(y ∈ z) ∧ (∃z ∈ Vω)(z ∈ Vω)

⇒ ∃x[(∀y ∈ x)(∃z ∈ x)(y ∈ z) ∧ (∃z ∈ x)(z ∈ x)]

⊓⊔

Lemma 3.20 (∆P
ables indicated, r, ¯s := s1, ..., sn are IRSP

0 -Separation). If A(a, b, c1, ..., cn) is a ∆P

Ω terms and H is an arbitrary operator then:

0 -formula of IKP(P) with all free vari-

H[r, ¯s]

α+7
ρ ⇒ ∃y[(∀x ∈ y)(x ∈ r ∧ A(x, r, ¯s)) ∧ (∀x ∈ r)(A(x, r, ¯s) → x ∈ y)]

where α := | r | and ρ := max{| r |, | s1 |, ..., | sn |} + ω.

Proof. First we deﬁne

p := [x ∈ Vα | x ∈ r ∧ A(x, r, ¯s)]

and

¯H := H[r, ¯s].

For t any term with | t | < α the following are derivations in IRSP

Ω, ﬁrst we have:

¯H

(∧R)

0

¯H

1

0

(cut)

Next we have:

Axiom (A1)
0

t ∈ r ⇒ t ∈ r

Axiom (A1)
0

¯H

0

A(t, r, ¯s) ⇒ A(t, r, ¯s)

Axiom (A7)

t ∈ r, A(t, r, ¯s) ⇒ t ∈ r ∧ A(t, r, ¯s)

0

¯H

t ∈ r ∧ A(t, r, ¯s) ⇒ t ∈ p

¯H

¯H

0
2
ρ t ∈ r, A(t, r, ¯s) ⇒ t ∈ p
3
ρ t ∈ r ⇒ A(t, r, ¯s) → t ∈ p
4
ρ ⇒ t ∈ r → (A(t, r, ¯s) → t ∈ p)

(→ R)

(→ R)

(b∀R)∞

¯H
¯H α+5

ρ ⇒ (∀x ∈ r)(A(x, r, ¯s) → x ∈ p)

46

(→ R)

(b∀R)∞

¯H

¯H

¯H

0

0
1

0
α+2
0

Axiom (A6)

t ∈ p ⇒ t ∈ r ∧ A(t, r, ¯s)

⇒ t ∈ p → t ∈ r ∧ A(t, r, ¯s)

⇒ (∀x ∈ p)(x ∈ r ∧ A(x, r, ¯s))

Now by applying (∧R) followed by (∃R) to the conclusions of these two derivations we get

¯H

α+7
ρ ⇒ ∃y[(∀x ∈ y)(x ∈ r ∧ A(x, r, ¯s)) ∧ (∀x ∈ r)(A(x, r, ¯s) → x ∈ y)]

as required.

Lemma 3.21 (Pair). For any operator H and any terms s and t we have

H[s, t]

α+2
0

⇒ ∃z(s ∈ z ∧ t ∈ z)

Where α := max(| s |, | t |) + 1.

Proof. The following is a derivation in IRSP
Ω:

Axiom (A4)

Axiom (A4)

H[s, t]

0

0

(∧R)

⇒ s ∈ Vα

H[s, t]

0

0

⇒ t ∈ Vα

(∃R)

H[s, t]

H[s, t]

1

0
α+2
0

⇒ s ∈ Vα ∧ t ∈ Vα

⇒ ∃z(s ∈ z ∧ t ∈ z)

Lemma 3.22 (Union). For any operator H and any term s we have

H[s]

β+5

0

⇒ ∃z(∀y ∈ s)(∀x ∈ y)(x ∈ z)

where β = | s |.

Proof. Let r and t be terms such that | r | < | t | < β, we have the following derivation in IRSP
Ω:

H[s, t, r]

H[s, t, r]

(→ R)

(b∀R)∞

H[s, t]

H[s, t]

(→ R)

(b∀R)∞

(∃R)

H[s]

H[s]

0

0
1

0
β+2

0
β+3

0
β+4

0
β+5

0

Axiom (A4)

t ∈ s, r ∈ t ⇒ r ∈ Vβ

t ∈ s ⇒ r ∈ t → r ∈ Vβ

t ∈ s ⇒ (∀x ∈ t)(x ∈ Vβ)

⇒ t ∈ s → (∀x ∈ t)(x ∈ Vβ)

⇒ (∀y ∈ s)(∀x ∈ y)(x ∈ Vβ)

⇒ ∃z(∀y ∈ s)(∀x ∈ y)(x ∈ z)

47

⊓⊔

⊓⊔

⊓⊔

Lemma 3.23 (Powerset). For any operator H and any term s we have

H[s]

α+3
0

⇒ ∃z(∀x ⊆ s)(x ∈ z)

where α = | s |.

Proof. Let t be any term with | t | < α, we have the following derivation in IRSP
Ω:

(→ R)

(pb∀R)∞

(∃R)

0

0
1

H[s, t]

H[s, t]

0
α+2
0
α+3
0

H[s]

H[s]

Axiom (A4)

t ⊆ s ⇒ t ∈ Vα+1

⇒ t ⊆ s → t ∈ Vα+1

⇒ (∀x ⊆ s)(x ∈ Vα+1)

⇒ ∃z(∀x ⊆ s)(x ∈ z)

⊓⊔

Theorem 3.24. If IKP(P) ⊢ Γ(¯a) ⇒ ∆(¯a) where Γ(¯a) ⇒ ∆(¯a) is an intuitionistic sequent
containing exactly the free variables ¯a = a1, ..., an, then there exists an m < ω (which we may
calculate from the derivation) such that

H[¯s]

Ω·ωm
Ω+m

Γ(¯s) ⇒ ∆(¯s)

for any operator H and any IRSP

Ω terms ¯s = s1, ..., sn.
Ω formulas is always < Ω+ω and thus the norm of IRSP

Proof. Note that the rank of IRSP
Ω sequents
is always < ωΩ+ω = Ω · ωω. The proof is by induction on the IKP(P) derivation. If Γ(¯a) ⇒ ∆(¯b)
is an axiom of IKP(P) then the result follows by one of Lemmas 3.15, 3.16 3.17, 3.18, 3.19, 3.20,
3.21, 3.22 and 3.23. Let ¯H := H[¯s].

Case 1. Suppose the last inference of the IKP(P) derivation was (pb∃L) then (∃x ⊆ ai)F (x) ∈ Γ(¯a)
and from the induction hypothesis we obtain a k such that

¯H[p]

Ω·ωk
Ω+k

Γ(¯s), p ⊆ si ∧ F (p) ⇒ ∆(¯s)

for all | p | ≤ | si | (using weakening if necessary). Thus we may apply (pb∃L)∞ to obtain the desired
result.

Case 2. Now suppose the last inference was (pb∃R) then ∆(¯a) = {(∃x ⊆ ai)F (x)} and we are in
the following situation in IKP(P):

2.1 If c is not a member of ¯a then by the induction hypothesis we have a k < ω such that

(pb∃R)

⊢ Γ(¯a) ⇒ c ⊆ ai ∧ F (c)
⊢ Γ(¯a) ⇒ (∃x ⊆ ai)F (x)

¯H

Ω·ωk

Ω+k

Γ(¯s) ⇒ V0 ⊆ si ∧ F (V0) .

48

Hence we can apply (pb∃R) to complete this case.

2.2 Now suppose c is a member of ¯a for simplicity let us suppose that c = a1. Inductively we can
ﬁnd a k < ω such that

(1)

Next we verify the following

¯H

Ω·ωk

Ω+k

Γ(¯s) ⇒ s1 ⊆ si ∧ F (s1) .

(2)

claim: (cid:13)ω Γ(¯s), s1 ⊆ si ∧ F (s1) ⇒ (∃x ⊆ si)F (x).

Owing to axiom (A1) we have

(3)

¯H[r]

0

0

r ⊆ si ⇒ r ⊆ si

for all | r | ≤ | si |.

Also by Lemma 3.16 we have

(4)

(cid:13) Γ[¯s], r = s1, F (s1) ⇒ F (r)

for all | r | ≤ | si |.

Now let γr = no(Γ[¯s], r = s1, F (s1) ⇒ F (r)). Applying (∧R) to (3) and (4) provides

¯H[r]

γr+1

0

Γ(¯s), r ⊆ si, r = s1, F (s1) ⇒ r ⊆ si ∧ F (r) .

Using (pb∃R) we may conclude

¯H[r]

γr+2

0

Γ(¯s), r ⊆ si, r = s1, F (s1) ⇒ (∃x ⊆ si)F (x) .

Now two applications of (∧L) gives us

¯H[r]

γr+4

0

Γ(¯s), r ⊆ si ∧ r = s1, F (s1) ⇒ (∃x ⊆ si)F (x) .

Now applying (⊆ L)∞ provides

¯H

γ+5

0

Γ(¯s), s1 ⊆ si, F (s1) ⇒ (∃x ⊆ si)F (x)

where γ = sup| r |≤| si | γr. Finally, by applying (∧L) a further two times we can conclude

¯H

γ+7

0

Γ(¯s), s1 ⊆ si ∧ F (s1) ⇒ (∃x ⊆ si)F (x) .

Via some ordinal arithmetic it can be observed that

γ + 7 ≤ no(Γ(¯s), s1 ⊆ si ∧ F (s1) ⇒ (∃x ⊆ si)F (x))#ω,

so the claim is veriﬁed.

To complete this case we may now apply (Cut) to (1) and (2).

All other cases are similar to those above, or may be treated in a similar manner to Theorem
⊓⊔
2.33.

49

3.5 A relativised ordinal analysis of IKP(P)

A major diﬀerence to the case of IKP is that we don’t immediately have the soundness of cut-
reduced IRSP
Ω derivations of ΣP-formulae within the appropriate segment of the Von-Neumann
Hierarchy. This is partly due to the fact that we don’t have a term for each element of the
hierarchy (this can be seen from a simple cardinality argument). In fact we do still have soundness
for certain derivations within VψΩ(εΩ+1), which is demonstrated in the next lemma, where we must
make essential use of the free variables in IRSP
Ω. First we need the notion of an assignment. Let
V ARP be the set of free variables of IRSP

Ω. A variable assignment is a function

such that v(aα

i ) ∈ Vα+1 for each i. v canonically lifts to all terms as follows

v : V ARP −→ VψΩ(εΩ+1)

v({x ∈ Vα | F (x, s1, ..., sn)}) = {x ∈ Vα |F (x, v(s1), ..., v(sn))}.

v(Vα) = Vα

Moreover it can be seen that v(s) ∈ V| s |+1 and thus v(s) ∈ VψΩ(εΩ+1) for all terms s.

Theorem 3.25 (Soundness for IRSP
max{rk(A) |A ∈ Γ} ≤ Ω, ∆[s1, ..., sn] a set containing at most one ΣP formula and

Ω). Suppose Γ[s1, ..., sn] is a ﬁnite set of ΠP formulae with

H

α
ρ Γ[¯s] ⇒ ∆[¯s]

for some operator H and some α, ρ < Ω.

Then for any assignment v,

VψΩ(εΩ+1) |= ^ Γ[v(s1), ..., v(sn)] → _ ∆[v(s1), ..., v(sn)]

where V Γ and W ∆ stand for the conjunction of formulas in Γ and the disjunction of formulas in
∆ respectively, by convention V ∅ = ⊤ and W ∅ = ⊥.
Proof. The proof is by induction on α. Note that the derivation H
inferences of the form (∀R)∞, (∃L)∞ or (ΣP -Ref ) and all cuts have ∆P
of IRSP
Ω can be observed to be sound with respect to the interpretation.

α
ρ Γ[¯s] ⇒ ∆[¯s] contains no
0 cut formulae. All axioms

First we treat the case where the last inference was (pb∀L) so we have

H

α0
ρ Γ[¯s], t ⊆ si → F (t, ¯s) ⇒ ∆[¯s]

for some α0, | t | < α, with | t | ≤ | si |.

Since max{rk(A) | A ∈ Γ} ≤ Ω, it follows that t ⊆ si → F (t, ¯s) is a ∆P
the induction hypothesis to obtain

0 formula. So we may apply

VψΩ(εΩ+1) |= ^ Γ[v(¯s)] ∧ [v(t) ⊆ v(si) → F (v(t), v(¯s))] → _ ∆[v(¯s)],

where v(¯s) := v(s1), ..., v(sn). From here the desired result follows by regular logical semantics.

Now suppose the last inference was (pb∀R)∞, so we have

(1)

H

αt
ρ Γ[¯s] ⇒ t ⊆ si → F (t, ¯s)

for all | t | ≤ | si | with αt < α.

50

In particular this means we have

(2)

H

α0
ρ Γ[¯s] ⇒ aβ

j ⊆ si → F (aβ

j , ¯s)

for some α0 < α.

Here β := | si | and j is chosen such that aβ
contains an unbounded quantiﬁer we may use inversion for IRSP

j does not occur in any of the terms s1, ..., sn. If F

Ω 3.8v) to obtain

(3)

H

α0
ρ Γ[¯s], aβ

j ⊆ si ⇒ F (aβ

j , ¯s)

for some α0 < α.

So we may apply the induction hypothesis to get

(4)

VψΩ(εΩ+1) |= ^ Γ[v(¯s)], v(aβ

j ) ⊆ v(si) → F (v(aβ

j ), v(¯s))

for all variable assignments v. Thus by the choice of aβ

j we have

(5)

VψΩ(εΩ+1) |= ^ Γ[v(¯s)] → (∀x ⊆ v(si))F (x, v(¯s))

as required. If F is ∆P

0 then we may immediately apply the induction hypothesis to (2) to obtain

(6)

VψΩ(εΩ+1) |= ^ Γ[v(¯s)] → [v(aβ

j ) ⊆ v(si) → F (v(aβ

j ), v(¯s))]

for all variable assignments v, again by the choice of aβ
cases may be treated in a similar manner to the two above.

i we obtain the desired result. All other
⊓⊔

Lemma 3.26. Suppose IKP(P) ⊢ ⇒ A for some ΣP sentence A, then there is an m < ω, which
we may compute from the derivation, such that

Hσ

ψΩ(σ)

ψΩ(σ)

⇒ A where σ := ωm(Ω · ωm).

Proof. Suppose IKP(P) ⊢ ⇒ A for some ΣP sentence A, then by Theorem 3.24 we can explicitly
ﬁnd some m < ω such that

H0

Ω·ωm
Ω+m

⇒ A .

Applying Partial cut elimination 3.11 we have

H0

ωm−1(Ω·ωm)
Ω+1

⇒ A .

Now using Collapsing 3.13 we obtain

Hσ

ψΩ(σ)

ψΩ(σ)

⇒ A where σ := ωm(Ω · ωm),

completing the proof.

⊓⊔

Note that we cannot eliminate all cuts from the derivation since we don’t have full predicative cut
elimination for IRSP

Ω as we do for IRSΩ.

51

Theorem 3.27. If A is a ΣP -sentence and IKP(P) ⊢ ⇒ A then there is some ordinal term
α < ψΩ(εΩ+1), which we may compute from the derivation, such that

Vα |= A.

Proof. From Lemma 3.26 we obtain some m < ω such that

(1)

Hσ

ψΩ(σ)

ψΩ(σ)

⇒ A where σ := ωm(Ω · ωm).

Let α := ψΩ(σ). Applying Boundedness 3.12 to (1) we obtain

(2)

Hσ

α
α ⇒ AVα .

Now applying Theorem 3.25 to (2) we obtain

and thus

as required.

VψΩ(εΩ+1) |= AVα

Vα |= A

⊓⊔

Remark 3.28. Suppose A ≡ ∃xC(x) is a ΣP sentence and IKP(P) ⊢ ⇒ A. As well as the ordinal
term α given by Theorem 3.27, it is possible to determine (making essential use of the intuitionistic
nature of IRSP

Ω) a term s, with | s | < α, such that

Vα |= C(s).

This proof is somewhat more complex than in the case of IKP since the proof tree corresponding
to (2) above can still contain cuts with ∆P

0 cut formulae.

Moreover, in order to show that IKP(P) has the existence property, the embedding and cut elim-
ination for a given ﬁnite derivation of a ΣP sentence, needs to be carried out inside IKP(P). In
order to do this it needs to be shown that from the ﬁnite derivation we can calculate some ordinal
term γ < εΩ+1 such that the embedding and cut elimination for that derivation can still be per-
formed inside IRSP

Ω with the term structure restricted to B(γ).

These proofs will appear in [28].

Like in the case of IKP we also arrive at a conservativity result.

Theorem 3.29. IKP(P) + ΣP -Reﬂection is conservative over IKP(P) for ΣP -sentences.

4 The case of IKP(E)

This ﬁnal section provides a relativised ordinal analysis for intuitionistic exponentiation Kripke-
Platek set theory IKP(E). Given sets a and b, set-exponentiation allows the formation of the
set ab, of all functions from a to b. A problem that presents itself in this case is that it is not

52

clear how to formulate a term structure in such a way that we can read oﬀ a terms level in the
pertinent ‘exponentiation hierarchy’ from that terms syntactic structure.
Instead we work with
a term structure similar to that used in IRSP
Ω, and a terms level becomes a dynamic property
inside the inﬁnitary system. Making this work in a system for which we can prove all the necessary
embedding and cut-elimination theorems turned out to be a major technical hurdle. The end result
of the section is a characterisation of IKP(E) in terms of provable height of the exponentiation
hierarchy, this machinery will also be used in a later paper by Rathjen [28], to show that CZFE
has the full existence property.

4.1 A sequent calculus formulation of IKP(E)

Deﬁnition 4.1. The formulas of IKP(E) are the same as those of IKP except we also allow
exponentiation bounded quantiﬁers of the form

(∀x ∈ ab)A(x)

and (∃x ∈ ab)A(x).

These are treated as quantiﬁers in their own right, not abbreviations. The formula ”fun(x, a, b)” is
deﬁned below. It’s intuitive meaning is ”x is a function from a to b”.

fun(x, a, b) := x ⊆ a × b ∧ (∀y ∈ a)(∃z ∈ b)((y, z) ∈ x)

∧ (∀y ∈ a)(∀z1 ∈ b)(∀z2 ∈ b)[((y, z1) ∈ x ∧ (y, z2) ∈ x) → z1 = z2]

Quantiﬁers ∀x, ∃x will be referred to as unbounded, whereas the other quantiﬁers (including the
exponentiation bounded ones) will be referred to as bounded.

A ∆E

0 -formula of IKP(E) is one that contains no unbounded quantiﬁers.

As with IKP, the system IKP(E) derives intuitionistic sequents of the form Γ ⇒ ∆ where Γ and
∆ are ﬁnite sets of formulae and ∆ contains at most one formula.

The axioms of IKP(E) are given by:

0 –Separation: Γ ⇒ ∃x((∀y ∈ x)(y ∈ a ∧ A(y)) ∧ (∀y ∈ a)(A(y) → y ∈ x))

Logical axioms:
Extensionality:
Pair:
Union:
Inﬁnity:
∆E

∆E

0 –Collection:

Set Induction:

Exponentiation:

0 –formula A.

Γ, A, ⇒ A for every ∆E
Γ ⇒ a = b ∧ B(a) → B(b) for every ∆E
Γ ⇒ ∃x[a ∈ x ∧ b ∈ x]
Γ ⇒ ∃x(∀y ∈ a)(∀z ∈ y)(z ∈ x)
Γ ⇒ ∃x [(∃y ∈ x) y ∈ x ∧ (∀y ∈ x)(∃z ∈ x) y ∈ z].

0 -formula B(a).

0 formula A(b).

for every ∆E
Γ ⇒ (∀x ∈ a)∃yB(x, y) → ∃z(∀x ∈ a)(∃y ∈ z)B(x, y)
for every ∆E
Γ ⇒ ∀u [(∀x ∈ u) G(x) → G(u)] → ∀u G(u)
for every formula G(b).
Γ ⇒ ∃z (∀x ∈ ab)(x ∈ z).

0 formula B(b, c).

The rules of IKP(E) are the same as those of IKP (extended to the new language containing
exponentiation bounded quantiﬁers), together with the following four rules:

53

(Eb∃L)

Γ, fun(c, a, b) ∧ F (c) ⇒ ∆
Γ, (∃x ∈ ab)F (x) ⇒ ∆

(Eb∃R)

Γ ⇒ fun(c, a, b) ∧ F (c)
Γ ⇒ (∃x ∈ ab)F (x)

(Eb∀L)

Γ, fun(c, a, b) → F (c) ⇒ ∆
Γ, (∀x ∈ ab)F (x) ⇒ ∆

(Eb∀R)

Γ ⇒ fun(c, a, b) → F (c)
Γ ⇒ (∀x ∈ ab)F (x)

As usual it is forbidden for the variable a to occur in the conclusion of the rules (Eb∃L) and (Eb∀R),
such a variable is referred to as the eigenvariable of the inference.

4.2 The inﬁnitary system IRSE
Ω

The purpose of this section is to introduce an inﬁnitary system IRSE
Ω within which we will be able
to embed IKP(E). As with the von Neumann hierarchy built by iterating the power set operation
through the ordinals, one may deﬁne an Exponentiation-hierarchy as follows

E0 := ∅
E1 := {∅}

Eα+2 := {X | X is deﬁnable over hEα+1, ∈i with parameters}

∪ {f | fun(f, a, b) for some a, b ∈ Eα.}

Eλ := [

β<λ

Eβ

for λ a limit ordinal.

Eλ+1 := {X | X is deﬁnable over hEα+1, ∈i with parameters}

for λ a limit ordinal.

Lemma 4.2. If y ∈ Eα+1 and x ∈ y then x ∈ Eα.

Proof. The proof is by induction on α. If y is a set deﬁnable over hEα, ∈i with parameters, the
members of y, including x, must be members of Eα.

Now suppose α = β + 1 and y ∈ Eα+1 is a function y : p → q for two sets p, q ∈ Eβ. Since x ∈ y,
it follows that x is of the form (x0, x1) with x0 ∈ p and x1 ∈ q, we use the standard deﬁnition of
ordered pair so

(1)

(x0, x1) := {{x0, x1}, {x0}}

We must now verify the following claim:

(*)

{x0}, {x1}, {x0, x1} ∈ Eβ.

If β = γ + 1 then by the induction hypothesis applied to x0 ∈ p ∈ Eβ and x1 ∈ q ∈ Eβ we get
x0, x1 ∈ Eγ and thus {x0}, {x1}, {x0, x1} ∈ Eβ as required.

If β is a limit then by the induction hypothesis and the construction of the E hierarchy at limit
ordinals, we know that s0 ∈ Eβ0 and s1 ∈ Eβ1 for some β0, β1 < β, thus {s0}, {s1}, {s0, s1} ∈
Emax(β0,β1)+1 which completes the proof of (*).

From (*) and (1) it is clear that (s0, s1) ∈ Eβ+1 as required.

⊓⊔

54

The idea of IRSE

Ω is to build an inﬁnitary system for reasoning about the E hierarchy.

Deﬁnition 4.3. The terms of IRSE

Ω are deﬁned as follows

1. Eα is an IRSE

Ω term for each α < Ω.

2. aα
i

is an IRSE

Ω term for each α < Ω and each i < ω, these terms will be known as free variables.

3. If F (a, ¯b) is a ∆E

0 formula of IKP(E) containing exactly the free variables indicated, and t, ¯s :=

s1, ..., sn are IRSE

Ω terms then

is also a term of IRSE
Ω.

[x ∈ t | F (x, ¯s)]

Observe that IRSE
Ω terms do not come with ‘levels’ as in the other inﬁnitary systems. This is be-
cause it is not clear how to immediately read oﬀ the location of a given term within the E hierarchy,
just from the syntactic information available within that term.

The formulas of IRSE
Ω are of the form F (s1, ..., sn), where F (a1, ..., an) is a formula of IKP(E) with
Ω terms. The formula A(s1, ..., sn) is said to be ∆E
all free variables indicated and s1, ..., sn are IRSE
0
0 formula of IKP(E). The ΣE formulae are the smallest collection containing
if A(a1, ..., an) is a ∆E
the ∆E
0 formulae such that A ∧ B, A ∨ B, (∀x ∈ t)A, (∃x ∈ t)A, (∃x ∈ ab)A, (∀x ∈ ab)A, ∃xA,
¬C, and C → A are in ΣE whenever A, B are in ΣE and C is in ΠE . Dually, the ΠE formulae are
the smallest collection containing the ∆E
0 formulae such that A ∧ B, A ∨ B, (∀x ∈ t)A, (∃x ∈ t)A,
(∃x ∈ ab)A, (∀x ∈ ab)A, ∀xA, ¬C, and C → A are in ΠE whenever A, B are in ΠE and C is in ΣE .
The axioms of IRSE

Ω are given by

0 -formula B(¯s).

Γ, A ⇒ A for every ∆E
0 –formula A.
Γ ⇒ t = t for every IRSE
Ω term t.
Γ, ¯s = ¯t, B(¯s) ⇒ B(¯t) for every ∆E
Γ ⇒ Eβ ∈ Eα for all β < α < Ω
Γ ⇒ aβ
Γ, t ∈ Eα, s ∈ t ⇒ s ∈ Eα for all α < Ω
Γ, t ∈ Eα+1, s ∈ t ⇒ s ∈ Eα for all α < Ω
Γ, s ∈ t, F (s, ¯p) ⇒ s ∈ [x ∈ t | F (x, ¯p)]
Γ, s ∈ [x ∈ t | F (x, ¯p)] ⇒ s ∈ t ∧ F (s, ¯p)

(E1)
(E2)
(E3)
(E4)
(E5)
(E6)
(E7)
(E8)
(E9)
(E10) Γ, s ∈ Eα, t ∈ Eβ, fun(p, s, t) ⇒ p ∈ Eγ for all γ ≥ max(α, β) + 2.
(E11) Γ, t ∈ Eβ, ¯p ∈ E ¯α ⇒ [x ∈ t | F (x, ¯p)] ∈ Eγ for all γ ≥ max(β, ¯α).

i ∈ Eα for all i ∈ ω and β < α < Ω

Deﬁnition 4.4. For a formula A(a1, ..., an) of IKP(E) containing exactly the free variables ¯a :=
Ω terms ¯s := s1, ..., sn, we deﬁne the ¯β-rank kA(¯s)k ¯β where ¯β := β1, ..., βn
a1, ..., an and any IRSE
are any ordinals < Ω. The deﬁnition is made by recursion on the build up of the formula A.

i) ks ∈ tkβ1,β2 := max(β1, β2)

ii) k(∃x ∈ t)F (x, ¯s)kγ, ¯β := k(∀x ∈ t)F (x, ¯s)kγ, ¯β := max(γ, kF (E0, ¯s)k0, ¯β + 2)

iii) k(∃x ∈ st)F (x, ¯p)kγ,δ, ¯β := k(∀x ∈ st)F (x, ¯p)kγ,δ, ¯β

:= max(γ + ω, δ + ω, kF (E0, ¯p)k0, ¯β + 2)

55

iv) k∃xF (x, ¯s)k ¯β := k∀xF (x, ¯s)k ¯β := max(Ω, kF (E0, ¯s)k0, ¯β + 2)

v) kA ∧ Bk ¯β := kA ∨ Bk ¯β := kA → Bk ¯β := max(kAk ¯β , kBk ¯β) + 1

vi) k¬Ak ¯β := kAk ¯β + 1

We deﬁne the rank of A(¯s) by

Observation 4.5.

rk(A(¯s)) := kA(¯s)k¯0 .

i) kA(¯s)k ¯β < Ω if and only if A is ∆E
0 .
ii) If A contains unbounded quantiﬁers then rk(A(¯s)) = kA(¯s)k ¯β for all ¯s and ¯β.

Deﬁnition 4.6 (Operator Controlled Derivability in IRSE
of the form Γ ⇒ ∆ where Γ and ∆ are ﬁnite sets of IRSE
formula. For H an operator and α, ρ ordinals we deﬁne the relation H
α.

Ω). IRSE
Ω derives intuitionistic sequents
Ω formulae and ∆ contains at most one
α
ρ Γ ⇒ ∆ by recursion on

If Γ ⇒ ∆ is an axiom and α ∈ H then H

α
ρ Γ ⇒ ∆ .

It is always required that α ∈ H, this requirement is not repeated for each inference rule below.

γ a limit
αδ < α
γ ∈ H

α0, α1, α2 < α
β, γ ∈ H
γ < α
γ ≤ β

α0, α1 < α
β ∈ H
β < α

α0, α1 < α
β ∈ H
β < α

(E-Lim)∞

(b∀L)

(b∀R)∞

(b∃L)∞

αδ
ρ Γ, s ∈ Eδ ⇒ ∆ for all δ < γ

H[δ]
α
ρ Γ, s ∈ Eγ ⇒ ∆

H

H

H

H

H

H

H

H

H

H

H

α0
ρ Γ, s ∈ t → A(s) ⇒ ∆
α1
ρ Γ ⇒ t ∈ Eβ
α2
ρ Γ ⇒ s ∈ Eγ
α
ρ Γ, (∀x ∈ t)A(x) ⇒ ∆

α0
ρ Γ ⇒ s ∈ t → F (s) for all s
α1
ρ Γ ⇒ t ∈ Eβ
α
ρ Γ ⇒ (∀x ∈ t)F (x)

α0
ρ Γ, s ∈ t ∧ F (s) ⇒ ∆ for all s
α1
ρ Γ ⇒ t ∈ Eβ
α
ρ Γ, (∃x ∈ t)F (x) ⇒ ∆

56

(b∃R)

(Eb∀L)

(Eb∀R)∞

(Eb∃L)∞

(Eb∃R)

(∀L)

(∀R)∞

H

H

H

H

H

H

H

H

H

H

H

H

H

H

H

H

H

H

H

H

H

H

H

H

H

α0
ρ Γ ⇒ s ∈ t ∧ A(s)
α1
ρ Γ ⇒ t ∈ Eβ
α2
ρ Γ ⇒ s ∈ Eγ
α
ρ Γ ⇒ (∃x ∈ t)A(x)

α0
ρ Γ, fun(p, s, t) → A(p) ⇒ ∆
α1
ρ Γ ⇒ s ∈ Eβ
α2
ρ Γ ⇒ t ∈ Eγ
α3
ρ Γ ⇒ p ∈ Eδ
α
ρ Γ, (∀x ∈ st)A(x) ⇒ ∆

α0
ρ Γ ⇒ fun(p, s, t) → F (p) for all p
α1
ρ Γ ⇒ s ∈ Eβ
α2
ρ Γ ⇒ t ∈ Eγ
α
ρ Γ ⇒ (∀x ∈ st)F (x)

α0
ρ Γ, fun(p, s, t) ∧ F (p) ⇒ ∆ for all p
α1
ρ Γ ⇒ s ∈ Eβ
α2
ρ Γ ⇒ t ∈ Eγ
α
ρ Γ, (∃x ∈ st)F (x) ⇒ ∆

α0
ρ Γ ⇒ fun(p, s, t) ∧ A(p)
α1
ρ Γ ⇒ s ∈ Eβ
α2
ρ Γ ⇒ t ∈ Eγ
α3
ρ Γ ⇒ p ∈ Eδ
α
ρ Γ ⇒ (∃x ∈ st)A(x)

α0
ρ Γ, F (s) ⇒ ∆
α1
ρ Γ ⇒ s ∈ Eβ
α
ρ Γ, ∀xF (x) ⇒ ∆

αβ
ρ Γ, s ∈ Eβ ⇒ F (s) for all s and all β < Ω

H[β]
α
ρ Γ ⇒ ∀xF (x)

H

57

α0, α1, α2 < α
β, γ ∈ H
γ < α
γ ≤ β

α0, α1, α2, α3 < α
β, γ, δ ∈ H
δ < α
δ ≤ max(β, γ) + 2

α0, α1, α2 < α
β, γ ∈ H
max(β, γ) + 2 ≤ α

α0, α1, α2 < α
β, γ ∈ H
max(β, γ) + 2 ≤ α

α0, α1, α2, α3 < α
β, γ, δ ∈ H
δ < α
δ ≤ max(β, γ) + 2

α0 + 3, α1 + 3 < α
β < α
β ∈ H

β < αβ + 3 < α

(∃L)∞

(∃R)

(ΣE -Ref )

(Cut)

αβ
ρ Γ, s ∈ Eβ, F (s) ⇒ ∆ for all s and all β < Ω

H[β]
α
ρ Γ ⇒ ∀xF (x)

H

H

H

H

H

H

H

H

H

H

α0
ρ Γ ⇒ F (s)
α1
ρ Γ ⇒ s ∈ Eβ
α
ρ Γ ⇒ ∃xF (x)

α0
ρ Γ ⇒ A
α
ρ Γ ⇒ ∃z Az

α0
ρ Γ, A(s1, ..., sn) ⇒ ∆
α1
ρ Γ ⇒ A(s1, ..., sn)
α2
ρ Γ ⇒ si ∈ Eβi i = 1, ..., n
α
ρ Γ ⇒ ∆

β < αβ + 3 < α

α0 + 3, α1 + 3 < α
β < α
β ∈ H

α0 + 1, Ω < α
A is a ΣE -formula

α0, α1, α2 < α
kA(¯s)k ¯β < ρ
¯β ∈ H

Lastly if Γ ⇒ ∆ is the result of a propositional inference of the form (∧L), (∧R), (∨L), (∨R), (¬L),
α0
(¬R), (⊥), (→ L) or (→ R), with premise(s) Γi ⇒ ∆i then from H
ρ Γi ⇒ ∆i (for each i) we
may conclude H

α
ρ Γ ⇒ ∆ , provided α0 < α.

Convention 4.7. In cases where terms Eα and aα
i occur directly as witnesses in existential rules or
in cut formulae we will omit the extra premise declaring the terms location in the E term hierarchy
since

Eα ∈ Eα+1

and aα

i ∈ Eα+1

are axioms (E4) and (E5) respectively. It must still be checked that α ∈ H however.

4.3 Cut elimination for IRSE
Ω

Lemma 4.8 (Inversions of IRSE
inversions for intuitionistic systems:

Ω). If max(rk(A), rk(B)) ≥ Ω then we have the usual propositional

i) If H

α
ρ Γ, A ∧ B ⇒ ∆ then H

α
ρ Γ, A, B ⇒ ∆ .

ii) If H

α
ρ Γ ⇒ A ∧ B then H

α
ρ Γ ⇒ A and H

α
ρ Γ ⇒ B .

iii) If H

α
ρ Γ, A ∨ B ⇒ ∆ then H

α
ρ Γ, A ⇒ ∆ and H

α
ρ Γ, B ⇒ ∆ .

iv) If H

α
ρ Γ, A → B ⇒ ∆ then H

α
ρ Γ, B ⇒ ∆ .

v) If H

α
ρ Γ ⇒ A → B then H

α
ρ Γ, A ⇒ B .

If rk(A) ≥ Ω we have the following additional inversions:

vi) If H

α
ρ Γ ⇒ ¬A then H

α
ρ Γ, A ⇒ .

58

vii) If H

α
ρ Γ ⇒ (∀x ∈ t)A(x) then H

α
ρ Γ ⇒ s ∈ t → A(s) for all terms s.

viii) If H

α
ρ Γ, (∃x ∈ t)A(x) ⇒ ∆ then H

α
ρ Γ, s ∈ t ∧ A(s) ⇒ ∆ for all terms s.

ix) If H

α

ρ Γ ⇒ (∀x ∈ st)A(x) then H

α
ρ Γ ⇒ fun(p, s, t) → A(p) for all terms p.

x) If H

α
ρ Γ, (∃x ∈ st)A(x) ⇒ ∆ then H

α
ρ Γ, fun(p, s, t) ∧ A(p) ⇒ ∆ for all terms p.

Finally we have the following persistence properties:

xi) If γ ∈ H ∩ Ω and H

α
ρ Γ ⇒ ∀xA(x) then H

α
ρ Γ ⇒ (∀x ∈ Eγ)A(x) .

xii) If γ ∈ H ∩ Ω and H

α
ρ Γ, ∃xA(x) ⇒ ∆ then H

α
ρ Γ, (∃x ∈ Eγ)A(x) ⇒ ∆ .

Proof. All proofs are by induction on α, i) to vi) are standard for intuitionistic systems of this type.

α
For viii) suppose that H
ρ Γ, (∃x ∈ t)A(x) ⇒ ∆ and rk(A(E0)) ≥ Ω. (∃x ∈ t)A(x) cannot have
been the ”active component” of an axiom, so if Γ, (∃x ∈ t)A(x) ⇒ ∆ is an axiom then so is
Γ, s ∈ t ∧ A(s) ⇒ ∆. Now if (∃x ∈ t)A(x) was not the principal formula of the last inference we
may apply the induction hypothesis to the premises of that inference followed by the same inference
again. Finally if (∃x ∈ t)A(x) was the principal formula of the last inference and the last inference
was (b∃L)∞ so we have

H

α0
ρ Γ, (∃x ∈ t)A(x), s ∈ t ∧ A(s) ⇒ ∆ for all terms s and for some α0 < α.

Applying the induction hypothesis followed by weakening yields

H

α
ρ Γ, s ∈ t ∧ A(s) ⇒ ∆ for all terms s

as required. The proofs of vii), xi) and x) are similar.

α
ρ Γ ⇒ ∀xA(x) and γ ∈ H ∩ Ω. Γ ⇒ ∀xA(x) cannot be an axiom. If the last
For xi) suppose H
inference was not (∀R)∞ then we may apply the induction hypothesis to its premises and then the
same inference again. So suppose the last inference was (∀R)∞ in which case we have the premise

H[δ]

αδ
ρ Γ, s ∈ Eδ ⇒ A(s)

for all s and all δ < Ω, with δ < αδ + 3 < α.

In particular since γ ∈ H we have

H

αγ
ρ Γ, s ∈ Eγ ⇒ A(s)

for all s with γ < αγ + 3 < α.

So by (→ R) we have

H

αγ +1
ρ

Γ ⇒ s ∈ Eγ → A(s)

for all s .

Now since ⇒ Eγ ∈ Eγ+1 is an instance of axiom (E4), γ ∈ H and γ < α we may apply (b∀R) to
obtain

H

α
ρ Γ ⇒ (∀x ∈ Eγ)A(x)

as required. The proof of xii) is similar.

⊓⊔

59

Lemma 4.9 (Reduction for IRSE
with all free variables displayed. If

Ω). Suppose rk(C(¯s)) := ρ > Ω where C(¯a) is an IKP(E) formula

H

H

H

α
ρ Γ ⇒ C(¯s)
β
ρ Γ, C(¯s) ⇒ ∆
γi
ρ Γ ⇒ si ∈ Eηi with ηi ∈ H ∩ Ω for each 1 ≤ i ≤ n.

then

H

α#α#β#β#γ
ρ

Γ ⇒ ∆ where γ := maxi=1,...,n(γi)

Proof. The proof is by induction on α#α#β#β#γ. Assume that

(1)

(2)

(3)

(4)

rk(C(¯s)) := ρ > Ω

H

H

H

α
ρ Γ ⇒ C(¯s)
β
ρ Γ, C(¯s) ⇒ ∆
γi
ρ Γ ⇒ si ∈ Eηi

for each 1 ≤ i ≤ n and for some ηi ∈ H ∩ Ω.

Since rk(C(¯s)) := ρ > Ω, C cannot be the ‘active part’ of an axiom, hence if (2) or (3) are axioms
of IRSE

Ω then so is Γ ⇒ ∆.

If C(¯s) was not the principal formula of the last inference in either (2) or (3) then we may apply
the induction hypothesis to the premises of that inference and then the same inference again.

So suppose C(¯s) was the principal formula of the last inference in both (2) and (3). Since the
conclusion of a (ΣE -Ref ) inference always has rank Ω and rk(C(¯s)) := ρ > Ω we may conclude
that the last inference of (2) was not (ΣE -Ref ).

Case 1. Suppose C(¯s) ≡ (∃x ∈ si)F (x, ¯s), thus we have

(5)

(6)

(7)

(8)

(9)

H

H

H

H

H

α0
ρ Γ ⇒ r ∈ si ∧ F (r, ¯s)
α1
ρ Γ ⇒ si ∈ Eδ
α2
ρ Γ ⇒ r ∈ Eξ
β0
ρ Γ, C(¯s), p ∈ si ∧ F (p, ¯s) ⇒ ∆
β1
ρ Γ, C(¯s) ⇒ si ∈ Eδ′

α0 < α

α1 < α and δ ∈ H

ξ, α2 < α , ξ ∈ H(∅) and ξ ≤ δ

for all p and β0 < β

δ′, β1 < β and δ′ ∈ H(∅)

From (8) we obtain

(10)

H

β0
ρ Γ, C(¯s), r ∈ si ∧ F (r, ¯s) ⇒ ∆ .

Applying the induction hypothesis to (2), (4) and (10) yields

(11)

H

α#α#β0#β0#γ
ρ

Γ, r ∈ si ∧ F (r, ¯s) ⇒ ∆ .

60

Note that

Ω < rk(r ∈ si ∧ F (r, ¯s)) = rk(F (r, ¯s)) + 1
< rk(F (r, ¯s)) + 2

= rk(C(¯s)) := ρ.

So we may apply (Cut) to (4),(5),(7) and (11) giving

H

α#α#β#β#γ
ρ

Γ ⇒ ∆

as required. The case where C(¯s) ≡ (∀x ∈ si)F (x, ¯s) is similar.

Now suppose C(¯s) ≡ (∀x ∈ sisj)F (x, ¯s), so we have

(12)

(13)

(14)

(15)

(16)

(17)

(18)

H

H

α0
ρ Γ ⇒ fun(p, si, sj) → F (p, ¯s)
α1
ρ Γ ⇒ si ∈ Eδ

for all p and α0 < α

α1 < α and δ ∈ H(∅)

H

α2
ρ Γ ⇒ sj ∈ Eδ′

α2 < α, δ′ ∈ H(∅) and max(δ, δ′) + 2 ≤ α

H

β0
ρ Γ, C(¯s), fun(r, si, sj) → F (r, ¯s) ⇒ ∆

β0 < β

H

H

H

β1
ρ Γ, C(¯s) ⇒ r ∈ Eξ
β2
ρ Γ, C(¯s) ⇒ si ∈ Eζ
β3
ρ Γ, C(¯s) ⇒ sj ∈ Eζ ′

ξ < β, ξ ∈ H(∅) and β1 < β

ζ ∈ H(∅) and β2 < β

ζ ′ ∈ H(∅), β3 < β and ξ ≤ max(ζ, ζ ′) + 2

As an instance of (12) we have

(19)

H

α0
ρ Γ ⇒ fun(r, si, sj) → F (r, ¯s) .

Applying the induction hypothesis to (2), (4) and (15) gives

(20)

H

α#α#β0#β0#γ
ρ

Γ, fun(r, si, sj) → F (r, ¯s) ⇒ ∆ .

Furthermore the induction hypothesis applied to (2),(4) and (16) gives

(21)

Note that

H

α#α#β1#β1#γ
ρ

Γ ⇒ r ∈ Eξ .

Ω < rk(fun(r, si, sj) → F (r, ¯s)) = rk(F (r, ¯s)) + 1

< rk(F (r, ¯s)) + 2 = rk(C(¯s))

so we may apply (Cut) to (4), (19), (20), (21) to give

(22)

H

α#α#β#β#γ
ρ

Γ ⇒ ∆

61

as required.

The case where C(¯s) ≡ (∃x ∈ sisj)F (x, ¯s) is similar.

Case 3. Now suppose that C(¯s) ≡ ∀xF (x, ¯s), so we have

(23)

(24)

(25)

H[δ]

αδ
ρ Γ, p ∈ Eδ ⇒ F (p, ¯s)

H

H

β0
ρ Γ, C(¯s), F (r, ¯s) ⇒ ∆
β1
ρ Γ, C(¯s) ⇒ r ∈ Eξ

Since ξ ∈ H(∅), from (23) we obtain

for all p and all δ < Ω with αδ + 3 < α

with β0 + 3 < β

with ξ < β, ξ ∈ H(∅) and β1 + 3 < β.

(26)

H

αξ
ρ Γ, r ∈ Eξ ⇒ F (r, ¯s) .

Applying the induction hypothesis to (2), (4) and (24) gives

(27)

H

α#α#β0#β0#γ
ρ

Γ, F (r, ¯s) ⇒ ∆ .

Again applying the induction hypothesis to (2), (4) and (25) gives

(28)

H

α#α#β1#β1#γ
ρ

Γ ⇒ r ∈ Eξ .

Now a (Cut) applied to (26) and (28) yields

(29)

Note that

H

α#α#β#β1#γ
ρ

Γ ⇒ F (r, ¯s) .

Ω ≤ rk(F (r, ¯s)) < rk(F (r, ¯s)) + 2 = rk(C) = ρ .

So a (Cut) applied to (4), (27), (28) and (29) yields

(30)

as required.

H

α#α#β#β#γ
ρ

Γ ⇒ ∆

The case where C(¯s) ≡ ∃xF (x, ¯s) is similar.

In the cases where C ≡ A ∧ B, A ∨ B, A → B or ¬A we may argue as with other intuitionistic
⊓⊔
systems of a similar nature.

Theorem 4.10 (Cut Elimination I). If H
ω0(α) = α and ωn+1(α) = ωωn(α).

α

Ω+n+1

Γ ⇒ ∆ then H

ωn(α)

Ω+1

Γ ⇒ ∆ for all n < ω, where

62

Proof. By main induction on n and subsidiary induction on α. The interesting case is where the
last inference was (Cut), with cut formula A(¯s) such that rk(A(¯s)) = Ω + n and ¯s = s1, ..., sm are
the only terms occurring A(¯s). In this case we have

(1)

(2)

(3)

H

H

H

α0
Ω+n+1
α1
Ω+n+1
α2
Ω+n+1

Γ ⇒ A(¯s)

Γ, A(¯s) ⇒ ∆

Γ ⇒ si ∈ Eβi

with α0 < α

with α1 < α

with α2 < α and βi ∈ H for each i = 1, ..., m.

Applying the subsidiary induction hypothesis to (1), (2) and (3) gives

(4)

(5)

(6)

H

H

H

ωα0

Ω+n
ωα1

Ω+n
ωα2

Ω+n

Γ ⇒ A(¯s)

Γ, A(¯s) ⇒ ∆

Γ ⇒ si ∈ Eβi

with α0 < α

with α1 < α

with α2 < α and βi ∈ H for each i = 1, ..., m.

Now applying the Reduction Lemma 4.9 to (4), (5) and (6) gives

(7)

H

ωα0 #ωα0 #ωα1 #ωα1 #ωα2

Ω+n

Γ ⇒ ∆ .

Note that ωα0#ωα0#ωα1#ωα1#ωα2 < ωα so by weakening we have

(8)

H

ωα

Ω+n

Γ ⇒ ∆ .

Finally applying the main induction hypothesis gives

H

ωn(α)

Ω+1

Γ ⇒ ∆

as required.

⊓⊔

Lemma 4.11. If γ ≤ β < Ω with β, γ ∈ H(∅) and H

α
ρ Γ ⇒ s ∈ Eγ then

H α+2

ρ∗ Γ ⇒ s ∈ Eβ

where ρ∗ := max(ρ, β + 1).

Proof. If γ = β the result follows by weakening, so suppose γ < β. Assume that

(1)

H

α
ρ Γ ⇒ s ∈ Eγ .

Now as instances of axioms (E4) and (E6) respectively we have

(2)

(3)

H

H

0

0
0

0

Γ ⇒ Eγ ∈ Eβ

Γ, s ∈ Eγ, Eγ ∈ Eβ ⇒ s ∈ Eβ .

Applying (Cut) to (2) and (3) yields

(4)

H

1

β+2

Γ, s ∈ Eγ ⇒ s ∈ Eβ .

63

Now applying a second (Cut) to (1) and (4) supplies us with

H

α+2
ρ∗ Γ ⇒ s ∈ Eβ

as required.

⊓⊔

Lemma 4.12 (Boundedness). Suppose α ≤ β < Ω, β ∈ H, A is a ΣE -formula and B is a ΠE
formula then:

i) If H

α
ρ Γ ⇒ A then H

α

ρ∗ Γ ⇒ AEβ .

ii) If H

α
ρ Γ, B ⇒ ∆ then H

α

ρ∗ Γ, B Eβ ⇒ ∆ .

Where we set ρ∗ := max(ρ, β + 1).

Proof. By induction on α. The interesting case of i) is where A ≡ ∃xC(x) and A was the principal
formula of the last inference which was (∃R). Note that since α < Ω the last inference cannot have
been (ΣE -Ref ). So we have

(1)

(2)

H

H

α0
ρ Γ ⇒ C(r)
α1
ρ Γ ⇒ r ∈ Eγ

with α0 + 3 < α.

with α1 < α, γ ∈ H and γ < α.

Since γ < α we also know that γ < β so using Lemma 4.11 we get

(3)

H

α1+2
ρ∗

Γ ⇒ r ∈ Eβ .

Now by applying the induction hypothesis to (1) we get

(4)

H

α0
ρ Γ ⇒ C(r)Eβ .

(∧R) applied to (3) and (4) yields

(5)

H

max(α0+1,α1+3)
ρ∗

Γ ⇒ r ∈ Eβ ∧ C(r)Eβ .

Now since Γ ⇒ Eβ ∈ Eβ+1 is an axiom we may apply (b∃R) to (2) and (5) giving

H

α

ρ∗ Γ ⇒ (∃x ∈ Eβ)C(x)Eβ

as required.

Now for ii) the interesting case is where B was the principal formula of the last inference which
was (b∀L), thus B ≡ ∀xC(x). So we have

(6)

(7)

H

H

α0
ρ Γ, B, C(s) ⇒ ∆
α1
ρ Γ, B ⇒ s ∈ Eγ

with α0 < α,

with α1 + 3 < α, γ ∈ H and γ < α.

64

Applying the induction hypothesis twice to (6) and once to (7) we get

(8)

(9)

H

H

α0
ρ Γ, B Eβ , C(s)Eβ ⇒ ∆
α1
ρ Γ, B Eβ ⇒ s ∈ Eγ

with α0 < α,

with α1 + 3 < α, γ ∈ H and γ < α.

Now since γ < α we also know that γ < β so by applying Lemma 4.11 to (9) we get

(10)

H

α1+2
ρ∗

Γ, B Eβ ⇒ s ∈ Eβ .

Applying (→ L) to (8) and (10) supplies us with

(11)

H

max(α0+1,α1+3)
ρ∗

Γ, B Eβ , s ∈ Eβ → C(s)Eβ ⇒ ∆ .

Now applying (b∀L) to (11), (9) and ⇒ Eβ ∈ Eβ+1 which is an instance of axiom (E4), we obtain

H

α

ρ∗ Γ, B Eβ ⇒ ∆

completing the proof.

⊓⊔

Theorem 4.13 (Cut Elimination II; Collapsing). Suppose η ∈ Hη, ∆ is a set of at most one ΣE
formula and Γ is a ﬁnite set of ΠE formulae. Then

Hη

α

Ω+1

Γ ⇒ ∆ implies H ˆα

ψΩ(ˆα)

ψΩ(ˆα)

Γ ⇒ ∆ ,

where ˆα := η + ωα.

Proof. The proof is by induction on α. Note that since η ∈ Hη we know from Lemma 2.20 that

Case 1. If Γ ⇒ ∆ is an axiom the result follows easily.

ˆα, ψΩ(ˆα) ∈ H ˆα.

Case 2. If Γ ⇒ ∆ was the result of a propositional inference we may apply the induction hypothesis
to the premises of that inference, and then the same inference again.

Case 3. Suppose the last inference was (E-Lim), then s ∈ Eγ is a formula in Γ for some limit ordinal
γ and

Hη[δ]

Γ, s ∈ Eδ ⇒ ∆ for all δ < γ with αδ < α.

αδ
Ω+1

Since γ ∈ Hη(∅) = BΩ(η + 1) and γ < Ω we know that γ < ψΩ(η + 1) and thus δ ∈ Hη for all
δ < γ. So we have

Hη

αδ
Ω+1

Γ, s ∈ Eδ ⇒ ∆ for all δ < γ with αδ < α.

Now applying the induction hypothesis provides

H ˆα

ψΩ( ˆαδ )

ψΩ( ˆαδ )

Γ, s ∈ Eδ ⇒ ∆ for all δ < γ with αδ < α.

65

Now since ψΩ( ˆαδ) < ψΩ(ˆα) we may apply (E-Lim) to get the desired result.

Case 4. Suppose the last inference was (b∀L), then (∀x ∈ t)F (x) ∈ Γ and:

(1)

(2)

(3)

Hη

Hη

Hη

α0
Ω+1
α1
Ω+1
α2
Ω+1

Γ, s ∈ t → F (s) ⇒ ∆

Γ ⇒ t ∈ Eβ

Γ ⇒ s ∈ Eγ

with α0 < α.

β ∈ Hη(∅) and α1 < α.

γ ∈ Hη(∅), γ, α2 < α and γ ≤ β.

Since s ∈ t → F (s) is also a ΠE -formula we may immediately apply the induction hypothesis to
(1), (2) and (3) giving

(4)

(5)

(6)

H ˆα

H ˆα

H ˆα

ψΩ( ˆα0)

ψΩ(ˆα)
ψΩ( ˆα1)

ψΩ(ˆα)
ψΩ( ˆα2)

ψΩ(ˆα)

Γ, s ∈ t → F (s) ⇒ ∆

Γ ⇒ t ∈ Eβ

Γ ⇒ s ∈ Eγ.

Since γ ∈ Hη we know that γ < ψΩ(η + 1) and thus γ ∈ H ˆα and γ < ψΩ(ˆα). Moreover
ψΩ(αi) < ψΩ(α) for i = 0, 1, 2 so we may apply (b∀L) to complete this case. The case where
the last inference was (b∃R) is treated in a similar manner.

Case 5. Suppose the last inference was (b∀R)∞, then ∆ = {(∀x ∈ t)F (x)} and

(7)

(8)

Hη

Hη

α0
Ω+1
α1
Ω+1

Γ ⇒ s ∈ t → F (s)

Γ ⇒ t ∈ Eβ

for all s, with α0 < α,

with α1, β < α and β ∈ Hη.

Applying the induction hypothesis to (7) and (8) yields

(9)

(10)

H ˆα

H ˆα

ψΩ( ˆα1)

ψΩ(ˆα)
ψΩ( ˆα0)

ψΩ(ˆα)

Γ ⇒ t ∈ Eβ

Γ ⇒ s ∈ t → F (s).

Note that since β ∈ Hη we know that β < ψΩ(η + 1) < ψΩ(ˆα), thus applying (b∀R)∞ to (10)
(noting that ψΩ( ˆα0) + 1 < ψΩ(ˆα)) gives the desired result. The case where the last inference was
(b∃L)∞ is treated in a similar manner.

Case 6. Now suppose the last inference was (Eb∃L)∞, so (∃x ∈ st)F (x) ∈ Γ and:

(11)

(12)

(13)

Hη

Hη

Hη
α1
Ω+1
α2
Ω+1

Γ, fun(p, s, t) ∧ F (p) ⇒ ∆

α0
Ω+1
Γ ⇒ s ∈ Eβ

for all p, with α0 < α.

with β ∈ Hη and α1 < α.

Γ ⇒ t ∈ Eγ

with α2 < α, γ ∈ Hη and max(β, γ) + 2 ≤ α.

66

By assumption fun(p, s, t) ∧ F (p) is a ΠE formula so we may apply the induction hypothesis to (11),
(12) and (13) giving:

(14)

(15)

(16)

H ˆα

H ˆα

H ˆα

ψΩ( ˆα0)

ψΩ(ˆα)
ψΩ( ˆα1)

ψΩ(ˆα)
ψΩ( ˆα2)

ψΩ(ˆα)

Γ, fun(p, s, t) ∧ F (p) ⇒ ∆

for all p;

Γ ⇒ s ∈ Eβ

Γ ⇒ t ∈ Eγ .

Since ψΩ( ˆαi) < ψΩ(ˆα) for i = 0, 1, 2 and β, γ ∈ Hη means that max(β, γ) + 2 < ψΩ(η + 1) < ψΩ(ˆα)
we may apply (Eb∃L)∞ to (14), (15) and (16) to complete this case. The case where the last
inference was (Eb∀R)∞ may be treated in a similar manner.

Case 7. Now suppose the last inference was (Eb∀R), so ∆ = {(∃x ∈ st)F (x)} and we have:

(17)

(18)

(19)

(20)

Hη

Hη

Hη

Hη

α0
Ω+1
α1
Ω+1
α2
Ω+1
α3
Ω+1

Γ ⇒ fun(p, s, t) ∧ F (p)

Γ ⇒ s ∈ Eβ

Γ ⇒ t ∈ Eγ

Γ ⇒ p ∈ Eδ

for all p with α0 < α;

with β ∈ Hη(∅) and α1 < α;

with γ ∈ Hη(∅) and α2 < α;

α3, δ < α, δ ∈ Hη(∅) and δ ≤ max(β, γ) + 2.

Since fun(p, s, t) ∧ F (p) is a ΣE formula we can apply the induction hypothesis to (17), (18), (19)
and (20) followed by (Eb∀R), in a similar manner to Case 4. The case where the last inference was
(Eb∀L) can also be treated in a similar manner.

Now suppose the last inference was (∀L), so ∀xF (x) ∈ Γ and

(21)

(22)

Hη

Hη

α0
Ω+1
α1
Ω+1

Γ, F (s) ⇒ ∆

Γ ⇒ s ∈ Eβ

with α0 + 3 < α,

β, α1 + 3 < α and β ∈ Hη(∅).

Since F (s) is ΠE we may immediately apply the induction hypothesis to (21) and (22) giving

(23)

(24)

H ˆα

H ˆα

ψΩ( ˆα0)

ψΩ(ˆα)
ψΩ( ˆα1)

ψΩ(ˆα)

Γ, F (s) ⇒ ∆

Γ ⇒ s ∈ Eβ .

Now since β ∈ Hη we know that β < ψΩ(η + 1) < ψΩ(ˆα) hence we may apply (∀L) to (23) and (24)
to complete this case. The case where the last inference was (∃R) can be treated in a similar manner.

Case 9. Now suppose the last inference was (ΣE -Ref ), so ∆ = {∃zAz} where A is a ΣE formula
and

(25)

Hη

α0
Ω+1

Γ ⇒ A

with α0 + 1, Ω < α.

We may immediately apply the induction hypothesis to (25) giving

(26)

H ˆα0

ψΩ( ˆα0)

ψΩ( ˆα0)

Γ ⇒ A .

67

Applying Boundedness 4.12i) to (26) provides

(27)

H ˆα0

ψΩ( ˆα0)

ψΩ( ˆα0)+2

Γ ⇒ AE

ψΩ( ˆα0) .

Now as an instance of axiom (E4) we have

(28)

H ˆα0

0

0

⇒ E

ψΩ( ˆα0) ∈ E

ψΩ( ˆα0)+1 .

Since ψΩ( ˆα0) + 1 ∈ H ˆα and ψΩ( ˆα0) + 1 < ψΩ(ˆα) we may apply (∃R) to (27) and (28) to complete
the case.

Now suppose the last inference was (Cut), so that we have:

(29)

(30)

(31)

Hη

Hη

Hη

α0
Ω+1
α1
Ω+1
α2
Ω+1

Γ ⇒ A(¯s)

Γ, A(¯s) ⇒ ∆

Γ ⇒ si ∈ Eβi

with α0 < α;

with α1 < α;
with α2 < α, ¯β ∈ Hη and kA(¯s)k ¯β ≤ Ω.

Subcase 10.1: If kA(¯s)k ¯β < Ω it follows from ¯β ∈ Hη = BΩ(η + 1) that kA(¯s)k ¯β ∈ BΩ(η + 1) and
thus kA(¯s)k ¯β < ψΩ(η + 1) < ψΩ(ˆα). Also A is ∆E
0 , thus we may apply the induction hypothesis to
(29), (30) and (31) followed by (Cut) to complete this (sub)case.

Subcase 10.2: Now suppose kA(¯s)k ¯β = Ω. Then either A ≡ ∀xF (x) or A ≡ ∃xF (x) with F a ∆E
0
formula. The two cases are dual, we assume that the former is the case. Thus A is ΠE , so we may
apply the induction hypothesis to (30) giving

(32)

H ˆα1

ψΩ( ˆα1)

ψΩ( ˆα1)

Γ, A(¯s) ⇒ ∆ .

Applying Boundedness 4.12ii) to (32) yields

(33)

H ˆα

max(ψΩ( ˆα0),ψΩ( ˆα1))

ψΩ( ˆα1)

Γ, A(¯s)E

ψΩ( ˆα0) ⇒ ∆ .

Now applying 4.8xi) (persistence) to (29) gives

(34)

H ˆα0

α0
Ω+1

Γ ⇒ A(¯s)E

ψΩ( ˆα0) .

Noting that A(¯s)E

ψΩ( ˆα0) is ∆E

0 we may apply the induction hypothesis to (34) giving

(35)

Hα∗

ψΩ(α∗)
ψΩ(α∗)

Γ ⇒ A(¯s)E

ψΩ( ˆα0) .

where α∗ := ˆα0 + ωΩ+α0. Now applying the induction hypothesis to (31) gives

(36)

H ˆα2

ψΩ( ˆα2)

ψΩ( ˆα2)

Γ ⇒ si ∈ Eβi .

Now as an instance of axiom (E4) we have

(37)

H ˆα

0

0

⇒ EψΩ( ˆα0) ∈ EψΩ( ˆα0)+1 .

68

Since ¯β ∈ BΩ(η + 1) we get

kA(¯s)E

ψΩ( ˆα0)k ¯β,ψΩ( ˆα0)+1 = ψΩ( ˆα0) + 1 < ψΩ(ˆα).

It remains to note that

α∗ = η + ωΩ+α0 + ωΩ+α0 < η + ωΩ+α = ˆα

and thus ψΩ(α∗) < ψΩ(α). So we may apply (Cut) to (33),(35),(36) and (37) to conclude

H ˆα

ψΩ(ˆα)

ψΩ(ˆα)

Γ ⇒ ∆

as required.

⊓⊔

4.4 Embedding IKP(E) into IRSE
Ω.

Deﬁnition 4.14. If Γ[¯a] ⇒ ∆[¯a] is an intuitionistic sequent of IKP(E) with exactly the free
variables ¯a = a1, ..., an and containing the formulas A1(¯a), ..., Am(¯a) then

no ¯β(Γ[¯s] ⇒ ∆[¯s]) := ωkA1k ¯β #...#ωkAmk ¯β .

For terms ¯s := s1, ...sn and ordinals ¯β := β1, ..., βn the expression ¯s ∈ E ¯β will be considered short-
hand for s1 ∈ Eβ1, ..., sn ∈ Eβn

The expression (cid:13) Γ[¯s] ⇒ ∆[¯s] will be considered shorthand for

H[ ¯β]

no ¯β(Γ[¯s]⇒∆[¯s])
0

¯s ∈ E ¯β, Γ[¯s] ⇒ ∆[¯s] .

For any operator H and any ordinals ¯β < Ω.

The expression (cid:13)α

ρ Γ[¯s] ⇒ ∆[¯s] will be considered shorthand for

H[ ¯β]

no ¯β(Γ[¯s]⇒∆[¯s])#α
ρ

¯s ∈ E ¯β, Γ[¯s] ⇒ ∆[¯s] .

For any operator H and any ordinals ¯β < Ω.

As might be expected (cid:13)α Γ[¯s] ⇒ ∆[¯s] and (cid:13)ρ Γ[¯s] ⇒ ∆[¯s] will be considered shorthand for
(cid:13)α

0 Γ[¯s] ⇒ ∆[¯s] and (cid:13)0

ρ Γ[¯s] ⇒ ∆[¯s] respectively.

Lemma 4.15. For any formula A(¯a) of IKP(E) containing exactly the free variables displayed and
any IRSE

Ω terms ¯s = s1, ..., sn

(cid:13)Ω A(¯s) ⇒ A(¯s) .

Proof. By induction on the construction of the formula A. If A is ∆E
axiom (E1).
Suppose A(¯s) ≡ ∀xF (x, ¯s). For each γ < Ω we deﬁne

0 then this is an instance of

αγ := γ + noγ, ¯β(F (t, ¯s) ⇒ F (t, ¯s)),

69

note that

By axiom (E1) we have

γ < αγ < αγ + 8 < no ¯β(A(¯s) ⇒ A(¯s)).

(1)

H[γ, ¯β]

0

0

t ∈ Eγ ⇒ t ∈ Eγ

for all t and all γ < Ω.

Now from the induction hypothesis we have

(2)

H[γ, ¯β]

αγ

Ω

¯s ∈ E ¯β, t ∈ Eγ, F (t, ¯s) ⇒ F (t, ¯s)

for all t and all γ < Ω.

It is worth noting that this use of the induction hypothesis is where we really need cuts of ¯β-rank
arbitrarily high in Ω. Applying (∀L) to (1) and (2) yields

H[γ, ¯β]

αγ +4
Ω

¯s ∈ E ¯β, t ∈ Eγ, A(¯s) ⇒ F (t, ¯s)

to which we may apply (∀R)∞ to get the desired result.

Case 2. Now suppose A ≡ (∀x ∈ si)F (x, ¯s). From the induction hypothesis we have

(3)

kF (t,¯s)k

δ, ¯β )·2

H[δ, ¯β]

(ω

Ω

t ∈ Eδ, ¯s ∈ E ¯β, F (t, ¯s) ⇒ F (t, ¯s)

for all t and all δ < Ω.

In particular when δ = βi in (3) we have

(4)

H[δ, ¯β]

α0
Ω

t ∈ Eβi, ¯s ∈ E ¯β, F (t, ¯s) ⇒ F (t, ¯s)

where α0 := (ωkF (t,¯s)kβi , ¯β ) · 2. Now as an instance of axiom (E6) we have

(5)

H[ ¯β]

0

0

si ∈ Eβi, t ∈ si ⇒ t ∈ Eβi .

Now applying (Cut) to (4) and (5) yields

(6)

H[ ¯β]

α0+1
Ω

¯s ∈ E ¯β, t ∈ si, F (t, ¯s) ⇒ F (t, ¯s) .

As an instance of axiom (E1) we have

(7)

H[ ¯β]

0

0

t ∈ si ⇒ t ∈ si .

Applying (→ L) to (6) and (7) yields

(8)

H[ ¯β]

α0+2
Ω

¯s ∈ E ¯β, t ∈ si, t ∈ si → F (t, ¯s) ⇒ F (t, ¯s) .

An application of (b∀L) to (5) and (8) provides

H[ ¯β]

α0+3
Ω

¯s ∈ E ¯β, t ∈ si, (∀x ∈ si)F (x, ¯s) ⇒ F (t, ¯s) .

Finally using (→ R) followed by (b∀R)∞ and noting that α0 + 5 < no ¯β(A(¯s) ⇒ A(¯s)) we get the
desired result.

70

Case 3. Suppose that A ≡ (∃x ∈ sisj)F (x, ¯s). From the induction hypothesis we know that

(9)

H[ ¯β, δ]

kF (t,¯s)kδ, ¯β )·2

(ω

Ω

¯s ∈ E ¯β, t ∈ Eδ, F (t, ¯s) ⇒ F (t, ¯s)

for all t and all δ < Ω.

In particular when δ = γ := max(βi, βj ) + 2 we have

(10)

H[ ¯β]

α0
Ω

¯s ∈ E ¯β, t ∈ Eγ, F (t, ¯s) ⇒ F (t, ¯s)

for all t,

where α0 := (ωkF (t,¯s)k ¯β,γ ) · 2. Now as an instance of axiom (E10) we have

(11)

H[ ¯β]

0

0

¯s ∈ E ¯β, fun(t, si, sj) ⇒ t ∈ Eγ .

Applying (Cut) to (10) and (11) gives

(12)

H[ ¯β]

α0+1
Ω

¯s ∈ E ¯β, fun(t, si, sj), F (t, ¯s) ⇒ F (t, ¯s) .

As an instance of axiom (E1) we have

(13)

H[ ¯β]

0

0

fun(t, si, sj) ⇒ fun(t, si, sj)

Applying (∧R) to (12) and (13) gives

(14)

H[ ¯β]

α0+2
Ω

¯s ∈ E ¯β, fun(t, si, sj), F (t, ¯s) ⇒ fun(t, si, sj) ∧ F (t, ¯s) .

Now applying (Eb∃R) to (11) and (14) yields

(15)

H[ ¯β]

α0+3
Ω

¯s ∈ E ¯β, fun(t, si, sj), F (t, ¯s) ⇒ (∃x ∈ sisj)F (x, ¯s) .

Two applications of (∧L) gives

(16)

H[ ¯β]

α0+5
Ω

¯s ∈ E ¯β, fun(t, si, sj) ∧ F (t, ¯s) ⇒ (∃x ∈ sisj)F (x, ¯s) .

Finally using (Eb∃L)∞ gives

(17)

H[ ¯β]

α0+6
Ω

¯s ∈ E ¯β, (∃x ∈ sisj)F (x, ¯s) ⇒ (∃x ∈ sisj)F (x, ¯s) .

It remains to note that α0 + 6 < no ¯β(A(¯s) ⇒ A(¯s)) to complete this case.

All other cases are either propositional, for which the proof is standard or may be regarded as dual
⊓⊔
to one of the three above.

Lemma 4.16 (Extensionality). For any formula A(¯a) of IKP(E) (not necessarily with all free
variables displayed) and any IRSE

Ω terms ¯s := s1, ..., sn, ¯t := t1, ..., tn we have

where ¯s = ¯t is shorthand for s1 = t1, ..., sn = tn.

(cid:13)Ω ¯s = ¯t, A(¯s) ⇒ A(¯t)

71

Proof. If A(¯s) is ∆E
induction on rk(A(¯s)), note that since A is assumed to contain an unbounded quantiﬁer

0 then this is an instance of axiom (E3). The remainder of the proof is by

rk(A) = kA(¯s)k ¯β ≥ Ω for any ordinals ¯β < Ω.

Case 1. Suppose A(¯s) ≡ ∀xF (x, ¯s). By the induction hypothesis we have

H[ ¯β, ¯γ, δ]

no ¯β,¯γ,δ(¯s=¯t,F (r,¯s)⇒F (r,¯t))
Ω

¯s ∈ E ¯β, ¯t ∈ E¯γ, r ∈ Eδ, ¯s = ¯t, F (r, ¯s) ⇒ F (r, ¯t)

for all r and all δ < Ω. For ease of reading we suppress the other terms possibly occurring in F (r, ¯s)
and the assumptions about their locations in the E hierarchy since these do not aﬀect the proof.
By virtue of axiom (E1) we have

Hence we may apply (∀L) to obtain

H[ ¯β, ¯γ, δ]

0

0

r ∈ Eδ ⇒ r ∈ Eδ .

H[ ¯β, ¯γ, δ]

αδ
Ω

¯s ∈ E ¯β, t ∈ E¯γ, ¯s = ¯t, r ∈ Eδ, ∀xF (x, ¯s) ⇒ F (r, ¯t)

where αδ := δ + no ¯β,¯γ,δ(¯s = ¯t, F (r, ¯s) ⇒ F (r, ¯t)) + 1. Note that

αδ + 3 < no ¯β,¯γ(¯s = ¯t, A(¯s) ⇒ A(¯t)) =: α.

Hence we may apply (∀R)∞ to obtain

H[ ¯β, ¯γ]

α

Ω

¯s ∈ E ¯β, ¯t ∈ E¯γ, ¯s = ¯t, A(¯s) ⇒ A(¯t)

as required.

Case 2. Now suppose A(¯s) ≡ (∀x ∈ sisj)F (x, ¯s). Using the induction hypothesis we have

(1)

H[ ¯β, ¯γ, δ]

α0
Ω

¯s ∈ E ¯β, ¯t ∈ E¯γ, r ∈ Eδ, ¯s = ¯t, F (r, ¯s) ⇒ F (r, ¯t)

for any term r and any δ < Ω, where α0 = no ¯β,¯γ,δ(¯s = ¯t, F (r, ¯s) ⇒ F (r, ¯t)). At this point we set
δ = max(βi, βj ) + 2, note that δ ∈ H[ ¯β, ¯γ]. By virtue of axiom (E1) we have

(2)

Hence by (→ L) we get

H[ ¯β, ¯γ]

0

0

fun(r, si, sj) ⇒ fun(r, si, sj).

(3)

H[ ¯β, ¯γ]

α0+1
Ω

¯s ∈ E ¯β, ¯t ∈ E¯γ , r ∈ Eδ, ¯s = ¯t,

fun(r, si, sj) → F (r, ¯s), fun(r, si, sj) ⇒ F (r, ¯t).

As an instance of axiom (E10) we have

(4)

H[ ¯β, ¯γ]

0

0

¯s ∈ E ¯β, fun(r, si, sj) ⇒ r ∈ Eδ .

72

An application of (Cut) to (3) and (4) yields

(5)

H[ ¯β, ¯γ]

α0+2
Ω

¯s ∈ E ¯β, ¯t ∈ E¯γ , ¯s = ¯t,
fun(r, si, sj) → F (r, ¯s), fun(r, si, sj) ⇒ F (r, ¯t).

Now applying (Eb∀L) to (4) and (5) gives

(6)

H[ ¯β, ¯γ]

α0+3
Ω

¯s ∈ E ¯β, ¯t ∈ E¯γ, ¯s = ¯t, (∀x ∈ sisj)F (x, ¯s), fun(r, si, sj) ⇒ F (r, ¯t).

Note that α0 ≥ Ω since F is not ∆E
Now as an instance of axiom (E3) we have

0 , so we don’t have to worry about the condition δ < α0 + 3.

(7)

H[ ¯β, ¯γ]

0

0

¯s = ¯t, fun(r, ti, tj) ⇒ fun(r, si, sj) .

Also axiom (E10) gives rise to

(8)

H[ ¯β, ¯γ]

0

0

¯t ∈ E¯γ, fun(r, ti, tj) ⇒ r ∈ Eη where η = max(γi, γj) + 2.

Applying (Cut) to (6),(7) and (8) gives

(9)

H[ ¯β, ¯γ]

α0+4
Ω

Now (→ R) gives

¯s ∈ E ¯β, ¯t ∈ E¯γ, ¯s = ¯t, (∀x ∈ sisj)F (x, ¯s), fun(r, ti, tj) ⇒ F (r, ¯t).

(10)

H[ ¯β, ¯γ]

α0+5
Ω

¯s ∈ E ¯β, ¯t ∈ E¯γ, ¯s = ¯t, (∀x ∈ sisj)F (x, ¯s) ⇒ fun(r, ti, tj) → F (r, ¯t).

Finally we may apply (Eb∀R)∞, noting that α0 + 6 < no ¯β,¯γ(¯s = ¯t, A(¯s) ⇒ A(¯t)) to complete this
case.

Note that it could also be the case that A(¯s) ≡ (∀x ∈ pq)F (x, ¯s) where p and/or q is not a member
of ¯s. The following case is an example of this kind of thing.

Case 3. Suppose A(¯s) ≡ (∃x ∈ p)F (x, ¯s, p), where p is not present in ¯s. By the induction hypothesis
we have

(11)

H[ ¯β, ¯γ, δ]

α0
Ω

¯s ∈ E ¯β, ¯t ∈ E¯γ, p ∈ Eδ, r ∈ Eδ, ¯s = ¯t, F (r, ¯s, p) ⇒ F (r, ¯t, p)

where α0 := no ¯β,¯γ,δ,δ(¯s = ¯t, F (r, ¯s, p) ⇒ F (r, ¯t, p)). As an instance of axiom (E1) we have

(12)

H[ ¯β, ¯γ, δ]

0

0

r ∈ p ⇒ r ∈ p .

Applying (∧R) to (11) and (12) yields

(13)

H[ ¯β, ¯γ, δ]

α0+1
Ω

¯s ∈ E ¯β, ¯t ∈ E¯γ, p ∈ Eδ, r ∈ Eδ, ¯s = ¯t, F (r, ¯s, p), r ∈ p ⇒ r ∈ p ∧ F (r, ¯t, p) .

As an instance of axiom (E6) we have

(14)

H[ ¯β, ¯γ, δ]

0

0

p ∈ Eδ, r ∈ p ⇒ r ∈ Eδ .

73

(Cut) applied to (12) and (13) gives

(15)

H[ ¯β, ¯γ, δ]

α0+2
Ω

Now (b∃R) gives

¯s ∈ E ¯β, ¯t ∈ E¯γ, p ∈ Eδ, ¯s = ¯t, F (r, ¯s, p), r ∈ p ⇒ r ∈ p ∧ F (r, ¯t, p) .

(16)

H[ ¯β, ¯γ, δ]

α0+3
Ω

¯s ∈ E ¯β, ¯t ∈ E¯γ, p ∈ Eδ, ¯s = ¯t, F (r, ¯s, p), r ∈ p ⇒ A(¯s) .

Two applications of (∧L) gives

(17)

H[ ¯β, ¯γ, δ]

α0+5
Ω

¯s ∈ E ¯β, ¯t ∈ E¯γ, p ∈ Eδ, ¯s = ¯t, r ∈ p ∧ F (r, ¯s, p) ⇒ A(¯s) .

To which we may apply (b∃L) to complete this case.

All other cases are similar to one of those above.

⊓⊔

Lemma 4.17 (Set induction). For any formula F (a) of IKP(E) we have

(cid:13)Ω⇒ ∀x[(∀y ∈ x)F (y) → F (x)] → ∀xF (x).

Proof. Let H be an arbitrary operator and let

A := ∀x[(∀y ∈ x)F (y) → F (x)].

Let ¯p be the terms other than s that occur in F (s), sub-terms not included. Let ¯H := H[ ¯β] where ¯β
α
is an arbitrary choice of ordinals < Ω. In the remainder of the proof we shall just write ¯H
ρ Γ ⇒ ∆
α
instead of H[ ¯β]
ρ ¯p ∈ E ¯β, Γ ⇒ ∆ , since ¯p ∈ E ¯β will always remain a side formula in the derivation.

Claim:

(*)

¯H[γ]

ωrk(A)#ωγ+1
Ω

A, s ∈ Eγ ⇒ F (s)

for all γ < Ω and all terms s.

Note that since A contains an unbounded quantiﬁer rk(A) = no ¯β(A). We prove the claim by
induction on γ. Thus the induction hypothesis supplies us with

(1)

¯H[δ]

ωrk(A)#ωδ+1

Ω

So by weakening we have

A, t ∈ Eδ ⇒ F (t)

for all δ < γ and all terms t.

(2)

¯H[γ, δ]

ωrk(A)#ωδ+1

Ω

A, s ∈ Eγ, t ∈ s, t ∈ Eδ ⇒ F (t) .

Case 1. Suppose γ = γ0 + 1, so a special case of (2) becomes

(3)

¯H[γ]

ωrk(A)#ωγ

Ω

A, s ∈ Eγ, t ∈ s, t ∈ Eγ0 ⇒ F (t) .

As an instance of axiom (E7) we have

(4)

¯H[γ]

0

0

s ∈ Eγ, t ∈ s ⇒ t ∈ Eγ0 .

74

Applying (Cut) to (3) and (4) yields

(5)

¯H[γ]

ωrk(A)#ωγ +1
Ω

A, s ∈ Eγ, t ∈ s ⇒ F (t) .

(→ R) followed by (b∀R)∞ provides

(6)

¯H[γ]

ωrk(A)#ωγ +3

Ω

A, s ∈ Eγ ⇒ (∀x ∈ s)F (x) .

Now from Lemma 4.15 we have

(7)

¯H[γ]

no ¯β,γ(F (s)⇒F (s))

Ω

s ∈ Eγ, F (s) ⇒ F (s) .

Since no ¯β,γ(F (s) ⇒ F (s)) < ωrk(A), by (→ L) we get

(8)

¯H[γ]

ωrk(A)#ωγ +4

Ω

To which we may apply (∀L) giving

A, s ∈ Eγ, (∀x ∈ s)F (x) → F (s) ⇒ F (s) .

(9)

as required.

¯H[γ]

ωrk(A)#ωγ+1
Ω

A, s ∈ Eγ ⇒ F (s)

Case 2. Now suppose γ is a limit ordinal. Applying (E-Lim) to (2) provides us with

(10)

¯H[γ]

ωrk(A)#ωγ

Ω

A, s ∈ Eγ, t ∈ s, t ∈ Eγ ⇒ F (t) .

As an instance of axiom (E6) we have

(11)

¯H[γ]

0

0

s ∈ Eγ, t ∈ s ⇒ t ∈ Eγ .

An application of (Cut) to (10) and (11) yields

(12)

¯H[γ]

ωrk(A)#ωγ +1
Ω

A, s ∈ Eγ, t ∈ s ⇒ F (t) .

The remainder of this case can proceed exactly as in Case 1 from (5) onwards. Thus the claim (*)
is veriﬁed.

Finally applying (∀R)∞ to (*) gives

¯H

ωrk(A)#Ω
Ω

A ⇒ ∀xF (x) .

Finally noting that ωrk(A)#Ω < no ¯β(A → ∀xF (x)) we may apply (→ R) to complete the proof. ⊓⊔

Lemma 4.18 (Inﬁnity). For any operator H we have

H

ω+4
ω ⇒ ∃x[(∀y ∈ x)(∃z ∈ x)(y ∈ z) ∧ (∃y ∈ x)(y ∈ x)] .

75

Proof. Firstly note that by Deﬁniton 2.6 1, ω ∈ H. We have the following derivation trees in IRSE
Ω.

Axiom (E6)
0

H

(Cut)

0

s ∈ En, En ∈ En+1 ⇒ s ∈ En+1

Axiom (E4)
0

H

0

⇒ En ∈ En+1

H

1

n+3

(∧R)

s ∈ En ⇒ s ∈ En+1

H

⇒ En+1 ∈ Eω

Axiom (E4)
0

0

2

H

s ∈ En ⇒ En+1 ∈ Eω ∧ s ∈ En+1

H

s ∈ En ⇒ (∃z ∈ Eω)(s ∈ z)

n+3
n+3
n+3
ω
H
ω s ∈ Eω ⇒ (∃z ∈ Eω)(s ∈ z)
H ω+1
ω ⇒ s ∈ Eω → (∃z ∈ Eω)(s ∈ z)
ω+2
ω ⇒ (∀y ∈ Eω)(∃z ∈ Eω)(y ∈ z)

H

Axiom (E4)
0

⇒ E0 ∈ Eω

⇒ E0 ∈ Eω ∧ E0 ∈ Eω

⇒ (∃y ∈ Eω)(y ∈ Eω)

(b∃R)

(E-Lim)

(→ R)

(b∀R)∞

(∧R)

(b∃R)

H

H

H

0
1

0
2

0

Applying (∧R) followed by (b∃R) to the conclusions of the two proof trees above yields the required
⊓⊔
result.

Lemma 4.19 (∆E
variables a, ¯b = b1, ..., bn, any IRSE

0 -Separation). For any ∆E

Ω terms r, s1, ..., sn and any operator H:

0 formula A(a, ¯b) of IKP(E) containing exactly the free

H[γ, ¯β]

α+7
0

¯s ∈ E ¯β, r ∈ Eγ ⇒ ∃x[(∀y ∈ x)(y ∈ r ∧ A(y, ¯s)) ∧ (∀y ∈ r)(A(y, ¯s) → y ∈ x)]

where α = max( ¯β, γ).

Proof. First let

p := [x ∈ r | A(x, ¯s)].

As an instance of axiom (E11) we have

(1)

H[γ, ¯β]

0

0

¯s ∈ E ¯β, r ∈ Eγ ⇒ p ∈ Eα .

Moreover we have the following derivations in IRSE
Ω:

H

H

(→ R)

(b∀R)∞

0
1

0
H

Axiom (E9)
0

¯s ∈ E ¯β, r ∈ Eγ, t ∈ p ⇒ t ∈ r ∧ A(t, ¯s)

¯s ∈ E ¯β, r ∈ Eγ ⇒ t ∈ p → t ∈ r ∧ A(t, ¯s)
α+2
0

¯s ∈ E ¯β, r ∈ Eγ ⇒ (∀y ∈ p)(y ∈ r ∧ A(y, ¯s))

(1)

76

Axiom (E8)
0

¯s ∈ E ¯β, r ∈ Eγ, t ∈ r, A(t, ¯s) ⇒ t ∈ p

¯s ∈ E ¯β, r ∈ Eγ, t ∈ r ⇒ A(t, ¯s) → t ∈ p

(→ R)

(→ R)

(b∀R)∞

H

H

H

H

0
γ+3

0
1

0
2

0

¯s ∈ E ¯β, r ∈ Eγ ⇒ t ∈ r → (A(t, ¯s) → t ∈ p)

¯s ∈ E ¯β, r ∈ Eγ ⇒ (∀y ∈ r)(A(y, ¯s) → y ∈ p)

Now applying (∧R) to (1) and the conclusions of the two proof trees above, followed by an appli-
⊓⊔
cation of (∃R) yields the desired result.

Lemma 4.20 (Pair). For any operator H, and IRSE

Ω terms s, t and any ordinals β, γ < Ω:

H[β, γ]

α+6
α+2

s ∈ Eβ, t ∈ Eγ ⇒ ∃z(s ∈ z ∧ t ∈ z)

where α := max(β, γ).

Proof. If β = γ the proof is straightforward, without loss of generality let us assume β > γ. As
instances of axioms (E6) and (E4) we have

(1)

(2)

Applying (Cut) gives

(3)

By axiom (E1) we have

(4)

H[β, γ]

H[β, γ]

0

0
0

0

t ∈ Eγ, Eγ ∈ Eβ ⇒ t ∈ Eβ

⇒ Eγ ∈ Eβ .

H[β, γ]

1

β+2

t ∈ Eγ ⇒ t ∈ Eβ .

H[β, γ]

0

0

s ∈ Eβ ⇒ s ∈ Eβ .

Applying (∧R) to (3) and (4) provides

(5)

H[β, γ]

2

β+2

s ∈ Eβ, t ∈ Eβ ⇒ s ∈ Eβ ∧ t ∈ Eβ ,

to which we may apply (∃R) giving

H[β, γ]

β+6

β+2

s ∈ Eβ, t ∈ Eγ ⇒ ∃z(s ∈ z ∧ t ∈ z) ,

as required.

⊓⊔

Lemma 4.21 (Union). For any operator H, IRSE

Ω term s and any β < Ω we have

H[β]

β+9

β+2

s ∈ Eβ ⇒ ∃z[(∀y ∈ s)(∀x ∈ y)(x ∈ z)] .

Proof. We have the following template for derivations in IRSE
Ω.

77

Axiom (E6)

Axiom (E6)

H[β]

0

0

(Cut)

t ∈ Eβ, r ∈ t ⇒ r ∈ Eβ

H[β]

0

0

s ∈ Eβ, t ∈ s ⇒ t ∈ Eβ

(→ R)

(b∀R)∞

(→ R)

(b∀R)∞

(∃R)

H[β]

H[β]

H[β]

H[β]

H[β]

H[β]

1

β+2
2

β+2
β+3

β+2
β+4

β+2
β+5

β+2
β+9

β+2

s ∈ Eβ, t ∈ s, r ∈ t ⇒ r ∈ Eβ

s ∈ Eβ, t ∈ s ⇒ r ∈ t → r ∈ Eβ

s ∈ Eβ, t ∈ s ⇒ (∀x ∈ t)(x ∈ Eβ)

s ∈ Eβ ⇒ t ∈ s → (∀x ∈ t)(x ∈ Eβ)

s ∈ Eβ ⇒ (∀y ∈ s)(∀x ∈ y)(x ∈ Eβ)

s ∈ Eβ ⇒ ∃z(∀y ∈ s)(∀x ∈ y)(x ∈ z).

⊓⊔

Lemma 4.22 (∆E
free variables displayed then for any ¯s = s1, ..., sn

0 -Collection). Let F (a, b, ¯c) be any ∆E

0 formula of IKP(E) containing exactly the

(cid:13)Ω ⇒ (∀x ∈ si)∃yF (x, y, ¯s) → ∃z(∀x ∈ si)(∃y ∈ z)F (x, y, ¯s).

Proof. Since F is ∆E

0 we have

Hence by Lemma 4.15 we have

no ¯β((∀x ∈ si)∃yF (x, y, ¯s)) = ωΩ+2.

H[ ¯β]

ωΩ+2·2
Ω

¯s ∈ E ¯β, (∀x ∈ si)∃yF (x, y, ¯s) ⇒ (∀x ∈ si)∃yF (x, y, ¯s) .

Applying (ΣE -Ref ) gives

H[ ¯β]

ωΩ+2·2+2
Ω

¯s ∈ E ¯β, (∀x ∈ si)∃yF (x, y, ¯s) ⇒ ∃z(∀x ∈ si)(∃y ∈ z)F (x, y, ¯s) .

By (→ R) we get

H[ ¯β]

ωΩ+2·2+3
Ω

¯s ∈ E ¯β ⇒ (∀x ∈ si)∃yF (x, y, ¯s) → ∃z(∀x ∈ si)(∃y ∈ z)F (x, y, ¯s) .

Finally since ωΩ+2 · 2 + 3 < ωΩ+3 we may conclude

(cid:13)Ω⇒ (∀x ∈ si)∃yF (x, y, ¯s) → ∃z(∀x ∈ si)(∃y ∈ z)F (x, y, ¯s)

as required.

⊓⊔

Lemma 4.23 (Exponentiation). For any terms s, t any β, γ < Ω and any operator H

H[β, γ]

δ+4

δ+3

s ∈ Eβ, t ∈ Eγ ⇒ ∃z(∀x ∈ st)(x ∈ z)

where δ := max(β, γ) + 2.

78

Proof. First let

p := [x ∈ Eδ | fun(x, s, t)].

As an instance of axiom (E10) we have

(1)

H[β, γ]

0

0

s ∈ Eβ, t ∈ Eγ, fun(q, s, t) ⇒ q ∈ Eδ

for all q.

Also axiom (E8) provides

(2)

H[β, γ]

0

0

q ∈ Eδ, fun(q, s, t) ⇒ q ∈ p

for all q.

Applying (Cut) to (1) and (2) provides

(3)

H[β, γ]

1

δ+2

s ∈ Eβ, t ∈ Eγ, fun(q, s, t) ⇒ q ∈ p

for all q.

Now by (→ R) we have

(4)

H[β, γ]

2

δ+2

s ∈ Eβ, t ∈ Eγ ⇒ fun(q, s, t) → q ∈ p

for all q.

Thus we may use (Eb∀R)∞ giving

(5)

H[β, γ]

δ+1

δ+2

s ∈ Eβ, t ∈ Eγ ⇒ (∀x ∈ st)(x ∈ p)

for all q.

As instances of axioms (E11) and (E4) we also have

(6)

(7)

H[β, γ]

H[β, γ]

0

0
0

0

s ∈ Eβ, t ∈ Eγ, Eδ ∈ Eδ+1 ⇒ p ∈ Eδ+1

⇒ Eδ ∈ Eδ+1.

We may apply (Cut) to (6) and (7) to obtain

(8)

H[β, γ]

1

δ+3

s ∈ Eβ, t ∈ Eγ ⇒ p ∈ Eδ+1.

Finally by applying (∃R) to (5) and (8) we get

H[β, γ]

δ+4

δ+3

s ∈ Eβ, t ∈ Eγ ⇒ ∃z(∀x ∈ st)(x ∈ z)

as required.

⊓⊔

Theorem 4.24. If IKP(E) ⊢ Γ[¯a] ⇒ ∆[¯a] with ¯a the only free variables occurring in the intuition-
Ω terms ¯s, any ¯β < Ω and
istic sequent Γ[¯a] ⇒ ∆[¯a]. Then there is a k < ω such that for any IRSE
any operator H

H[ ¯β]

Ω·ωk

Ω+k

¯s ∈ E ¯β, Γ[¯s] ⇒ ∆[¯s] .

Proof. The proof is by induction on the IKP(E) derivation. If Γ[¯a] ⇒ ∆[¯a] is an axiom of IKP(E)
then the result follows by one of lemmas 4.15, 4.16, 4.17, 4.18, 4.19, 4.20, 4.21, 4.22 and 4.23.

Case 1. Suppose the last inference was (Eb∃L), then (∃x ∈ aiaj)F (x) ∈ Γ[¯a] and the ﬁnal inference
looks like

79

(Eb∃L)

Γ[¯a], fun(b, ai, aj) ∧ F (b) ⇒ ∆[¯a]
Γ[¯a] ⇒ ∆[¯a]

where b does not occur in ¯a. By the induction hypothesis we have a k0 such that

(1)

H[ ¯β, γ]

Ω·ωk0

Ω+k0

¯s ∈ E ¯β, p ∈ Eγ, Γ[¯s], fun(p, si, sj) ∧ F (p) ⇒ ∆[¯s]

for all p and all γ < Ω. Let us choose the special case of (1) where γ := max(βi, βj) + 2 and note
that for this choice of γ, H[ ¯β, γ] = H[ ¯β]. Now fun(p, si, sj) ⇒ fun(p, si, sj) is an axiom due to (E1)
and by Lemma 4.15 we have (cid:13)Ω F (p) ⇒ F (p) so applying (∧R) gives

(2)

(cid:13)Ω fun(p, si, sj), F (p) ⇒ fun(p, si, sj) ∧ F (p).

Applying (Cut) to (1) and (2) provides

(3)

H[ ¯β]

Ω·ωk1
Ω+k1

¯s ∈ E ¯β, p ∈ Eγ, Γ[¯s], fun(p, si, sj), F (p) ⇒ ∆[¯s] .

Now as an instance of axiom (E10) we have

(4)

H[ ¯β]

0

0

¯s ∈ E ¯β, fun(p, si, sj) ⇒ p ∈ Eγ .

So (Cut) to (3) and (4) gives

(5)

H[ ¯β]

Ω·ωk1 +1
Ω+k1

¯s ∈ E ¯β, Γ[¯s], fun(p, si, sj), F (p) ⇒ ∆[¯s] .

To which we may apply (∧L) twice followed by (Eb∃L)∞ to complete the case.

Case 2. Suppose the last inference was (Eb∃R) then ∆[¯a] = {(∃x ∈ aiaj)F (x)} and the ﬁnal
inference looks like

(Eb∃R)

Γ[¯a] ⇒ fun(b, ai, aj) ∧ F (b)
Γ[¯a] ⇒ (∃x ∈ aiaj)F (x)

Suppose b is a member of ¯a, without loss of generality let us suppose that b ≡ a1, so by the induction
hypothesis we have a k0 < ω such that

(6)

H[ ¯β]

Ω·ωk0

Ω+k0

¯s ∈ E ¯β, Γ[¯s] ⇒ fun(s1, si, sj) ∧ F (s1).

If b is not a member of ¯a we can also conclude (6) by the induction hypothesis. As an instance of
axiom (E1) we have fun(s1, si, sj) ⇒ fun(s1, si, sj) to which we may apply (∧L) giving

(7)

H[ ¯β]

1

0

fun(s1, si, sj) ∧ F (s1) ⇒ fun(s1, si, sj) .

Now applying (Cut) to (6) and (7) yields

(8)

Axiom (E10) gives us

(9)

H[ ¯β]

0

0

H[ ¯β]

Ω·ωk0 +1
Ω+k0

¯s ∈ E ¯β, Γ[¯s] ⇒ fun(s1, si, sj).

¯s ∈ E ¯β, fun(s1, si, sj) ⇒ s1 ∈ Eδ where δ := max(βi, βj) + 2.

80

So applying (Cut) to (8) and (9) gives

(10)

H[ ¯β]

Ω·ωk0 +1
Ω+k0

¯s ∈ E ¯β, Γ[¯s] ⇒ s1 ∈ Eδ.

Finally we may apply (Eb∃R) to (6) and (10) to complete this case.

Case 3. Now suppose the last inference was (Eb∀L), so (∀x ∈ aiaj)F (x) ∈ Γ[¯a] and the ﬁnal
inference looks like

(Eb∀L)

Γ[¯a], fun(b, ai, aj) → F (b) ⇒ ∆[¯a]
Γ[¯a] ⇒ ∆[¯a].

If b is present in ¯a, without loss of generality let us suppose b ≡ a1, regardless of whether b is
present in ¯a, by the induction hypothesis we have a k0 < ω such that

(11)

H[ ¯β]

Ω·ωk0
Ω+k0

¯s ∈ E ¯β, p ∈ Eγ, Γ[¯s], fun(p, si, sj) → F (p) ⇒ ∆[¯s] .

The problem here is that β1 may be greater than max(βi, βj ) + 2 meaning we cannot immediately
apply (Eb∀L), moreover unlike in case 2 it is not possible to derive ¯s ∈ E ¯β, Γ[¯s] ⇒ fun(s1, si, sj).
Instead we verify the following claim:

(*)

(cid:13)Ω Γ[¯s], (∀x ∈ sisj)F (x) ⇒ fun(s1, si, sj) → F (s1)

To prove the claim we ﬁrst note that as an instance of axiom (E10) we have

(12)

H[ ¯β]

0

0

¯s ∈ E ¯β, fun(s1, si, sj) ⇒ s1 ∈ Eδ where δ := max(βi, βj ) + 2.

Then we have the following template for derivations in IRSE
Ω.

(→ L)

(Eb∀L)

(E1)

(cid:13) fun(s1, si, sj) ⇒ fun(s1, si, sj)

Lemma 4.15
(cid:13)Ω F (s1) ⇒ F (s1)

(cid:13)Ω fun(s1, si, sj) → F (s1), fun(s1, si, sj) ⇒ F (s1)

(12)

(→ R)

(cid:13)Ω (∀x ∈ sisj)F (x), fun(s1, si, sj) ⇒ F (s1)
(cid:13)Ω (∀x ∈ sisj)F (x) ⇒ fun(s1, si, sj) → F (s1)

Thus the claim is veriﬁed. Now we may complete the case by applying (Cut) to (11) and (*).

Case 4. Now suppose the last inference was (b∀L), so (∀x ∈ ai)F (x) ∈ Γ[¯a] and the ﬁnal inference
looks like

(b∀L)

Γ[¯a], b ∈ ai → F (b) ⇒ ∆[¯a]
Γ[¯a] ⇒ ∆[¯a].

If b does occur in ¯a, without loss of generality we may assume b ≡ a1. Regardless of whether b is
present in ¯a, by the induction hypothesis we have a k0 < ω such that

(13)

H[ ¯β]

Ω·ωk0

Ω+k0

¯s ∈ E ¯β, Γ[¯s], s1 ∈ si → F (s1) ⇒ ∆[¯s].

81

Claim:

(**)

(cid:13)Ω (∀x ∈ si)F (x) ⇒ s1 ∈ si → F (s1).

To prove the claim we ﬁrst note that by axiom (E6) we have

(14)

H[ ¯β]

0

0

¯s ∈ E ¯β, s1 ∈ si ⇒ s1 ∈ Eβi

Then we have the following template for derivations in IRSE
Ω.

(→ L)

b∀L)

(E1)

(cid:13) s1 ∈ sj ⇒ s1 ∈ sj

Lemma 4.15
(cid:13)Ω F (s1) ⇒ F (s1)

(cid:13)Ω s1 ∈ sj → F (s1), s1 ∈ sj ⇒ F (s1)

(14)

(→ R)

(cid:13)Ω (∀x ∈ si)F (x), s1 ∈ sj ⇒ F (s1)
(cid:13)Ω (∀x ∈ si)F (x) ⇒ s1 ∈ si → F (s1)

Finally we may apply (Cut) to (13) and (**) to complete this case.

Case 5. Now suppose the last inference was (∀L), so ∀xF (x) ∈ Γ[¯a] and the ﬁnal inference looks
like

(∀L)

Γ[¯a], F (b) ⇒ ∆[¯a]
Γ[¯a] ⇒ ∆[¯a].

If b is a member of ¯a, without loss of generality let us assume b ≡ a1. By the induction hypothesis
we have a k0 < ω such that

(15)

H[ ¯β]

Ω·ωk0 +1
Ω+k0

¯s ∈ E ¯β, Γ[¯s], F (s1) ⇒ ∆[¯s].

If b is not a member of ¯a we can in fact still conclude (15) from the induction hypothesis. Now as
an instance of axiom (E1) we have

(16)

H[ ¯β]

0

0

¯s ∈ E ¯β ⇒ s1 ∈ Eβ1 .

So applying (∀L) gives the desired result.

Case 6. Now suppose the last inference was (∀R), then {∀xF (x)} ≡ ∆[¯a] and the ﬁnal inference
looks like

(∀L)

Γ[¯a] ⇒ F (b)
Γ[¯a] ⇒ ∀xF (x)

with b not present in ¯a. By the induction hypothesis we have a k0 < ω such that

H[ ¯β, γ]

Ω·ωk0

Ω+k0

¯s ∈ E ¯β, p ∈ Eγ, Γ[¯s] ⇒ F (p)

for all p and all γ < Ω. Applying (∀R)∞ gives the desired result.

Case 7. Suppose the last inference was (Cut) then the derivation looks like

82

Γ[¯a], B(¯a, ¯b) ⇒ ∆[¯a]

Γ[¯a] ⇒ B(¯a, ¯b)

Γ[¯a] ⇒ ∆[¯a]

where each member of ¯b is distinct from the members of ¯a. By the induction hypothesis we get
k0, k1 ∈ ω such that

(17)

(18)

H[ ¯β]

Ω·ωk0
Ω+k0
H[ ¯β]

¯s ∈ E ¯β, E0 ∈ E1, Γ[¯s], B(¯s, ¯E0) ⇒ ∆[¯s]
Ω·ωk1

¯s ∈ E ¯β, E0 ∈ E1, Γ[¯s] ⇒ B(¯s, ¯E0) .

Ω+k1

Now since ⇒ E0 ∈ E1 is an instance of axiom (E4) and ¯s ∈ E ¯β ⇒ si ∈ Eβi is an instance of axiom
(E1) we may apply (Cut) to (17) and (18) giving

(19)

H[ ¯β]

Ω·ωk

Ω+k

¯s ∈ E ¯β, E0 ∈ E1, Γ[¯s] ⇒ ∆[¯s] .

Finally applying (Cut) to (19) and H[ ¯β]

0

0

E0 ∈ E1 we can complete this case.

All other cases can be treated in a similar manner to one of those above.

⊓⊔

4.5 A relativised ordinal analysis of IKP(E)

Analogously to with IRSP
Ω derivable sequents
in EψΩ(εΩ+1). Again we need the notion of an assignment. Let V ARE be the set of free variables of
IRSE

Ω we will prove a soundness theorem for certain IRSE

Ω, an assignment is a map

v : V ARE −→ EψΩ(εΩ+1)

such that v(aα
IRSE

Ω terms by setting

i ) ∈ Eα+1 for all i < ω and ordinals α. Again an assignment canonically lifts to all

v(Eα) = Eα

v([x ∈ t | F (x, s1, ..., sn)]) = {x ∈ v(t) | F (x, v(s1), ..., v(sn))}.

The diﬀerence between here and the case of IRSP
Ω is that for a given term t, it is no longer possible
to ascertain the location of v(t) within the E-hierarchy solely by looking at the syntactic structure
of t. It is however possible to place an upper bound on that location using the following function

m(Eα) : = α
m(aα
i ) : = α

m([x ∈ t | F (x, s1, ..., sn)]) : = max(m(t), m(s1), ..., m(sn)) + 1.

It can be observed that v(s) ∈ Em(s)+1 for any s, however in general m(s) is only an upper bound
on a term’s position in the E-hierarchy.

Theorem 4.25 (Soundness for IRSE
max{rk(A) | A ∈ Γ} ≤ Ω, ∆[s1, ..., sn] a set containing at most one ΣE formula and

Ω). Suppose Γ[s1, ..., sn] is a ﬁnite set of ΠE formulae with

H

α
ρ Γ[¯s] ⇒ ∆[¯s]

for some operator H and some α, ρ < Ω.

83

Then for any assignment v,

EψΩ(εΩ+1) |= ^ Γ[v(s1), ..., v(sn)] → _ ∆[v(s1), ..., v(sn)]

where V Γ and W ∆ stand for the conjunction of formulae in Γ and the disjunction of formulae in
∆ respectively, by convention V ∅ := ⊤ and W ∅ := ⊥.
Proof. The proof is by induction on α. Note that the derivation H
inferences of the form (∀R)∞, (∃L)∞ or (ΣE -Ref ) and all cuts have ∆E

α
ρ Γ[¯s] ⇒ ∆[¯s] contains no
0 cut formulae.

All axioms apart from (E6) and (E7) are clearly sound under the interpretation, the soundness of
(E6) and (E7) follows from Lemma 4.2.

Now suppose the last inference was (Eb∃R), so amongst other premises we have

H

α0
ρ Γ[¯s] ⇒ fun(t, si, sj) ∧ A(t, ¯s)

for some α0 < α.

Applying the induction hypothesis yields

EψΩ(εΩ+1) |= ^ Γ[v(¯s)] → [fun(v(t), v(si), v(sj )) ∧ A(v(t), ¯s)] where v(¯s) := v(s1), ..., v(sn).

Suppose Γ[v(¯s)] holds in EψΩ(εΩ+1), so we have

EψΩ(εΩ+1) |= fun(v(t), v(si), v(sj)) ∧ A(v(t), v(¯s)).

It remains to note that the function space v(si)v(sj) is a member of EψΩ(εΩ+1) and thus

EψΩ(εΩ+1) |= (∃x ∈ v(si)v(sj))A(x, v(¯s))

as required.

Now suppose the last inference was (Eb∃L)∞, thus amongst other premises we have

(20)

H

α0
ρ Γ[¯s], fun(p, si, sj) ∧ A(p, ¯s) ⇒ ∆[¯s]

for all terms p and some α0 < α.

For the remainder of this case ﬁx an arbitrary valuation v0. Let β0 := m(si), β1 := m(sj) and
β := max(β0, β1) + 2. Choose k such that aβ
k does not occur in any of the terms in ¯s. As a special
case of (20) we have

H

α0
ρ Γ[¯s], fun(aβ

k , si, sj) ∧ A(aβ

k , ¯s) ⇒ ∆[¯s] .

Applying the induction hypothesis we get
EψΩ(εΩ+1) |= ^ Γ[v(¯s)] ∧ [fun(v(aβ

(21)

k ), v(si), v(sj)) ∧ A(v(aβ

k ), v(¯s))] → _ ∆[v(¯s)]

for all valuations v. In particular (21) holds true for all valuations v which coincide with v0 on ¯s.
By the choice of aβ

k it follows that

as required.

EψΩ(εΩ+1) |= ^ Γ[v0(¯s)] → _ ∆[v0(¯s)]

All other cases may be treated in a similar manner to those above, using similar reasoning to
⊓⊔
Theorem 3.25.

84

Lemma 4.26. Suppose IKP(E) ⊢ ⇒ A for some ΣE sentence A, then there exists an n < ω, which
we may compute from the derivation, such that

Hσ

ψΩ(σ)

ψΩ(σ)

⇒ A where σ := ωm(Ω · ωm).

Proof. Suppose IKP(E) ⊢ ⇒ A, then by Theorem 4.24 we can explicitly calculate some 1 ≤ m < ω
such that

H0

Ω·ωm
Ω+m

⇒ A

Applying partial cut elimination for IRSE

Ω 4.10 we get

H0

ωm−1(Ω·ωm)
Ω+1

⇒ A .

Finally by applying collapsing for IRSE

Ω 4.13 we get

Hωm(Ω·ωm)

ψΩ(ωm(Ω·ωm))
ψΩ(ωm(Ω·ωm))

⇒ A

as required.

⊓⊔

Theorem 4.27. If A is a ΣE -sentence and IKP(E) ⊢ ⇒ A then there is an ordinal term α <
ψΩ(εΩ+1), which we may compute from the derivation, such that

Eα |= A.

Proof. By Lemma 4.26 we can determine some m < ω such that

Hσ

ψΩ(σ)

ψΩ(σ)

⇒ A where σ := ωm(Ω · ωm).

Let α := ψΩ(σ). Applying boundedness 4.12 we get

Now Theorem 4.25 yields

It follows that

as required.

H

α
α ⇒ AEα .

EψΩ(εΩ+1) |= AEα.

Eα |= A

Remark 4.28. Suppose A ≡ ∃xC(x) is a ΣE sentence and IKP(E) ⊢ ⇒ A. As in the case of
IKP(P), as well as the ordinal term α given by Theorem 4.27, it is possible to compute a speciﬁc
IRSE
Ω term s such that Eα |= C(s). Moreover this process can be carried out inside IKP(E). These
results will be veriﬁed in [28].

As in the foregoing cases we also have a conservativity result.

Theorem 4.29. IKP(E) + ΣE -Reﬂection is conservative over IKP(E) for ΣE -sentences.

⊓⊔

85

Remark 4.30. An obvious question is whether the conservativity results of Theorems 2.37, 3.29,
4.29 can be lifted to formulae with free variables? This would require ordinal analyses with set
parameters. For classical Kripke-Platek set theory this has been carried out by the ﬁrst author in
[8]. The second author thinks that this result can be lifted to the intuitionistic context. However it
is likely that this extension requires a fair amount of extra work since the linearity and decidability
of the ordinal representation system would have to be sacriﬁced.

References

[1] P. Aczel, M. Rathjen: Notes on constructive set

stitut Mittag-Leﬄer
http://www.ml.kva.se/preprints/archive2000-2001.php

(The Royal

Swedish Academy

of

theory, Technical Report 40,

In-
Sciences,Stockholm,2001).

[2] P. Aczel, M. Rathjen: Constructive set theory, book draft, August 2010.

[3] T. Arai: Proof theory for theories of ordinals II: Π3-Reﬂection, Annals of Pure and Applied

Logic 129 (2004) 39–92.

[4] J Barwise: Admissible Sets and Structures (Springer, Berlin 1975).

[5] M. Beeson: Foundations of Constructive Mathematics. Springer, Berlin (1985).

[6] W. Buchholz: A new system of proof-theoretic ordinal functions. Annals of Pure and Applied

Logic 32 (1986) 195-207

[7] W. Buchholz: A simpliﬁed version of local predicativity, in: P. Aczel, H. Simmons, S. Wainer

(eds.), Leeds Proof Theory 1991 (Cambridge University Press, Cambridge, 1993) 115–147.

[8] J. Cook: Ordinal Analysis of Set Theories; Relativised and Intuitionistic. PhD thesis (University

of Leeds, 2015).

[9] H. Friedman: Countable models of set theories. In: A. Mathias and H. Rogers (eds.): Cambridge
Summer School in Mathematical Logic, volume 337 of Lectures Notes in Mathematics (Springer,
Berlin, 1973) 539–573.

[10] H. Friedman, S. ˇSˇcedrov: The lack of deﬁnable witnesses and provably recursive functions in

intuitionistic set theory, Advances in Mathematics 57 (1985) 1–13.

[11] G. J¨ager: Beweistheorie von KPN, Archiv f. Math. Logik 2 (1980) 53–64.

[12] G. J¨ager: Zur Beweistheorie der Kripke–Platek Mengenlehre ¨uber den nat¨urlichen Zahlen,

Archiv f. Math. Logik 22 (1982) 121–139.

[13] G. J¨ager: Iterating admissibility in proof theory, in: J. Stern (ed): Proceedings of the Herbrand

Logic Colloquium ’81, (North-Holland, Amsterdam, 1982) 137–146.

[14] G. J¨ager: Theories for admissible sets: a unifying approach to proof theory (Bibliopolis, Naples,

1986).

86

[15] G. J¨ager and W. Pohlers: Eine beweistheoretische Untersuchung von ∆1

2–CA + BI
und verwandter Systeme, Sitzungsberichte der Bayerischen Akademie der Wissenschaften,
Mathematisch–Naturwissenschaftliche Klasse (1982).

[16] W. Pohlers: Subsystems of set theory and second order number theory, in: S. Buss (ed.):

Handbook of proof theory (Elsevier Science B.V.) (1998) 209–335.

[17] M. Rathjen: Unpublished Lecture Notes on Proof Theory, Ohio State University (1993).

[18] M. Rathjen: How to develop proof–theoretic ordinal functions on the basis of admissible ordinals

Mathematical Logic Quarterly 39 (1993) 47–54.

[19] M. Rathjen: Proof theory of reﬂection. Annals of Pure and Applied Logic 68 (1994) 181–224.

[20] M. Rathjen: The realm of ordinal analysis. S.B. Cooper and J.K. Truss (eds.): Sets and Proofs.

(Cambridge University Press, 1999) 219–279.

[21] M. Rathjen, S. Tupailo: Characterizing the interpretation of set theory in Martin-L¨of type

theory. Annals of Pure and Applied Logic 141 (2006) 442–471.

[22] M. Rathjen: The disjunction and other properties for constructive Zermelo-Fraenkel set theory.

Journal of Symbolic Logic 70 (2005) 1233–1254.

[23] M. Rathjen: An ordinal analysis of parameter-free Π1

2 comprehension. Archive for Mathemat-

ical Logic 44 (2005) 263–362.

[24] M. Rathjen: Metamathematical Properties of Intuitionistic Set Theories with Choice princi-
pals. In: S. B. Cooper, B. L¨owe, A. Sorbi (eds.): New Computational Paradigms: Changing
Conceptions of What is Computable (Springer, New York, 2008) 287–312.

[25] M. Rathjen: From the weak to the strong existence property. Annals of Pure and Applied

Logic 163 (2012) 1400–1418.

[26] M. Rathjen: Constructive Zermelo-Fraenkel Set Theory, Power Set, and the Calculus of Con-
structions. In: P. Dybjer, S. Lindstr¨om, E. Palmgren and G. Sundholm: Epistemology ver-
sus ontology: Essays on the philosophy and foundations of mathematics in honour of Per Martin-L¨of
(Springer, Dordrecht, Heidelberg, 2012) 313–349.

[27] M. Rathjen: Relativized ordinal analysis: The case of Power Kripke-Platek set theory. Annals

of Pure and Applied Logic 165 (2014) 316–393.

[28] M. Rathjen: The existence property for intuitionistic set theories with collection. In prepara-

tion.

[29] K. Sch¨utte: Proof Theory (Springer, Berlin 1977).

[30] A.W. Swan: CZF does not have the existence property. Annals of Pure and Applied Logic 165

(2014) 1115–1147.

87

