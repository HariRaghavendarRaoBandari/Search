6
1
0
2

 
r
a

 

M
5
1

 
 
]

.

R
P
h
t
a
m

[
 
 

1
v
5
3
7
4
0

.

3
0
6
1
:
v
i
X
r
a

CONVERGENCE RATE FOR THE HEDGING ERROR

OF A PATH-DEPENDENT EXAMPLE

DARIO GASBARRA AND ANNI LAITINEN

Abstract. We consider a Brownian functional F = g(cid:0)R T
0 η(s)dWs(cid:1)
with g ∈ L2 (γ) and a singular deterministic η. We deduce the L2 -
convergence rate for the approximation F (n) = EF +R T
0 φ(n)(s)dWs
for a class of piecewise constant predictable integrands φ(n) from
the fractional smoothness of g quantiﬁed by Besov spaces and the
rate of singularity of η.

Keywords: Malliavin calculus, chaos decomposition, fractional smooth-
ness, Besov space, approximation error

1. Introduction

Let (Wt)t≥0 be a standard Brownian motion on a complete probability
space (Ω,F , ), and F = (Ft)t≥0 the ﬁltration generated by W and
augmented by the -null sets. Suppose we have a square-integrable
random variable F : Ω → R. With a suitable choice of a process
(φt)t≥0, we can represent F as

F = EF +Z T

0

φtdWt,

provided that our F is FT -measurable. This would correspond to the
perfect hedging of the option F , where W is the price process of the
underlying, T > 0 the time horizon, and φ the trading strategy. Using
only ﬁnitely many trading times 0 = t0 < t1 < . . . < tn = T , denoted
by τn = (ti)n

i=0, means we get an error

n

Xi=1

C(F, τn, ν) :=Z T

0

φtdWt −

νi−1(cid:0)Wti − Wti−1(cid:1) ,
where νi−1 is measurable w.r.t. Fti−1, that is, ν = (νi)n−1
hedging strategy, constant between the trading times.
The behaviour of this error as the number of trading times tends to
inﬁnity, depending on the structure of F , has been a topic of intensive
research in recent years.

i=0 is our new

Date: March 16, 2016.

1

2

DARIO GASBARRA AND ANNI LAITINEN

For F = f (WT ), that is, in the case of European options, where the pay-
oﬀ depends only on the stock price at the terminal time, the problem
is fairly well understood. The convergence in L2 was considered in
[16], [11], [5], [3] and [8], also for non-equidistant time-nets τ and more
general price processes than W , and convergence w.r.t. the BMO norm
in [6], employing the L2 techniques as well. The convergence with
respect to a stronger Lp norm for p > 2 was investigated in [10]; here,
missing orthogonality required fundamentally diﬀerent methods. For
weak convergence, see e.g. [11], [9], [12] and [2], to name a few. The
key concept to study the error behaviour is the fractional smoothness
of f , which links the problem to functional analysis and interpolation
theory. See [7] and the references therein for a more complete overview.
Now, one would like to understand the behaviour of the error

C(F, τn, ν) =Z T

0

φtdWt −

n

Xi=1

νi−1(cid:0)Wti − Wti−1(cid:1)

when F is a square-integrable random variable, not necessarily of the
form F = f (WT ). A similar question has been considered in [4]; there,
the case when the terminal condition F depends only on ﬁnitely many
increments of the price process was investigated in a sightly diﬀerent
setting with backward stochastic diﬀerential equations. For a fully path
dependent F , the question seems to be open.
This work contributes to this aim by an example of the form

(1)

F = g(cid:18)Z T

0

η(t)dWt(cid:19),

where η has a singularity (T − t)−α for some α ∈ (0, 1
2. Preliminaries and notation

2) at the end.

We use the notations L2 for square integrable random variables and
D1,2 ⊂ L2 for random variables in L2 with square integrable Malliavin
derivatives; for Malliavin calculus and general theory on Brownian mo-
tion, we refer to [13] and [14]. The notations L2 (γ) and D1,2(γ) are
used respectively for functions on the real line, with γ denoting the
standard Gaussian measure.
For fractional smoothness, we use the index θ ∈ (0, 1), and the Besov
spaces

Bθ

2,q(γ) =(cid:0)L2 (γ), D1,2(γ)(cid:1)θ,q .

These are intermediate spaces between L2 (γ) and D1,2(γ), obtained by
the real interpolation (see e.g. [1]), with the interpolation parameters

CONVERGENCE RATE FOR THE HEDGING ERROR OF A PATH-DEPENDENT EXAMPLE3

0 < θ < 1 and 1 ≤ q ≤ ∞. These spaces have a lexicographical order:

for any 0 < θ1 < θ2 < 1 and any 1 ≤ q1, q2 ≤ ∞, and

2,q1(γ) ⊂ Bθ1
Bθ2

2,q2(γ)

2,q1(γ) ⊂ Bθ
Bθ

2,q2(γ)

for any 0 < θ < 1 and any 1 ≤ q1 ≤ q2 ≤ ∞. Computing θ is
elementary for many functions, see [15] or [10, Example 2.3] for the
standard examples.

Finally, if F ∈ D1,2, we use the notation pDF for the predictable
projection of the Malliavin derivative DF , and the same notation for
the process obtained by extending the operator from D1,2 to L2 (see
Section 5 for details). Then, for 0 < t < T , we have

E(F|Fb) − E(F|Fa) =Z b

a

for 0 ≤ a < b ≤ T .

(pDF )tdWt

3. Results

For T > 0 and β ∈ (0, 1), we deﬁne the function η : [0, T ) → R by
setting

We observe that η has a singularity at t = T , and k η kL2 ([0,T ])= 1.
We will consider the random variable

η(t) = (T − t)(β−1)/2 T −β/2pβ.
η(t)dWt(cid:19)

F := g(cid:18)Z T

0

with g ∈ L2 (γ). Notice that we do not assume continuity of g.
Theorem 3.1. Let 0 < θ < 1 and ti := i
2,2(γ), then

n T . If g ∈ Bθ

≤ c2n− βθ

2 ,

n

(cid:12)(cid:12)(cid:12)(cid:12)(cid:12)
(cid:12)(cid:12)(cid:12)(cid:12)(cid:12)

(cid:12)(cid:12)(cid:12)(cid:12)(cid:12)L2
νi(cid:0)Wti − Wti−1(cid:1)(cid:12)(cid:12)(cid:12)(cid:12)(cid:12)
E(cid:0)(pDF )s|Fti−1(cid:1) ds.

Xi=1
F − EF −
where νi = (ti − ti−1)−1R ti
The proof is based on the following observation:
Lemma 3.2. For 0 ≤ a < b ≤ T , let
∆(a, b) := E(F|Fb) − E(F|Fa) −

ti−1

b − a Z b
Wb − Wa

a

E(cid:0)(pDF )s(cid:12)(cid:12)Fa(cid:1)ds.

4

DARIO GASBARRA AND ANNI LAITINEN

Then

1

E(cid:0)∆(a, b)2(cid:1)
= E(cid:18)
+ E(cid:18)Z b

2(b − a)Z b
a Z b
a (cid:8)E(cid:0)(pDF )t(cid:12)(cid:12)Fa(cid:1) − E(cid:0)(pDF )s(cid:12)(cid:12)Fa(cid:1)(cid:9)2ds dt(cid:19)
a (cid:8)(pDF )t − E(cid:0)(pDF )t(cid:12)(cid:12)Fa(cid:1)(cid:9)2

dt(cid:19).

4. Proofs

Proof of Lemma 3.2. By a stochastic Fubini theorem,

Therefore,

b − a Z b
Wb − Wa

a

∆(a, b) =Z b

a

1

1

=

=

=

E(cid:0)(pDF )s(cid:12)(cid:12)Fa(cid:1)ds
(pDF )tdWt −
b − aZ b
a (cid:18)Z b
a (cid:26)(pDF )t − E(cid:0)(pDF )s(cid:12)(cid:12)Fa(cid:1)(cid:27)dWt(cid:19)ds
1
b − aZ b
a (cid:18)Z b
a (cid:26)(pDF )t − E(cid:0)(pDF )s(cid:12)(cid:12)Fa(cid:1)(cid:27)ds(cid:19)dWt.
E(cid:0)∆(a, b)2(cid:1)
a (cid:26)(pDF )t − E(cid:0)(pDF )s(cid:12)(cid:12)Fa(cid:1)(cid:27)ds(cid:19)2
(b − a)2 Z b
E(cid:18)Z b
(b − a)2 Z b
a Z b
a Z b
E(cid:18)(cid:8)(pDF )t − E(cid:0)(pDF )z(cid:12)(cid:12)Fa(cid:1)(cid:9)×
(cid:8)(pDF )t − E(cid:0)(pDF )y(cid:12)(cid:12)Fa(cid:1)(cid:9)(cid:19)dydzdt
2(b − a)Z b
a Z b
= E(cid:18)
a (cid:8)E(cid:0)(pDF )t(cid:12)(cid:12)Fa(cid:1) − E(cid:0)(pDF )s(cid:12)(cid:12)Fa(cid:1)(cid:9)2
+ E(cid:18)Z b
a (cid:8)(pDF )t − E(cid:0)(pDF )t(cid:12)(cid:12)Fa(cid:1)(cid:9)2dt(cid:19).

dt

=

1

a

1

a

ds dt(cid:19)

(cid:3)

cn

Hn(x)
√n!

∞

Pn=0

Proof of Theorem 3.1. Since g ∈ L2 (γ), we have g(x) =
c2
n < ∞. For F , we then have the chaos expansion
with

∞

Pn=0

F =Xn≥0

In(fn) =Xn

cn

1
√n!

Hn(cid:0)W (η)(cid:1)

CONVERGENCE RATE FOR THE HEDGING ERROR OF A PATH-DEPENDENT EXAMPLE5

with fn(t1, . . . , tn) = cn√n!
the Hermite polynomials, and since k η kL2 ([0,T ])= 1, we have Hn(W (η)) =
In(η⊗n). From Lemma 3.2 we obtain

η(t1)η(t2) . . . η(tn). With this normalization of

E(cid:0)∆(a, b)2(cid:1) =Xn≥1
Xn≥2

n(cid:26)(cid:18)Z b

η(t)2dt(cid:19)n

c2

0

=: Aa,b + Ba,b.

0

nc2
n

2(b − a)(cid:18)Z a
−(cid:18)Z a

η(t)2dt(cid:19)n−1Z b
a Z b
a (cid:0)η(t) − η(s)(cid:1)2
η(t)2dt(cid:19)n
η(t)2dt(cid:19)n−1(cid:18)Z b
− n(cid:18)Z a

a

0

0

dsdt +

η(t)2dt(cid:19)(cid:27)

Since

Z b

a

η(t)2dt =

we see that

Ba,b = Xn≥2

c2

β

T β Z b

a

b

(T − t)β−1dt =(cid:16)1 −
T(cid:19)β#n
n("1 −(cid:18)1 −
−(cid:18)1 −
T(cid:17)β
nZ 1−(1− b
T )β Z u

1−(1− a

1−(1− a

T )β

T )β

a

−n"(cid:16)1 −
= Xn≥2

c2

a

T(cid:17)β

−(cid:18)1 −

b

T(cid:19)β

,

b

a

T(cid:17)β(cid:21)n
T(cid:17)β(cid:21)n−1)

−(cid:20)1 −(cid:16)1 −
T(cid:19)β#(cid:20)1 −(cid:16)1 −
n(n − 1)sn−2dsdu.

a

Notice that when β = 1, i.e. when η is constant, which means that
nR b
a R u
F = g(WT ), the term Aa,b is zero and Ba,b = Pn≥2 c2
a n(n −

1)sn−2dsdu. This case was treated in [3] and [8].
For simplicity, let us suppose that T = 1. Assuming that
(2)

n!c2
n

nn(n−1)Z 1

0

c2

(1−s)1−θsn−2ds =Xn≥2

Xn≥2
(2 − θ)(3 − θ) . . . (n − θ)
and using [8, Lemma 3.8] we achieve, for any time net {ti}m
i=1,
Xi=1 Z ti
ti − ti−1
(1 − ti−1)1−θ

c2
nn(n − 1)sn−2dsdu ≤ C1 sup
1≤i≤m

ti−1Z u

ti−1Xn≥2

m

= C < ∞,

for some C1 > 0 depending only on C and θ. Now we ﬁx the time
net 0 = t0
:=

m = 1 with t0
i

1 < . . . < t0

m . Using tβ

0 < t0

:= i

i

m−1 < t0

6

DARIO GASBARRA AND ANNI LAITINEN

1 − (1 − ti)β we see that

m

Xi=1

Bt0

i−1,t0

i ≤ c1 sup
1≤i≤n

tβ
i − tβ
i−1
(cid:16)1 − tβ

i−1(cid:17)1−θ ≤ c1m−βθ.

Notice that condition (2) is equivalent to g ∈ Bθ
2,2(γ) ([8, Theorem
2.2 and proof of Theorem 3.2]; see also [10, Theorem 3.1] for another
proof), and that the result so far coincides with the case treated in [8].
For Aa,b, we use (2) again in an equivalent form:

(3)

Then

nc2
n

c2
nnθ < C2 < ∞,

Xn≥1
η(t)2dt(cid:19)n−1Z b
2(b − a)(cid:18)Z a
a Z b
a (cid:0)η(t) − η(s)(cid:1)2dsdt
Aa,b =Xn≥1
nnθn1−θh1 − (1 − a)βin−1 β
=Xn≥1
b − a×
a (cid:18)(1 − u)(β−1)/2 − (1 − v)(β−1)/2(cid:19)2
Z b
a Z b

dudv.

c2

2

1

0

By an elementary computation,

n1−θh1 − (1 − a)βin−1

≤ (1 − a)β(θ−1)

for all n.
Furthermore,

dudv

a

β

β

a (cid:18)(1 − u)(β−1)/2 − (1 − v)(β−1)/2(cid:19)2
2(b − a)Z b
a Z b
= βZ b
(1 − u)β−1du −
= (1 − a)β − (1 − b)β −

(b − a)Z b
a Z b
(b − a)Z b
a Z (1−u)(1−b)
(b − a)Z b
(cid:8)(1 − a)(β+1)/2 − (1 − b)(β+1)/2(cid:9)du

= (1 − a)β − (1 − b)β −

(1−u)(1−a)
2

β + 1

β

β

β

4

a

a

(1 − u − v + uv)(β−1)/2dudv

z(β−1)/2(1 − u)−1dvdu

(1 − u)(β−1)/2×

= (1 − a)β − (1 − b)β −

(b − a)

(β + 1)2(cid:8)(1 − a)(β+1)/2 − (1 − b)(β+1)/2(cid:9)2

.

CONVERGENCE RATE FOR THE HEDGING ERROR OF A PATH-DEPENDENT EXAMPLE7

When 0 ≤ a < b = 1 we obtain

1 + β(cid:19)2
(1 − a)β(cid:18) 1 − β

.

Otherwise 0 ≤ a < b < 1 and by the mid-value theorem we obtain

β(b − a)(ξβ−1 − ηβ−1) ≤ β(β − 1)(1 − b)β−2(b − a)2

for some values ξ, η ∈ (1 − b, 1 − a).
By taking an equally spaced time grid (tk = k/N : k = 0, . . . , N), we
have that the sum of the mean square errors over the interval [0, 1] is
bounded by

+ β(β − 1)N−2

N−1

N(cid:19)β−2
Xk=1(cid:18) k
+ β(β − 1)ζ(2 − β)(cid:27),

1 + β(cid:19)2
N−β(cid:18) 1 − β
1 + β(cid:19)2
≤ N−β(cid:26)(cid:18)1 − β
Pk=1

k−t

∞

where ζ(t) =

is Riemann’s zeta function.

Thus for β < 1,
m

1 + β(cid:19)2
Ati−1,ti ≤ C2m−β(θ−1)m−β(cid:26)(cid:18)1 − β

Xi=1

+β(β−1)ζ(2−β)(cid:27) = C3m−βθ.

(cid:3)

5. Appendix

W is the augmented Brownian ﬁltration and P is the F-
Here F = F
predictable σ-algebra on (Ω × [0, T ]) generated by the left continuous
F-adapted processes (for the notation and concepts in this section, see
[14]). Note that in the Brownian ﬁltration, the F-predictable and F-
optional σ-algebrae coincide. This is not so in general for the ﬁltration
generated by a L´evy process.
Let

pL2 (Ω × [0, T ]) := L2 (Ω × [0, T ],P, dP × dt)

the subspace of F-predictable integrands Yt(ω) with

E(cid:18)Z T

0

Y 2

t dt(cid:19) < ∞.

Note that pL2 (Ω × [0, T ]) is a closed subspace of L2 (Ω × [0, T ],F W
T ⊗
B([0, T ]), dP × dt).
For any process Xt(ω) ∈ L2 (Ω × [0, T ],F W
T ⊗ B([0, T ]), dP × dt), there
exists the predictable projection pX ∈ pL2 (Ω × [0, T ]) such that for

8

DARIO GASBARRA AND ANNI LAITINEN

any F-predictable stopping time τ (ω) (notice that in the Brownian
ﬁltration all stopping times are predictable),

E(Xτ|Fτ−)(ω)1(τ (ω) < ∞) = pXτ (ω)(ω)1(τ (ω) < ∞),

where

Fτ− = σ{A ∩ {t < τ} : t ≥ 0, A ∈ Ft}.
By the Itˆo representation theorem, if F (ω) ∈ L2 (Ω,F W
is an unique Yt(ω) ∈ pL2 (Ω × [0, T ]) such that
YtdW (t),

T , P ), then there

where the stochastic integral is an Itˆo integral, and by the Itˆo isometry

0

F = E(F ) +Z T
E(F 2) = E(F )2 + E(cid:18)Z T
t dt(cid:19).
pD : L2 (Ω) → pL2 (Ω × [0, T ])

Y 2

0

We show that Yt = (pDF )t, where

is the closure of the operator deﬁned for F ∈ D1,2 such that F 7→
p(DF ), and Dom(pD) = L2 (Ω,F W
Lemma 5.1. For F ∈ D1,2, deﬁne pDF = p(DF ). In other words, for
any F -predictable stopping time τ ,

T , P ).

pDτ F (ω)1(τ (ω) < ∞) = E(Dτ F|Fτ−)(ω)1(τ (ω) < ∞).

In particular, if τ (ω) ≡ t is deterministic,

pDtF (ω) = E(DtF|Ft−)(ω) = E(DtF|Ft)(ω).

The operator pD is closable.

L2 (Ω)

Proof. Let Fn ∈ D1,2 with Fn
−→ Y . Then
necessarily Y = 0.
This is immediate from the Itˆo isometry and Itˆo-Clarck-Ocone formula
for Fn ∈ D1,2:

−→ 0 and pDFn

L2 (Ω×[0,T ])

0
and by the Itˆo isometry,

p(DFn)tdWt =Z T

Fn − E(Fn) =Z T
E(cid:0)(cid:8)Fn − E(Fn)(cid:9)2(cid:1) = E(cid:18)(cid:26)Z T

0

0

E(DtFn|Ft)dWt,

E(DtFn|Ft)dWt(cid:27)2(cid:19)

=Z T

0

E(cid:0)(cid:8)p(DFn)t(cid:9)2(cid:1)dt

CONVERGENCE RATE FOR THE HEDGING ERROR OF A PATH-DEPENDENT EXAMPLE9

so that p(DFn) → 0 in L2 (Ω × [0, T ]) as Fn → 0 in L2 (Ω).
Let now F ∈ L2 (Ω,F W

T , P ) with Itˆo representation

(cid:3)

F = E(F ) +Z T

0

YtdWt,

where Y ∈ pL2 (Ω × [0, T ]), and let Fn ∈ D1,2 with Fn
by Itˆo isometry and Itˆo-Clarck-Ocone formula necessarily

L2 (Ω)

→ F . Then

which means that the extension pDF = Y is well deﬁned.

pDFn := p(DFn)

L2 (Ω×[0,T ])

−→ Y,

This gives a practical procedure to compute the martingale represen-
tation of F ∈ L2 (Ω) : write formally DF using the chaos expansion
or the diﬀerentiation rules of Malliavin calculus. In general DF does
not need to be a random function, it may live in a space of random
distributions. Nevertheless when we compute the predictable projec-
tion of the formal chaos expansion of DF , by evaluating E(DtF|Ft),
we always obtain a nice integrand in pL2 (Ω × [0, T ]).

References

[1] C. Bennet, R. Sharpley, Interpolation of Operators, Academic Press, 1988.
[2] M. Fukasawa, Discretization error of stochastic integrals, Ann. Appl. Probab.

21 (2011) 1436–1465.

[3] C. Geiss, S. Geiss, On approximation of a class of stochastic integrals and

interpolation, Stoch. Stoch. Rep. 76 (2004) 339–362.

[4] C. Geiss, S. Geiss, E. Gobet, Generalized fractional smoothness and Lp-
variation of BSDEs with non-Lipschitz terminal condition. Stochastic Process.
Appl. 122 (2012) 2078–2116.

[5] S. Geiss, Quantitative approximation of certain stochastic integrals, Stoch.

Stoch. Rep. 73 (2002) 241–270.

[6] S. Geiss, Weighted BMO and discrete time hedging within the Black-Scholes

model, Probab. Theory Related Fields 132 (2005) 39–73.

[7] S. Geiss, E. Gobet, Fractional smoothness and applications in Finance, in: G.
Di Nunno, B. Oksendal (Eds), Advanced Mathematical Methods for Finance,
Springer Verlag, 2011, pp. 313–331.

[8] S. Geiss, M. Hujo, Interpolation and approximation in L2(γ), J. Appr. Theory

144 (2007) 213–232.

[9] S. Geiss, A. Toivola, Weak convergence of error processes in discretizations of

stochastic integrals and Besov spaces, Bernoulli 15(4) (2009) 925–954.

[10] S. Geiss, A. Toivola, On fractional smoothness and Lp-approximation on the

Gaussian space, Ann. Probab. 43(2) (2015) 605–638.

[11] E. Gobet, E. Temam, Discrete time hedging errors for options with irregular

pay-oﬀs, Finance Stoch. 5(3) (2001) 357–367.

[12] T. Hayashi, P. Mykland, Evaluating hedging errors: an asymptotic approach,

Math. Finance 15(2) (2005) 309–343.

10

DARIO GASBARRA AND ANNI LAITINEN

[13] D. Nualart, The Malliavin Calculus and Related Topics, second ed., Springer,

2006.

[14] D. Revuz, M. Yor, Continuous Martingales and Brownian Motion, second ed.,

Springer, 1991.

[15] A. Toivola, On fractional smoothness and approximations of stochastic inte-

grals, Report 123, Rep. Univ. Jyv¨askyl¨a Dept. Math. Stat, 2009.

[16] R. Zhang, Couverture approch´ee des options Europ´eennes, PhD thesis, ´Ecole

Nationale des Ponts et Chauss´ees, Paris, 1998.

University of Helsinki, Department of Mathematics and Statistics,
P.O. Box 68, FI-00014 University of Helsinki, Finland

University of Jyv¨askyl¨a, Department of Mathematics and Statistics,
P.O. Box 35, FI-40014 University of Jyv¨askyl¨a, Finland

