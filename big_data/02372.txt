6
1
0
2

 
r
a

M
8

 

 
 
]
T
G
h
t
a
m

.

[
 
 

1
v
2
7
3
2
0

.

3
0
6
1
:
v
i
X
r
a

QUASI-ISOMETRY CLASSIFICATION OF RIGHT-ANGLED

ARTIN GROUPS II: SEVERAL INFINITE OUT CASES

JINGYIN HUANG

Abstract. We are motivated by the question that for which class of right-
angled Artin groups (RAAG’s), the quasi-isometry classiﬁcation coincides with
commensurability classiﬁcation. This is previously known for RAAG’s with ﬁ-
nite outer automorphism groups.
In this paper, we identify two classes of
RAAG’s, where their outer automorphism groups are allowed to contain ad-
jacent transvections and partial conjugations, hence inﬁnite. If G belongs to
one of these classes, then any other RAAG G(cid:48) is quasi-isometric to G if and
only if G(cid:48) is commensurable to G. We also show that in this case, there exists
an algorithm to determine whether two RAAG’s are quasi-isometric by look-
ing at their deﬁning graphs. Compared to the ﬁnite out case, as well as the
previous quasi-isometry rigidity results for symmetric spaces, thick Euclidean
buildings and mapping class groups, the main issue we need to deal with here
is the reconstruction map may not have nice properties as before, or may not
even exist. We introduce a deformation argument, as well as techniques from
cubulation to deal with this issue.

Contents

Introduction

1.
1.1. Motivation and Background
1.2. Main results and open questions
1.3. Comments on the Proof
1.4. Organization of the Paper
1.5. Acknowledgement
2. Preliminaries
2.1. Notations and conventions
2.2. CAT (0) space and CAT (0) cube complex
2.3. Basics about RAAG’s
2.4. Special subgroups of RAAG’s
2.5. Coarse invariants for RAAG’s
3. The structure of extension complex
3.1. Tiers and branches of the extension complex
3.2. Quasi-isometry invariance of type II and weak type II
3.3. RAAG of weak type I
4. Rigidity and ﬂexibility of RAAG of weak type I
4.1. An atlas for RAAG
4.2. Shear standard ﬂats
5. Shuﬄe tires and branches
5.1. Prime right-angled Artin group
5.2. Prime partition and sub-tiers
5.3. An wall space

1

2
2
3
5
6
6
6
6
7
9
10
11
14
14
19
23
25
25
29
36
36
41
45

2

JINGYIN HUANG

References

52

1. Introduction

1.1. Motivation and Background. Given a quasi-isometry q : X → Y between
two metric spaces, one way of understanding q is to specify a collection of subspaces
of X and Y such that they are stable under q, and encode the coarse intersection
pattern of the these subspaces of X (or Y ) in a combinatorial object CX (or CY ).
Then q induces a “morphism” q∗ : CX → CY . Then it is natural to ask the converse:
whether one can reconstruct a map between X and Y from a given morphism
between CX and CY . Such reconstruction problems play important role in proving
rigidity properties of q. Here are two examples.

• When X = Y = SL(n, R)/SO(n) for n ≥ 3, q preserves the intersection
pattern of maximal ﬂats in X, hence induces an automorphism of the spher-
ical building at inﬁnity. However, it follows from the fundamental theorem
of projective geometry that any such automorphism actually comes from a
homothety of X. Then one deduces that every such q is of bounded distance
from a homothety. This is a special case of the results in [KL97, EF97].
• When X and Y are the mapping class groups of oriented closed surfaces of
genus ≥ 2, q preserves the intersection pattern of Dehn twist ﬂats [Ham05,
BKMM12], hence induces an automorphism of the curve complex. However,
Ivanov’s theorem tells us any such automorphism is induced by a mapping
class, hence q is of bounded distance from a left multiplication.

Similar scheme appears in the study of quasi-isometries between right-angled
Artin groups (RAAG). In certain cases, one can reconstruct a map between RAAG’s
from a given isomorphism of the associated right-angled buildings or extension
complexes [BKS08, Hua14a]. However, the situation is diﬀerent from the above
cases in the following aspects:

(1) The existence of the reconstruction map relies on strong assumption of
the outer automorphism groups of the RAAG’s. One can easily ﬁnd an
interesting case where such reconstruction map can not exist.

(2) Even if the reconstruction map exists, it may not be as nice as before. This
is due to the fact that RAAG’s may not “branch” as much as symmetric
spaces, thick Euclidean buildings or mapping class groups. Extra condi-
tions are needed to make the reconstruction map “nice”, and such cases are
studied in [BKS08, Hua14a].

One goal of this paper is to deal with the above issues. We will ﬁrst identify the
largest class of RAAG’s such that the reconstruction map always exists, and study
their rigidity properties. Then we will introduce another class of RAAG’s, where
the reconstruction map fails to exist, and indicate how to get around this issue. It
turns out that ideas from cubulation are relevant.

The previous quasi-isometry classiﬁcation results of RAAG’s fall into two classes
with strong contrast in their conclusions. [BN08] identiﬁes a class of RAAG’s whose
quasi-isometry type does not depend on the deﬁning graph, while [BKS08] identiﬁes
another class of RAAG’s such that two RAAG’s in this class are quasi-isometric if
and only if they are isomorphic. Higher dimensional generalizations of these two

QUASI-ISOMETRY CLASSIFICATION OF RIGHT-ANGLED ARTIN GROUPS II

3

cases are in [BJN10] and [Hua14a] respectively. We intent to understand this strong
contrast by “interpolating” between these two cases. And the classes of RAAG’s
discussed in this paper sever as an initial step towards this goal.

1.2. Main results and open questions. We denote the RAAG with deﬁning
graph Γ by G(Γ). Our search for appropriate classes of RAAG’s is roughly guided
by the outer automorphism group Out(G(Γ)). Namely if a property is true for all
elements in Out(G(Γ)), then we ask whether it is also true for all quasi-isometries of
G(Γ). See Section 2.3 for a review of Out(G(Γ)). Since we are mainly interested in
the case where Out(G(Γ)) is inﬁnite, we need to focus on the 3 types of generators
of Out(G(Γ)) which are of inﬁnite order, namely the adjacent transvections, non-
adjacent transvections and partial conjugations. Adjacent transvection happens
inside a free Abelian subgroup, so it has relatively nice behaviour compared other
types. We deal with it ﬁrst.
Deﬁnition 1.1. G(Γ) is of weak type I if

(1) Γ is connected and does not contain any separating closed star.
(2) There does not exist vertices v, w ∈ Γ such that d(v, w) = 2 and Γ =

St(v) ∪ St(w).

We caution the reader that in this paper, the closed star of a vertex v, which
we denote by St(v), is deﬁned to be the full subgraph spanned by v and vertices
adjacent to v. This deﬁnition is slightly diﬀerent from the usual one. Similarly,
lk(v) is deﬁned to be the full subgraph spanned by vertices adjacent to v.

It turns out that G(Γ) is of weak type I if and only if the reconstruction map
for G(Γ) always exists, see Theorem 3.31 for a precise statement. In particular, all
RAAG’s with ﬁnite outer automorphism group are of weak type I.

A simple example of RAAG of weak type I can be obtained by taking Γ to be
the graph obtained by gluing a 5-cycle and a 3-cycle along an edge.
If G(Γ) is
of weak type I, then Out(G(Γ)) does not contain non-adjacent transvections and
partial conjugations, however, adjacent transvections are allowed.
Theorem 1.2. If G(Γ) and G(Γ(cid:48)) are of weak type I, then they are quasi-isometric
if and only if they are isomorphic.

Having weak type I is not a quasi-isometric invariant. However, the following

weaker version of Theorem 1.2 is true when only G(Γ1) is of weak type II.
Theorem 1.3. Suppose G(Γ1) is of weak type I. Then the following are equivalent:

(1) G(Γ2) is quasi-isometric to G(Γ1).
(2) G(Γ2) is isomorphic to a subgroup of ﬁnite index in G(Γ1).
(3) G(Γ2) is isomorphic to a special subgroup of G(Γ1).
We refer to Section 2.4 for the deﬁnition of special subgroups.

Remark 1.4.

(1) If Out(G(Γ)) is ﬁnite, then all ﬁnite index RAAG subgroups of G(Γ) are spe-
cial subgroups ([Hua14a, Theorem 1.4]). However, in the case of RAAG’s
of weak type I, though all ﬁnite index RAAG subgroups are isomorphic to
a special subgroup, they may not be special subgroups themselves (consid-
ering ﬁnite index subgroups of Z ⊕ Z). This suggests the lost of rigidity
when passing to larger outer automorphism group.

4

JINGYIN HUANG

(2) [Hua14a, Theorem 1.3] suggests that G(Γ2) is quasi-isometric to G(Γ1) if
and only if their extension complexes (Section 2.3) are isomorphic, given
Out(G(Γ1)) is ﬁnite. The if only direction is still true in the case of weak
type I group, but the other direction is not clear.

Next we deal with partial conjugations. Since they comes from separating closed
stars in Γ, one may want to cut Γ into good pieces along separating closed stars,
however, this is not well-deﬁned in general. Then one may try the opposite way
and look at graphs obtained by gluing good pieces along vertex stars in a nice way.
By studying such examples, we identify the following class of RAAG’s.
Deﬁnition 1.5. G(Γ) is of type II if Γ is connected and for every pair of distinct
vertices v, w ∈ Γ, lk(v) ∩ lk(w) does not separate Γ.

This condition has a geometric interpretation. lk(v) corresponds to hyperplanes
in the universal covering of the Salvetti complex, so lk(v) ∩ lk(w) corresponds
to the intersection of hyperplanes. Deﬁnition 1.5 can be roughly interpreted as
“hyperplanes of codimension 2 do not separate”.

A model example is taking Γ to be the union of a 5-cycle and a 6-cycle identiﬁed
along a closed vertex star. If G(Γ) is of type II, then Out(G(Γ)) may contain partial
conjugations and adjacent transvections, but not non-adjacent transvections.

A similar but diﬀerent condition, called SIL, has been studied in [CRSV10].

Theorem 1.6. If G(Γ1) is a right-angled Artin group of type II, then G(Γ2) is
quasi-isometric to G(Γ1) if and only if G(Γ2) is commensurable to G(Γ1). More-
over, there exists a right-angled Artin group G(Γ) such that G(Γ1) and G(Γ2) are
isomorphic to special subgroups in G(Γ).

The following is a consequence of Theorem 1.3, Theorem 1.6 and [Hua14a, Sec-

tion 6.3].
Corollary 1.7. Let G(Γ) be a right-angled Artin group of type II or weak type I.
Then there is an algorithm to determine whether a given right-angled Artin group
G(Γ(cid:48)) is quasi-isometric to G(Γ) or not.

We close this section with several comments and open questions. A RAAG of
weak type I is not necessarily of type II. The following class contains RAAG’s of
both weak type I and type II (see Lemma 3.28).
Deﬁnition 1.8. G(Γ) is said to have weak type II if Γ is connected and for vertices
v, w ∈ Γ such that d(v, w) = 2, Γ \ (lk(v) ∩ lk(w)) is connected.

It turns out that weak type II is a quasi-isometry invariant for RAAG’s, see
Corollary 3.24. Though a large portion of our discussion also generalize to RAAG’s
of weak type II, the following question remains open.
Question 1.9. Suppose G(Γ) is of weak type II and G(Γ(cid:48)) is quasi-isometric to
G(Γ). Is G(Γ(cid:48)) commensurable to G(Γ)?

The techniques in this paper does not seem to apply eﬀectively to the case when
there are non-adjacent transvections in the outer automorphism group. Indeed, in
this case, there is serious breakdown of the above form of rigidity. For example,
there exist two tree RAAG’s which are quasi-isometric but not commensurable
([BN08]). This leads to the following question:

QUASI-ISOMETRY CLASSIFICATION OF RIGHT-ANGLED ARTIN GROUPS II

5

Question 1.10. Suppose Γ is connected and Out(G(Γ)) contains non-trivial non-
adjacent transvection. Does there exist Γ(cid:48) such that G(Γ) and G(Γ(cid:48)) are quasi-
isometric, but not commensurable?
1.3. Comments on the Proof. We refer to Section 2.3 for deﬁnitions of relevant
terms. The Salvetti complex of G(Γ) is denoted by S(Γ), the universal covering of
S(Γ) is denoted by X(Γ), and ﬂats in X(Γ) that cover standard tori in S(Γ) are
called standard ﬂats. Two standard ﬂats are coarsely equivalent if they have ﬁnite
Hausdorﬀ distance. Let P(Γ) be the extension complex of X(Γ). The k-dimensional
simplices in P(Γ) are in 1-1 correspondence with coarse equivalent classes of (k +1)-
dimensional standard ﬂats in X(Γ). Thus P(Γ) captures the coarse intersection
pattern of standard ﬂats in X(Γ). It turns out to be a quasi-isometry invariant for
a large class of RAAG’s.
Theorem 1.11. Let q : G(Γ1) → G(Γ2) be a quasi-isometry. Suppose Out(G(Γi))
does not contain any non-adjacent transvection for i = 1, 2. Then q preserves
maximal standard ﬂats up to ﬁnite Hausdorﬀ distance. Hence induces a simplicial
isomorphism q∗ : P(Γ1) → P(Γ2).

The assumption of Theorem 1.11 are motivated by the fact that any automor-
phism of G(Γ) preserves maximal standard ﬂats up to ﬁnite Hausdorﬀ distance if
and only if there is no non-adjacent transvection in Out(G(Γ)).
One can try to reconstruct a “straightening” of q from q∗ as follows. Pick vertex
x ∈ X(Γ1) and let {Fi}i∈I be the collection of maximal standard ﬂats containing x.
Under mild condition we have x = ∩i∈I Fi. Each Fi is associated with a maximal
i ⊂ X(Γ2) by Theorem 1.11. It is natural to deﬁne ¯q : G(Γ1) →
standard ﬂat F (cid:48)
G(Γ2) such that ¯q(x) = ∩i∈I F (cid:48)
1.3.1. The weak type I case. It turns out that this is exactly the case that we always
have ∩i∈I F (cid:48)
i (cid:54)= ∅ is actually a point. Then the
map ¯q is well-deﬁned, and it preserves all the maximal standard ﬂats. A priori,
¯q may not preserve standard ﬂats which are not maximal, and the key to prove
Theorem 1.3 is to deform ¯q such that it preserves all standard ﬂats.

i . However, it is possible that ∩i∈I F (cid:48)

i (cid:54)= ∅. Under mild condition ∩i∈I F (cid:48)

i = ∅.

A standard ﬂat is rigid if ¯q will send its vertex set to the vertex set of another
standard ﬂat, otherwise it is non-rigid. For example, all intersections of maximal
standard ﬂats are rigid, but the converse may not be true.

We will deform ¯q in an inductive way. The ﬁrst step is to show one can deform
with respect to minimal rigid ﬂats such that any standard ﬂat contained in a min-
imal rigid ﬂat is preserved by ¯q. To continue the induction argument, note that
inside a (not necessarily minimal) rigid ﬂat, there are directions which are rigid and
directions which are not rigid. So we need to perform the deformation such that
each move does not mess up the previous moves, and does not place obstructions
to the moves after. The second point is non-trivial, since rigid ﬂats may intersect
each other in a complicated pattern. To describe the deformation, we introduce an
atlas for G(Γ), where the vertex sets of standard ﬂats are consistently labelled by
free Abelian groups. The detail is discussed in Section 4.

1.3.2. The type II case. In this case, the map ¯q may fail to exist. For example, one
can take q to be a partial conjugation.
Instead of reconstruct maps, we ask whether one can reconstruct the space X(Γ)
from P(Γ). Note that X(Γ) is a CAT (0) cube complex. In general, the collection

6

JINGYIN HUANG

of halfspaces in a CAT (0) cube complex, and their intersection pattern contain
the complete information needed to reconstruct the complex itself. This can be
formalized in the language of pocset (see Deﬁnition 2.7 and Theorem 2.9).
Then we ask whether we can put a pocset structure on P(Γ) such that it is the
right one to recover X(Γ). This can be always done. Roughly speaking, one can
embed P(Γ) into the Tits boundary of X(Γ). And the collection of subsets of P(Γ)
which are the intersections of P(Γ) and the Tits boundary of halfspaces of X(Γ)
has a natural pocset structure.
Brieﬂy speaking, X(Γ) is equivalent to P(Γ) with some decorations on P(Γ). In
general, these decoration depend on how one embeds P(Γ) into the Tits boundary,
so they do not come from intrinsic properties of P(Γ). Thus the rigidity of X(Γ)
depends on the amount of non-intrinsic decorations we need to put on P(Γ). For
example, in the most rigid case when G(Γ) has ﬁnite outer automorphism group,
the amount of decorations needed is minimal. The worst case is when X(Γ) is tree,
then P(Γ) is just a discrete set.

If G(Γ) is of type II, then the amount of extra decoration is reasonably small (see
Corollary 3.14 (1) for a precise statement). We prove Theorem 1.6 in two steps.
The pocset structure on P(Γ) is deﬁned in terms of certain partition of P(Γ). First
we show it is possible to reﬁne this partition to obtain a new pocset which does
not admit any reasonable further reﬁnement. It turns out the new pocset gives rise
to another RAAG which is commensurable to the original one. Such RAAG’s are
called prime RAAG’s (Deﬁnition 5.3). Then we show two prime RAAG’s are quasi-
isometric if and only if they are isomorphic, which ﬁnishes the proof of Theorem
1.6. We caution the reader that in order to avoid some technicality, we work with
pocset on Γ rather than P(Γ) in Section 5. However, the idea is similar.
1.4. Organization of the Paper. In Section 2 we summary and generalize several
results from [Hua14a] about CAT (0) cube complex, right-angled Artin group and
extension complex. In particular, Theorem 1.11 will be proved in Section 2.2.
In Section 3 we study the structure of the extension complex P(Γ) and prove

Theorem 1.2 at the end of Section 3.

The goal of Section 4 is to prove Theorem 1.3. We will introduce a notion of
atlas for right-angled Artin group in Section 4.1 and use this in Section 4.2 as an
eﬀective language to describe the deformation argument mentioned above.

We prove Theorem 1.6 in Section 5. Section 5 does not depend on Section 4.

1.5. Acknowledgement. The author thanks Ruth Charney, Bruce Kleiner, and
Thomas Koberda for helpful discussions and Do-Gyeom Kim for valuable comments.

2. Preliminaries

2.1. Notations and conventions. Notations here are consistent with [Hua14a,
Section 2.1]. All graphs in this paper are simplicial. The ﬂag complex of a graph Γ
is denoted by F (Γ), i.e. F (Γ) is a ﬂag complex such that its 1-skeleton is Γ.

Let K be a polyhedral complex.
(1) By viewing the 1-skeleton of K as a metric graph with edge lengths 1, we
obtain a metric deﬁned on the 0-skeleton of K, which we denote by d.
(2) A subcomplex K(cid:48) ⊂ K is full if K(cid:48) contains all the subcomplexes of K
which have the same vertex set as K(cid:48). If K is 1-dimensional, then we also
call K(cid:48) a full subgraph.

polyhedral complexes.

QUASI-ISOMETRY CLASSIFICATION OF RIGHT-ANGLED ARTIN GROUPS II

7
(3) We use ◦ to denote the join of two graphs, and ∗ to denote the join of two
(4) For a set of vertices V ⊂ K, V ⊥ is deﬁned to be collection of vertices which
are adjacent to each vertex in V .
(5) Let v ∈ K be a vertex. The link of v in K, denoted by lk(v, K) or lk(v)
when K is clear, is deﬁned to be the full subcomplex spanned by v⊥. The
closed star of v in K, denoted by St(v, K) or St(v) when K is clear, is
deﬁned to be the full subcomplex spanned by v and v⊥.
(6) Let M ⊂ K be an arbitrary subset. We denote the collection of vertices

inside M by v(M ).

We will using the following simple observation repeatedly.

Lemma 2.1. Let K be a simplicial complex and let K (1) be the 1-skeleton of K.
Suppose L ⊂ K be a full subcomplex. Then there is a 1-1 correspondence between
connected components of K \ L and K (1) \ L(1). Moreover, the intersection of each
component of K \ L with K (1) is a component of K (1) \ L(1).

Let X be a metric space. We use dH to denote the Hausdorﬀ distance and use
NR(Y ) to denote the R-neighbourhood of a subspace Y ⊆ X. Two subspaces are
coarsely equivalent if they have ﬁnite Hausdorﬀ distance. A subspace V ⊆ X is the
coarse intersection of subspaces Y1 and Y2 if V is at ﬁnite Hausdorﬀ distance from
NR(Y1) ∩ NR(Y2) for all suﬃciently large R. In general the coarse intersection of
two subspaces might not exist.

2.2. CAT (0) space and CAT (0) cube complex. We mention several relevant
facts here and refer to [BH99] and [Sag12] for more background on CAT (0) spaces
and CAT (0) cube complexes. The reader can also check [Hua14a, Section 2.2].
Let (X, d) be a CAT (0) space and let C ⊂ X be a convex subset. We denote the
nearest point projection from X to C by πC : X → C. Denote the Tits boundary
of X by ∂T X. If C(cid:48) ⊂ X be another convex set, then C(cid:48) is parallel to C if d(·, C)|C(cid:48)
and d(·, C(cid:48))|C are constant functions. We deﬁne the parallel set of C, denoted by
PC, to be the union of all convex subsets of X parallel to C.

Now we turn to CAT (0) cube complexes. All cube complexes in this paper are
assumed to be ﬁnite dimensional. There are two common metrics on a CAT (0)
cube complex, namely the CAT (0) metric and the l1-metric. In this paper, we will
mainly use the CAT (0) metric unless otherwise speciﬁed.
A geodesic segment, geodesic ray or geodesic in a CAT (0) cube complex X is an
isometric embedding of [a, b], [0,∞) or R into X with respect to the CAT (0) met-
ric. A combinatorial geodesic segment, combinatorial geodesic ray or combinatorial
geodesic is a l1-isometric embedding of [a, b], [0,∞) or R into X (1) such that its
image is a subcomplex.

The collection of convex subcomplexes in a CAT (0) cube complex enjoys the

following version of Helly’s property ([Ger98]):
Lemma 2.2. Let X be as above and {Ci}k
If Ci ∩ Cj (cid:54)= ∅ for any 1 ≤ i (cid:54)= j ≤ k, then ∩k
Lemma 2.3. [Hag08] Let X be a CAT (0) cube complex and let Y ⊂ X be a
convex subcomplex. Then Y is also combinatorially convex in the sense that any
combinatorial geodesic segment joining two vertices in Y is contained in Y .

i=1 be a collection of convex subcomplexes.

i=1Ci (cid:54)= ∅.

8

JINGYIN HUANG

Lemma 2.4 (Lemma 2.10 of [Hua14b]). Let X be a CAT (0) cube complex of
dimension n and let C1, C2 be convex subcomplexes. Denote (cid:52) = d(C1, C2). Put
Y1 = {y ∈ C1 | d(y, C2) = (cid:52)} and Y2 = {y ∈ C2 | d(y, C1) = (cid:52)}. Then:

(1) Y1 and Y2 are not empty.
(2) Y1 and Y2 are convex; πC1 map Y2 isometrically onto Y1 and πC2 map Y1
isometrically onto Y2; the convex hull of Y1 ∪ Y2 is isometric to Y1 × [0,(cid:52)].
(3) Y1 and Y2 are subcomplexes, and πC2|Y1 is a cubical isomorphism with its
inverse given by πC1|Y2.
(4) there exist A = A(∆, n, ) such that if p1 ∈ C1, p2 ∈ C2 and d(p1, Y1) ≥
 > 0, d(p2, Y2) ≥  > 0, then

(2.5)

d(p1, C2) ≥ (cid:52) + Ad(p1, Y1), d(p2, C1) ≥ (cid:52) + Ad(p2, Y2)

The above lemma implies Y1 and Y2 are coarsely equivalent, and Y1 (or Y2) is
the coarse intersection of C1 and C2. We use I(C1, C2) = (Y1, Y2) to describe this
situation, where I stands for “intersect”.

The cubical structure of X naturally gives rise to a collection of cubical tracks
in X, which are called hyperplanes. Each hyperplane separates X into exactly two
halfspaces. Pick edge e ⊂ X, the hyperplane dual to e is deﬁned by π−1
e (m) where
m is the middle point of e. The sets Y1 and Y2 in Lemma 2.4 can be characterized
in terms of hyperplanes.

Lemma 2.6. ([Hua14a, Lemma 2.6]) Let X, C1, C2, Y1 and Y2 be as in Lemma
2.4. Pick an edge e in Y1 (or Y2) and let h be the hyperplane dual to e. Then
h ∩ Ci (cid:54)= ∅ for i = 1, 2. Conversely, if a hyperplane h(cid:48) satisﬁes h(cid:48) ∩ Ci (cid:54)= ∅ for
i = 1, 2, then I(h(cid:48) ∩ C1, h(cid:48) ∩ C2) = (h(cid:48) ∩ Y1, h(cid:48) ∩ Y2) and h(cid:48) comes from the dual
hyperplane of some edge e(cid:48) in Y1 (or Y2).

The collection of halfspaces in X contains enough information to recover X.
More generally, we can view X as a space with walls, and [Sag95, HP98] introduces
a way to construct a CAT (0) cube complex from a given space with walls. There
are several variations and developments of this construction ([Rol98, Nic04, CN05,
HW14]). Here we follow the construction in [Rol98], see Sageev’s notes [Sag12].

Deﬁnition 2.7 (Deﬁnition 1.5 of [Sag12]). A pocset is a partially ordered set with
an involution A → Ac such that

(1) A (cid:54)= Ac and A and Ac are incomparable.
(2) A ≤ B implies Bc ≤ Ac.
Note that the collection of all closed halfspaces in a CAT (0) cube complex forms

a pocset (the partially order comes from inclusion of sets).

Deﬁnition 2.8 (Deﬁnition 2.1 of [Sag12]). Let P be a pocset. An ultraﬁlter U is
a subset of P such that

(1) For all pairs {A, Ac} in P , precisely one of them is in U.
(2) If A ∈ U and A ≤ B, then B ∈ U.
For example, pick a vertex p in a CAT (0) cube complex X, then the collection
of closed halfspaces in X that contains p forms an ultraﬁlter. Note that if U is
an ultraﬁlter and A is minimal in U with respect to the partial order on P , then
(U \ {A}) ∪ {Ac} is also an ultraﬁlter.

QUASI-ISOMETRY CLASSIFICATION OF RIGHT-ANGLED ARTIN GROUPS II

9

Theorem 2.9 ([Rol98]). If P is a ﬁnite pocset, then there is a CAT (0) cube complex
X such that its vertices are in 1-1 correspondence with ultraﬁlters of P and two
vertices U and U(cid:48) are connected by an edge if and only if U(cid:48) = (U \ {A}) ∪ {Ac}
for some A minimal in U. Moreover, there is a natural pocset isomorphism from
P to the pocset of halfspaces in X.

If P is inﬁnite, then similar conclusions hold under the additional assumptions

that P is discrete and of ﬁnite width, see [Rol98, Sag12].
2.3. Basics about RAAG’s. Pick a ﬁnite simplicial graph Γ, let G(Γ) be the
right-angled Artin group (RAAG) with deﬁning graph Γ and let S(Γ) be the Salvetti
complex of G(Γ). Denote the universal cover of S(Γ) by X(Γ). Pick a standard
generating set S for G(Γ), we label the 1-cells in S(Γ) by elements in S and choose
an orientation for each 1-cell in S(Γ). This lifts to orientation and labelling of edges
in X(Γ) which are invariant under the action G(Γ) (cid:121) X(Γ).
Let Γ(cid:48) ⊂ Γ be a full subgraph. Then the images of the embeddings G(Γ(cid:48)) →
G(Γ) and S(Γ(cid:48)) → S(Γ) are called standard subgroup and standard subcomplex
respectively. Standard subcomplexes of X(Γ) are lifts of standard subcomplexes of
S(Γ). When Γ(cid:48) is a complete subgraph, G(Γ(cid:48)) is called a standard Abelian subgroup,
S(Γ(cid:48)) is called a standard torus, and lifts of S(Γ(cid:48)) are called standard ﬂats. One
dimensional standard ﬂats are also called standard geodesics.
Deﬁnition 2.10. For every edge e ∈ X(Γ), there is a vertex in Γ which shares the
same label as e. We denote this vertex by Ve. If K ⊂ X(Γ) is a subcomplex (K
does not need to be a standard subcomplex), we deﬁne VK to be {Ve | e is an edge
in K} and ΓK to be the full subgraph spanned by VK. ΓK is called the support
of K. Pick a vertex v ∈ X(Γ) and a full subgraph Γ(cid:48) ⊂ Γ, we denote the unique
standard subcomplex with deﬁning graph Γ(cid:48) that contains v by K(v, Γ(cid:48)).

The following two results are strengthened version of Lemma 2.4 and Lemma 2.6

in the case of coarse intersection of two standard subcomplexes:
Lemma 2.11. ([Hua14a, Lemma 3.1]) Let Γ be a ﬁnite simplicial graph and let
K1, K2 be two standard subcomplexes of X(Γ). If (Y1, Y2) = I(K1, K2), then Y1
and Y2 are also standard subcomplexes.

We can compute the supports of Y1 and Y2 as follows.

Lemma 2.12. ([Hua14a, Corollary 3.2]) Let K1, K2, Y1 and Y2 be as above. Let
h be a hyperplane separating K1 and K2 and let e be an edge dual to h. Then
Ve ∈ V ⊥
(see Deﬁnition 2.10 for relevant notations). In particular, a vertex
v ∈ Γ satisﬁes v ∈ VY1 if and only if

(1) v ∈ VK1 ∩ VK2.
(2) For any hyperplane h(cid:48) separating K1 from K2 and any edge e(cid:48) dual to h(cid:48),

Y1

= V ⊥

Y2

d(v, Ve(cid:48)) = 1.

Let P(Γ) be the extension complex of Γ (see [Hua14a, Section 4.1]), which is the
ﬂag complex of the extension graph introduced in [KK13]. Here is an alternative
deﬁnition. The vertices of P(Γ) are in 1-1 correspondence with the parallel classes
of standard geodesics in X(Γ) (two standard ﬂats are in the same parallel class if
they are parallel). Two distinct vertices v1, v2 ∈ P(Γ) are connected by an edge if
for i = 1, 2, there is a standard geodesic li in the parallel class associated with vi
such that l1 and l2 span a standard 2-ﬂat.

10

JINGYIN HUANG

Note that edges in the same standard geodesics of X(Γ) has the same label,
and edges in parallel standard geodesics also has the same label. This induces a
well-deﬁned labelling of vertices in P(Γ) by vertices of Γ. And there is a label-
preserving simplicial map π : P(Γ) → F (Γ), where F (Γ) is the ﬂag complex of Γ.
Moreover, since G(Γ) (cid:121) X(Γ) by label-preserving cubical isomorphisms, we obtain
an induced action G(Γ) (cid:121) P(Γ) by label-preserving simplicial isomorphisms.
Note that each complete subgraph in the 1-skeleton of P(Γ) gives rise to a col-
lection of mutually orthogonal standard geodesics lines. Thus there is a 1-1 corre-
spondence between the (k − 1)-simplexes in P(Γ) and parallel classes of standard
k-ﬂats in X(Γ) ([Hua14a, Section 4.1]). For standard ﬂat F ⊂ X(Γ), we denote
the simplex in P(Γ) associated with the parallel class containing F by ∆(F ). For
a standard subcomplex K ⊂ X(Γ), deﬁne ∆(K) := ∪λ∈Λ∆(Fλ), here {Fλ}λ∈Λ is
the collection of standard ﬂats in K.
Pick arbitrary vertex p ∈ X(Γ), one can obtain a simplicial embedding ip :
F (Γ) → P(Γ) by considering the collection of standard ﬂats passing through p
(F (Γ) is the ﬂag complex of Γ). We will denote the image of ip by (F (Γ))p. Note
that π ◦ ip is the identity map, which implies the following lemma.
Lemma 2.13. The map ip is an isometric embedding with respect to the combina-
torial distance between vertices of F (Γ).

Now we look at the outer automorphism group Out(G(Γ)) of G(Γ). By [Ser89,
Lau95], Out(G(Γ)) is generated by the following four types of elements (we identify
the vertex set of Γ with a standard generating set of G(Γ)):

(1) Given vertex v ∈ Γ, sending v → v−1 and ﬁxing all other vertices.
(2) Graph automorphisms of Γ.
(3) If lk(w) ⊂ St(v) for vertices w, v ∈ Γ, sending w → wv and ﬁxing all other
vertices induces to a group automorphism. It is called a transvection. When
d(v, w) = 1, it is an adjacent transvection, otherwise it is a non-adjacent
transvection.
(4) Suppose Γ\St(v) is disconnected. Then one obtains a group automorphism
by picking a connected component C and sending w → vwv−1 for vertex
w ∈ C. It is called a partial conjugation.

2.4. Special subgroups of RAAG’s. We recall the notion of special subgroup
introduced in [Hua14a]. Let K ⊂ X(Γ) be a compact convex subcomplex. Let
{(cid:96)i}s
i=1 be a maximal collection of standard geodesics such that (cid:96)i ∩ K (cid:54)= ∅ for all
i and ∆((cid:96)i) (cid:54)= ∆((cid:96)j) for any i (cid:54)= j. We consider the left action G(Γ) (cid:121) X(Γ). For
each i, let gi ∈ G(Γ) be the unique element that translates (cid:96)i towards the positive
direction with translation length = 1 (recall that we have oriented edges of X(Γ)
in a G(Γ)-invariant way). Let ni = |v(K ∩ ci)|.
Theorem 2.14. ([Hua14a, Section 6.1]) Let G ≤ G(Γ) be the subgroup generated
by {gni
i }s
i=1. Then
(1) K is a “fundamental domain” for G in the sense that for g1, g2 ∈ G, g1K ∩
g2K (cid:54)= ∅ if and only if g1 = g2. Moreover, the G-orbit of K cover the
0-skeleton of X(Γ). Thus |G(Γ) : G| = the number of vertices in K.
Then G is isomorphic to the RAAG G(Γ(cid:48)).

(2) Let Γ(cid:48) be the 1-skeleton of the full subcomplex of P(Γ) spanned by {∆((cid:96)i)}s

i=1.

QUASI-ISOMETRY CLASSIFICATION OF RIGHT-ANGLED ARTIN GROUPS II

11

Such G is called a special subgroup of G(Γ) (associated with K). Note that
the deﬁnition of special subgroups implicitly depend on the choice of standard
generators of G(Γ) (we can think G(Γ) as a ﬁxed set, and diﬀerent choices of
standard generators give diﬀerent ways of building X(Γ) from G(Γ)). A subgroup
is S-special if it is special with respect to the standard generating set S. In most
part of the paper, we ﬁx a standard generating set, so there will be no confusion.
Alternatively, G can be characterized by the fundamental group of the canonical
completion ([HW08]) of the local isometry K (cid:44)→ X(Γ) → S(Γ). However, we will
not need this fact.
Let G(Γ) ∼= F2, the free group with two generators. We take K to be an edge
in X(Γ). Then the associated special subgroup G is isomorphic to F3.
In this
case, if we collapse all the G-translations of K in X(Γ), then the resulting space is
isomorphic to the Cayley graph for F3. This is actually true in general.
Recall that a cellular map between cube complexes is cubical (see [CS11]) if its
restriction σ → τ between cubes factors as σ → η → τ, where the ﬁrst map σ → η
is a natural projection onto a face of σ and the second map η → τ is an isometry.
Theorem 2.15. ([Hua14a, Lemma 6.13]) There is a surjective cubical map q :
X(Γ) → X(Γ(cid:48)) such that

X(Γ(cid:48)) is the q-image of some standard ﬂat in X(Γ).

(1) q maps standard ﬂats to standard ﬂats. Moreover, each standard ﬂat in
(2) Pick a vertex x(cid:48) ∈ X(Γ(cid:48)), then q−1(x(cid:48)) = g · K for some element g ∈ G.
(3) q is G-equivariant. In particular, q is a quasi-isometry.
It follows from (1) that q induces a simplicial isomorphism q∗ : P(Γ) → P(Γ(cid:48)).

2.5. Coarse invariants for RAAG’s. Here we summarize and generalize some
results from [Hua14a].
Note that every join decomposition Γ = Γ1 ◦ Γ2 induces a direct sum decompo-
sition G(Γ) = G(Γ1) ⊕ G(Γ2). G(Γ) or Γ is called irreducible if Γ does not allow
non-trivial join decomposition. There is a well-deﬁned De Rham decomposition of
X(Γ) induced by the join decomposition of Γ, which is stable under quasi-isometries.
Theorem 2.16. ([Hua14a, Theorem 2.9]) Given X = X(Γ) and X(cid:48) = X(Γ(cid:48)), let
j) be the corresponding De Rahm
decomposition. If φ : X → X(cid:48) is an (L, A) quasi-isometry, then n = n(cid:48), k = k(cid:48) and
there exist constants L(cid:48) = L(cid:48)(L, A), A(cid:48) = A(cid:48)(L, A), D = D(L, A) such that after re-
indexing the factors in X(cid:48), we have (L(cid:48), A(cid:48)) quasi-isometry φi : X(Γi) → X(Γ(cid:48)
i) so
i=1 X(Γ(cid:48)
i)

i=1 X(Γi) and X(cid:48) = Rn(cid:48) ×(cid:81)k(cid:48)
i=1 φi◦p) < D, where p : X →(cid:81)k

i=1 X(Γi) and p(cid:48) : X(cid:48) →(cid:81)k

X = Rn ×(cid:81)k
that d(p(cid:48)◦φ,(cid:81)k

are the projections.

j=1 X(Γ(cid:48)

We are particularly interested in those standard subcomplexes that are stable

under quasi-isometries.
Deﬁnition 2.17. A subgraph Γ1 ⊂ Γ is stable in Γ if Γ1 is a full subgraph and
for any standard subcomplex K ⊂ X(Γ) with ΓK = Γ1 and (L, A)-quasi-isometry
q : X(Γ) → X(Γ(cid:48)), there exists D = D(L, A, Γ1, Γ) > 0 and standard subcomplex
K(cid:48) ⊂ X(Γ(cid:48)) such that the Hausdorﬀ distance dH (q(K), K(cid:48)) < D. A standard
subcomplex K ⊂ X(Γ) is stable if it arises from a stable subgraph of Γ.

12

JINGYIN HUANG

It is clear that the intersection of two stable subgraphs is still a stable subgraph.
See [Hua14a, Section 3.2] for more properties about stable subgraphs. In this paper,
we will use the following two properties repeatedly:

Lemma 2.18. [Hua14a, Lemma 3.24] Let Γ be a ﬁnite simplicial graph and pick
stable subgraphs Γ1, Γ2 of Γ. Let ¯Γ be the full subgraph spanned by V and V ⊥ where
V is the vertex set of Γ1. If Γ2 ⊂ ¯Γ, then the full subgraph spanned by Γ1 ∪ Γ2 is
stable in Γ.

Lemma 2.19. Suppose there is no non-adjacent transvection in Out(G(Γ)). Then
every maximal clique subgraph of Γ is stable.
Proof. Let Γ1 ⊂ Γ be a maximal clique. By [Hua14a, Theorem 3.35], it suﬃces to
prove for any vertices v ∈ Γ1 and w ∈ Γ, v⊥ ∈ St(w) implies w ∈ Γ1. Note that
v⊥ ∈ St(w) implies w ∈ v⊥ since there is no non-adjacent transvection. Then w
and vertices of Γ1 span a clique in Γ, thus w ∈ Γ1 by the maximality of Γ1.
(cid:3)

The following result is the starting point of this paper.

Theorem 2.20. Let q : X(Γ1) → X(Γ2) be a quasi-isometry. Suppose Out(G(Γi))
does not contain any non-adjacent transvection for i = 1, 2. Then there exists a
simplicial isomorphism q∗ : P(Γ1) → P(Γ2).
Proof. Let S(X(Γi)) be the collection of coarse equivalence classes of stable sub-
complexes in X(Γi) and let KS(X(Γi)) be the lattice generated by ﬁnite intersection
and union of these coarse equivalence classes (the coarse intersection is well-deﬁned
by Lemma 2.11). Recall that we have a map ∆ sending standard subcomplexes of
X(Γi) to subcomplexes of P(Γi), let S(P(Γi)) be the image of S(X(Γi)) under ∆
and let KS(P(Γi)) be the lattice generated by elements in S(P(Γi)). Then there is
a lattice isomorphism:

∆ : KS(X(Γi)) → KS(P(Γi)).

for i = 1, 2. Moreover, by Lemma 2.4, the quasi-isometry q induces a lattice
isomorphism:

q(cid:93) : KS(X(Γ1)) → KS(X(Γ2)),

thus we have the following isomorphism:

˜q∗ = ∆ ◦ q(cid:93) ◦ ∆−1 : KS(P(Γ1)) → KS(P(Γ2)).

For subset A in a metric space, denote the collection of subsets which are
coarsely equivalent to A by [A]. By deﬁnition, for standard ﬂat F1 ∈ X(Γ1) with
[F1] ∈ KS(X(Γ1)), there exists standard ﬂat F2 ∈ X(Γ2) such that q(cid:93)[F1] = [F2]
and dim(F1) = dim(F2). Let Φk
i be the collection of k-dimensional simplexes
in KS(P(Γi)) for i = 1, 2. Then ˜q∗ induces a 1-1 correspondence between Φk
2 for any k ≥ 0. For i = 1, 2, let V k
i be the set of vertices of simplexes
and Φk
is exactly the 0-skeleton of P(Γi), where
in ∪k
m=0Φm
n = dim(X(Γ1)) = dim(X(Γ2)).
We construct a map q∗ from the 0-skeleton of P(Γ1) to the 0-skeleton of P(Γ2)
inductively as follows: deﬁne q∗(v) = ˜q∗(v) for v ∈ V 0
1 and suppose we’ve already
deﬁned q∗ on V k
(∗) For any simplex ∆ ∈ KS(X(Γ1)), q∗ is a bijection from V k

i . By Lemma 2.19, V n−1

1 such that

1 ∩ ∆ to V k

2 ∩ ˜q∗(∆).

i

1

QUASI-ISOMETRY CLASSIFICATION OF RIGHT-ANGLED ARTIN GROUPS II

13

i=0Φi

1

2

1

1

1

1

i=0 Φi

∈ Φk+1

1

∩ ∆k+1 ∈ ∪k

that contains v (if there is a distinct simplex ∆k+1

, if all vertices of ∆k+1 belongs to V k

i=1 be the collection of elements in ∪k+1

i=1 is exactly the collection of elements in ∪k+1

1). By induction assumption, vertices in ∆k+1 \ V k

Note that q∗ restricted on V 0
1 automatically satisﬁes (∗) for k = 0. Pick simplex
∆k+1 ∈ Φk+1
1 , then we do not need to do
anything, otherwise pick vertex v ∈ ∆k+1\V k
1 , note that ∆k+1 is the only simplex in
1 with v ∈ ∆1, then
Φk+1
v ∈ ∆k+1
1 and
vertices in ˜q∗(∆k+1) \ V k
2 have the same cardinality, so we can choose an arbitrary
bijection between them. Now we have q∗ deﬁned on V k+1
and it remains to verify
(∗). Given ∆ ∈ KS(X(Γ1)), let {∆i}d
i=0 Φi
1
such that ∆i ⊂ ∆. Then V k+1
∩ ∆ is the vertex set of ∪d
i=1∆i. Since ˜q∗ is a lattice
isomorphism, {˜q∗(∆i)}d
2 that are
contained in ˜q∗(∆), and V k+1
∩ ˜q∗(∆) is the vertex set of ∪d
i=1 ˜q∗(∆i), thus (∗) is
true for the k + 1 case by our construction.
It is clear from (∗) that the map q∗ deﬁned as above is surjective. Pick distinct
vertices v1, v2 in P(Γ1), if d(v1, v2) = 1, then by applying (∗) to the maximal simplex
contains v1 and v2, we have d(q∗(v1), q∗(v2)) = 1. If d(v1, v2) = 2, pick vertex u
such that d(v1, u) = d(u, v2) = 1 and let ∆i be the maximal simplex containing vi
and u for i = 1, 2. We can apply (∗) to ∆1, ∆2 and ∆1 ∩ ∆2, which would imply
q∗(v1) (cid:54)= q∗(v2). If d(v1, v2) > 2, we let ∆i be a maximal simplex containing vi for
i = 1, 2. Then ∆1 ∩ ∆2 = ∅, thus ˜q∗(∆1) ∩ ˜q∗(∆2) = ∅ and q∗(v1) (cid:54)= q∗(v2) by (∗).
Thus q∗ is a bijection, moreover, pick vertices w1, w2 ∈ P(Γ2) with d(w1, w2) = 1,
then d(q−1∗ (w1), q−1∗ (w2)) = 1 by (∗). Now we can extent q∗ to be a simplicial
isomorphism between the 1-skeleton of P(Γ1) and the 1-skeleton of P(Γ2). Since
P(Γ1) and P(Γ2) are ﬂag complexes, we can further extent q∗ to obtain the required
(cid:3)
simplicial isomorphism.
Remark 2.21. q∗ deﬁned as above actually satisﬁes
(2.22)
for any subcomplex M ∈ S(P(Γ1)). If we only assume Out(G(Γ1)) is non-adjacent
transvection free, by the same proof we still can get an injective simplicial map
q∗ : P(Γ1) → P(Γ1) such that
(2.23)
for any subcomplex M ⊂ S(P(Γ1)), but q∗ may not be surjective.
The ﬁrst inclusion in (2.23) is clear. To see the second equality, suppose there
exists vertex v /∈ M such that q∗(v) ∈ ˜q∗(M ) and let ∆v be the minimal element in
KS(P(Γ1)) such that v ∈ ∆v. Note that ∆v is a simplex and ˜q∗(∆v) is the minimal
element in KS(P(Γ2)) that contains q∗(v), thus ˜q∗(∆v) ⊂ ˜q∗(M ). But ˜q∗ is a lattice
isomorphism, so we must have ∆v ⊂ M, which is a contradiction.

q∗(M ) ⊂ ˜q∗(M ) and M = q−1∗ (˜q∗(M ))

q∗(M ) = ˜q∗(M )

It is natural to ask to what extent is the converse of Theorem 2.20 true, namely,
suppose s : P(Γ1) → P(Γ2) is a simplicial isomorphism, does s induce a map from
G(Γ) → G(Γ(cid:48))? Here is a natural construction. We identify G(Γ) and G(Γ(cid:48)) with
the 0-skeleton of X(Γ) and X(Γ(cid:48)) respectively. Pick vertex p ∈ G(Γ), let {Fi}n
i ⊂ X(Γ(cid:48))
be the collection of maximal standard ﬂats containing p. For each i, let F (cid:48)
be the unique maximal standard ﬂat such that ∆(F (cid:48)
i ) = s(∆(Fi)). One may wish
to map p to ∩n
Deﬁnition 2.24. The simplicial isomorphism s is visible if ∩n
p ∈ G(Γ).

i , which motivates the following deﬁnition:

(cid:54)= ∅ for any

i=1F (cid:48)

i=1F (cid:48)

i=1

i

14

JINGYIN HUANG
If G(Γ) has trivial centre (which means p = ∩n

i=1Fi) and s is visible, then it is
easy to see s induces a unique map s∗ : G(Γ) → G(Γ(cid:48)). If G(Γ) has non-trivial
centre, then the map induced by s is not unique.

We have studied a suﬃcient condition for s to be visible in [Hua14a, Lemma

4.10]. In this paper, we will ﬁnd a if and only if condition for the visibility of s.

3. The structure of extension complex

Throughout this section, we identify Γ with the 1-skeleton of F (Γ), and we will

inexplicitly use Lemma 2.1 in various places.
3.1. Tiers and branches of the extension complex. Let π : P(Γ) → F (Γ) be
the label-preserving simplicial map in Section 2.3.
Pick a standard geodesic l ⊂ X(Γ) and let πl : X(Γ) → l be the CAT (0) projec-
tion onto l. Suppose l1 ⊂ X(Γ) is a standard geodesic such that d(∆(l1), ∆(l)) ≥ 2.
Then πl(l1) is a vertex in l by Lemma 2.11 and Lemma 2.12. Moreover, πl(l1) =
πl(l2) if l2 is a standard geodesic parallel to l1 (see [Hua14a, Lemma 6.2]). Thus πl
induces a well-deﬁned map π∆(l) from the v(P(Γ) \ St(∆(l))), the set of vertices in
P(Γ) \ St(∆(l)), to v(l).
Lemma 3.1. [Hua14a, Lemma 6.2] If v1 and v2 are in the same connected compo-
nent of P(Γ) \ St(∆(l)), then π∆(l)(v1) = π∆(l)(v2).

Pick v ∈ P(Γ), and let l ⊂ X(Γ) be a standard geodesic such that ∆(l) = v.
Let π∆(l) : v(P(Γ) \ St(v)) → v(l) be the map in Lemma 3.1. A v-tier is the full
subcomplex spanned by π−1
∆(l)(x), here x is a vertex in l and x is called the height of
the v-tier. A v-branch is the full subcomplex spanned by vertices in one connected
component of P(Γ) \ St(v).

By the proof of Lemma 3.1, a v-branch has non-empty intersection with a v-tier
if and only if it belongs to the v-tier, thus a v-tier is consists of disjoint union of
v-branches. Also note that a simplicial isomorphism s : P(Γ1) → P(Γ2) will map
branches to branches, but it may not map tiers to tiers.
Lemma 3.2. If the s-image of any v-tier of P(Γ1) is inside a s(v)-tier of P(Γ2),
then s is visible.
Proof. Let p, {Fi}n
i}n
i=1 be as in Deﬁnition 2.24. By Lemma 2.2, it
j (cid:54)= ∅ for any i (cid:54)= j. Suppose s is not visible. Then there
suﬃces to show F (cid:48)
j. Let l(cid:48) be a standard geodesic dual to
exists a hyperplane h separating F (cid:48)
h and let v(cid:48) = ∆(l(cid:48)). Then the maximality of F (cid:48)
j implies there exist vertices
1 ∈ ∆(F (cid:48)
j) such that they are in diﬀerent v(cid:48)-tier. However, s−1(v(cid:48)
v(cid:48)
1)
(cid:3)
and s−1(v(cid:48)

i ) and v(cid:48)
2) are in the same s−1(v(cid:48))-tier, which yields a contradiction.
Next we characterize v-branches in a v-tier for a certain class of Γ.

i=1 and {F (cid:48)
i ∩ F (cid:48)

2 ∈ ∆(F (cid:48)

i and F (cid:48)

i and F (cid:48)

Deﬁnition 3.3. A graph Γ is of type II if Γ is connected and for every pair of
distinct vertices v, w ∈ Γ, Γ \ (lk(v) ∩ lk(w)) is connected. Γ is said to have
weak type II if Γ is connected and for vertices v, w ∈ Γ such that d(v, w) = 2,
Γ \ (lk(v) ∩ lk(w)) is connected. G(Γ) or F (Γ) is of (weak) type II if Γ is of (weak)
type II.

Note that Γ is connected if it is of (weak) type II.

QUASI-ISOMETRY CLASSIFICATION OF RIGHT-ANGLED ARTIN GROUPS II

15

Let K be a simplicial complex and let K1, K2 be two subcomplex. K1 and K2
contact if there exist vertices vi ∈ Ki for i = 1, 2 such that v1 and v2 are adjacent.
Let v ∈ P(Γ) be a vertex, and let l ∈ X(Γ) be a standard geodesic. Deﬁne Pv
to be the parallel set Pl of l. Note that Pv does not depend on the choice of l.
A subset K ⊂ Pv is horizontal if πl(K) is a point (πl : X(Γ) → l is the CAT (0)
projection) and πl(K) is called the height of K.
Let ¯v ∈ Γ be the label of v. Then Pv is a standard subcomplex whose support

(Deﬁnition 2.10) is St(¯v).
Lemma 3.4. Suppose Γ is of weak type II. Pick vertices v, w ∈ P(Γ) such that
d(v, w) = 2. Let u ∈ v⊥ ∩ w⊥. Then there exists vertex w(cid:48) such that

(1) d(v, w(cid:48)) = 2 and d(u, w(cid:48)) = 1.
(2) w(cid:48) and w are in the same v-branch.
(3) Pv ∩ Pw(cid:48) (cid:54)= ∅.

Let {xi}n

In particular, every v-branch contains a vertex w(cid:48) such that Pw(cid:48) ∩ Pv (cid:54)= ∅.
Proof. Let B be a v-branch containing w. Pick x ∈ Pw ∩ Pu and let y ∈ Pv be the
vertex such that d(x, y) = d(x, Pv). The existence and uniqueness of such vertex
follows from Lemma 2.4. Let us assume x (cid:54)= y, otherwise we are done by putting
w(cid:48) = w. Let ω be a combinatorial geodesic connecting x and y. We claim ω ⊂ Pu.
By Lemma 2.3, it suﬃces to show y ∈ Pu. Let lx,u be the standard geodesic with
x ∈ lx,u and ∆(lx,u) = u. Note that lx,u ⊂ NR(Pv) for some R > 0, then it follows
from Lemma 2.11 and Lemma 2.4 that I(lx,u, Pv) = (lx,u, l) for some standard
geodesic l ⊂ Pv. Then y ∈ l and ∆(l) = u, so y ∈ Pu.
i=0 be vertices in ω such that for 0 ≤ i ≤ n − 1, [xi, xi+1] is a maximal
sub-segment of ω that is contained in a standard geodesic (x0 = x and xn = y).
Denote the standard geodesic containing [xi, xi+1] by li and let vi = ∆(li) for
0 ≤ i ≤ n − 1. Since ω is a combinatorial geodesic, every dual hyperplane of some
edge in ω must separate x and Pv. Thus for each i, there exists a hyperplane dual
to li which does not intersect Pv. It follows that
d(vi, v) ≥ 2
(3.5)
for all i. Since li ⊂ Pu, we also have
(3.6)
Let π : P(Γ) → F (Γ) be the projection mentioned at the beginning of this section.
Since ln−1 ∩ Pv (cid:54)= ∅, it follows from (3.5) and (3.6) that
(3.7)

d(π(vn−1), π(v)) = 2.

d(vi, u) = 1.

We claim v0 ∈ B. Let Kx0 = (F (Γ))x0 (see the paragraph before Theorem
2.20). First we show Kx0 ∩ St(v) is contained in the intersection of the links of two
vertices. Pick vertex s ∈ Kx0 ∩ St(v), and let ls be the standard geodesic such that
x0 ∈ ls and ∆(ls) = s. Let h be a hyperplane dual to ln−1 such that it separates
x0 from Pv. Then h∩ ls = ∅ by (3.5), hence h separates ls from Pv. It follows from
Lemma 2.11 and Lemma 2.12 that π(s) ∈ (π(vn−1))⊥ ∩ (π(v))⊥. Let K be the full
subgraph spanned by (π(vn−1))⊥ ∩ (π(v))⊥. Then t /∈ St(v) for any vertex t ∈ Kx0
such that π(t) /∈ K.
By (3.7), K does not separate Γ, so if π(w) /∈ K and π(v0) /∈ K, then they can
be connected by an edge path outside K, which lifts to a path in Kx0 connecting w
and v0 outside St(v), thus v0 ∈ B. If π(w) /∈ K and π(v0) ∈ K, then we connected

16

JINGYIN HUANG

If this is not true, then x /∈ Pv.

π(w) and π(vn−1) by an edge path outside K, then connect π(vn−1) and π(v0) by
an edge, this path also lifts to a path in Kx0 connecting w and v0 outside St(v).
The other cases can be dealt with in a similar way. We can repeat this process and
argue inductively that actually vi ∈ B for 0 ≤ i ≤ n − 1, then the lemma follows
(cid:3)
by take w(cid:48) = vn−1.
Remark 3.8. Let Γ and v be as above and pick vertex x ∈ X(Γ). If there exists
two vertices v1, v2 ∈ (F (Γ))x such that they are in diﬀerent v-branches, then v ∈
(F (Γ))x.
In this case we pick a combinatorial
geodesic of shortest length from x to a vertex in Pv and repeat the above argument
to deduce that (F (Γ))x \ St(v) is connected, which is a contradiction.
Lemma 3.9. Suppose Γ is an arbitrary ﬁnite simplicial graph. Let v1, v2 ∈ P(Γ) \
St(v) be two vertices such that Pvi ∩ Pv (cid:54)= ∅ for i = 1, 2, and let ¯v = π(v). If π(v1)
and π(v2) are in diﬀerent connected component of F (Γ)\ St(¯v), then v1 and v2 are
in diﬀerent v-branch.
Proof. We argue by contradiction and assume there exists a v-branch B which
contains both v1 and v2. For i = 1, 2, let li be a standard geodesic such that
∆(li) = vi and li ∩ Pv (cid:54)= ∅. Note that l1 ∩ Pv and l2 ∩ Pv are of the same height.
We claim there exist vertices x ∈ l1 \ Pv and y ∈ l2 \ Pv such that they can be
connected by an edge path outside Pv.
i=1 ⊂ P(Γ) \ St(v) be vertices such that d(wi, wi+1) = 1, w1 = v1 and
wn = v2. Pick x = x1 to be any vertices in l1 \ Pv. For 1 ≤ i ≤ n − 1, let r(cid:48)
i ∩ Pwi+1 (cid:54)= ∅ (set r(cid:48)
be a standard geodesic with ∆(r(cid:48)
n = l2). Let
ω1 be horizontal edge path in Pw1 connecting x1 and a vertex x2 ∈ r(cid:48)
1. Note that
ω1 ∩ Pv = ∅ since Pv ∩ Pw1 is either empty or horizontal in Pw1. Let r2 be the
standard geodesic such that x2 ∈ r2 and ∆(r2) = w2. If Pw2 ∩ Pv = ∅ or Pw2 ∩ Pv
and x2 have diﬀerent height in Pw2, let ω2 be a horizontal edge path joining x2 and
a vertex x3 ∈ r(cid:48)
2 be an edge
in r2 joining x2 and another vertex x(cid:48)
2 be a horizontal edge path joining
2 and a vertex x3 ∈ r(cid:48)
2 , it clear that ω2 ∩ Pv = ∅ in both cases.
x(cid:48)
2. Set ω2 = ω(cid:48)
We can deﬁne ωi and xi+1 for 3 ≤ i ≤ n in the same way. Let y = xn+1 and the
claim follows.
Let C1 be the component of F (Γ)\St(¯v) that contains π(v1) and C2 be the union
of all other components. For i = 1, 2, let Γi be the full subgraph spanned by vertices
in Ci ∪ St(¯v). Then St(¯v) = Γ1 ∩ Γ2. For i = 1, 2, let fi : S(St(¯v)) → S(Γ1) be
the natural embedding. Note that S(St(¯v)) ∼= S(lk(¯v)) × S1. Let h be an isometry
of S(St(¯v)) which is identity on the S(lk(¯v)) factor and is a rotation of degree π
on the S1 factor. Deﬁne space ¯S(Γ) by identifying S(St(¯v)) with S(Γ1) via f1 and
identifying S(St(¯v)) with S(Γ2) via f2 ◦ h. Then there is a homotopy equivalence
g : ¯S(Γ) → S(Γ) induced by collapsing the interval [ei0, eiπ] in the S1 factor of
S(St(¯v)) to one point (see the following picture, where the black part is collapsed).
It lifts to a cubical map ˜g : ¯X(Γ) → X(Γ).

2. If Pw2 ∩ Pv and x2 have the same height in Pw2, let ω(cid:48)

2 and let ω(cid:48)(cid:48)
2 ∪ ω(cid:48)(cid:48)

Let {wi}n

i) = wi and r(cid:48)

i

Let M ⊂ Pv be the standard subcomplex such that l1 ∩ Pv ⊂ M and the support
of M satisﬁes ΓM = lk(¯v). Then there exists a unique hyperplane ¯h ⊂ ¯X(Γ)

QUASI-ISOMETRY CLASSIFICATION OF RIGHT-ANGLED ARTIN GROUPS II

17

such that ˜g(¯h) = M. For i = 1, 2, let ¯li ⊂ ¯X(Γ) be the unique geodesic such that
˜g(¯li) = li. Then ¯l1 and ¯l2 have non-empty intersection with ˜g−1(Pv). Since ˜g−1(Pv)
is a lift of S(St(¯v)) in ¯X(Γ), and π(∆(li)) ∈ Ci for i = 1, 2, we know that ¯l1 and
¯l2 are separated by ¯h. Let ω = ∪n
i=1ωi be the edge path connecting x and y in
the previous paragraph. Then ˜g−1(ω) is a compact connected subcomplex of X(¯Γ)
with ˜g−1(ω) ∩ ¯h = ∅. Moreover, ˜g−1(ω) ∩ ¯li (cid:54)= ∅ for i = 1, 2, which contradicts the
(cid:3)
separation property of ¯h.
Remark 3.10. Let Γ be arbitrary. Let ω ∈ X(Γ) be an edge path joining vertices
x1, x2 ∈ Pv, and suppose ω \ {x1, x2} stays inside one component of X(Γ) \ Pv.
Then

(1) x1 and x2 are of the same height in Pv.
(2) For i = 1, 2, let ei ⊂ ω be the edge containing xi, and let ¯vi ∈ Γ be the

label of ei. Then ¯v1 and ¯v2 are in the same component of Γ \ St(¯v).

(2) follows from the proof of Lemma 3.9.

Let v and ¯v be as in Lemma 3.9 and let C be a component of Γ\St(¯v). We deﬁne
∂C to be the full subgraph spanned by vertices in ¯C \ C, here ¯C is the closure of C.
Equivalently, ∂C is the full subgraph spanned by vertices in {u ∈ Γ\C | there exists
vertex w ∈ C such that d(w, u) = 1}. Similarly, for every v-branch B ⊂ P(Γ), we
deﬁne the boundary of B, denoted by ∂B, to be the full subcomplex spanned by
vertices in {u ∈ P(Γ) \ B | there exists vertex w ∈ B such that d(w, u) = 1} =
{u ∈ St(v) | there exists vertex w ∈ B such that d(w, u) = 1}. Such ∂B is called
a v-peripheral subcomplex of P(Γ). We caution the reader that B ∪ ∂B may not
equal to the closure of B.
A subcomplex K ⊂ Pv is called a v-peripheral subcomplex (of type ∂C) if K
is a standard subcomplex and ΓK = ∂C for some component C of Γ \ St(¯v). If
the vertex set of ∂C is properly contained in ¯v⊥, then there are inﬁnitely many
v-peripheral subcomplexes of type ∂C which are of the same height.
Lemma 3.11. Let Γ be arbitrary. Let x1, x2, ¯v1, ¯v2 and Pv be as in Remark 3.10
and let C be the component of Γ \ St(¯v) containing ¯v1 and ¯v2. Then x1 and x2 are
in the same v-peripheral subcomplex of type ∂C.
Proof. For i = 1, 2, let Ki be the v-peripheral subcomplex of type ∂C such that
xi ∈ Ki. Note that K1 and K2 are horizontal subcomplex of P(Γ) of the same
height. We argue by contradiction and suppose K1 (cid:54)= K2. Then K1 ∩ K2 = ∅. We
claim there exists an edge e ∈ Pv such that its label ve does not belong to ∂C and
the hyperplane dual to e separates K1 from K2. To see this, pick vertices x ∈ K1
and y ∈ K2 such that d(x, y) = d(K1, K2). Let ω1 be a combinatorial geodesic
joining x and y. Then ω1 ⊂ Pv by Lemma 2.3. Moreover, every hyperplane dual to
some edge in ω1 separates K1 and K2. Thus there exists an edge e ∈ ω1 such that
ve /∈ ∂C, otherwise we would have ω1 ⊂ K1.
Let he be the hyperplane dual to e and let Nhe be the carrier of he. Then he
separates x1, x2 and there exists an edge e(cid:48) ⊂ ω parallel to e (ω is the path in
Remark 3.10). Pick endpoint y ∈ e(cid:48) and let ω2 ⊂ Nhe be an edge path of shortest
combinatorial length connecting y and Pv ∩ Nhe. Let x3 be the other endpoint of
ω2 and let e(cid:48)(cid:48) ⊂ ω2 be the edge containing x3. Then d(ve(cid:48)(cid:48) , ve) = 1 (ve(cid:48)(cid:48) is the label
of e(cid:48)(cid:48)), and it follows from ve /∈ ∂C that
(3.12)

ve(cid:48)(cid:48) /∈ C.

18

JINGYIN HUANG

Let ω2 be an edge path connecting x1 and x3 obtained by ﬁrst following ω from
x1 to y, then following ω2 until x3. Then applying Remark 3.10 to ω2 yields a
(cid:3)
contradiction to (3.12).
Corollary 3.13. Suppose Γ is connected. Let v and ¯v be as in Lemma 3.9 and
pick a component C of Γ \ St(¯v). Suppose K1 and K2 are two distinct v-peripheral
subcomplexes of type ∂C and they have the same height. Let w1, w2 ∈ P(Γ) \ St(v)
be vertices such that π(wi) ∈ C for i = 1, 2. Suppose Pwi ∩ Ki (cid:54)= ∅ for i = 1, 2.
Then w1 and w2 are in diﬀerent v-branches.
Proof. For i = 1, 2, let li be a standard geodesic such that li∩Ki (cid:54)= ∅ and ∆(li) = wi.
If w1 and w2 are in the same v-branch, then the argument in the second paragraph of
the proof of Lemma 3.9 implies there exists an edge path ω ⊂ X(Γ)\ Pv connecting
a vertex in l1 \ Pv to a vertex in l2 \ Pv. Then it follows from Lemma 3.11 that
(cid:3)
K1 = K2, which is a contradiction.
Corollary 3.14. Suppose Γ is of type II. Let v and ¯v be as before, and let l ⊂ X(Γ)
be a standard geodesic such that ∆(l) = v. Pick vertex x ∈ l, then

(1) There is a 1-1 correspondence between v-branches in the v-tier of height
x and pairs (C, K), where C is a component in Γ \ St(¯v) and K is a v-
peripheral subcomplexes in X(Γ) of height x such that ΓK = ∂C. Moreover,
let B be the v-branch corresponding to (C, K). Then ∂B = ∆(K).
(2) For every v-peripheral subcomplex A ⊂ P(Γ), there exists a unique v-
peripheral subcomplex K ⊂ X(Γ) of height x such that ∆(K) = A.

(3) Let A be as above. Then there are only ﬁnite many v-branches with bound-
(4) Let v1, v2 ∈ P(Γ) be two diﬀerent vertices and Bi ⊂ P(Γ) be a vi-branch
(5) Let v1, v2 be as above. Then P(Γ) \ (lk(v1) ∩ lk(v2)) is connected.

ary equal to A in a v-tier.
for i = 1, 2. Then B1 (cid:54)= B2.

Proof. For i = 1, 2, pick pairs (Ci, Ki) as above, let wi ∈ P(Γ) be a vertex such
that π(wi) ∈ Ci and Pwi ∩ Ki (cid:54)= ∅, we claim w1 and w2 are in the same v-branch
if and only if C1 = C2 and K1 = K2. Assuming the claim, then the ﬁrst part of
(1) follows from Lemma 3.4. The only if direction follows from Lemma 3.9 and
Corollary 3.13. For the other direction, pick vertex xi ∈ Pwi ∩ Ki, it suﬃces to
consider the case when x1 and x2 are joined by an edge e ⊂ K1. Let le be the
standard geodesic containing e and let ve = ∆(le). Then π(ve) ∈ ∂C1 and there
exists ¯u ∈ C1 such that
(3.15)
For i = 1, 2, let ¯ωi ⊂ C1 be the edge path connecting ¯u and π(wi). Then we lift
¯ωi to an edge path ωi ⊂ (F (Γ))xi. (3.15) implies we can concatenate ω1 and ω2 to
obtain a path connecting w1 and w2 outside St(v).
Now we prove the second statement of (1). Pick pair (C, K) as above and B be
the associated v-branch. Since ΓK = ∂C, for each standard geodesic l ⊂ K, there
exists a standard geodesic l(cid:48) such that (1) π(∆(l(cid:48))) ∈ C; (2) l(cid:48) and l span a 2-ﬂat.
Thus ∆(l(cid:48)) ∈ B and ∆(l) ∈ ∂B. Hence ∆(K) ⊂ ∂B. Now we prove the other
direction. Pick u ∈ ∂B. By Lemma 3.4, we can assume there exists w(cid:48) ∈ B such
that d(w(cid:48), u) = 1 and Pw(cid:48) ∩ Pv (cid:54)= ∅. Then π(w(cid:48)) ∈ C by Lemma 3.9, hence π(u) ∈
∂C. Note that Pw(cid:48) ∩ Pu (cid:54)= ∅ and Pv ∩ Pu (cid:54)= ∅. Thus Pv ∩ Pu ∩ Pw(cid:48) (cid:54)= ∅ by Lemma
2.2. Pick vertex z in this triple intersection. Then z ∈ K by Lemme 3.13. Let lz

d(¯u, π(ve)) = 1.

QUASI-ISOMETRY CLASSIFICATION OF RIGHT-ANGLED ARTIN GROUPS II

19

be a standard geodesic such that z ∈ lz and ∆(lz) = u. Since π(u) ∈ ∂C = ΓK,
lz ⊂ K. Thus u ∈ ∆(K).

The existence in (2) follows from Lemma 3.4 and the above discussion. Let K1
and K2 be two v-peripheral subcomplexes of the same height such that ∆(K1) =
∆(K2) = A. Then the Hausdorﬀ distance dH (K1, K2) < ∞ by Lemma 2.11. If
K1 ∩ K2 (cid:54)= ∅, then K1 = K2 since ΓK1 = ΓK2. Otherwise there exists a horizontal
edge e ⊂ Pv such that the hyperplane dual to e separates K1 from K2 (note that
K1 and K2 are horizontal). Suppose ¯w ∈ Γ is the label of e. Then d( ¯w, ¯v) = 1
and ΓK1 ⊂ St( ¯w)\{ ¯w} by Lemma 2.11. It follows that lk( ¯w)∩ lk(¯v) contains ΓK1,
hence separates Γ, which is a contradiction. (3) follows from (1) and (2).
To see (4), suppose B1 = B2. By (1), there exist standard subcomplexes Ki ⊂
Pvi for i = 1, 2 such that ∆(Ki) = ∂Bi. Then K1 and K2 are parallel, hence ΓK1 =
ΓK2. Let ¯vi = π(vi) for i = 1, 2. Then ΓK1 ⊂ lk(¯v1) ∩ lk(¯v2). By Lemma 3.4, there
exists vertex w ∈ B1 such that ¯w = π(w) ∈ C where C is a component of Γ\ St(v1)
with ∂C = ΓK1. Therefore, ΓK1 separates ¯v1 from ¯w, so does lk(¯v1) ∩ lk(¯v2). This
leads to a contradiction in the case ¯v1 (cid:54)= ¯v2. Suppose ¯v1 = ¯v2. Then Pv1 and Pv2
are standard complexes with the same support. Thus Pv1 ∩ Pv2 = ∅, otherwise we
would have Pv1 = Pv2 and v1 = v2. Let h be a hyperplane separating Pv1 and Pv2
such that the carrier of h intersects Pv1. Then the label of edges dual to h, denoted
by ¯vh, satisﬁes d(¯vh, ¯v1) ≥ 2. It follows from Lemma 2.12 that ΓK1 ⊂ lk(¯vh). Thus
lk(¯v1) ∩ lk(¯vh) separates Γ, which is a contradiction.
To see (5), ﬁrst we assume d(¯v1, ¯v2) (cid:54)= 0. Since Γ is of type II, for any component
C of Γ \ St(¯v1),
(3.16)
Let B be a v1-branch. Then (1) and (2) imply there exist standard subcomplex
K ⊂ Pv1 and component C(cid:48) of Γ \ St(¯v1) such that ∂B = ∆(K) and ΓK = ∂C(cid:48).
Hence ∂C(cid:48) = π(∂B) ∩ Γ (recall that we have identiﬁed Γ with the 1-skeleton of
F (Γ)). It follows from (3.16) that ∂B \ (lk(v1) ∩ lk(v2)) (cid:54)= ∅, otherwise we would
have ∂C(cid:48) ⊂ π(∂B) ⊂ π(lk(v1) ∩ lk(v2)) ⊂ lk(¯v1) ∩ lk(¯v2). Then every vertex in B
can be connected to v1 outside lk(v1) ∩ lk(v2) and (5) follows.
If ¯v1 = ¯v2, then Pv1 ∩ Pv2 = ∅. Hence d(v1, v2) ≥ 2 and lk(v1) ∩ lk(v2) =
St(v1) ∩ St(v2). Let h and ¯hv be as in the proof of (4). Let lh be a standard
geodesic dual to l and let vh = ∆(lh). Note that d(vh, v1) ≥ 2 and π(vh) = ¯vh (cid:54)= ¯v1.
It suﬃces to prove St(v1)∩ St(v2) ⊂ St(v1)∩ St(vh), since this reduces the current
case to the previous case. Let k be a vertex in St(v1) ∩ St(v2). Then Pk has
nontrivial intersection with both Pv1 and Pv2. Since h separates Pv1 and Pv2,
Pk ∩ h (cid:54)= ∅. Hence lh ⊂ Pk and d(k, vh) ≤ 1.
(cid:3)
3.2. Quasi-isometry invariance of type II and weak type II.
Lemma 3.17. If Γ is of weak type II, then

∂C \ (lk(¯v1) ∩ lk(¯v2)) (cid:54)= ∅.

(1) There is no non-adjacent transvection in Out(G(Γ)).
(2) P(Γ) is of weak type II.

Proof. (1) follows directly from the deﬁnition. To see (2), pick distinct vertices
v1, v2 ∈ P(Γ) such that d(v1, v2) = 2. For i = 1, 2, let ¯vi = π(vi). The case
d(¯v1, ¯v2) = 2 and ¯v1 = ¯v2 has been dealt with in Corollary 3.14 (5). Now we
assume d(¯v1, ¯v2) = 1. If Pv1 ∩ Pv2 (cid:54)= ∅, then it is a standard complex whose support
is the intersection of the supports of Pv1 and Pv2, which is St(¯v1) ∩ St(¯v2). Thus

20

JINGYIN HUANG

d(v1, v2) = 1, which yields a contradiction. So Pv1 ∩ Pv2 = ∅ and we have reduced
(cid:3)
to second case of Corollary 3.14 (5).

Lemma 3.18. [Hua14a, Lemma 5.1] Let Γ be a ﬁnite simplicial graph. Pick a
vertex ¯w ∈ Γ and let Γ ¯w be the minimal stable subgraph containing ¯w. Denote
Γ1 = lk( ¯w) and Γ2 = lk(Γ1) (see Section 2.1 for deﬁnition of links), then either of
the following is true:

(1) Γ ¯w is a clique. In this case St( ¯w) is a stable subgraph.
(2) Both Γ1 and the join Γ1 ◦ Γ2 of Γ1 and Γ2 are stable subgraphs of Γ. More-

over, Γ2 is disconnected.

Lemma 3.19. Suppose P(Γ) is of weak type II. Let q : G(Γ) → G(Γ(cid:48)) be a quasi-
isometry. Then q induces a simplicial isomorphism q∗ : P(Γ) → P(Γ(cid:48)).

The proof is a variation of [Hua14a, Theorem 5.3].

If case (2) is true, let Γ(cid:48)

Proof. Let Γ = Γ1 ◦ Γ2 be any join decomposition. Then Γ is of weak type II if and
only if each Γi is of weak type II. So in the light of Theorem 2.16, we only need
to focus on the case when Γ is irreducible and is not a clique. In this case Γ(cid:48) is
also irreducible and is not a clique, hence diam(P(Γ)) = ∞ and diam(P(Γ(cid:48))) = ∞
[KK13, Lemma 26 (5)].
Let q∗ : P(Γ) → P(Γ(cid:48)) be the simplicial embedding in Remark 2.21. Suppose q∗
is not surjective. Then there exists a vertex w(cid:48) ∈ P(Γ(cid:48)) which is not in the image of
q∗. Let ¯w(cid:48) = π(w(cid:48)) and let l(cid:48) be a standard geodesic ∆(l(cid:48)) = w(cid:48). We apply Lemma
3.18 to ¯w(cid:48) ∈ Γ(cid:48). If case (1) is true, let F (cid:48) be the standard ﬂat in X(Γ(cid:48)) such that
l(cid:48) ⊂ F (cid:48) and ΓF (cid:48) = Γw(cid:48). Since Γw(cid:48) is stable, w(cid:48) ∈ ∆(F (cid:48)) ⊂ q∗(P(Γ(cid:48))), which is a
contradiction.
2 = lk(Γ(cid:48)
1 and K(cid:48) to be the
standard subcomplexes in X(Γ(cid:48)) such that (1) ΓK(cid:48)
2; (2)
1 ⊂ K(cid:48). Set M(cid:48)
l(cid:48) ⊂ K(cid:48) and K(cid:48)
2 be an orthogonal
complement of K(cid:48)
= Γ(cid:48)
1 × K(cid:48)
and K(cid:48) = K(cid:48)
2 for
2). By construction, w(cid:48) ∈ M(cid:48) and lk(w(cid:48)) = M(cid:48)
M(cid:48)
2 = ∆(K(cid:48)
1.
Since K(cid:48) and K(cid:48)
1 are stable, there exist stable standard subcomplexes K and
K1 in X(Γ) such that the Hausdorﬀ distances satisfy dH (q(K), K(cid:48)) < ∞ and
1) < ∞. Moreover, by applying Theorem 2.16 to the quasi-isometry
dH (q(K1), K(cid:48)
between K and K(cid:48), there exists standard subcomplex K2 ∈ K such that K =
K1 × K2 and K2 is quasi-isometric to K(cid:48)
2, thus ΓK2 is also disconnected. Let
Mi = ∆(Ki) ⊂ P(Γ) for i = 1, 2 and M = M1 ∗ M2 = ∆(K). Then q−1∗ (M(cid:48)
1) = M1
by (2.22) and (2.23). Since lk(w(cid:48)) = M(cid:48)
(3.20)

1 in K(cid:48), i.e. K(cid:48)
2. It follows that M(cid:48) has a join decomposition M(cid:48) = M(cid:48)

2 is a standard subcomplex such that ΓK(cid:48)

1 = lk( ¯w(cid:48)) and Γ(cid:48)
1 = ∆(K(cid:48)

1). Take K(cid:48)
= Γ(cid:48)
1) and M(cid:48) = ∆(K(cid:48)). Let K(cid:48)

1 and w(cid:48) /∈ q∗(P(Γ)),

q−1∗ (St(w(cid:48))) = M1.

Let I = q∗(P(Γ)). Then I is D-dense in P(Γ(cid:48)) for some constant D > 0. To
see this, it suﬃces to show Γ(cid:48) contains a stable clique, but this follows from the
existence of stable clique in Γ.
We claim every w(cid:48)-tier contains vertices arbitrarily far from w(cid:48). To see this, let l(cid:48)
be a standard geodesic such that ∆(l(cid:48)) = w(cid:48). We consider the action G(Γ) (cid:121) X(Γ)
by deck transformations and the induced action G(Γ) (cid:121) P(Γ). Then the stabilizer
of l(cid:48) is isomorphic to Z. Moreover, this copy of Z acts transitively on the collection
of w(cid:48)-tires. Now the claim follows from diam(P(Γ(cid:48))) = ∞.

1 and ΓK(cid:48) = Γ(cid:48)

1 ◦ Γ(cid:48)

1

2

2

1 ∗ M(cid:48)

QUASI-ISOMETRY CLASSIFICATION OF RIGHT-ANGLED ARTIN GROUPS II

21

1, w(cid:48)

i, w(cid:48)

2 ∈ P(Γ(cid:48)) such that they are not in the same w(cid:48)-tier and
We pick vertices w(cid:48)
i) ≤ D. Then
i, w(cid:48)) > D + 5 for i = 1, 2. Let u(cid:48)
d(w(cid:48)
i, I ∩ St(w(cid:48))) > 4. Deﬁne ui = q−1∗ (u(cid:48)
u(cid:48)
1 and u(cid:48)
i),
then u1 and u2 are in diﬀerent components of P(Γ)\ q−1∗ (St(w(cid:48))) = P(Γ)\ M1, and
(3.21)

2 is separated by St(w(cid:48)) and d(u(cid:48)

i ∈ I be a vertex such that d(u(cid:48)

d(ui, M1) > 4.

Since ΓK2 is disconnected, there exists vertex v1, v2 ∈ M2 such that d(v1, v2) = 2.
Recall that M = M1∗ M2 ⊂ P(Γ), so M1 ⊂ lk(v1)∩ lk(v2). Moreover, d(ui, lk(v1)∩
lk(v2)) > 0 by (3.21), so u1 and u2 are separated by lk(v1) ∩ lk(v2), which is
contradictory to our assumption on P(Γ). So q∗ must be surjective.
(cid:3)
Lemma 3.22. If P(Γ) is of weak type II, then Γ is of weak type II.
Proof. Suppose Γ is not of weak type II. Then there exist vertices ¯v1, ¯v2 ∈ Γ such
that d(¯v1, ¯v2) = 2 and Γ \ lk(¯v1) ∩ lk(¯v2) is disconnected. Then we can ﬁnd com-
ponent C of Γ \ St(¯v1) such that ∂C ⊂ lk(¯v1) ∩ lk(¯v2). Pick vertex x0 ∈ Pv1 and
let K ⊂ Pv1 be the standard subcomplex with support = ∂C that contains x0.
Pick vertex ¯v3 ∈ C (it is possible that ¯v3 = ¯v2). For i = 1, 2, 3, let vi ∈ (F (Γ))x0
be the lift of ¯vi. Then ∆(K) ⊂ St(v1) ∩ St(v2) = lk(v1) ∩ lk(v2). Let B be the
v1-branch that contains v3. We claim ∂B = ∆(K), which then implies v1 and B
are in diﬀerent components of P(Γ) \ (lk(v1) ∩ lk(v2)).
∆(K) ⊂ ∂B follows from the argument in (1) of Corollary 3.14. To see the
other direction, pick w1 ∈ ∂B and w2 ∈ B such that d(w1, w2) = 1. Let l3 be the
geodesic such that x0 ∈ l3 and ∆(l3) = v3. If Pw2 ∩ Pv1 = ∅, then by the argument
in Lemma 3.9, we can ﬁnd an edge path ω ∈ X(Γ) \ Pv1 connecting x ∈ l3 \ {x0}
and y ∈ Pw2 ∩ Pw1. Let ω1 ⊂ Pw1 be a horizontal edge path connecting y and some
vertex z ∈ Pw1 ∩ Pv1. Such path exists since Pw1 ∩ Pv1 contains a standard geodesic
l with ∆(l) = w1. We can also assume ω1 ∩ Pv1 = {z}. Let e ⊂ ω1 be the edge
containing z and ¯ve be the label of e. Since ω1 is horizontal in Pw1,
(3.23)
Let ω(cid:48) be the edge path obtained by (1) going from x0 to x along l3; (2) going
from x to y along ω; (3) going form y to z along ω1. By applying Remark 3.10 and
Lemma 3.11 to ω(cid:48), we have ¯ve ∈ C and z ∈ K. Hence π(w1) ∈ ∂C by (3.23). This
together with z ∈ Pw1 and z ∈ K imply w1 ∈ ∆(K). If Pw2 ∩ Pv1 (cid:54)= ∅, we still
have w1 ∈ ∆(K) by the proof of the second statement of Corollary 3.14 (1). Thus
∂B ⊂ ∆(K).
(cid:3)
Actually the above argument also shows that if P(Γ) is of type II, then Γ is of
type II. The following corollary follows from (5) of Corollary 3.14, Lemma 3.17,
Lemma 3.19 and Lemma 3.22.
Corollary 3.24. Γ is of (weak) type II if and only if P(Γ) is of (weak) type II. If
G(Γ(cid:48)) is quasi-isometric to G(Γ), then Γ(cid:48) is also of (weak) type II.

d(¯ve, π(w1)) = 1.

For any v-branch B, we denote the full subcomplex spanned by vertices in B
and ∂B by ¯B. For any component L of X(Γ) \ Pv, we use ∂L to denote the full
subcomplex spanned by vertices outside L which are adjacent to some vertex in L,
and use ¯L to denote the full subcomplex spanned by vertices in L and ∂L. Note
that ¯B may not be the closure of B and ¯L may not be the closure of L.
For any subcomplex K ⊂ X(Γ), let {Fλ}λ∈Λ be the collection of standard ﬂats
in K and deﬁne ∆(K) = ∪λ∈Λ∆(Fλ).

22

JINGYIN HUANG

Lemma 3.25. If K is a convex subcomplex, then ∆(K) is a full subcomplex of
P(Γ).
Proof. Let F ⊂ X(Γ) be a standard ﬂat such that vertices of ∆(F ) are in ∆(K).
Suppose (F (cid:48), K(cid:48)) = I(F, K). Lemma 2.4 (4) implies that every standard geodesic
of F is contained in a R-neighbourhood of F (cid:48) for some R > 0. However, F (cid:48) is a
convex subcomplex of F , so actually F = F (cid:48). Hence ∆(F ) ⊂ ∆(K).
(cid:3)
Lemma 3.26. Pick vertex v ∈ P(Γ) and let ¯v = π(v). Let L be a component of
X(Γ) \ Pv. Then

(1) ∂L is a v-peripheral subcomplex of X(Γ). Moreover, the topological bound-
(2) ¯L = L ∪ ∂L, and L is a convex subcomplex of X(Γ).

ary ∂T opL of L is contained in ∂L, and contains the 1-skeleton of ∂L.

If Γ is of weak type II and q : X(Γ) → X(Γ(cid:48)) is a quasi-isometry, then

(3) There is a 1-1 correspondence between v-branches and components of X(Γ)\
Pv. In particular, there exists a unique v-branch B such that ∆( ¯L) = ¯B
and ∆(∂L) = ∂B.

(4) There is a component L(cid:48) of X(Γ(cid:48)) \ Pq∗(v) such that dH (q(L), L(cid:48)) < ∞.
(5) For any component C of Γ \ St(¯v), ∂C is a stable subgraph of Γ.

Proof. To see (1), note that Remark 3.10 implies there exists a component C of
Γ\ St(¯v) such that the label of any edge which connects a vertex in L and a vertex
outside L is inside C. Pick a vertex in X(Γ)\ L which is adjacent to some vertex in
L, and let K be the v-peripheral subcomplex of type ∂C that contains this vertex.
Then Lemma 3.11 implies vertex set of ∂L is contained in K, hence ∂L ⊂ K. Note
that ∂T opL is a subcomplex whose vertex set is the same as ∂L, hence ∂T opL ⊂ L.
On the other hand, the proof of the ﬁrst statement of Corollary 3.14 (1) implies
every edge of K is contained in ∂T opL. Thus (1) follows.
To see (2), note that L∪ ∂L is a subcomplex, moreover, if a collection of mutual
orthogonal edges emanating from the same vertex is contained in L ∪ ∂L, then the
cube spanned by these edges is contained in L ∪ ∂L. Thus L ∪ ∂L is a convex
subcomplex, in particular it is a full subcomplex, hence (2) follows.
Now we prove (3). For i = 1, 2, let ei ⊂ X(Γ) be an edge such that one of its
endpoint xi1 ∈ X(Γ) \ Pv and another endpoint xi2 ∈ Pv. Let ¯vi ∈ Γ be the label
of ei, and let Ci be the component of Γ \ St(¯v) that contains ¯vi. We claim x11
and x21 are in the same component of X(Γ) \ Pv if and only if C1 = C2 and x21
and x22 belong to the same v-peripheral subcomplex of ∂C1. Then we have a 1-1
correspondence between components of X(Γ) \ Pv and the pair (C, K) as in (1) of
Corollary 3.14 and the ﬁrst part of (3) follows. The only if part of the claim follows
from Remark 3.10 and Lemma 3.11. Note that C1 contains more than one point
(otherwise Γ will not be of weak type II), so the if direction holds in the special
case when ¯v1 = ¯v2, x21 = x22 and x11 (cid:54)= x12. The general case follows from the
argument in (1) of Corollary 3.14.

Suppose (C, K) is the pair as above corresponding to L. Then the above claim
implies ∂L = K. Let B be the v-branch corresponding to (C, K). Then ∂B =
∆(K) = ∆(∂L). Now we prove ∆( ¯L) ⊂ ¯B. Let l ⊂ ¯L be a standard geodesic. If
d(∆(l), v) ≥ 2, by Lemma 3.4, there exists standard geodesic l1 such that ∆(l1)
and ∆(l) are in the same v-branch and l1 ∩ Pv (cid:54)= ∅. The argument in Lemma
3.9 implies that there exists an edge path ω ⊂ X(Γ) \ Pv connecting a vertex in
l and a vertex in l1, thus l1 ⊂ ¯L. It follows that l1 ∩ K (cid:54)= ∅ and π(∆(l1)) ⊂ C,

QUASI-ISOMETRY CLASSIFICATION OF RIGHT-ANGLED ARTIN GROUPS II

23

so ∆(l1) ∈ B by Corollary 3.14 (1). Hence ∆(l) ∈ B.
If d(∆(l), v) = 1, since
¯L ∩ Pv = K, we apply Lemma 2.4 (4) with C1 = ¯L and C2 = Pv to deduce that l
stays in the R-neighbourhood of K for some R > 0, thus ∆(l) ∈ ∆(K) = ∂B. Note
that ∆(l) ∈ ¯B in both cases, so ∆( ¯L) ⊂ ¯B. Now we prove ¯B ⊂ ∆( ¯L). Pick vertex
w ∈ ¯B. If w ∈ ∂B, then we are done by ∂B = ∆(∂L) ⊂ ∆( ¯L). Suppose w ∈ B.
Pick an edge e ⊂ X(Γ) which connects a point in L and a point outside L and
let le be the standard geodesic containing e. Then le ⊂ ¯L by the discussion in the
previous paragraph. Then ∆(le) ∈ ¯L ⊂ ¯B. However, ∆(le) /∈ ∂B, hence ∆(le) ∈ B.
The argument in Lemma 3.9 implies that there exists an edge path outside Pv
connecting a vertex in le and a vertex in Pw. Thus w ∈ ∆( ¯L). In summary, each
vertex of ¯B is in ∆( ¯L). Since ¯L is convex, ∆( ¯L) is a full subcomplex by Lemma
3.25, then ¯B ⊂ ∆( ¯L).
To see (4), let {∆λ}λ∈Λ be the collection of maximal simplexes in P(Γ) such
that ∆λ ∩ B (cid:54)= ∅ and let {Fλ}λ∈Λ be the collection of maximal standard ﬂats such
that ∆(Fλ) = ∆λ. We claim the Hausdorﬀ distance dH (L,∪λ∈ΛFλ) < ∞. Note
that ∆λ ⊂ ¯B, hence Fλ ⊂ ¯L by (3) and the maximality of Fλ. Pick an arbitrary
vertex x ∈ L and let lx be a standard geodesic such that d(π(∆(lx)), ¯v) ≥ 2 and
x ∈ lx. Then d(∆(lx), v) ≥ 2. Hence lx ∩ Pv is at most one point. It follows from
the proof of (3) that lx ⊂ ¯L and ∆(lx) ⊂ B. Thus there exists λ0 ∈ Λ such that
x ∈ lx ⊂ Fλ0. Thus L is contained in some neighbourhood of ∪λ∈ΛFλ. However,
dH (L, ¯L) < ∞ by (1) and (2), hence the claim follows. Let B(cid:48) = q∗(B) and L(cid:48) be
the component of X(Γ(cid:48)) \ Pq∗(v) corresponding to B(cid:48) (note that Γ(cid:48) is also of weak
type II by Corollary 3.24). By Lemma 2.19, for each λ ∈ Λ, there exists a unique
maximal standard ﬂat F (cid:48)
λ) < C (C is independent
of λ). Note that we also have dH (L(cid:48),∪λ∈ΛF (cid:48)
Now we prove (5). It follows from Lemma 3.17, Lemma 2.19 and Lemma 3.18
that St(¯v) is a stable subgraph. Hence dH (Pv, Pq∗(v)) < ∞. Let K(cid:48) = Pq∗(v) ∩ ¯L(cid:48).
Then K(cid:48) is a q∗(v)-peripheral subcomplex by (1) and (2), hence is a standard
subcomplex. Recall that K = Pv ∩ L, so dH (q(K), K(cid:48)) < ∞ by Lemma 2.4 (4). (cid:3)
3.3. RAAG of weak type I.
Deﬁnition 3.27. A ﬁnite simplicial graph Γ is of weak type I if:

λ ⊂ X(Γ(cid:48)) such that dH (q(Fλ), F (cid:48)

λ) < ∞, so dH (q(L), L(cid:48)) < ∞.

(1) Γ is of weak type II.
(2) Γ does not contain any separating closed star.

G(Γ) is of weak type I if Γ is of weak type I.

It is immediate from the deﬁnition that if Γ = Γ1 ◦ Γ2, then Γ is of weak type I

if and only if Γ1 and Γ2 are of weak type I.
Lemma 3.28. G(Γ) is of weak type I if and only if

(1) Γ does not contain any separating closed star.
(2) There does not exist vertices ¯v, ¯w ∈ Γ such that d(¯v, ¯w) = 2 and Γ =

St(¯v) ∪ St( ¯w).

Thus Deﬁnition 1.1 and Deﬁnition 3.27 are consistent.

Proof. For the only if direction, note that if Γ = St(¯v)∪St( ¯w) with d(¯v, ¯w) = 2, then
lk(¯v) ∩ lk( ¯w) separates Γ. For the if direction, we follow the argument in [Hua14a,
Theorem 5.3]. Suppose there exist vertices ¯v1 and ¯v2 such that lk(¯v1) ∩ lk(¯v2)
j=1 be the connected components of F (Γ)\lk(¯v1)∩lk(¯v2).
separates Γ. And let {Cj}d

24

JINGYIN HUANG

Then at most one of Cj is contained in St(¯v1). If d ≥ 3, St(¯v1) would separate
F (Γ), contradiction. Suppose d = 2. At least one of C1 and C2 is inside St(¯v1),
otherwise St(¯v1) will separate F (Γ). We assume C1 ⊂ St(¯v1). Thus ¯v2 ∈ C2.
Similarly, at least one of C1 and C2 is inside St(¯v2). So we must have C2 ⊂ St(¯v2).
Hence F (Γ) = St(¯v1) ∪ St(¯v2), contradiction again.
(cid:3)
Theorem 3.29. Let Γ1 be of weak type I. Then any simplicial isomorphism s :
P(Γ1) → P(Γ2) is visible. In particular, if q : G(Γ1) → G(Γ2) is a quasi-isometry,
then q will induce a visible map q∗ : P(Γ1) → P(Γ2). In this case, Γ2 is of weak
type II, hence Out(Γ2) does not contain non-adjacent transvections.
i}n
Proof. Let p, {Fi}n
i=1 be as in Deﬁnition 2.24. Suppose s is not visible.
Then there exist i (cid:54)= j and a hyperplane h separating F (cid:48)
j. Let l(cid:48) be a standard
i and F (cid:48)
2 ∈ ∆(F (cid:48)
geodesic dual to h and let v(cid:48) = ∆(l(cid:48)). Then there exists v(cid:48)
j)
1 from v(cid:48)
such that they are in diﬀerent v(cid:48)-tiers. Thus St(v(cid:48)) separates v(cid:48)
2 by Lemma
3.1. Let v = s−1(v(cid:48)). Then (F (Γ))p \ St(v) is disconnected, hence v ∈ (F (Γ))p
by Remark 3.8. This would imply F (Γ) has a separating closed star, which is a
(cid:3)
contradiction. The second statement follows from Lemma 3.19.

i=1 and {F (cid:48)

1 ∈ ∆(F (cid:48)

i ) and v(cid:48)

Theorem 3.30. Suppose G(Γ1) and G(Γ2) are groups of weak type I. Then they
are quasi-isometric if and only if they are isomorphic.
Proof. Let q : G(Γ1) → G(Γ2) be a quasi-isometry. By Theorem 3.29, q induces a
visible simplicial isomorphism q∗ : P(Γ) → P(Γ). Pick vertex x1 ∈ X(Γ1). Then
the visibility implies q∗((F (Γ1))x1 ) ⊂ (F (Γ2))x2 for some vertex x2 ∈ X(Γ2). This
induces a graph embedding Γ1 → Γ2. By consider the quasi-isometry inverse of
∼= Γ2 and G(Γ1) ∼=
q, we obtain another graph embedding Γ2 → Γ1. Hence Γ1
(cid:3)
G(Γ2).

Though the deﬁnition of weak type I looks technical, it is actually a natural

condition to consider for the following reason:

Theorem 3.31. The following are equivalent:

(1) G(Γ) is of weak type I.
(2) There does not exist vertex x ∈ X(Γ) and vertex v ∈ P(Γ) such that St(v)
(3) Every element in Aut(P(Γ)) is visible.

separates (F (Γ))x.

Proof. (1) ⇔ (2) follows from Lemma 3.32 below and (2) ⇒ (3) follows from the
proof of Theorem 3.29. It suﬃces to prove (3) ⇒ (2). We argue by contradiction
and suppose v1, v2 are vertices in diﬀerent components of (F (Γ))x \ St(v). Then
Lemma 3.9 implies v1 and v2 are in diﬀerent v-branches. For i = 1, 2, let Bi be
the v-branch that contains vi. Let l be a standard geodesic such that ∆(l) = v
and x ∈ l and pick α ∈ G(Γ) to be an non-trivial element such that α(l) = α. Let
α∗ : P(Γ) → P(Γ) be the induced map. Then α∗ ﬁxes every point in St(v). Thus
there exists f ∈ Aut(P(Γ)) such that (1) f ﬁxes every vertex in P(Γ)\(B1∪α∗(B1));
(2) f|B1 = α∗|B1 and f|α∗(B1) = α−1∗ |α∗(B1).
We claim f is not visible. To see this, for i = 1, 2, pick maximal standard ﬂat
Fi such that x ∈ Fi and vi ∈ ∆(Fi). Then f (∆(F1)) = α∗(∆(F1)) and f (∆(F2)) =
∆(F2), thus the maximal standard ﬂats corresponding to f (∆(F1)) and f (∆(F2))
(cid:3)
are separated by a hyperplane dual to l, hence have empty intersection.

i=1, {vi}3

2

QUASI-ISOMETRY CLASSIFICATION OF RIGHT-ANGLED ARTIN GROUPS II

2 be the standard geodesic such that x(cid:48)

25
Lemma 3.32. Γ is of weak type II if and only if there does not exist vertex x ∈ X(Γ)
and vertex v ∈ P(Γ) \ (F (Γ))x such that (F (Γ))x \ St(v) is disconnected.
Proof. By remark 3.8, it suﬃces to prove the if direction. Suppose Γ is not of weak
type II. Let {¯vi}3
i=1 and x0 ∈ X(Γ) be as in Lemma 3.22. For i = 1, 2, let
li be the standard geodesic such that x0 ∈ l and ∆(li) = vi. Pick vertex x(cid:48)
0 (cid:54)= x0 in
l1 and let l(cid:48)
2)) = ¯v2. Then
2 /∈ (F (Γ))x0.
d(v(cid:48)
2, v1) = 2 where v(cid:48)
Since Pv(cid:48)
and x0 are separated by some hyperplane dual to l1, thus by Lemma
2) ∩ (F (Γ))x0 ⊂ St(v1). Recall that d(¯v3, ¯v1) ≥ 2, then v3 ∈ (F (Γ))x0 \
2.12, St(v(cid:48)
St(v1). It follows that v3 /∈ St(v(cid:48)
2).
2), which then
implies (F (Γ))x0 \ St(v(cid:48)
2) is disconnected. Lemma 3.22 already implies v1 and v3
are separated by lk(v1) ∩ lk(v2). Let α ∈ G(Γ) be the left translation such that
2. Now we pass to the induced action G(Γ) (cid:121) P(Γ),
0. Then α(l2) = l(cid:48)
α(x0) = x(cid:48)
2. Since α ﬁxes St(v1), we have lk(v1)∩lk(v2) = α(lk(v1)∩lk(v2)) =
then α(v2) = v(cid:48)
lk(v1) ∩ lk(v(cid:48)
2). So lk(v1) ∩ lk(v(cid:48)
2) separates v1 from v3 and the claim follows. (cid:3)

We claim that v3 and v1 are in diﬀerent components of P(Γ)\ St(v(cid:48)

2 = ∆(l(cid:48)

2), in particular x0 /∈ Pv(cid:48)

0 ∈ l(cid:48)

2 and π(∆(l(cid:48)
, hence v(cid:48)

2

4. Rigidity and flexibility of RAAG of weak type I

4.1. An atlas for RAAG. Let G(Γ) be a RAAG of weak type I with trivial centre
and suppose G(Γ) (cid:54)= Z. We identify G(Γ) with the 1-skeleton of X(Γ) and deﬁne a
standard ﬂat in G(Γ) to be the vertex set of some standard ﬂat in X(Γ).
Theorem 3.29 implies there is a homomorphism s : Aut(P (Γ)) → P erm(G(Γ)),
where P erm(G(Γ)) is the permutation group of elements in G(Γ). Note that images
of s preserve maximal standard ﬂats. However, this may not be true for all standard
ﬂats, since adjacent transvections are allowed in Out(G(Γ)).
Let P(Γ) be the extension complex and let π : P(Γ) → F (Γ) be label-preserving
simplicial map deﬁned in Section 2.3. Note that for any vertex x ∈ X(Γ), π induces
an isomorphism (F (Γ))x → F (Γ). This motivates the following deﬁnition.
Deﬁnition 4.1 (Coherent labelling). A coherent labelling of G(Γ) is a simplicial
map L : P(Γ) → F (Γ) such that L induces an isomorphism (F (Γ))x → F (Γ) for
every vertex x ∈ X(Γ).

Assume n = dim(X(Γ)). Let F(Γ) be the collection of stable standard ﬂat
in X(Γ) and let Fk(Γ) be the collection of k-ﬂats in F(Γ). Deﬁne F<k(Γ) :=
∪k−1
i=1 Fi(Γ). Here we are considering the set itself, not the coarse equivalent classes
of the sets (compared to Theorem 2.20). Recall that we use v(K) to denote the
set of vertices in a subset K of some polyhedral complex. An L-atlas is a coherent
labelling L : P(Γ) → F (Γ) together with a collection of bijections

{v(F ) → Zv(L(∆(F )))}F∈Fk(Γ),1≤k≤n

with the following compatibility condition: pick F1 ∈ Fm(Γ) and F2 ∈ Fl(Γ) with
F1 ⊂ F2, let f : v(F2) → Zv(L(∆(F2))) and g : v(F1) → Zv(L(∆(F1))) be the associated
bijections. Suppose p : Zv(L(∆(F2))) → Zv(L(∆(F1))) is the natural projection. Then

(1) f (v(F1)) is a coset of Zv(L(∆(F1))) in Zv(L(∆(F2))).
(2) The following diagram commutes up to translation:

26

JINGYIN HUANG

v(F1)

g−−−−→ Zv(L(∆(F1)))

v(F2)

f−−−−→ Zv(L(∆(F2)))

(cid:121)i

(cid:120)p

Here i is the inclusion map.

L-atlas AL and L(cid:48)-atlas AL(cid:48) are equal up to translations if and only if L = L(cid:48) and
the bijections in AL and AL(cid:48) agree up to translation. We will write AL
e= AL(cid:48) in
this case. Pick α ∈ Aut(P(Γ)) and let α∗ : G(Γ) → G(Γ) be the bijection induced
by α. Recall that α∗ preserves stable standard ﬂats. The pull-back of an L-atlas
AL under α, denoted by α∗(AL), is deﬁned to be the (α ◦ L)-atlas with its charts
being the pull-backs of charts of AL under α∗.

induces a bijection (cid:81)
to be(cid:81)

Recall that we label each circle in S(Γ) be a generator of G(Γ) and ﬁx an orienta-
tion for each circle. This lifts to G(Γ)-invariant labelling and orientation of edges in
X(Γ). Moreover, we have induced action G(Γ) (cid:121) P(Γ) and induced G(Γ)-invariant
labelling of vertices in P(Γ). This leads to a naturally deﬁned L-atlas as follows.
Let L be the label preserving map π : P(Γ) → F (Γ). For each vertex u ∈ P(Γ),
we pick a standard geodesic l ⊂ X(Γ) such that ∆(l) = u, and identify vertices
of l with Zu in an orientation-preserving way. Let pu : G(Γ) → Zu be the map
induced by the CAT (0) projection from G(Γ) to l (recall that we have identiﬁed
G(Γ) with vertices of X(Γ), and Lemma 2.4 implies that the image of each vertex
of X(Γ) under the CAT (0) projection is a vertex in l). For each standard ﬂat
F ⊂ X(Γ), pu(v(F )) is surjective if u ∈ ∆(F ), otherwise pu(v(F )) is a point. This
u∈∆(F ) pu : v(F ) → Zv(∆(F )) and we deﬁne the chart for F
u∈∆(F ) pu post-composed with Zv(∆(F )) → Zv(L(∆(F ))). One readily veriﬁes
this atlas AL satisﬁes the above deﬁnition of L-atlas, moreover, the diagram in (2)
commutes exactly, not up to translations. The following properties are immediate.
(1) AL is G(Γ)-invariant up to translations in the sense that g∗(AL) e= AL for
all g ∈ G(Γ). Conversely, if α ∈ Aut(P (Γ)) satisﬁes α∗(AL) e= AL, then
the induces map α∗ : G(Γ) → G(Γ) is a left translation.
(2) AL is unique up to translations. Since the only ambiguity in the deﬁnition
of AL is the orientation-preserving identiﬁcation of v(l) with Zu, which is
unique up to translations.
AL is called the reference atlas.
Lemma 4.2. Let G(Γ) be of weak type I and pick F ∈ F(Γ). Then there exist
standard ﬂats {Fi}k
i=1 in F such that F is the convex hull of these ﬂats and each
Fi is the intersection of maximal standard ﬂats.
Proof. Pick vertex w ∈ Γ. Let Γw be the minimal stable subgraph containing w
and Let Γ(cid:48)
w be the intersection of maximal cliques that contains w. It suﬃces to
show Γw = Γ(cid:48)
w. Since each maximal clique is stable (Lemma 3.17 and Lemma 2.19),
Γw ⊂ Γ(cid:48)
w, then w⊥ ⊂ St(v), thus v ∈ Γw by [Hua14a, Lemma
(cid:3)
3.32]. It follows that Γ(cid:48)
Let q : G(Γ) → G(Γ(cid:48)) be a quasi-isometry and let s : P(Γ) → P(Γ(cid:48)) be an
induced simplicial isomorphism as in Lemma 3.19. By Theorem 3.29, s induces a
map φ : G(Γ) → G(Γ(cid:48)). Note that φ is a quasi-isometry. For every g(cid:48) ∈ G(Γ(cid:48)), there
is left translation ¯φg(cid:48) : G(Γ(cid:48)) → G(Γ(cid:48)), which gives rise to a simplicial isomorphism

w. Pick vertex v ∈ Γ(cid:48)
w ⊂ Γw.

QUASI-ISOMETRY CLASSIFICATION OF RIGHT-ANGLED ARTIN GROUPS II

27

¯sg(cid:48) : P(Γ(cid:48)) → P(Γ(cid:48)). Let sg(cid:48) = s−1 ◦ ¯sg(cid:48) ◦ s. Then sg(cid:48) induces a unique bijection
φg(cid:48) : G(Γ) → G(Γ) by Theorem 3.29, moreover,
¯φg(cid:48) ◦ φ = φ ◦ φg(cid:48)
(4.3)
In summary, we have G(Γ(cid:48)) acts on G(Γ(cid:48)), P(Γ(cid:48)), G(Γ) and P(Γ).
Lemma 4.4.

(1) φ is surjective. For any y, y(cid:48) ∈ G(Γ(cid:48)), |φ−1(y)| = |φ−1(y(cid:48))| < ∞.
(2) For any k and F ∈ Fk(Γ), there exists unique F (cid:48) ∈ Fk(Γ(cid:48)) such that
φ(v(F )) = v(F (cid:48)). Moreover, let Stab(v(F (cid:48))) and Stab(v(F )) be the sta-
bilizer of v(F (cid:48)) and v(F ) with respect to the action G(Γ(cid:48)) (cid:121) G(Γ(cid:48)) and
G(Γ(cid:48)) (cid:121) G(Γ) respectively. Then Stab(v(F (cid:48))) = Stab(v(F )). In this case
we will write F (cid:48) = φ(F ) for simplicity.
(3) Let F1, F2 ∈ Fk(Γ) be parallel standard ﬂats. Then for vertices x1 ∈ F1
and x2 ∈ F2, |φ−1(φ(x1)) ∩ F1| = |φ−1(φ(x2)) ∩ F2|.

i=1F (cid:48)

1 ∩ F (cid:48)

i . Then φ(v(F )) ⊂ v(F (cid:48)). The stabilizer Stab(v(F (cid:48))) ﬁxes ∆(F (cid:48)

Proof. Pick a reference point q ∈ Im φ and let Kq = (F (Γ(cid:48)))q. Denote the points
in φ−1(q) by {pλ}λ∈Λ and let Kpλ = (F (Γ))pλ. Since {φ(Kpλ)}λ∈Λ are distinct
subcomplexes of Kq, Λ is a ﬁnite set. The other parts of (1) follows from (4.3).
Now we prove (2). It is clear if F is a maximal standard ﬂat. Next we look at
the case when F = ∩h
i=1Fi where each Fi is a maximal standard ﬂat. Let F (cid:48)
i be
i ) = s(∆(Fi)) for 1 ≤ i ≤ h and let
maximal standard ﬂat in X(Γ(cid:48)) such that ∆(F (cid:48)
F (cid:48) = ∩h
i ) for all
i, hence it ﬁxes ∆i for all i and Stab(v(F (cid:48))) ⊂ Stab(v(F )). Since Stab(v(F (cid:48))) acts
on v(F (cid:48)) transitively, (4.3) implies φ(v(F )) = v(F (cid:48)) and Stab(v(F )) ⊂ Stab(v(F (cid:48))).
Thus Stab(v(F (cid:48))) = Stab(v(F )).
In general, by Lemma 4.2, we can assume F is the convex hull of F1, F2 ∈ F(Γ)
such that (2) is true for ﬂats in F which are parallel to F1 or F2. Let F (cid:48)
i =
φ(Fi) for i = 1, 2. Then F (cid:48)
1 and F (cid:48)
2 is a
ﬂat F (cid:48) (since F is contained in a maximal standard ﬂat, whose image under φ
is a maximal standard ﬂat containing F (cid:48)
It follows from Lemma 2.18
that F (cid:48) ∈ F(Γ(cid:48)). Note that any standard ﬂat that is parallel to F1 and intersects
F2 is mapped by φ to a standard ﬂat that is parallel to F (cid:48)
1 and intersects F (cid:48)
2,
thus φ(v(F )) ⊂ v(F (cid:48)). Let F3 ⊂ F be a standard ﬂat parallel to F1 and let
F (cid:48)
3 = φ(F3). Since parallel standard ﬂats in X(Γ(cid:48)) have the same stabilizer, we have
Stab(v(F1)) = Stab(v(F (cid:48)
3)) = Stab(v(F3)). By considering all such
F3’s in F , we have Stab(v(F1)) ⊂ Stab(v(F )). Similarly, Stab(v(F2)) ⊂ Stab(v(F )),
thus

2 (cid:54)= ∅ and the convex hull of F (cid:48)

1)) = Stab(v(F (cid:48)

1 and F (cid:48)
2).

Stab(v(F (cid:48))) = Stab(v(F (cid:48)

1)) ⊕ Stab(v(F (cid:48)
2))

= Stab(v(F1)) ⊕ Stab(v(F2)) ⊂ Stab(v(F ))

Now we can conclude φ(v(F )) = v(F (cid:48)) as before. It also follows that Stab(v(F )) ⊂
Stab(v(F (cid:48))), thus
(4.5)

Stab(v(F (cid:48))) = Stab(v(F )).

Now we prove (3). Note that for a pair of parallel standard ﬂats F (cid:48)

2 in
X(Γ(cid:48)), there exists g(cid:48) ∈ G(Γ(cid:48)) such that g(cid:48)(v(F (cid:48)
2), so by (4.3), it suﬃces
to prove (3) in the case where φ(v(F1)) = φ(v(F2)) = v(F (cid:48)). Let p : v(F1) → v(F2)
be the parallelism map. Denote p1 = φ|v(F1) : v(F1) → v(F (cid:48)) and p2 = φ|v(F2) ◦ p :

1)) = v(F (cid:48)

1 and F (cid:48)

28

JINGYIN HUANG

v(F1) → v(F (cid:48)). Then there exist L and A such that p1 and p2 are (L, A)-quasi-
isometries and

d(p1(x), p2(x)) < A

(4.6)
(y)| in
for any x ∈ v(F1). Pick y ∈ v(F (cid:48)) and let ri be the number of points |p−1
p−1
(y) for i = 1, 2 (ri does not depend on y by previous discussion). We argue by
contradiction and assume r1 < r2. Pick base point x0 ∈ v(F1), let m = dim(F1),
BR = B(x0, R) and Ki,R = pi(BR) for i = 1, 2. Then it follows from (4.6) that

i

i

|K1,R| ≤ |NA(K2,R)| = |K2,R| + |NA(K2,R) \ K2,R|
≤ |K2,R| + |p−1
≤ |K2,R| + CRm−1(LA + A),

2 (NA(K2,R) \ K2,R)| ≤ |K2,R| + |BLA+A+R \ BR|

here C is some constant independent of R. Thus by symmetry we have

(4.7)
On the other hand, BR ⊂ p−1
CRm ≤ |p−1
(4.8)

i

i

||K1,R| − |K2,R|| ≤ CRm−1(LA + A).

(Ki,R) ⊂ BR+A for i = 1, 2, thus
(Ki,R)| = ri|Ki,R| ≤ C(R + A)m

for i = 1, 2. Now (4.7) and (4.8) imply

CRm/r1 − C(R + A)m/r2 ≤ |K1,R| − |K2,R|
≤ ||K1,R| − |K2,R|| ≤ CRm−1(LA + A).

Since r1 < r2, we will get a contradiction when R → ∞.
(cid:3)
Lemma 4.9. Given L-atlas AL and L(cid:48)-atlas AL(cid:48), there exists α ∈ Aut(P(Γ)) such
that α∗(AL(cid:48)) e= AL. Moreover, there is a 1-1 correspondence between elements in
Aut(P(Γ)) and the following set of information:

(1) A base point p ∈ G(Γ).
(2) A class of L-atlases which are equal up to translations.

We follow [Hua14a, Lemma 5.7].

Proof. We prove the ﬁrst part of the lemma. Pick v ∈ G(Γ), set α(cid:48)(e) = v. For
u ∈ G(Γ), pick a word wu = a1a2 ··· an representing u, let ui = a1a2 ··· ai for
1 ≤ i ≤ n and u0 = e. We deﬁne qi = α(cid:48)(a1a2 ··· ai) ∈ G(Γ) inductively as follows:
set q0 = v and suppose qi−1 is already deﬁned. Let Fi ∈ F(Γ) be a standard ﬂat
i be the unique standard ﬂat such that qi−1 ∈ F (cid:48)
containing ui−1 and ui and let F (cid:48)
and L(cid:48)(∆(F (cid:48)
i via the
charts Fi → Zv(L(∆(Fi))) and F (cid:48)
i → Zv(L(cid:48)(∆(F (cid:48)
i ))) = Zv(L(∆(Fi))). We can assume
fi(ui−1) = qi−1 by post-composing a translation, then deﬁne qi = fi(ui). qi does
not depend on the choice of Fi by the compatibility condition (2).
u representing u, φ(wu) = φ(w(cid:48)
u), hence there is
a well-deﬁned map φ : G(Γ) → G(Γ). To see this, recall that one can obtain wu
from w(cid:48)

i )) = L(∆(Fi)). There is a natural identiﬁcation fi : Fi → F (cid:48)

u by performing the following two basic moves:

We claim for any other word w(cid:48)

i

(1) w1aa−1w2 → w1w2.
(2) w1abw2 → w1baw2 when a and b commutes.

QUASI-ISOMETRY CLASSIFICATION OF RIGHT-ANGLED ARTIN GROUPS II

29
It is clear that φ(w1aa−1w2) = φ(w1w2) and it suﬃces to show α(cid:48)(ab) = α(cid:48)(ba)
where a and b are mutually commuting generators. Let F be a maximal standard
ﬂat that contains e, a and b, we could always choose F in the deﬁnition of α(cid:48)(ab)
or α(cid:48)(ba), thus they are equal.
By switching the role of AL and AL(cid:48), we can deﬁne another α(cid:48)(cid:48) : G(Γ) → G(Γ)
which maps v to e. It is not hard to check α(cid:48) and α(cid:48)(cid:48) are mutual inverse. Thus α(cid:48)
is bijective, moreover, α(cid:48) preserves F(Γ). To deﬁne α, pick vertex v ∈ P(Γ), let
∆ be a maximal simplex containing v. Take F ⊂ X(Γ) to be the ﬂat such that
∆(F ) = ∆ and take F (cid:48) to be the maximal standard ﬂat such that α(v(F )) = v(F (cid:48)),
we set α(v) to be the unique point such that α(v) ∈ ∆(F (cid:48)) and L(v) = L(cid:48)(α(v)).
It is clear that L = L(cid:48) ◦ α, α(cid:48) is induced by α and α(cid:48) pulls back the charts up to
translations, so α∗(AL(cid:48)) e= AL.
Now we prove the second part of the lemma. Let AL be the reference atlas. By
Theorem 3.29, any element β ∈ Aut(P(Γ)) induces a bijection β∗ : G(Γ) → G(Γ)
which preserves F(Γ). Thus the pull-back β∗(AL) is a (β ◦ L)-atlas. So for each
β, we associated a pair (β∗(e), β∗(AL)) where e ∈ G(Γ) is the identity element.
On the other hand, given a point p ∈ G(Γ) and a class of L(cid:48)-atlases equal up
to translation, the previous discussion produces an automorphism β of P(Γ) such
that β∗(AL) belongs to this class and β∗(e) = p. One readily veriﬁes this is a 1-1
(cid:3)
correspondence.

One may notice that most of the above proof does not use anything about the
stability of ﬂats. Indeed, we can formulate a version for general right-angled Artin
group. We call a collection of charts a reduced atlas if they are only deﬁned for
standard ﬂats which are intersections of maximal standard ﬂats. The compatibil-
ity of these charts and the coherence of the labelling is required as before. Let
Autv(P(Γ)) be the subgroup of Aut(P(Γ)) made of visible elements. Note that
distinct visible elements may give rise to the same element in P erm(G(Γ)).
Lemma 4.10. If G(Γ) is a right-angled Artin group with trivial centre (not nec-
essarily of weak type I), then there is a 1-1 correspondence between elements in
Autv(P(Γ)) and the following set of information:

(1) A base point p ∈ G(Γ).
(2) A class of reduced atlases which are equal up to translations.
We can prove the lemma as before. Let F1 and F2 be ﬂats in a reduce atlas
and assume the convex hull of them is another ﬂat F . Then F has a natural chart
and we have a compatible set of charts for a larger collection of ﬂats. Lemma 4.2
implies that in the case of group of weak type I, this larger collection is exactly the
collection of stable ﬂats, so Lemma 4.9 and Lemma 4.10 are consistent.
4.2. Shear standard ﬂats. We return to the case where G(Γ) is a RAAG of
weak type I with trivial centre. Let AL(cid:48) be the reference atlas for G(Γ(cid:48)). Let
q, s, sg(cid:48), ¯sg(cid:48), φ, φg(cid:48) and ¯φg(cid:48) be as in the discussion before Lemma 4.4. We will also
be using actions of G(Γ(cid:48)) on P(Γ(cid:48)), G(Γ(cid:48)),P(Γ) and G(Γ) discussed over there.
Lemma 4.11. There exists a coherence labelling L : P(Γ) → F (Γ) for G(Γ) which
is invariant under the action G(Γ(cid:48)) (cid:121) P(Γ).

[Hua14a, Lemma 5.9].

This lemma is a consequence of Lemma 3.29. A detailed proof is given in
Our goal is to construct an L-atlas ¯AL for G(Γ) such that

30

JINGYIN HUANG

suﬃces to show charts of ¯AL are G(Γ(cid:48))-invariant up to translations.

(1) ¯AL is G(Γ(cid:48))-invariant up to translations. In the light of Lemma 4.11, it
(2) Charts in ¯AL is are “pull-backs” of charts in AL(cid:48) under φ : G(Γ) → G(Γ(cid:48)).
By induction, we assume the charts are already deﬁned for standard ﬂats in F(Γ)

of dimension ≤ k − 1 such that
(1) The charts are compatible and G(Γ(cid:48))-invariant up to translations.
(2) (inverse images are boxes) Given F ∈ F<k(Γ), let F (cid:48) = φ(F ) and let s0 :
v(L(∆(F ))) → v(L(cid:48)(∆(F (cid:48)))) be the bijection induced by s. Suppose ¯h and
h(cid:48) are charts for F and F (cid:48) respectively. Then ϕ = h(cid:48) ◦ φ ◦ ¯h admits splitting
w∈v(L(∆(F ))) ϕw where ϕw : Zw → Zs0(w) is of form ϕw(a) = (cid:98)a/dw(cid:99)+rw
(3) (extension condition) For F1, F2 ∈ F<k(Γ) such that φ(v(F1)) = φ(v(F2)) =

for some integers rw and dw (dw > 0).
v(F (cid:48)), there is a bijections f : v(F1) → v(F2) such that
(a) φ(x) = φ ◦ f (x) for any x ∈ v(F1).
(b) ¯h2 ◦ f ◦ ¯h−1
(c) Let F ∈ F(Γ) such that F1 ∩ F (cid:54)= ∅, F2 ∩ F (cid:54)= ∅ and the convex hull of

is a translation (here ¯hi : v(Fi) → Zv(L(∆(Fi))) are charts).

ϕ =(cid:81)

1

F1 and F is a ﬂat. Then f (v(F1 ∩ F )) = v(F2 ∩ F ).

Remark 4.12. Note that only requiring condition (1) is not enough since the
compatibility of existing charts does not imply that we can add more charts in
a compatible way to obtain an atlas, thus we need condition (3). Condition (2)
says that the charts in ¯AL are nice pull-backs of the charts in AL(cid:48) (compare with
Equation (5.13) of [Hua14a]).

. Then (2) and (3) imply that ϕ−1

1 (y) and ϕ−1

For i = 1, 2, let ϕi = h(cid:48)◦φ◦¯h−1

i

2 (y)
are boxes of the same size for any y ∈ Zv(L(∆(F (cid:48)))). Thus (3a) and (3b) uniquely
determine the map f and we call f a charts-induced identiﬁcation (CII) between
v(F1) and v(F2).
Lemma 4.13. The map f is Stab(v(F (cid:48)))-equivariant.
Proof. Recall that Stab(v(F (cid:48))) = Stab(v(F1)) = Stab(v(F2)) by Lemma 4.4. By
(1), the induced action of Stab(v(F (cid:48))) on the range of ¯h1 (or ¯h2) is an action by
translations, moreover, this action is completely determined by the size of the box
ϕ−1
1 (y) (or ϕ−1
is Stab(v(F (cid:48)))-
(cid:3)
equivariant. Then the lemma follows.
Remark 4.14. Recall that in [Hua14a, Lemma 5.7], all CIIs between standard
geodesics are induced by parallelism. This is relaxed to (3c), which says CII is
induced by parallelism whenever it has to be.

2 (y)). It follows from (3a) and (3b) that ¯h2 ◦ f ◦ ¯h−1

1

1 and F (cid:48)

2 are parallel. Let p : v(F (cid:48)

Let F1, F2 ∈ F<k(Γ) be two parallel elements. If F (cid:48)
1) → v(F (cid:48)

1 = φ(F1) and F (cid:48)
2 = φ(F1),
then F (cid:48)
2) be the map induced by
parallelism, and let g(cid:48) be the unique element in G(Γ(cid:48)) such that ¯φg(cid:48)|v(F (cid:48)
1) = p.
Suppose F21 = φg(cid:48)(F1). Then φ(F21) = φ(F2) by (4.3). We deﬁne the CII f :
v(F1) → v(F2) by f = f1 ◦ φg(cid:48) where f1 is the CII between v(F21) and v(F2).
Lemma 4.15. The CII f is Stab(v(F1))-equivariant.
Proof. Note that Stab(v(F1)) = Stab(v(F2)) = Stab(v(F (cid:48)
2)). Since
g(cid:48) commutes with any element in Stab(v(F1)), φg(cid:48) is Stab(v(F1))-equivariant. By
(cid:3)
Lemma 4.13, f1 is Stab(v(F1))-equivariant. Thus the lemma follows.

1)) = Stab(v(F (cid:48)

QUASI-ISOMETRY CLASSIFICATION OF RIGHT-ANGLED ARTIN GROUPS II

31

1 (or F (cid:48)

We claim f satisﬁes all the properties in (3) with (3a) replaced by ¯φg(cid:48) ◦ φ = φ◦ f.
By condition (1), it suﬃces to check (3c). Let F (cid:48) = φ(F ). Then the convex hull
of F (cid:48) and F (cid:48)
2) is also a ﬂat, thus ¯φg(cid:48)(v(F (cid:48))) = v(F (cid:48)) and (4.5) implies
φg(cid:48)(v(F )) = v(F ). It follows that φg(cid:48)(v(F ∩ F1)) = v(F ∩ F21). Note that F21 and
F2 are in the convex hull of F1 and F , thus f1(v(F ∩ F21)) = v(F ∩ F2) by (3c),
which implies f (v(F ∩ F1)) = v(F ∩ F2). The claim and induction assumption (2)
also imply the following result:
Lemma 4.16. f is uniquely characterized by the following two properties:
1) → v(F (cid:48)

• ¯h2 ◦ f ◦ ¯h−1
• φ ◦ f (x) = p ◦ φ(x) for any x ∈ v(F1), where p : v(F (cid:48)

parallelism map.
Lemma 4.17. Let {Fi}4
fij is the CII between v(Fi) and v(Fj) and ¯hi is the chart for Fi. Then

i=1 ⊂ F<k(Γ) such that F1, F2 and F3 are parallel. Suppose

is a translation.

2) is the

1

(1) f13 = f23 ◦ f12 (it is a consequence of Lemma 4.16).
(2) If F4 ⊂ F1, then f12(v(F4)) is the vertex set of some standard ﬂat and
(3) If Fi ⊂ F4 for i = 1, 2, then f12 coincides with the map induced by paral-
(4) CIIs are G(Γ(cid:48))-invariant. Namely for any g(cid:48) ∈ G(Γ(cid:48)), the CII between

f12|F4 is the CII between v(F4) and f12(v(F4)).
lelism between ¯h4(v(F1)) and ¯h4(v(F2)) in Zv(L(∆(F4))).
φg(cid:48)(F1) and φg(cid:48)(F2) is given by φg(cid:48) ◦ f12 ◦ φ−1
g(cid:48) .

(5) (3c) is true with f replaced by f12 (we do not need φ(v(F1)) = φ(v(F2))).
Proof. To see (2), by the compatibility of charts, there is a 1-1 correspondence
between standard ﬂats in F2 that are parallel to F4 and cosets of Zv(L(∆(F4))) in
Zv(L(∆(F2))), but ¯h2(f12(v(F4))) is such coset by Lemma 4.16, thus (2) is true. (3)
follows from induction assumption (2) and Lemma 4.16. (4) follows from induction
(cid:3)
assumption (1) and Lemma 4.16. (5) is the claim before Lemma 4.16.
Pick F1, F ∈ F(Γ) with dim(F1) < k and F1 ⊂ F , we deﬁne a map π1 : v(F ) →
v(F1) as follows. For standard ﬂat K ⊂ F with K parallel to F1, we set π|v(K) = fK
where fK : v(K) → v(F1) is the CII. We call π1 a charts-induced projection (CIP).
Lemma 4.18. Let F (cid:48)
2 is an orthogonal
complement of F (cid:48)

1 = φ(F1) and F (cid:48) = φ(F ). Suppose F (cid:48)

(1) π1◦¯h1 is Stab(v(F (cid:48)
1))-invariant up to translation,
(2) Pick F3 ∈ F(Γ) such that F3 ⊂ F1. Let π3 : v(F ) → v(F3) and π13 :

1 in F (cid:48) and ¯h1 is the chart for F1. Then
hence is Stab(v(F (cid:48)))-invariant up to translation.
v(F1) → v(F3) be CIPs. Then π3 = π13 ◦ π1.
(3) Assume dim(F ) < k and let ¯h be the chart for F . Then π1 coincides with the
map induced by the natural projection from ¯h(F ) to ¯h(F1) in Zv(L(∆(F ))).
1). Then φ ◦ π1(x) =
(4) Suppose π(cid:48)
1 ◦ φ(x) for any x ∈ v(F ).
π(cid:48)
(5) Let F3 ∈ F(Γ) be a standard ﬂat in F . Then there exists stable standard
ﬂat F4 ∈ F1 such that π1(v(F3)) = v(F4) (F4 could be a point). Moreover,
let π4 : F → F4 be the CIP. Then π1|v(F3) = π4|v(F3).

1 is the orthogonal projection v(F (cid:48)) → v(F (cid:48)

2))-invariant and Stab(v(F (cid:48)

Proof. To see (1), note that any element in Stab(v(F (cid:48)
1 to a ﬂat parallel to
F (cid:48)
1, and this maps is exactly the parallelism map. It follows from Lemma 4.16 that
π1 ◦ ¯h1 is Stab(v(F (cid:48)
2))-invariant. Lemma 4.15 and induction assumption (1) imply

2)) maps F (cid:48)

32

JINGYIN HUANG

π1 ◦ ¯h1 is Stab(v(F (cid:48)
1))-invariant up to translation. (2) follows from (1) and (2) of
Lemma 4.17. (3) follows from (3) of Lemma 4.17. (4) follows from Lemma 4.16. To
see (5), we ﬁrst assume F3 ∩ F1 (cid:54)= ∅ and take F4 = F1 ∩ F3, then π1(v(F3)) = v(F4)
follows from (5) of Lemma 4.17. In general, we pick a standard ﬂat ˜F1 parallel to
F1 such that ˜F1 ∩ F3 (cid:54)= ∅. Let f1 : ˜F1 → F1 be the CII and let ˜π1 : F → ˜F1 be
the CIP. Then f1 ◦ ˜π1 = π1, which reduces the problem to the previous case. The
(cid:3)
second assertion in (5) follows from (2).

We will construct charts for elements in Fk(Γ) in three steps.
Step 1: We construct chart for a single element in Fk(Γ).
Pick a standard k-ﬂat F ∈ F(Γ) and vertex p ∈ F . Let Fm be the convex hull
of all standard ﬂats that are properly contained in F , pass through p and belong
to F(Γ). Then Fm ∈ F(Γ) by Lemma 2.18.
Case 1: Fm is a point. Let F (cid:48) = φ(F ) and let h(cid:48) : v(F (cid:48)) → Zv(L(cid:48)(∆(F (cid:48)))) be
the chart for F (cid:48). Deﬁne h = h(cid:48) ◦ φ : v(F ) → Zv(L(cid:48)(∆(F (cid:48)))). Let (h1, h2,··· , hk)
be components of h. Denote the identity element in Zv(L(cid:48)(∆(F (cid:48)))) by 0 and let
r = |h−1(0)|. Since elements in h−1(0) are representatives of the orbits of the action
Stab(v(F (cid:48))) (cid:121) v(F ), there is a natural map v(F ) → h−1(0). By post-composing
this map with a bijection h−1(0) → {0, 1,··· , r − 1}, we obtain a Stab(v(F (cid:48)))-
invariant map χ : v(F ) → {0, 1,··· , r − 1}. Now deﬁne ˜h : v(F ) → Zv(L(cid:48)(∆(F (cid:48)))) by
sending x ∈ v(F ) to (rh1(x) + χ(x), h2(x),··· , hk(x)), then ˜h is a bijection and we
have the following commutative diagram:

¯h

s(cid:48)

v(F )

˜h

Zv(L(cid:48)(∆(F (cid:48))))

φ

h

φ(cid:48)

v(F (cid:48))

h(cid:48)

Zv(L(cid:48)(∆(F (cid:48))))

Zv(L(∆(F )))

Here φ(cid:48) is the map induced by φ, s(cid:48) is the bijection induced by s : ∆(F ) → ∆(F (cid:48))
and ¯h = s(cid:48)−1 ◦ ˜h. By construction, ¯h is Stab(v(F (cid:48)))-invariant up to translation and
satisfy condition (2) in the induction hypothesis. We choose ¯h to be the chart for
F , which is trivially compatible with the charts already deﬁned.
Fc (or F (cid:48)
F (or F (cid:48)). Then we have the following commuting diagram:

c) is a standard ﬂat which is the orthogonal complement of Fm (or F (cid:48)

Case 2: p (cid:40) Fm (cid:40) F . Let F (cid:48) and h be as before and let F (cid:48)

m = φ(Fm). Suppose
m) in

v(F )

(cid:121)π

h−−−−→ Zv(L(cid:48)(∆(F (cid:48))))

(cid:121)π(cid:48)

c

v(Fc)

hc−−−−→ Zv(L(cid:48)(∆(F (cid:48)

c)))

Here π and π(cid:48)
c are the natural projections. Note that h maps ﬁbres of π to ﬁbres
of π(cid:48), which induces hc. Stab(v(F (cid:48)
c)) permutes the ﬁbres of π, which induces an
action Stab(v(F (cid:48)
c)) (cid:121) v(Fc). As in case 1, we can obtain from hc a bijection
¯hc : v(Fc) → Zv(L(∆(Fc))) which is Stab(v(F (cid:48)
c))-invariant up to translation. Then
¯hc◦π is Stab(v(F (cid:48)
m))-invariant (since Stab(v(F (cid:48)
m)) stabilizes each ﬁbre of π by (4.5))
and Stab(v(F (cid:48)

c))-invariant up to translation.

QUASI-ISOMETRY CLASSIFICATION OF RIGHT-ANGLED ARTIN GROUPS II

33

¯h is a bijection.

m))-invariant up to translation and Stab(v(F (cid:48)

Let ¯hm be the composition v(F ) → v(Fm) → Zv(L(∆(Fm))) of a CIP with a
chart map. Then ¯hm is Stab(v(F (cid:48)
c))-
invariant by (1) of Lemma 4.18. Now we identify Zv(L(∆(Fm))) and Zv(L(∆(Fc))) as
subgroups of Zv(L(∆(F ))) and deﬁne ¯h : v(F ) → Zv(L(∆(F ))) by ¯h = ¯hc ◦ π + ¯hm. It
is clear that the bijection ¯h is Stab(v(F (cid:48)))-invariant up to translation. We choose
¯h to be the chart for F and the compatibility follows from our construction.
Let s0 and ϕ be as in (2) of the induction assumption. We claim cosets of Zw are
mapped to cosets of Zs0(w) under ϕ for any w ∈ v(L(∆(F ))). If w ∈ v(L(∆(Fm))),
then the claim follows from Lemma 4.16 and induction assumption (2) for Fm.
If w ∈ v(L(∆(Fc))), then by Lemma 4.18 (4), ¯hm maps Zw-cosets to points. The
claim follows from the construction of ¯hc. Thus ϕ splits into products and ¯h satisﬁes
induction assumption (2).
Case 3: Fm = F . Then there exist standard ﬂats F1, F2 ∈ F<k(Γ) such that
F is the convex hull of F1 and F2. Let F3 = F1 ∩ F2. Suppose F (cid:48) = φ(F ) and
i = φ(Fi). Take ¯hi to be the charts for Fi for 1 ≤ i ≤ 3 and take ¯πi : F → Fi to be
F (cid:48)
the CIP for 1 ≤ i ≤ 3. Deﬁne ¯h : F → Zv(L(∆(F ))) by ¯h = ¯h1 ◦ ¯π1 + ¯h2 ◦ ¯π2 − ¯h3 ◦ ¯π3.
Then by (1) of Lemma 4.18, ¯h is Stab(v(F (cid:48)))-invariant up to translation.
It suﬃces to show for any standard ﬂat ˜F3 ⊂ F parallel to
F3, ¯h maps ˜F3 bijectively to a coset of Zv(L(∆(F3))). Note that by Lemma 4.16, if
we change the standard ﬂats F1 and F2 in the deﬁnition of ¯h to some other ﬂats
parallel to them, then ¯h would diﬀer by translation, thus we can assume ˜F3 = F3.
But ¯h restricted to F3 is of form ¯h1 + ¯h2 − ¯h3, so what we need to prove is implied
by the compatibility condition.
¯h is compatible with other charts. Let F4 ⊂ F be an element in F<k(Γ) and let
¯h4 be its chart. We can assume Fi ∩ F4 (cid:54)= ∅ by moving F1 and F2 appropriately
as before. For 1 ≤ i ≤ 3, let F4i = F4 ∩ Fi, let ¯π4i : F → F4i be the CIP and let
¯h4i be the chart for F4i. By (5) of Lemma 4.18, πi(F4) = F4i for 1 ≤ i ≤ 3 and
¯h = ¯h1 ◦ ¯π41 + ¯h2 ◦ ¯π42 − ¯h3 ◦ ¯π43 when restricted on F4. On the other hand, (3) of
Lemma 4.18 and the compatibility condition imply ¯h4 = ¯h41◦¯π41+¯h42◦¯π42−¯h43◦¯π43
up to translation. Now the compatibility of ¯h4 and ¯h follows from the compatibility
of ¯hi and ¯h4i (1 ≤ i ≤ 3).
¯h satisﬁes induction assumption (2). It suﬃces to show ¯h restricted on each Z
coset has the desired property. Let w ∈ v(L(∆(F ))) and let K be a Zw coset.
Then K is contained in either a Zv(L(∆(F1))) coset or a Zv(L(∆(F2))) coset. Since
¯h is compatible with other charts, there exists standard ﬂat F5 ⊂ F parallel to
either F1 or F2 such that K ⊂ ¯h(v(F5)). Moreover, if ¯h5 is the chart for F5, then
¯h5 ◦ ¯h−1(K) is again a Zw coset. By applying the induction assumption to ¯h5, we
know ¯h|K has the desired behaviour.

The above properties of ¯h is enough for us to establish (3) of Lemma 4.17 and
(3) of Lemma 4.18 for the chart of F . Thus if we choose diﬀerent F1 and F2 in the
deﬁnition of ¯h, then the resulting chart remains the same up to translation.
Step 2: We construct charts for ﬂats which have the same φ-image as F .
We deﬁne a graph Λ(F ).

Its vertices are in 1-1 correspondence to standard
ﬂats that have the same φ-image as F and two vertices are joined by an edge if
and only if the corresponding ﬂats are bolted. The next step is to deﬁne charts
for vertices of Λ(F ) such that induction assumption (3) is satisﬁed. Two parallel
elements H1, H2 ∈ F(Γ) are bolted if there exists H ∈ F(Γ) such that for i = 1, 2,

34

JINGYIN HUANG

H ∩ Hi (cid:54)= ∅, H ∩ Hi (cid:40) Hi and the convex hull of H and H1 is a ﬂat. H is called a
(H1, H2)−bolt, we will omit (H1, H2) when they are clear.

If Λ(F ) is disconnected, we pick a representative in each connected component
that does not contain F . Let F0 be one of such representatives and we build a chart
¯h0 for F0 as before. Pick y ∈ v(F (cid:48)), we claim (φ ◦ ¯h−1
0 )−1(y) and (φ ◦ ¯h−1)−1(y)
are boxes of the same size. Note that F and F0 must be in the same case of step
1, so the claim follows from (3) of Lemma 4.4 in case 1 and 2. In case 3, since
up to translation, the deﬁnition of ¯h0 does not depend on the choice of the pair of
stable ﬂats in F0, we can choose them such that they are parallel to F1, F2 ⊂ F
respectively and the claim follows. We deduce from the claim that there exists a
unique identiﬁcation f : v(F ) → v(F0) characterized by (3a) and (3b) of the induc-
tion assumption. (3c) is trivially true for f and f is Stab(v(F (cid:48)))-equivariant since
¯h and ¯h0 are Stab(v(F (cid:48)))-invariant up to translation. Now every representative has
been identiﬁed with F and induced identiﬁcation between representatives obviously
satisﬁes induction assumption (3).

It remains to deﬁne charts for ﬂats inside one connected component, so we assume

Λ(F ) is connected.
Lemma 4.19. There is a collection of bijections between each pair of ﬂats in Λ(F ),
which is also called CII’s, such that

(1) These CII’s are compatible under compositions.
(2) Each CII is Stab(v(F (cid:48)))-equivariant and satisﬁes induction assumption (3a)
and (3c).
(3) Let f : H1 → H2 be a CII between ﬂats H1 and H2 in Λ(F ). Suppose
S1 ∈ F<k(Γ) be a standard ﬂat in H1. Then there exists S2 ∈ F<k(Γ)
parallel to S1 such that f (v(S1)) = v(S2) and f|v(S1) is the CII between
v(S1) and v(S2).

For any ﬂat H in Λ(F ), we deﬁne the chart of H to be the composition of
the CII between H and F , and the chart map of F . This chart satisﬁes induction
assumption (2) since F also satisﬁes this condition and the CII satisﬁes (3a). Recall
that the chart of F is compatible with the charts for ﬂats in F<k(Γ), so is the chart
of H by Lemma 4.19 (3). Moreover, this chart is Stab(v(F (cid:48))) invariant up to
translation by Lemma 4.19 (2). Under such deﬁnition of charts, the CII between
two ﬂats in Λ(F ) satisﬁes induction assumption (3b) by Lemma 4.19 (1).
Proof of Lemma 4.19. In case 1, we deﬁne the CII between any two ﬂats in Λ(F )
to be the map induced by parallelism, then (1) of Lemma 4.19 is true. Let F1 and
F2 be a pair of bolted ﬂats and let H be a bolt. Suppose f12 : v(F1) → v(F2) is the
CII. Then for i = 1, 2, H ∩ Fi must be one point and we denote it by pi. It is clear
that f12(p1) = p2, thus induction assumption (3c) follows. Moreover,

φ(p1) = φ(v(H) ∩ v(F1)) = φ(v(H)) ∩ φ(v(F1)) = φ(v(H)) ∩ φ(v(F2))

= φ(v(H) ∩ v(F2)) = φ(p2) = φ ◦ f12(p1).

The second and fourth equality follows from Lemma 4.4 (2). Thus (3a) is true for
bolted pair of ﬂats. By moving the bolt H around using the action of Stab(F (cid:48)), we
know f12 is Stab(F (cid:48))-equivariant. The connectivity of Λ(F ) implies that (3a) and
the equivariance are true for all pair of ﬂats in Λ(F ).
Let H be a standard ﬂat. An H-ﬁbre is a standard ﬂat parallel to H. Let
H1, H2 ∈ F(Γ) be parallel elements that contain H-ﬁbres and let p : v(H1) → v(H2)

QUASI-ISOMETRY CLASSIFICATION OF RIGHT-ANGLED ARTIN GROUPS II

35

be the map induced by parallelism. We say a bijection f : v(H1) → v(H2) is parallel
mod H-ﬁbres if f (v(H(cid:48))) = p(v(H(cid:48))) for any H-ﬁbre H(cid:48). For standard ﬂat Si ∈ Hi,
we will write f (S1) = S2 if f (v(S1)) = v(S2).
In case 2, for ﬂats H1 and H2 in Λ(F ), we deﬁne the CII f : v(H1) → v(H2)
such that f is parallel mod Fm-ﬁbres and for each Fm-ﬁbre T ⊂ H1, f|v(T ) is
the CII between v(T ) and f (v(T )). (1) follows from parallelism and Lemma 4.17
(1) for CII’s between Fm-ﬁbres. Let F1, F2, f12 and H be as in case 1. Then
for i = 1, 2, there exist Fm-ﬁbres Fim ⊂ Fi such that Fi ∩ H ⊂ Fim. Note that
f12(v(F1m)) = v(F2m) and H is also a bolt for F1m and F2m when F1 ∩ H (cid:40) F1m,
thus induction assumption (3c) follows. By Lemma 2.18, we can assume H ∩ Fi
is actually a Fm-ﬁbre for i = 1, 2, then the argument in the previous case implies
that the image of any Fm-ﬁber in F1 under φ and φ ◦ f12 are the same. Then (3a)
follows since we already know it is true for CII’s between Fm-ﬁbres. The Stab(F (cid:48))-
equivariance follows by applying Lemma 4.17 (4) to CII’s between Fm-ﬁbres. Note
that any element of F<k(Γ) that lies in F1 must stay inside a Fm-ﬁbre, then Lemma
4.19 (3) follows from Lemma 4.17 (2).
In case 3, let H1 and H2 be a bolted pair in Λ(F ). Pick a vertex p0 ∈ H1 and
let H be the intersection of all (H1, H2)-bolts that contains p0. Then H is also a
bolt. We deﬁne the CII f : v(H1) → v(H2) as in case 2 with Fm-ﬁbres replaced by
H ∩ H1-ﬁbres. The induction assumption (3c) for f follows from the minimality of
H and we can prove (3a) and the Stab(v(F (cid:48)))-equivariance as before.
Now we prove Lemma 4.19 (3) for f. It is clear if S1 stays inside a H ∩ H1-ﬁbre.
In general, pick a H ∩ H1-ﬁbre T1 such that T1 ∩ S1 = S11 (cid:54)= ∅ and a standard
ﬂat S12 which is an orthogonal complement of S11 in S1. Since f is parallel mod
T1-ﬁbres, f (v(S1)) belongs to a (T1 × S12)-ﬁbre R. Suppose S21 = f (S11) and
T2 = f (T1). Let πi : Hi → Ti be the CIP for i = 1, 2. Then π1(v(S1)) = S11
by Lemma 4.18 (5), hence π2(f (v(S1))) = S21 by Lemma 4.17 (1). But every two
T1-ﬁbres in R are bolted by S1-ﬁbres, then the CII between these two T1-ﬁbres is
parallel mod S11-ﬁbres, which implies f (v(S1)) actually stays inside a (S11 × S12)-
ﬁbre. To see the second part of Lemma 4.19 (3), note that S1 and S2 are bolted by
H ∩ H1-ﬁbres, then the CII between them is parallel mod S11-ﬁbres by induction
assumption (3c). Thus the CII coincides with f by Lemma 4.17 (2).

For arbitrary pair H1 and H2 in Λ(F ), we choose an edge path in Λ(F ) connecting
H1 and H2, which would induce a CII from H1 to H2. This CII will automatically
satisﬁes Stab(v(F (cid:48)))-equivariance, induction assumption (3a) and Lemma 4.19 (3),
since these properties are true under compositions. For this CII to be well-deﬁned,
we need to show every edge loop in Λ(F ) induces the identity map. Let F be a
base point in the edge loop and let f : v(F ) → v(F ) be the bijection induced by
the edge loop. Pick F1, F2 ∈ F<k inside F such that their convex hull is F , then it
follows from (3c) that for i = 1, 2, every CII between two Fi-ﬁbres in F is parallel
mod F1 ∩ F2-ﬁbres. We ﬁrst assume F1 ∩ F2 is a point. By previous discussion, f
maps Fi-ﬁbre to Fi-ﬁbre, thus f splits into product f = f1 × f2 where fi : Fi → Fi
are bijections. Moreover, if g : f (v(F1)) → v(F1) is the CII, then g ◦ f|v(F1) = Id
by (1) of Lemma 4.17, thus f|v(F1) is induced by parallelism and f2 = Id. Similarly
we can prove f1 = Id, thus f = Id. In general, we can run the same argument mod
F1 ∩ F2-ﬁbres to show that f sends every F1 ∩ F2-ﬁbre to itself, then f = Id follows
by applying Lemma 4.17 (1) to F1 ∩ F2-ﬁbres.
(cid:3)

Step 3:

36

JINGYIN HUANG

Let H be an element in Fk(Γ) such that φ(H) is in the G(Γ(cid:48))-orbit of F (cid:48).
Note that this is equivalent to L(cid:48)(∆(φ(H))) = L(cid:48)(∆(F (cid:48))). Pick g(cid:48) ∈ G(Γ(cid:48)) with
¯φg(cid:48)(φ(H)) = F (cid:48), then φg(cid:48)(H) is an element in Λ(F ). We deﬁne the chart of H to
be the composition of the chart map of φg(cid:48)(H) and φg(cid:48). If we choose a diﬀerent g(cid:48),
the resulting chart would diﬀer by a translation, since ¯h is Stab(v(F (cid:48)))-invariant up
to translation. By (4.3), this chart satisﬁes induction assumption (2). Moreover,
it is compatible with charts of elements in F<k(Γ), since these charts are G(Γ(cid:48))-
invariant up to translations, and they are compatible with charts of ﬂats in Λ(F )
by the previous step.
By now we have deﬁned a G(Γ(cid:48))-invariant (up to translations) collection of charts
for ﬂats that are G(Γ(cid:48)) orbits of ﬂats in Λ(F ). This collection corresponds to a stable
clique of k vertices in Γ(cid:48), namely the 1-skeleton of L(cid:48)(∆(F (cid:48))). For each stable k-
clique in Γ(cid:48), we run the same argument to deﬁne charts for the corresponding
collection of k-ﬂats in G(Γ). This gives rise to charts deﬁned for all elements in
Fk(Γ) that satisﬁes all the requirements, hence ﬁnishes the induction step.
In
summary, we have constructed a G(Γ(cid:48))-invariant (up to translations) L-atlas ¯AL
such that induction assumption (2) is true for all charts in this atlas.
Theorem 4.20. Let G(Γ) be a group of weak type I. Then the following are equiv-
alent.

(1) G(Γ(cid:48)) is quasi-isometric to G(Γ).
(2) G(Γ(cid:48)) is isomorphic to a ﬁnite index subgroup of G(Γ).
(3) G(Γ(cid:48)) is isomorphic to a special subgroup (Section 2.4) of G(Γ).

Proof of Theorem 4.20. (3) ⇒ (1) and (2) ⇒ (1) are trivial. Now we look at
(1) ⇒ (2). By Theorem 2.16, we can assume G(Γ) has trivial centre. Let Aref be
the reference atlas for G(Γ). By Lemma 4.9, there exists simplicial isomorphism
r : P(Γ) → P(Γ) such that r∗( ¯AL) e= Aref . The G(Γ(cid:48))-invariance of ¯AL implies
r ◦ φg(cid:48) ◦ φr is a left translation of G(Γ) (here
(r−1 ◦ sg(cid:48) ◦ r)∗(Aref ) e= Aref , thus φ−1
φr : G(Γ) → G(Γ) is the map induced by r). Hence we have obtained a faithful
action of G(Γ(cid:48)) on G(Γ) with ﬁnite many orbits. Thus (2) follows.
(1) ⇒ (3). Since the atlas ¯AL satisﬁes induction assumption (2), φ ◦ φr sends
standard ﬂats to standard ﬂats. Moreover, it extends to a cubical map X(Γ) →
X(Γ(cid:48)). The inverse image of a vertex under this cubical map is a compact convex
subcomplex of X(Γ). Then [Hua14a, Section 6] implies G(Γ(cid:48)) is isomorphic to the
(cid:3)
special subgroup associated with this convex subcomplex.

Though a ﬁnite index RAAG subgroup of G(Γ) is isomorphic to a special sub-
group, it may not be a special subgroup. However, this is true under the strong
condition that Out(G(Γ)) is ﬁnite [Hua14a, Section 6].

The following is a consequence of Theorem 4.20 and [Hua14a, Section 6.3].

Corollary 4.21. Let G(Γ) be a group of weak type I. Then there is an algorithm
to determine whether G(Γ(cid:48)) and G(Γ) are quasi-isometric.
5. Shuffle tires and branches

5.1. Prime right-angled Artin group. From now on, we assume G(Γ) is of type
II. We also label and orient edges of X(Γ) in a G(Γ)-invariant way (see Section 2.1).
Let q : G(Γ) → G(Γ(cid:48)) be a quasi-isometry and let q∗ : P(Γ) → P(Γ(cid:48)) be the
induced simplicial isomorphism. Pick vertex v ∈ P(Γ), then q∗ induces a 1-1

QUASI-ISOMETRY CLASSIFICATION OF RIGHT-ANGLED ARTIN GROUPS II

37

correspondence between v-branches in P(Γ) and q∗(v)-branches in P(Γ(cid:48)). This
correspondence is the starting point to understand the quasi-isometry q.
Deﬁnition 5.1. Let v ∈ P(Γ) be a vertex. Two v-branches B1 and B2 are quasi-
isometrically indistinguishable (QII) if there exist a quasi-isometry f : X(Γ) →
X(Γ) and an induced simplicial isomorphism f∗ : P(Γ) → P(Γ) such that

(1) f∗ ﬁxes every vertex in P(Γ) \ (B1 ∪ B2).
(2) f∗(B1) = B2 and f∗(B2) = B1.

Such f or f∗ will be called an elementary permutation.

It follows immediately from the deﬁnition that q∗ sends QII v-branches to QII

q∗(v)-branches.
Lemma 5.2. Pick a v-tier T , then for any v-branch B, there exists a v-branch
B(cid:48) ⊂ T such that B(cid:48) and B are QII.
Proof. Pick standard geodesic l ⊂ X(Γ) such that ∆(l) = v and suppose π∆(l)(B) =
x and π∆(l)(T ) = x(cid:48) (π∆(l) is the map in Lemma 3.1). Recall that we have an action
G(Γ) (cid:121) X(Γ), let α ∈ G(Γ) be the element such that α acts by translation along
l and α(x) = x(cid:48). It is clear that α induces a simplicial isomorphism α∗ : P(Γ) →
P(Γ), moreover, α∗ ﬁxes every point in St(v). Deﬁne B(cid:48) = α∗(B) and let L and L(cid:48)
be the components of X(Γ) \ Pv corresponding to B and B(cid:48) respectively (Lemma
3.26). Then α(L) = L(cid:48). Now we consider the following map q : X(Γ) → X(Γ)
deﬁned by

z

q(z)=

α(z)
α−1(z)

if z ∈ X(Γ) \ (L ∪ L(cid:48))
if z ∈ L
if z ∈ L(cid:48)

It is easy to see q is a quasi-isometry and Lemma 3.26 implies that q∗ satisﬁes the
(cid:3)
conditions in Deﬁnition 5.1, so B and B(cid:48) are QII.

1 = ∂B(cid:48)

2 and Π(B(cid:48)

i) = Ci, they are QII. Actually, the case ∂B(cid:48)

Let ¯v = π(v). It follows from Corollary 3.14 and Lemma 3.26 that we can assign
a component C of F (Γ)\ St(¯v) for every v-branch B, and we will denote C = Π(B)
in this case.
Two components C1 and C2 of F (Γ)\ St(¯v) are quasi-isometrically indistinguish-
able (QII) if there exist v-branches B1 and B2 which are QII such that Π(Bi) = Ci
for i = 1, 2. Note that this deﬁnition actually does not depend on the choice of
B1 and B2, namely, if C1 and C2 are QII, then for any pair B(cid:48)
2 such that
∂B(cid:48)
1 = ∂B1 follows
1 (cid:54)= ∂B1, let K and K(cid:48) be the standard subcomplexes in
from Lemma 5.2. If ∂B(cid:48)
Pv such that ∆(K(cid:48)) = ∂B(cid:48)
1 and ∆(K) = ∂B1. Note that their supports satisfy
ΓK = ΓK(cid:48), then there exists α ∈ G(Γ) such that its action on G(Γ) satisfying (1)
α(K) = K(cid:48); (2) α(Pv) = Pv. Since α is label-preserving, Π(α∗(B1)) = Π(B1).
Moreover, α∗(v) = v, so α∗(B1) and α∗(B2) is a pair of QII v-branches with
∂(α∗(B1)) = ∂B(cid:48)
i=1 be the collection of QII classes in F (Γ) \ St(¯v). We associate ¯v
with a k-tuple of positive integers (n1, n2,··· , nk), where each ni is the number of
components of F (Γ)\ St(¯v) in Ci. The vertex v is prime if gcd(n1, n2,··· , nk) = 1.
It follows from (1) of Corollary 3.14 that if C1 and C2 are QII, then ∂C1 = ∂C2,
so every QII class Ci has a well-deﬁned boundary, which will be denoted by ∂Ci.

1 and we have reduced to the previous case.

Let {Ci}k

1 and B(cid:48)

38

JINGYIN HUANG

Deﬁnition 5.3. A right-angled Artin group G(Γ) is prime if and only if F (Γ) is
of type II and all vertices of F (Γ) are prime.

Let ¯v(cid:48) = π(q∗(v)). Then q∗ induces a bijection between QII classes of F (Γ)\St(¯v)
i be the class corresponding to
i. Note

and QII classes of F (Γ(cid:48))\ St(¯v(cid:48)). For 1 ≤ i ≤ k, let C(cid:48)
Ci under q∗, and let n(cid:48)
that (n(cid:48)
k) is the tuple associated with ¯v(cid:48).
Lemma 5.4. There exists a positive rational number r such that n(cid:48)
1 ≤ i ≤ k. In particular, if G(Γ) is prime, then r is an integer.

i be the number of components of F (Γ(cid:48)) \ St(¯v(cid:48)) in C(cid:48)

i = rni for

1, n(cid:48)

2,··· , n(cid:48)

Such r will be called the stretch factor of q∗ at v.

Proof. Let l ⊂ X(Γ) and l(cid:48) ⊂ X(Γ(cid:48)) be standard geodesics such that ∆(l) = v and
∆(l(cid:48)) = q∗(v). Recall that the vertex set v(l) has a natural ordering induced from
the orientation of edges in X(Γ). We identify v(l) with Z in an order-preserving way.
Pick Ci and pick a v-branch B such that Π(B) ∈ Ci. Let {Bj}j∈J be the collection of
v-branches such that Bj and B are QII. Then by (1) and (2) of Corollary 3.14, there
are exactly ni elements of {Bj}j∈J in a given v-tier. Pick an total order on elements
in Ci and deﬁne an total order on J by j1 < j2 if and only if πv(Bj1) < πv(Bj2) (πv
is the map in Lemma 3.1) or πv(Bj1) = πv(Bj2) and Π(Bj1) < Π(Bj2). We identify
J with Z in an order-preserving way, then there is a natural map gi : J → v(l)
induced by πv. Note that gi(a) = (cid:98)a/ni(cid:99) up to translation.
Let {B(cid:48)
Then Π(B(cid:48)
and K with Z in the same way as before and let g(cid:48)
given by g(cid:48)

k and q∗(B) are QII.
i and q∗ induces a bijection fi : J → K. We identify v(l(cid:48)) with Z
i : K → v(l(cid:48)) be the natural map
We deﬁne another map hi : v(l) → v(l(cid:48)) as follows. For x ∈ v(l), pick a Bj such
that πv(Bj) = x and deﬁne hi(x) = π∆(l(cid:48))(q∗(Bj)). Up to bounded distance, the
deﬁnition of hi is independent of the choice of Bj. We claim hi is a quasi-isometry.
Pick Bj1, Bj2 in {Bj}j∈J. For m = 1, 2, let Ljm be the subset of X(Γ) as in
Lemma 3.26 such that ∆( ¯Ljm) = Bjm. Then d(Lj1 , Lj2) = d(πv(Bj1 ), πv(Bj2)).
Now it follows from (3) and (5) of Lemma 3.26 that hi is a quasi-isometry. Note
that the following diagram commutes up to bounded distance:

k}k∈K be the collection of q∗(v)-branches such that B(cid:48)
k) = C(cid:48)
i(a) = (cid:98)a/n(cid:48)
i(cid:99).

J

(cid:121)gi

fi−−−−→ K

(cid:121)g(cid:48)

i

hi−−−−→ v(l(cid:48))

v(l)

thus fi is a bijective quasi-isometry from Z to Z, hence fi is bounded distance from
an isometry and hi(x) = (ni/n(cid:48)
i)x + b up to bounded distant (b is some constant).
Now we pick a diﬀerent QII class Ci(cid:48) and deﬁne hi(cid:48) in similar way, then hi = hi(cid:48)
up to bounded distant, but we also have hi(cid:48)(x) = (ni(cid:48)/n(cid:48)
i(cid:48))x + b(cid:48) up to bounded
(cid:3)
distance, so ni/n(cid:48)

i = ni(cid:48)/n(cid:48)
i(cid:48).

Since q∗ does not necessarily map v-tier to q∗(v)-tier, we want to modify q∗ by
post-composing q∗ with an appropriate permutation of q∗(v)-branches such that
v-tier is send to q∗(v)-tier. It is easy to do this for a single vertex v when G(Γ)
is prime by Lemma 5.4, but in general we need to deal with more than one ver-
tices simultaneously, so it is necessary to ﬁgure out how to deal with each vertex
independently.

QUASI-ISOMETRY CLASSIFICATION OF RIGHT-ANGLED ARTIN GROUPS II

39

Lemma 5.5. Assume d(v1, v2) ≥ 2 and let B be any v1-branch such that v2 /∈ B.
Then B and v1 are in the same v2-branch, in particular, all such B are in the same
v2-branch.
Proof. Note that B ∩ St(v2) = ∅ (otherwise v2 ∈ B) and ∂B (cid:42) lk(v1) ∩ lk(v2) =
St(v1) ∩ St(v2) ((5) of Corollary 3.14), so there exists vertex w(cid:48) ∈ ∂B with w(cid:48) /∈
(cid:3)
St(v2), hence B can be connected to v1 via w(cid:48) outside St(v2).
Now we introduce an auxiliary notion. Pick vertex w, v ∈ P(Γ) and a v-
peripheral complex K ⊂ P(Γ). The pair (v, K) is w-non-crossing if d(v, w) = 1
and w /∈ K. In this case, B ∩ St(w) = ∅ for any v-branch B such that ∂B = K.
Moreover, for any other v-branch B(cid:48) with ∂B(cid:48) = K, B(cid:48) and B are in the same
w-branch. To see this, note that K = ∂B (cid:42) lk(v) ∩ lk(w) by Corollary 3.14 (5),
so K contains a vertex w(cid:48) ∈ St(v) \ St(w) such that B(cid:48) can be connected with B
outside St(w) via w(cid:48).
We deﬁne a binary relation ≤ on the set of w-non-crossing pairs by (v1, K1) ≤
(v2, K2) if and only if there exist v1-branch B1 with ∂B1 = K1 and v2-branch B2
with ∂B2 = K2 such that B1 ⊂ B2.
If (v1, K1) < (v2, K2), then d(v1, v2) = 1.
To see this, note that if v1 = v2, we must have B1 = B2 and K1 = K2. Suppose
d(v1, v2) = 2. Since v2 /∈ B1, B1 must belong to the v2-branch that contains v1 by
Lemma 5.5. Hence v1 ∈ B2 and w ∈ ∂B2 = K2, which yields a contradiction.
Suppose (v1, K1) < (v2, K2). Since B1 ⊂ B2, we have v2 /∈ ∂B1 = K1. Thus
1 ⊂ B2 for any v1-
(v1, K1) is v2-non-crossing and we deduce as before that then B(cid:48)
1 = K1. Thus the relation ≤ is transitive. If (v1, K1) ≤ (v2, K2),
branch B(cid:48)
(v2, K2) ≤ (v1, K1) and (v1, K1) (cid:54)= (v2, K2), then it follows from previous discussion
that all v1-branches with boundary = K1 stay inside one particular v1-branch with
boundary = K1, which is absurd. So ≤ is antisymmetric, hence is a partial order.
The reader can skip the following lemma ﬁrst and come back to it when needed.
Lemma 5.6. Let F (Γ) be of type II, pick vertex w ∈ P(Γ) and let {Bi}n
i=1 be a
collection of distinct vi-branches with d(vi, w) = 1 (vi = vj is allowed for i (cid:54)= j).
Let q : X(Γ) → X(Γ) be a quasi-isometry such that q∗ ﬁxes every point in St(v).
Then there exists a quasi-isometry q(cid:48) : X(Γ) → X(Γ) such that q(cid:48)

1 with ∂B(cid:48)

∗ satisﬁes:

∗ ﬁxes every point in St(v).
∗(B) = q∗(B) for any w-branch B.

(1) q(cid:48)
(2) q(cid:48)
(3) Bi and q(cid:48)
(4) If q∗ ﬁxes every point in a w-branch B, then q(cid:48)

∗(Bi) are in the same vi-tier.

∗ also ﬁxes every point in B.
Proof. We only need to consider the case when Bi ⊂ P(Γ) \ St(w) for all i, oth-
erwise Bi will contain a vertex ﬁxed by q∗ and (3) is automatic. Let Ki = ∂Bi.
Then (vi, Ki) is a w-non-crossing pair. Suppose (v1, K1) is a maximal element
in {(vi, Ki)}n
i=1 with respect to the order deﬁned above and suppose (v1, K1) =
i}i∈Z) be
(vi, Ki) if and only if 1 ≤ i ≤ m. Let K(cid:48)
the collection of v1-branches with boundary K1 (or K(cid:48)
1). Then q∗ induces a bijec-
i}i∈Z. Since q∗ ﬁxes v1, the stretch factor of q∗ at v1
tion between {Ai}i∈Z and {A(cid:48)
is 1 by Lemma 5.4, so we can post-compose q∗ with a ﬁnite sequence of elementary
i}i∈Z such that (3) is true for 1 ≤ i ≤ m. Note that
permutations of elements in {A(cid:48)
i}i∈Z are in the same w-branch, hence (1) and
(v1, K(cid:48)
(2) still hold.
Pick i0 > m and let D1 and D2 be two QII vi0-branches such that ∂D1 =
∂D2 = q∗(Ki0). Let f∗ be an elementary permutation of D1 and D2. We claim

1 = q∗(K1) and let {Ai}i∈Z (or {A(cid:48)

1) is also w-non-crossing, so {A(cid:48)

40

JINGYIN HUANG

f∗(q∗(Bi)) = q∗(Bi) for 1 ≤ i ≤ m, then the lemma follows by induction on
the number of Bi. To see the claim, note that (v1, K(cid:48)
1) (cid:2) (vi0 , q∗(Ki0 )) (since
(v1, K1) (cid:2) (vi0, Ki0)), then for any v1-branch E such that ∂E = K(cid:48)
1, E contains a
vertex u ∈ P(Γ) \ (D1 ∪ D2), otherwise we would have E ⊂ D1 or E ⊂ D2. Recall
that f∗(u) = u, so f∗(E) = E, in particular f∗(q∗(Bi)) = q∗(Bi) for 1 ≤ i ≤ m.

contained in w-branches which are ﬁxed by q∗ pointwise.

Property (4) is true since we only need to consider those Bi’s that are not
(cid:3)
Suppose G(Γ) and G(Γ(cid:48)) are prime right-angled Artin groups. Let q : G(Γ) →
G(Γ(cid:48)) be a quasi-isometry and q∗ : P(Γ) → P(Γ(cid:48)) be the induced simplicial iso-
morphism. Pick vertex x ∈ X(Γ). Let K = (F (Γ))x and K(cid:48) = q∗(K). Suppose
{vi}n
i=1 is the collection of vertices in P(Γ) such that K \ St(vi) is disconnected,
i}n
then vi ∈ K for all i by Remark 3.8. Let v(cid:48)
i=1 are exactly the
vertices in P(Γ(cid:48)) such that K(cid:48) \ St(v(cid:48)

i = q∗(vi). Then {v(cid:48)
Recall that π : P(Γ(cid:48)) → F (Γ(cid:48)) is the canonical projection.

i) is disconnected.

Lemma 5.7. If for any vertex v(cid:48) ∈ P(Γ), all vertices in K(cid:48)\ St(v(cid:48)) are in the same
v(cid:48)-tier, then π|K(cid:48) is injective. Moreover, ∩v∈K(cid:48)Pv (cid:54)= ∅.
Proof. Since π maps simplexes to simplexes of the same dimension, it suﬃces to
show there does not exist vertex w1, w2 ∈ K(cid:48) such that π(w1) = π(w2). Suppose
the contrary is true. Then Pw1 ∩ Pw2 = ∅. Let h be a hyperplane separating Pw1
and Pw2, and let l be a standard geodesic dual to h. Then π∆(l)(w1) (cid:54)= π∆(l)(w2)
(π∆(l) is the map in Lemma 3.1), hence w1 and w2 are in diﬀerent ∆(l)-tier, which
yields a contradiction. The second statement follows from the Lemma 2.2 and the
(cid:3)
previous argument.

i

j

If

j|v(cid:48)

i

if v(cid:48)

j and v(cid:48)

i-branches and

j and v(cid:48)
i-branch.

k are in diﬀerent v(cid:48)

k ∈ E such that v(cid:48)

j ∈ Ec, we deﬁne v(cid:48)

From now on, we will write v(cid:48)

i-branch. Pick v(cid:48)
j and v(cid:48)

i, v(cid:48)
k are in diﬀerent v(cid:48)

v(cid:48)
k if v(cid:48)
k are in the same v(cid:48)

Our next goal is to post-compose q∗ with elementary permutations such that the
assumption of Lemma 5.7 is true. In order to do this, we introduce an auxiliary
order. Pick E ⊂ {v(cid:48)
i=1 \ E by Ec. We say E is tight if for
i}n
i}n
i=1 and denote {v(cid:48)
i ∈ Ec, E \ St(v(cid:48)
any v(cid:48)
i) is inside a v(cid:48)
i <E v(cid:48)
if and only if there exists v(cid:48)
i-branches.
We claim that if E is tight, then ≤E is a partial order on Ec.
k|v(cid:48)
write v(cid:48)
jv(cid:48)
Lemma 5.8. Suppose F (Γ) is of type II. Let v1, v2, v3 be vertices in P(Γ).
v1|v2v3, then v1v2|v3 and v3v2|v1.
Proof. Let B be the v2-branch that contains v3. Since P(Γ) \ (lk(v1) ∩ lk(v2))
is connected, ∂B (cid:42) lk(v1) ∩ lk(v2) = St(v1) ∩ St(v2). Then there exists vertex
w ∈ ∂B with w /∈ St(v1), which implies that v2 and v3 can be connected via w
(cid:3)
outside St(v1).
and v(cid:48)
j|v(cid:48)
|v(cid:48)
k2
in E such that v(cid:48)
. By Lemma 5.8, we have v(cid:48)
v(cid:48)
, so v(cid:48)
v(cid:48)
,
which contradicts the tightness of E. Thus the relation ≤E is antisymmetric. It
k ∈ Ec,
j and v(cid:48)
j <E v(cid:48)
k for v(cid:48)
i <E v(cid:48)
suﬃces to check the transitivity. Suppose v(cid:48)
j, v(cid:48)
i, v(cid:48)
l|v(cid:48)
m|v(cid:48)
l /∈ St(v(cid:48)
m in E such that v(cid:48)
l and v(cid:48)
then there exist v(cid:48)
v(cid:48)
j and v(cid:48)
v(cid:48)
k. Since v(cid:48)
j) and
l|v(cid:48)
m /∈ St(v(cid:48)
l|v(cid:48)
i|v(cid:48)
j), then v(cid:48)
v(cid:48)
by Lemma 5.8, so v(cid:48)
mv(cid:48)
iv(cid:48)
. We also have v(cid:48)
mv(cid:48)
. This
l|v(cid:48)
m|v(cid:48)
j|v(cid:48)
l|v(cid:48)
together with v(cid:48)
v(cid:48)
. However, v(cid:48)
j, so v(cid:48)
v(cid:48)
k, hence v(cid:48)
kv(cid:48)
v(cid:48)
k imply v(cid:48)
v(cid:48)
k and
v(cid:48)
i <E v(cid:48)
k.

Now we prove the claim. If v(cid:48)
i <E v(cid:48)
i|v(cid:48)
v(cid:48)

j and v(cid:48)

j <E v(cid:48)

i, then there exist v(cid:48)

and v(cid:48)

j|v(cid:48)

i

v(cid:48)

k1

i|v(cid:48)

j

k2

k1

i

j

i

k2

i

i

j

j

j

j

k2

k1

i

j

i

QUASI-ISOMETRY CLASSIFICATION OF RIGHT-ANGLED ARTIN GROUPS II

41

If E is tight, let v(cid:48)

i+1) (if Ei\St(v(cid:48)

j = q∗(Bj).

i+1-branch). Let {Bj}k

i} is also tight. Let E1 = {v(cid:48)

i+1); (2) g∗ ﬁxes every point in B(cid:48); (3) {g∗(B(cid:48)

j)}k

i+1-branch that contains all points in Ei\St(v(cid:48)

i ∈ Ec be a minimal element in Ec with respect to ≤E. Then
1}. E1 is clearly tight, so it is possible to add
1 to E1 to obtain a tight set E2. By repeating this process for n − 1
i}n
i=1 such that each

E ∪ {v(cid:48)
a vertex in Ec
times, we obtain a ﬁltration E1 (cid:40) E2 (cid:40) ··· (cid:40) En−1 (cid:40) En = {v(cid:48)
Ei is tight and |Ei+1| = |Ei| + 1. Set E0 = ∅.
Suppose we have already obtained a quasi-isometry q∗ such that for every vertex
i+1 = Ei+1\ Ei and
v(cid:48) ∈ Ei, vertices of K(cid:48)\ St(v(cid:48)) are in the same v(cid:48)-tier. Suppose v(cid:48)
i+1) = ∅,
let B(cid:48) be the v(cid:48)
we pick an arbitrary v(cid:48)
j=1 be the collection of vi+1-branches
that have non-trivial intersection with K and let B(cid:48)
It is clear that
{Bj}k
j=1 are in the same vi+1-tier, moreover, since both G(Γ) and G(Γ(cid:48)) are prime,
the stretch factor of q∗ at vi+1 is 1, then there exists g∗ : P(Γ(cid:48)) → P(Γ(cid:48)) such that
(1) g∗ is a composition of ﬁnite many elementary permutations of v(cid:48)
i+1-branches,
hence g∗ ﬁxes every point in St(v(cid:48)
are in the same v(cid:48)
i+1-tier. By Lemma 5.6, we can assume in additional that (4) for
any v(cid:48) ∈ Ei ∩ St(v(cid:48)
i+1) and any v(cid:48)-branch D such that D ∩ K(cid:48) (cid:54)= ∅, g∗(D) and D
are in the same v(cid:48)-tier.
By (1) and (2), g∗ ﬁxes every point in Ei+1. We claim that vertices of g∗(K(cid:48)) \
St(v(cid:48)) are in the same v(cid:48)-tier for any v(cid:48) ∈ g∗(Ei+1). The case v(cid:48) = v(cid:48)
i+1 follows from
(3) and the case v(cid:48) ∈ Ei ∩ St(v(cid:48)
i+1) and D
i+1 ∈ D,
be a v(cid:48)-branch. If v(cid:48)
g∗(D) = D is still true since g∗ ﬁxes v(cid:48) and v(cid:48)
i+1. Thus g∗ does not permute the
v(cid:48)-branches and the claim follows.
i = g∗(v(cid:48)
∗(K), E(cid:48)
i = g∗(Ei) and v(cid:48)(cid:48)
Let q(cid:48)
i). Then
{v(cid:48)(cid:48)
i }n
i=1 are exactly the vertices in P(Γ(cid:48)) such that K(cid:48)(cid:48) \ St(v(cid:48)(cid:48)
i ) is disconnected.
n is a tight ﬁltration of {v(cid:48)(cid:48)
i }n
And E(cid:48)
i=1. Moreover, vertices of
K(cid:48)(cid:48) \ St(v(cid:48)(cid:48)) are in the same v(cid:48)(cid:48)-tier for any v(cid:48)(cid:48) ∈ E(cid:48)
i+1. So we can repeat the
previous process to deal with E(cid:48)
i}n
i=1, vertices of
K(cid:48) \ St(v(cid:48)) are in the same v(cid:48)-tier, thus K(cid:48) satisﬁes the assumption of Lemma 5.7
and π ◦ q∗ induces a simplicial embedding s : F (Γ) → F (Γ(cid:48)). By considering the
quasi-isometry inverse, we have a simplicial embedding s(cid:48) : F (Γ(cid:48)) → F (Γ), thus
F (Γ) and F (Γ(cid:48)) have the same number of vertices. Note that s(F (Γ)) is a full
subcomplex of F (Γ(cid:48)), so s is actually a simplicial isomorphism and we have the
following result:
Theorem 5.9. If G(Γ) and G(Γ(cid:48)) are prime right-angled Artin groups, then they
are quasi-isometric if and only if they are isomorphic.

∗ = g∗ ◦ q∗, K(cid:48)(cid:48) = g∗(K(cid:48)) = q(cid:48)
(cid:40) E(cid:48)

After ﬁnite many steps, we can assume for every point v(cid:48) ∈ {v(cid:48)

i+1) follows from (4). Let v(cid:48) ∈ Ei \ St(v(cid:48)

i+1 /∈ D, then g∗(D) = D by (2) and Lemma 5.5; if v(cid:48)

(cid:40) ··· (cid:40) E(cid:48)

1

2

j=1

i+2.

Pick vertex ¯v ∈ F (Γ), let {Ci}k

5.2. Prime partition and sub-tiers. Given right-angled Artin group G(Γ) of
type II (not necessarily prime), our goal in the next two sections is to ﬁnd a prime
right-angled Artin group G(Γ(cid:48)) which is quasi-isometric to G(Γ). Such G(Γ(cid:48)), if
exists, must be unique by Theorem 5.9.
i=1 be the collection of QII classes in F (Γ) \ St(¯v)
and let (n1, n2,··· , nk) be the associated tuple. Let {Cij}ni
j=1 be the components
in Ci and let d = gcd(n1, n2,··· , nk). For each i, we choose a map fi : {Cij}ni
j=1 →
{1, 2,··· , d} such that for each 1 ≤ m ≤ d, there are ni/d elements in f−1
(m). For
1 ≤ m ≤ d, let Cm = ∪k
(m). This partition of components of F (Γ) \ St(¯v) is
called the prime partition at ¯v. Each Cm is called a prime factor at ¯v. The prime

i=1f−1

i

i

42

JINGYIN HUANG

partition comes together with an order, namely, we deﬁne Ci ≤ Cj if i ≤ j. Note
that the prime partition is trivial if ¯v is prime. Now we ﬁx a prime partition for
every non-prime vertex in F (Γ).
Remark 5.10. Let α : F (Γ) → F (Γ) be a simplicial automorphism. By consider
the group automorphism of G(Γ) induced by α, we deduce that the number of
prime factors at ¯v and the numbed of prime factors at α(¯v) are the same. However,
α may not map prime factors at ¯v to prime factors at α(¯v).

Let v ∈ P(Γ) be a vertex such that π(v) = ¯v and let T be a v-tier. Recall that we
have a map Π which maps v-branches to components of F (Γ) \ St(¯v). This would
give rise to a partition {Π−1(Cm)∩ T}d
m=1 of v-branches in T . Each element in the
partition is called a v-sub-tier.
Remark 5.11. Pick vertex x ∈ X(Γ) and let ix : F (Γ) → P(Γ) be the natural
embedding. Then for vertices ¯u, ¯v, ¯w ∈ F (Γ), ¯u and ¯v are in diﬀerent prime factors
at ¯w if and only if ix(¯u) and ix(¯v) are in diﬀerent ix( ¯w)-sub-tiers.
Lemma 5.12. Let S1 and S2 be two v-sub-tiers. Then there exists a quasi-isometry
q : X(Γ) → X(Γ) such that the induces simplicial isomorphism q∗ : P(Γ) → P(Γ)
satisﬁes

(1) q∗ ﬁxes every vertex in P(Γ) \ (S1 ∪ S2).
(2) q∗(S1) = S2 and q∗(S2) = S1.
(3) For every v-branch B ⊂ S1, q∗(B) and B are QII.

i

i

(m1) and f−1

Proof. To see this, note that there exist unique v-tiers T1, T2 and 1 ≤ m1, m2 ≤ d
such that Si = Ti ∩ Π−1(Cmi) for i = 1, 2. For each 1 ≤ i ≤ k, pick a bijection
between f−1
(m2), and this induces a bijection ¯Λ from components
in Cm1 to components in Cm2. By Corollary 3.14 (1), ¯Λ induces a bijection Λ from
v-branches in S1 to v-branches in S2 such that B and Λ(B) are QII. We deﬁne q
as follows. Set q(x) = x if x ∈ Pv. If x /∈ Pv, let D be the component of X(Γ) \ Pv
with x ∈ D and let B be the v-branch corresponding to D (see Corollary 3.26).
If B is not inside S1 ∪ S2, then set q(x) = x. Otherwise we assume B ⊂ S1. Let
B(cid:48) = Λ(B) and let D(cid:48) be the associated component of X(Γ) \ Pv. Let f be the
elementary permutation (Deﬁnition 5.1) of B and B(cid:48). We can assume f (D) = D(cid:48)
(Corollary 3.26) and f is a (L, A)-quasi-isometry with L and A independent of
B ⊂ S1 (see the discussion after Lemma 5.2). Set q(x) = f (x) in this case. Then q
(cid:3)
is a quasi-isometry and satisﬁes all the requirements.
Remark 5.13. Lemma 5.6 is still true if we replaced vi-tier by vi-sub-tier in (3),
the same proof goes through.
Lemma 5.14. If G(Γ) is of type II, then given any two vertices v1, v2 ∈ P(Γ),
there only exists ﬁnite many vertices w such that v1|wv2.
Proof. We need an auxiliary result: pick vertex x ∈ X(Γ) and v ∈ P(Γ) \ (F (Γ))x,
let ¯w ∈ Γ and let S ¯w ⊂ (F (Γ))x be the lift of St( ¯w) ⊂ F (Γ). Then S ¯w \ St(v) (cid:54)= ∅.
Suppose the contrary is true, put ¯v = π(v), then St( ¯w) ⊂ St(¯v), hence ¯v ∈ St( ¯w).
Let v(cid:48) ∈ (F (Γ))x be the lift of ¯v. Then v(cid:48) ∈ S ¯w ⊂ St(v). Note that d(v(cid:48), v) = 1 is
impossible since π(v(cid:48)) = π(v), so v(cid:48) = v, which is contradictory to v /∈ (F (Γ))x.
{xi}n
xi−1 and xi. Let Ki = (F (Γ))xi and K = ∪n

Pick an edge path ω which connects a vertex in Pv1 to a vertex in Pv2. Let
i=0 be consecutive vertices in ω, and let li be the standard geodesic containing
i=0Ki. Then v1 ∈ K0 and v2 ∈ Kn.

QUASI-ISOMETRY CLASSIFICATION OF RIGHT-ANGLED ARTIN GROUPS II

43

It suﬃces to show that for any vertex v /∈ K, v1 and v2 are in the same v-branch.
To see this, note that π(Ki−1 ∩ Ki) = St(π(∆(li))), so for 1 ≤ i ≤ n, there exists
vertex wi such that wi ∈ (Ki−1 ∩ Ki) \ St(v) by the auxiliary result above. By
remark 3.8, wiwi+1|v for 1 ≤ i ≤ n − 1, v1w1|v and wnv2|v, so v1v2|v.
(cid:3)

Pick vertex x ∈ X(Γ) and let K(cid:48), v, C(cid:48)

The reader can proceed directly to Section 5.3 and come back to the following
technical lemma later.
Let ¯v ∈ F (Γ) be a non-prime vertex and let K ⊂ F (Γ) be a subcomplex contain-
ing ¯v such that for any vertex ¯u ∈ F (Γ) \ lk(¯v), K \ St(¯u) is inside a prime factor
at ¯u. Suppose in addition that K \ St(¯v) (cid:54)= ∅ and let C1 be the prime factor at ¯v
that contains K \ St(¯v). Let C2 be a diﬀerent prime factor at ¯v.
2 be the lift of K, ¯v, C1 and C2 in
(F (Γ))x ⊂ P(Γ) respectively. For i = 1, 2, let Si be the v-sub-tier that contains C(cid:48)
i.
Let q : X(Γ) → X(Γ) be a quasi-isometry such that q∗ permutes S1 and S2 and
ﬁxes every points in P(Γ) \ (S1 ∪ S2) (Lemma 5.12).
Lemma 5.15. There exists a quasi-isometry h : X(Γ) → X(Γ) such that
(1) h∗ permutes S1 and S2 and ﬁxes every vertex in P(Γ) \ (S1 ∪ S2).
(2) The projection map π : P(Γ) → F (Γ) restricted on K(cid:48) ∪ h∗(K(cid:48)) is injective.
(3) Let M = π(K(cid:48) ∪ h∗(K(cid:48))). Let ¯h∗ : K → π(h∗(K(cid:48))) be the simplicial
isomorphism induced by h∗. Pick vertex ¯u ∈ F (Γ). Then
(a) If d(¯u, ¯v) ≥ 2, then M \ St(¯u) is contained in one prime factor at ¯u.
(b) If d(¯u, ¯v) = 1, then ¯r ∈ K \ St(¯u) if and only if ¯h∗(¯r) ∈ ¯h∗(K)\ St(¯u).

1 and C(cid:48)

In this case, ¯r and ¯h∗(¯r) are in the same prime factor at ¯u.

(c) If K is a full subcomplex of F (Γ), then ¯h∗(K) is also a full subcomplex.
Proof. We assume K is a full subcomplex. The general case follows from this special
case by considering the full subcomplex spanned by K.
Let L = K(cid:48) ∪ q∗(K(cid:48)). By Lemma 5.14, there are only ﬁnitely many vertices
w ∈ P(Γ) such that St(w) separates two vertices in L. Denote these vertices by
i=1. We claim if St(w) separates two vertices in K(cid:48) and d(w, v) ≥ 2, then
{wi}n
∗(K(cid:48)) \ St(w) are in the same w-branch. To see this, suppose v1|wv2
vertices of q(cid:48)
for v1, v2 ∈ K(cid:48), then either v1|wv or v2|wv, so v1w|v or v2w|v by Lemma 5.8. Then
the claim follows from Lemma 5.5. Note that the claim is also true if we switch the
role of K(cid:48) and q(cid:48)

∗(K(cid:48)).

i=1 into the following 4 groups.

By the above claim, we can divide {wi}n
(1) w1 = v.
(2) wi ∈ lk(v) if and only if 2 ≤ i ≤ n1.
(3) St(wi) separates v from some vertex in K(cid:48) if and only if n1 + 1 ≤ i ≤ n2.
(4) St(wi) separates v from some vertex in q∗(K(cid:48)) if and only if n2 + 1 ≤ i ≤ n.
n2+1. Let k = n2 −
Note that q∗ induces a bijection between {wi}n2
i=n1+1 and {wi}n
n1 = n − n2. We also assume q∗(wi) = wi+k for n1 + 1 ≤ i ≤ n2.
i=1. Then D \ St(wi) stays inside a wi-branch for i > n2. To see
this, let B be the wi-branch that contains v and let wi0 ∈ D \ St(wi). It is clear
that wi0 ∈ B if i0 ≤ n1. If n1 < i0 ≤ n2, by above discussion, there exists u ∈ K(cid:48)
such that wi0u|v, similarly, there exists u(cid:48) ∈ q∗(K(cid:48)) such that wiu(cid:48)|v. But u|vu(cid:48),
so wi0|vwi, and by Lemma 5.8, we have wi0v|wi and wi0 ∈ B. This discussion also
implies {wi}n2
Let {Bλ}λ∈Λ be the collection of wi-branches that contain vertices of K(cid:48), here
i ranges over all values between 2 and n1. By Lemma 5.6, we can post-compose

i=n1+1 ⊂ S1 and {wi}n

Let D = {wi}n2

i=n2+1 ⊂ S2.

JINGYIN HUANG

Let E0 = {w(cid:48)

i+n2

i) = w(cid:48)

∗(K(cid:48))\ St(v), but w(cid:48)

i = f∗(wi). Then {w(cid:48)

i), so vertices of K(cid:48) \ St(w(cid:48)

We claim for n1 < i ≤ n2, vertices of L(cid:48) \ St(w(cid:48)

i) are in the same w(cid:48)
i) are inside a w(cid:48)

44
∗ = f∗ ◦ q∗ that satisﬁes
q∗ with a simplicial isomorphism f∗ to obtain a map q(cid:48)
the conclusions of Lemma 5.6. By Remark 5.13, we can assume that for vertex
u ∈ K(cid:48) \ St(wi) (2 ≤ i ≤ n1), u and q(cid:48)
∗(u) are in the same wi-sub-tier. Let
L(cid:48) = K(cid:48) ∪ q(cid:48)
∗(K(cid:48)). Note that if Bλ ⊂ P(Γ) \ St(v), then Bλ ⊂ S1, so by the
construction in Lemma 5.6, f∗ is a composition of elementary permutations that
happen inside S2, hence f∗ ﬁxes every point in S1, in particular, f∗(K(cid:48)) = K(cid:48)
i}n
and f∗(L) = L(cid:48). Let w(cid:48)
i=1 is the collection of vertices such
i}n
that St(w) separates two vertices in L(cid:48). We divide {w(cid:48)
i=1 into 4 groups as before
and this partition coincides with the partition induced by f∗. Since wi ∈ S1 for
n1 + 1 ≤ i ≤ n2, so w(cid:48)
i = wi for i ≤ n2. Moreover, the property in the previous
i}n
paragraph also holds for {w(cid:48)
i=1.
i-sub-tier.
i ∈ (F (Γ))x for n1 < i ≤ n2. Recall that K \ St(π(w(cid:48)
Actually, by Remark 3.8, w(cid:48)
i))
is inside a prime factor at π(w(cid:48)
i-sub-tier.
∗(K(cid:48))\ St(v) and
S2 contains vertices of q(cid:48)
v are in the same w(cid:48)
i}n
i}n2
i=1 and E = {w(cid:48)
1 . Then E0 is tight in E by previous discussion.
Let E0 (cid:40) E1 (cid:40) E2 (cid:40) ··· (cid:40) Ek = E be a tight ﬁltration. Up to reordering, we
i+k for n1 < i ≤ n2.
= Ei \ Ei−1 for 1 ≤ i ≤ k and q(cid:48)
∗(w(cid:48)
assume w(cid:48)
Suppose there is an integer m (0 ≤ m ≤ k) such that
∗ permutes S1 and S2 and ﬁxes every vertex in P(Γ) \ (S1 ∪ S2).
(1) q(cid:48)
(2) For 2 ≤ i ≤ n1 and vertex u ∈ K(cid:48) \ St(w(cid:48)
w(cid:48)
i-sub-tier.
(3) For n1 < i ≤ n2 +m, vertices of L(cid:48)\St(w(cid:48)

i ∈ S1, so vertices of q(cid:48)
i-branch by Lemma 5.5, thus the claim follows.

Let a = n1 + m + 1 and b = n2 + m + 1. Since vertices of K(cid:48) \ St(w(cid:48)

i-sub-tier.
Such m always exists, since (1) and (2) is always true and (3) is true when m = 0.
Our goal to is modify the map q(cid:48)
∗ such that m = k. Now we assume m < k and
argue by induction.
a) stay
inside a w(cid:48)
a), there is a simplicial isomorphism g∗ which is
a composition of ﬁnitely many elementary permutations of w(cid:48)
b-branches such that
(1) vertices in g∗(q(cid:48)
b-sub-tier; (2) let B(cid:48) be the w(cid:48)
b-
branch that contains v, then g∗ ﬁxes every point in B(cid:48). Lemma 5.5 implies vertices
of K(cid:48) \ St(w(cid:48)
b) are in B(cid:48), so g∗ ﬁxes every point in K(cid:48). Moreover, the tightness of
i for 1 ≤ i ≤ b. By Lemma 5.6 and Remark 5.13, we can
Em implies g∗(w(cid:48)
b) ∩ Em and any t-branch A
assume in addition that (3) for any vertex t ∈ St(w(cid:48)
with A ∩ L(cid:48) (cid:54)= ∅, g∗(A) and A are in the same t-sub-tier.
i = g∗(w(cid:48)
∗(K(cid:48))). Then g∗(L(cid:48)) = L(cid:48)(cid:48). Let w(cid:48)(cid:48)
i=1 is
i ) separates two vertices in L(cid:48)(cid:48). Moreover,
the collection of vertices such that St(w(cid:48)(cid:48)
g∗(E0) (cid:40) g∗(E1) (cid:40) ··· (cid:40) g∗(Ek) = g∗(E) is a tight ﬁltration. Note that g∗(Ei) = Ei
for i ≤ m + 1. We claim

∗(w(cid:48)
b) are in the same w(cid:48)

b = q(cid:48)
∗(K(cid:48)))\ St(w(cid:48)

i) are contained in one w(cid:48)

Let L(cid:48)(cid:48) = K(cid:48)∪g∗(q(cid:48)

a-sub-tier and w(cid:48)

∗(u) are in the same

i). Then {w(cid:48)(cid:48)

i }n

i) = w(cid:48)

i), u and q(cid:48)

w(cid:48)(cid:48)
i -sub-tier.

∗ permutes S1 and S2 and ﬁxes every vertex in P(Γ) \ (S1 ∪ S2).

(1) g∗ ◦ q(cid:48)
(2) For 2 ≤ i ≤ n1 and vertex u ∈ K(cid:48) \ St(w(cid:48)(cid:48)
(3) For n1 < i ≤ b, vertices of L(cid:48)(cid:48) \ St(w(cid:48)(cid:48)
i -sub-tier.
(1) follows from property (2) of g∗ and Lemma 5.5. Now we assume 2 ≤ i ≤ n1,
b) ≥ 2, since g∗ ﬁxes every point in B(cid:48), we can show g∗
i-branches as in the proof of Theorem 5.9, then (2)
∗(u)

then w(cid:48)(cid:48)
induces trivial permutation of w(cid:48)
follows from the induction assumption. If d(w(cid:48)

i ) are contained in one w(cid:48)(cid:48)

∗(u)) are in the same

i ), u and g∗(q(cid:48)

b) = 1, since q(cid:48)

∗(u) ∈ L(cid:48), q(cid:48)

i. If d(w(cid:48)

i = w(cid:48)

i, w(cid:48)

i, w(cid:48)

QUASI-ISOMETRY CLASSIFICATION OF RIGHT-ANGLED ARTIN GROUPS II

45

∗(u)

i, w(cid:48)

˜wi-sub-tier.

If i < b and d(w(cid:48)

∗(u)) are in the same w(cid:48)

i-sub-tier by induction, thus (2) follows.
b. Since g∗(L(cid:48)) = L(cid:48)(cid:48), the case i < b and d(w(cid:48)

i-sub-tier by property (3) of g∗. But u and q(cid:48)
i = w(cid:48)

i and
b) = 1 follows from
b) = 2, then
i-branches and (3) follows from the induction
b) and v are in the same

and g∗(q(cid:48)
are in the same w(cid:48)
It remains to verify (3). Suppose n1 < i ≤ b, we still have w(cid:48)(cid:48)
w(cid:48)(cid:48)
b = w(cid:48)
i, w(cid:48)
induction assumption and property (3) of g∗.
g∗ induces trivial permutation of w(cid:48)
assumption. If i = b, by Lemma 5.5, vertices of K(cid:48) \ St(w(cid:48)
w(cid:48)
b-branch, then (3) follows from property (1) of g∗.
After applying the above induction process for ﬁnite many times, we obtain
a simplicial isomorphism h∗ : P(Γ) → P(Γ) which satisﬁes (1) in Lemma 5.15.
Moreover, let ˜L = K(cid:48) ∪ h∗(K(cid:48)) and let { ˜wi}n
i=1 be the collection of vertices such
that St( ˜wi) separates two vertices of ˜L. Then
(1) For 2 ≤ i ≤ n1 and vertex u ∈ K(cid:48) \ St( ˜wi), u and h∗(u) are in the same
(2) For n1 < i ≤ n, vertices of ˜L \ St( ˜wi) are contained in one ˜wi-sub-tier.

Let 2 ≤ i ≤ n1. Since h∗( ˜wi) = ˜wi and vertices of K(cid:48) \ St( ˜wi) are contained in one
˜wi-tier, (1) implies actually vertices of ˜L\ St( ˜wi) are contained in one ˜wi-tier. Thus
˜L satisﬁes the assumption of Lemma 5.7 and (2) of Lemma 5.15 follows. Note that
K(cid:48) is a full subcomplex, so is h∗(K(cid:48)), then ¯h∗(K) = π(h∗(K(cid:48))) is a full subcomplex.
Pick vertex x0 ∈ ∩w∈ ˜LPw (x0 may not equal to x), then ˜L ⊂ (F (Γ))x0. Let
ix0 : F (Γ) → (F (Γ))x0 ⊂ P(Γ) be the natural embedding. Then ix0 (M ) = ˜L and
(3a) follows from property (2) of h∗ and Remark 5.11. Now we look at (3b). For
vertex ¯k ∈ K,

d(¯k, ¯u) = d(ix0(¯k), ix0(¯u)) = d(h∗ ◦ ix0(¯k), ix0 (¯u))

= d(π ◦ h∗ ◦ ix0 (¯k), π ◦ ix0(¯u)) = d(¯h∗(¯k), ¯u).

The ﬁrst and the third equality follow from Lemma 2.13, and the second equality
holds since h∗ ﬁxes ix0(¯u). Thus the ﬁrst part of (3b) is true. The rest of (3b)
(cid:3)
follows from property (1) of h∗.

5.3. An wall space. In this section, we will construct a prime right-angled Artin
group which is a special subgroup of G(Γ).

j=1Cj) (or St(¯v)∪ (∪d

j=1Cj) or St(¯v)∪(∪d
j=m+1Cj) (or St(¯v)∪ (∪m

Step 1: We show the prime partition induces a wall-space structure on F (Γ)
Pick non-prime vertex ¯v ∈ F (Γ) and let {Cj}d

and we construct the associated CAT (0) cube complex.
j=1 be the prime factors at ¯v. A ¯v-
halfspace of F (Γ) is a full subcomplex of form St(¯v)∪(∪m
j=m+1Cj)
with 1 ≤ m < d. Let H = St(¯v)∪ (∪m
j=m+1Cj)). We deﬁne the
complement of H, denoted by H c, to be St(¯v)∪ (∪d
j=1Cj)).
A ¯v-wall of F (Γ) is a pair of halfspaces (H, H c). Let H(Γ) be the collection of pairs
(¯v, H) such that ¯v is non-prime and H is a ¯v-halfspace. If there is another pair
(¯v(cid:48), H(cid:48)) ∈ H(Γ) such that H = H(cid:48) and ¯v (cid:54)= ¯v(cid:48), then (¯v(cid:48), H(cid:48)) and (¯v, H) are viewed
as diﬀerent elements in H(Γ). Let W(Γ) be the collection of triples (¯v, H, H c) such
that (H, H c) is a ¯v-wall. Occasionally, we will omit ¯v when there is no ambiguity.
Deﬁne two halfspaces (¯v1, H1), (¯v2, H2) ∈ H(Γ) are compatible if d(¯v1, ¯v2) = 1 or
(H1 ∩ H2) (cid:42) St(¯v1). Note that if d(¯v1, ¯v2) ≥ 2, then (H1 ∩ H2) (cid:42) St(¯v1) implies
(H1 ∩ H2) (cid:42) St(¯v2) and vice versa, and in this case exactly one of the following
three possibilities is true: (1) ¯v1 ∈ H2 and ¯v2 ∈ H1; (2) H2 (cid:40) H1; (3) H1 (cid:40) H2.

46

JINGYIN HUANG

To see this, let C1 (or C2) be the component of F (Γ) \ St(¯v1) (or F (Γ) \ St(¯v2))
that contains ¯v2 (or ¯v1). If C1∩H1 = C2∩H2 = ∅, then H2 ⊂ C1∪St(¯v2) by Lemma
5.5, hence H1 ∩ H2 ⊂ H1 ∩ (C1 ∪ St(¯v2)) = H1 ∩ St(¯v2) = St(¯v1)∩ St(¯v2) ⊂ St(¯v1),
which yields a contradiction. If Ci ∩ Hi (cid:54)= ∅ for i = 1, 2, then actually Ci ⊂ Hi
and case (1) holds. Moreover, neither H2 ⊂ H1 nor H1 ⊂ H2 is true in this case by
Lemma 5.5. If C1 ⊂ H1 and C2 ∩ H2 = ∅, then H2 ⊂ C1 ∪ St(¯v2) ⊂ H1. Note that
¯v1 ∈ H1 \ H2, hence case (2) is true. Similarly, C2 ⊂ H2 and C1 ∩ H1 = ∅ implies
case (3). It easy to see (H1 ∩ H2) (cid:42) St(¯v2) holds in each case. We also deduce that
if d(¯v1, ¯v2) ≥ 2, then H1 and H2 are compatible if and only if C1∩H1 = C2∩H2 = ∅
is not true, hence (under the assumption d(¯v1, ¯v2) ≥ 2) (1) is true if and only if
Ci ⊂ Hi for i = 1, 2; (2) is true if and only if C1 ⊂ H1 and C2 ∩ H2 = ∅ and (3) is
true if and only if C2 ⊂ H2 and C1 ∩ H1 = ∅.
It follows from
the above discussion that ≤ is antisymmetric. Pick (¯v3, H3) ∈ H(Γ) such that
(¯v2, H2) ≤ (¯v3, H3), if two of ¯v1, ¯v2, ¯v3 are the same, then (¯v1, H1) ≤ (¯v3, H3) by
deﬁnition. If ¯v1, ¯v2, ¯v3 are pairwise distinct, let C1 and C2 be as above and let C(cid:48)
be the component of F (Γ) \ St(¯v2) that contains ¯v3. Since H1 (cid:40) H2 and H2 (cid:40) H3,
then C1 ∩ H1 = ∅, C2 ⊂ H2 and C(cid:48)
2 ∩ H2 = ∅ by above discussion. Thus ¯v1 and
¯v3 are in diﬀerent component of F (Γ) \ St(¯v2) and d(¯v1, ¯v3) ≥ 2, which implies
(¯v1, H1) ≤ (¯v3, H3). It follows that ≤ is a partial order.
1), hence H(Γ) is a pocset.
The case ¯v1 = ¯v2 is clear. If d(¯v1, ¯v2) ≥ 2, then H1 ∩ C1 = ∅ and C2 ⊂ H2, hence
C1 ⊂ H c

We deﬁne (¯v1, H1) ≤ (¯v2, H2) if d(¯v1, ¯v2) (cid:54)= 1 and H1 ⊂ H2.

Note that (¯v1, H1) ≤ (¯v2, H2) implies (¯v2, H c

2) ≤ (¯v1, H c

2

1 and C2 ∩ H c

2 = ∅, which implies (¯v2, H c

2) ≤ (¯v1, H c
1).

We claim the following are equivalent.
(1) (¯v1, H1) and (¯v2, H2) are not compatible.
(2) d(¯v1, ¯v2) (cid:54)= 1 and (¯v1, H1) ≤ (¯v2, H c
2).
(3) d(¯v1, ¯v2) (cid:54)= 1 and (¯v2, H2) ≤ (¯v1, H c
1).

2 ⇔ (¯v1, H1) ≤ (¯v2, H c
2).

It follows from this claim that U ⊂ H(Γ) is an ultraﬁlter if and only if (1) for each
pair (¯v, H) and (¯v, H c), U contains exactly one of them; (2) every pair of halfspaces
in U is compatible. To see the claim, let us assume d(¯v1, ¯v2) ≥ 2. Then (¯v1, H1)
and (¯v2, H2) are not compatible ⇔ C1 ∩ H1 = C2 ∩ H2 = ∅ ⇔ C1 ∩ H1 = ∅ and
C2 ⊂ H c
Lemma 5.16. For arbitrary simplex g ⊂ F (Γ), there exists an ultraﬁlter U such
that the intersection of halfspaces in U contains g.
Proof. Let E(cid:48) be the collection of non-prime vertices in F (Γ) and let G be the
collection of vertices in g. Let E = E(cid:48) ∪ G and let E1 (cid:40) E2 (cid:40) ··· (cid:40) En = E be a
tight ﬁltration of E (see the discussion after Lemma 5.8). Denote ¯ui = Ei \ Ei−1.
We can assume in addition that ¯ui ∈ G if and only if i ≤ n1 and ¯ui ∈ E(cid:48) if and
only if i ≥ n2. For i ≥ n2, if Ei−1 \ St(¯ui) (cid:54)= ∅, let Ci be the component of
F (Γ) \ St(¯ui) that contains Ei−1 \ St(¯ui) (this is possible by our choice of Ei). If
Ei−1 \ St(¯ui) = ∅, let Ci be an arbitrary component. We deﬁne U by choosing
the unique halfspace that contains Ci in each ¯ui-wall for i ≥ n2.
It clear that
the intersection of halfspaces in U contains g. It remains to show two halfspaces
(¯ui, H1), (¯uj, H2) ∈ U are compatible. The case d(¯v1, ¯v2) ≤ 1 is trivial. We assume
d(¯ui, ¯uj) ≥ 2. Suppose i < j, then ¯ui ⊂ Cj ⊂ H2, hence ¯ui ∈ (H1 ∩ H2)\ St(¯uj). It
(cid:3)
follows that U is an ultraﬁlter.

QUASI-ISOMETRY CLASSIFICATION OF RIGHT-ANGLED ARTIN GROUPS II

47

Let U = {(¯uλ, Hλ)}λ∈Λ be an ultraﬁlter and let A = ∩λ∈ΛHλ. We claim A (cid:54)= ∅.
Note that if (¯uλ, Hλ) is minimal in U, then ¯uλ ∈ A. Suppose the contrary is true,
then there exists (¯uλ(cid:48), Hλ(cid:48)) ∈ U such that ¯uλ /∈ Hλ(cid:48), in particular d(¯uλ(cid:48), ¯uλ) ≥ 2.
By compatibility of Hλ and Hλ(cid:48), we must have Hλ(cid:48) (cid:40) Hλ, which contradicts the
minimality of (¯uλ, Hλ).
Let X be the CAT (0) cube complex obtained from the pocset H(Γ) as in Theo-
rem 2.9. Let Φ be the pocset isomorphism from the collection of halfspaces in X to
H(Γ) as in Theorem 2.9. Then Φ induces a bijective map from hyperplanes of X to
W(Γ), which is also denoted by Φ. Let {xi}r
i=1 be the collection of vertices in X,
and let {U (xi)}r
i=1 be the corresponding ultraﬁlters. Let Φ(xi) be the intersection
of halfspaces in U (xi). Then

(1) For any vertex ¯u ∈ F (Γ), Φ(xi) \ St(¯u) is contained in a prime factor at ¯u.
(2) ∪r
i=1Φ(xi) = F (Γ).
(3) Φ(xi) (cid:54)= ∅ for all i.

(2) follows from Lemma 5.16 and (3) follows from the above discussion.

Recall that two distinct walls (¯v1, H1, H c

1), (¯v2, H2, H c

1 and h(cid:48)

i=1h(cid:48)

i. Since each h(cid:48)

i) is a ¯vi-wall for i = 1, 2, then d(¯v1, ¯v2) = 1.

i=1 be the collection of halfspaces in X with A ⊂ hi and let Φ(hi) = ( ¯wi, h(cid:48)

2) ∈ W(Γ) are transverse if
2), (¯v2, H2) < (¯v1, H1) and (¯v2, H2) <
none of (¯v1, H1) < (¯v2, H2), (¯v1, H1) < (¯v2, H c
1) is true. Thus two such walls are transverse if and only if d(¯v1, ¯v2) = 1
(¯v1, H c
(note that when d(¯v1, ¯v2) = 1, even if H1 ⊂ H2, we still have (¯v1, H1) (cid:2) (¯v2, H2)
by our deﬁnition). It follows that if h(cid:48)
2 is a pair of crossing hyperplanes in
X and Φ(h(cid:48)
For each subcomplex A ⊂ X, we deﬁne Φ(A) = ∪x∈AΦ(x) (x is a vertex). If A is
convex, then Φ(A) is a full subcomplex. This follows from the following observation.
Let {hi}t
i).
Suppose K = ∩t
i is a full subcomplex, so is K. It suﬃces to
show Φ(A) = K. Φ(A) ⊂ K is clear. Let W(cid:48)(Γ) be the Φ-image of hyperplanes
in X that intersect A and let H(cid:48)(Γ) be the corresponding collection of halfspaces.
Then H(cid:48)(Γ) is a sub-pocset of H(Γ). We claim U(cid:48) ⊂ H(cid:48)(Γ) is an ultraﬁlter of
i}t
i=1 is an ultraﬁlter of H(Γ). To see this, we can use
H(cid:48)(Γ) if and only if U(cid:48) ∪ {h(cid:48)
the pocset isomorphism Φ between the halfspaces of X and H(Γ) to translate this
statement to a statement about halfspaces of X, which becomes obvious. We also
i}t
deduce that U(cid:48) ∪ {h(cid:48)
i=1 corresponds to a vertex in A. Thus there is an isometric
embedding from the CAT (0) cube complex associated with H(cid:48)(Γ) to X, whose
i=1 be the collection of ultraﬁlters on H(cid:48)(Γ) and let
image is exactly A. Let {U(cid:48)
i}l
Ki be the intersection of halfspaces in U(cid:48)
i=1Ki = F (Γ) as in
Lemma 5.16. It follows that K = K∩(∪l
i=1(K∩Ki), but K∩Ki = U (x)
for some vertex x ∈ A, so K ⊂ Φ(A).
Step 2: We study the relation between Φ(x) and F (Γ) (x ∈ F (Γ) is a vertex).
For this purpose, we deﬁne a ﬁltration for X as well as for F (Γ). Such ﬁltration is
motivated by the generalized star extension introduced in [Hua14a, Section 6.3].
We deﬁne a chain of convex subcomplexes in X by induction. Pick a vertex
x ∈ X and set L1 = {x}. Suppose we have already deﬁned Li. If Li = X, then
we stop; if Li (cid:40) X, pick an edge ei such that ei ∩ Li is a vertex and let Li+1
be the convex hull of Li ∪ ei. Let {Li}s
i=1 be the resulting collection of convex
subcomplexes. Here is an alternative way of describing Li+1. Suppose hi is the
hyperplane dual to ei and Ni is the carrier of hi. Then hi ∩ Li = ∅ by the convexity
of Li. Let Mi be the copy of (Li ∩ Ni) × [0, 1] inside Ni. Then Li+1 = Li ∪ Mi.

i. Then we can prove ∪l
i=1Ki) = ∪l

48

JINGYIN HUANG

i) ∈ U (x1) such that (Hi ∩ H(cid:48)

Now we look at the relation between Φ(Li) and Φ(Li+1). For j = 1, 2, let Mij
be the subcomplex of Mi of form (Li ∩ Ni) × {j − 1}. We assume Mi1 = Li ∩ Ni
and let p : Mi1 → Mi2 be the map induced by parallelism. Suppose (¯v, Hi) ∈
H(Γ) is the element corresponding to the halfspace of hi that contains Li. Then
Φ(Mi1) ⊂ Φ(K) ⊂ Hi and Φ(Mi2) ⊂ H c
i . For any vertex x ∈ Mi1, (¯v, Hi) is a
minimal element in U (x), so ¯v ∈ Φ(x) ⊂ Φ(Mi1). Similarly, ¯v ∈ Φ(Mi2).
We claim there exist C1 and C2 which are prime factors at ¯v such that C1 ⊂ Hi,
C2 ⊂ H c
i and Φ(Mij) \ St(¯v) ⊂ Cj for j = 1, 2. Pick adjacent vertices x1, x2 ∈ Mi1,
i)\ St(¯v) is a prime factor at ¯v.
then there exists (¯v, H(cid:48)
Denote this prime factor by C1, then Φ(x1) \ St(¯v) ⊂ C1. Let h be the hyperplane
dual to the edge joining x1 and x2 and let Φ(h) = ( ¯w, H, H c). Then U (x2) =
i) ∈ U (x2),
(U (x1)\{H})∪{H c}. Since h crosses hi, d( ¯w, ¯v) = 1. Thus (¯v, Hi), (¯v, H(cid:48)
which implies Φ(x2) \ St(¯v) ⊂ C1. Now Φ(Mi1) \ St(¯v) ⊂ C1 follows from the
connectedness of Mi1. We can choose C2 in a similar way.
The above argument also implies for any vertex ¯u such that d(¯u, ¯v) (cid:54)= 1, Φ(Mi1)\
St(¯u) is contained in a prime factor at ¯u. Note that if Mi1 ⊂ St(¯v), then Φ(x) =
Φ(p(x)) for any vertex x ∈ Mi1, hence Mi2 = Mi1. Now we assume Mi1 (cid:42) St(¯v),
then we can set up as in Lemma 5.15 with respect to K = Mi1, ¯v ∈ K, C1 and C2.
Let h∗ and ¯h∗ be the maps in Lemma 5.15. We claim ¯h∗(Mi1) = Mi2.
Pick vertex x ∈ Mi1. We claim for any vertex ¯u with d(¯u, ¯v) ≥ 1, Φ(x)\St(¯u) (cid:54)= ∅
if and only if ¯h∗(Φ(x))\St(¯u) (cid:54)= ∅, and in this case Φ(x)\St(¯u) and ¯h∗(Φ(x))\St(¯u)
are in the same prime factor at ¯u. This follows from Lemma 5.15 (3b) when
d(¯u, ¯v) = 1. When d(¯u, ¯v) > 1, note that ¯v ∈ Φ(x) and ¯v ∈ ¯h∗(Φ(x)), then the
claim follows from Lemma 5.15 (3a). Thus for any (¯u, H) ∈ U (x) with d(¯u, ¯v) ≥ 1,
¯h∗(Φ(x)) ⊂ H. Moreover, (1) of Lemma 5.15 implies ¯h∗(Φ(x)) \ St(¯v) ⊂ C2, so
¯h∗(Φ(x)) ⊂ Φ(p(x)) by our choice of C2 (recall that p : Mi1 → Mi2 is the parallelism
map). Denote the number of vertices in Φ(x) by |Φ(x)|, then |Φ(x)| ≤ |Φ(p(x))|.
By reversing the role of Mi1 and Mi2 and apply Lemma 5.15 with K = Mi2, we
have |Φ(p(x))| ≤ |Φ(x)|, hence |Φ(x)| = |Φ(p(x))|. But ¯h∗(Φ(x)) and Φ(p(x)) are
both full subcomplexes, so ¯h∗(Φ(x)) = Φ(p(x)). Thus ¯h∗(Φ(Mi1)) = Φ(Mi2).
Since Φ(Mij) is a full subcomplex for j = 1, 2, we have ¯h∗(St(¯v) ∩ Φ(Mi1)) =
¯h∗(St(¯v, Φ(Mi1))) = St(¯v, Φ(Mi2)) = St(¯v)∩Φ(Mi2). However, ¯h∗ ﬁxes every point
in St(¯v)∩Φ(Mi1), so St(¯v)∩Φ(Mi1) = St(¯v)∩Φ(Mi2). Recall that Φ(Li)∩Φ(Mi2) ⊂
St(¯v), so Φ(Mi1)∩ St(¯v) ⊂ Φ(Mi1)∩ Φ(Mi2) ⊂ Φ(Li)∩ Φ(Mi2) ⊂ Φ(Mi2)∩ St(¯v) =
Φ(Mi1) ∩ St(¯v) and all these sets are equal. Thus Φ(Li+1) can be obtained by
taking Φ(Li) and Φ(Mi1) ∼= Φ(Mi2), and gluing them along St(¯v, Φ(Mi1)).
Let Γ(cid:48) be the 1-skeleton of Φ(L1). Note that L1 is one point and the above
discussion implies the isomorphism type of Γ(cid:48) does not depend on the choice of L1.
Step 3: We show G(Γ(cid:48)) is a special subgroup of G(Γ) and G(Γ(cid:48)) is prime.
For convex subcomplex E ⊂ X(Γ(cid:48)), let {lλ}λ∈Λ be the collection of standard
geodesics in X(Γ(cid:48), S)(cid:48) such that lλ ∩ E (cid:54)= ∅. Denote the full subcomplex in P(Γ(cid:48))
spanned by {∆(lλ)}λ∈Λ by ˆE. An edge e ⊂ X(Γ(cid:48)) is called a v-edge for v ∈ P(Γ)
if ∆(le) = v (le is the standard geodesic containing e). Similarly, an edge e ⊂ X
is called a ¯v-edge for ¯v ∈ F (Γ) if the ultraﬁlters corresponding to two vertices of e
diﬀer by a ¯v-halfspace.
We are going to deﬁne a sequence of simplicial embeddings fi : Φ(Li) → P(Γ(cid:48))
and cubical embeddings gi : Li → X(Γ(cid:48)) with fi+1|Φ(Li) = fi and gi+1|Li = gi
which satisfy the following compatibility conditions:

QUASI-ISOMETRY CLASSIFICATION OF RIGHT-ANGLED ARTIN GROUPS II

49

(1) gi(Li) is a compact convex subcomplex of X(Γ(cid:48)).
(2) For any vertex x ∈ Li, fi(Φ(x))=(cid:91)gi(x). In particular, fi(Φ(Li)) = (cid:92)gi(Li).
(3) gi sends a ¯v-edge to a fi(¯v)-edge.
We need several observations before the construction of gi and fi. Pick vertex
v ∈ P(Γ(cid:48)), then the vertices of Pv are exactly those vertices x ∈ X(Γ(cid:48)) with v ∈ ˆx.
Let lv be a standard geodesic such that ∆(lv) = v and let hv be a hyperplane dual
to lv. We identify Pv with lv × hv. Then e ⊂ X(Γ(cid:48)) is a v-edge if and only if e ∈ Pv
and e has trivial projection to the hv-factor. Actually, these statements have their
analogues in X.
Pick vertex x, x(cid:48) ∈ X and let {¯v, H} ∈ U (x) be a minimal halfspace. Then
¯v ⊂ Φ(x). We claim ¯v ∈ Φ(x(cid:48)) if and only if for (¯v(cid:48), H(cid:48), H(cid:48)c) ∈ W(Γ) with (¯v(cid:48), H(cid:48)) ∈
U (x) and (¯v(cid:48), H(cid:48)c) ∈ U(cid:48)(x), we have d(¯v, ¯v(cid:48)) ≤ 1. The only if direction is clear. The
other direction is true because if d(¯v, ¯v(cid:48)) ≤ 1, then ¯v ∈ St(¯v(cid:48)) ⊂ H(cid:48) ∩ H(cid:48)c.
Let W¯v(Γ) be the collection of ¯v(cid:48)-walls with d(¯v, ¯v(cid:48)) ≤ 1 and let H¯v(Γ) be
corresponding collection of halfspaces. Denote the corresponding CAT (0) cube
complex by X¯v. Let Σ ⊂ H(Γ) be the subset made of elements ( ¯w, R) such that
d( ¯w, ¯v) ≥ 2 and ¯v ∈ R. Pick an ultraﬁlter U¯v of H¯v(Γ), it is easy to see every pair
of halfspaces in Σ∪ U¯v are compatible, thus Σ∪ U¯v is an ultraﬁlter of H(Γ) and this
induces a cubical embedding i¯v : X¯v → X. Note that i¯v(X¯v) is convex in X since
two walls in W¯v(Γ) are transverse in W¯v(Γ) if and only if they are transverse in
W(Γ). Since every ¯v-wall is transverse to all ¯w-walls with d( ¯w, ¯v) = 1, X¯v admits
a canonical splitting X¯v = h¯v × [0, d¯v − 1], here h¯v is isomorphic to the hyperplane
in X corresponding to a ¯v-wall, and d¯v is the number of prime factors at ¯v. We
will view X¯v as a convex subcomplex of X. Then vertices of X¯v are exactly those
vertices x with ¯v ⊂ Φ(x). Moreover, e ⊂ X is a ¯v-edge if and only if e ∈ X¯v and e
has trivial projection to the h¯v-factor.
i ) =
Φ(hi) be as in step 2 and let v = fi(¯v). Pick vertex x ∈ Li. Then x ∈ X¯v ⇔ ¯v ∈
Φ(x) ⇔ v ∈ fi(Φ(x)) ⇔ v ∈ (cid:91)gi(x) ⇔ gi(x) ∈ Pv. Thus gi induced an isomorphism
between X¯v ∩ Li and Pv ∩ gi(Li). Let X¯v ∩ Li = ¯Ki× ¯Ii and Pv ∩ gi(Li) = Ki× Ii be
the splitting induced from the splitting of X¯v and Pv as above ( ¯Ki ⊂ h¯v, Ki ⊂ hv,
¯Ii ⊂ [0, d¯v − 1] and Ii ⊂ lv). By (3), gi|X¯v∩Li = gi1 × gi2 with gi1 : ¯Ki → Ki and
gi2 : ¯Ii → Ii. Suppose ¯Ii = [0, a], we identify Ii with [0, a] via gi2 and consistently
identify lv with R.
Since ei is a ¯v-edge, ei ⊂ X¯v. We assume without loss of generality that xi =
ei∩Li ∈ ¯Ki×{a}. Then Mi1 = Li∩Ni = ¯Ki×{a} and Ni = ¯Ki×[a, a+1]. Similarly,
gi(Mi1) = Ki × {a}. Note that gi1 induces an isomorphism from ¯Ki × [a, a + 1]
to Ki × [a, a + 1], this deﬁnes gi+1 : Li+1 = Li ∪ Ni → gi(Li) ∪ (Ki × [a, a + 1]).
Moreover, hv × [a, a + 1], which is the carrier of the hyperplane hv × {a + 1/2},
satisﬁes (hv × [a, a + 1])∩ gi(Li) = Ki×{a}, so gi(Li)∪ (Ki× [a, a + 1]) is a compact
convex subcomplex in X(Γ(cid:48)).
We consider the left action G(Γ(cid:48)) (cid:121) X(Γ(cid:48)) and let α ∈ G(Γ(cid:48)) be the translation
along lv such that α(Ki × {a}) = Ki × {a + 1}. Then α induces an isomorphism

α∗ : (cid:92)Ki × {a} → (cid:92)Ki × {a + 1}. It clear that α∗(ˆx) = (cid:100)α(x) for vertex x ∈ Ki × {a}

Suppose we have already constructed gi and fi. Let ei, hi, Ni and (¯v, Hi, H c

and α sends v-edge to α∗(v)-edge. We deﬁne fi+1 by

(cid:40)

fi+1(z)=

fi(z)
(α∗ ◦ fi ◦ (¯h∗)−1)(z)

if z ∈ Φ(Li)
if z ∈ Φ(Mi2)

50

JINGYIN HUANG

Note that fi(z) = (α∗ ◦ fi ◦ (¯h∗)−1)(z) for z ∈ Φ(Li) ∩ Φ(Mi2) = St(¯v, Φ(Mi1)), so
fi+1 is well-deﬁned. Now we show fi+1 and gi+1 satisfy the compatibility conditions
(2) and (3). Since gi+1|Mi2 = α ◦ gi ◦ p, (p : Mi2 → Mi1 is the parallelism map), it
suﬃces to check p and (¯h∗)−1 satisfy the corresponding compatibility conditions.
We have proved in step 2 that (¯h∗)−1(Φ(x)) = Φ(p(x)) for vertex x ∈ Mi2. Let
e ⊂ Mi2 be a ¯w-edge. Then p(e) is also a ¯w-edge. We also deduce that d( ¯w, ¯v) = 1,
hence (¯h∗)−1( ¯w) = ¯w. It follows that p sends ¯w-edge to (¯h∗)−1( ¯w)-edge.
Let f : F (Γ) → P(Γ(cid:48)) and g : X → X(Γ(cid:48)) be the simplicial embedding and the
cubical embedding obtained by the above induction. Then E = g(X) is a compact
convex subcomplex of X(Γ(cid:48)) and ˆE = f (F (Γ)) ∼= F (Γ). Thus G(Γ) is isomorphic
to a special subgroup of G(Γ(cid:48)). In particular, G(Γ(cid:48)) and G(Γ) are quasi-isometric,
so Γ(cid:48) is also of type II by Corollary 3.24. Next we show G(Γ(cid:48)) is actually prime.
Lemma 5.17. Pick vertex x ∈ E and v ∈ ˆx. Let ¯v = f−1(v). Then

number of components in ˆx \ St(v)
number of components in ˆE \ St(v)

≤ 1
d¯v

.

Recall that d¯v is the number of prime factors at ¯v.
Proof. We use c(K) to denote the number of components in K. By consider the
∼= h¯v × [0, d¯v − 1], we deduce that there is a segment Iv ⊂ E of
g-image of X¯v
length = d¯v − 1 such that it is made of v-edges and it contains x. It follows from
Corollary 3.14 that two vertices of ˆIv are in the same v-branch if and only if they
are in the same component of ˆy \ St(v) for some y ∈ Iv. Thus ˆIv intersects at least
d¯v·c(ˆx\St(v)) many v-branches. The same is true for ˆE and the lemma follows. (cid:3)
Let r : X(Γ(cid:48)) → X(Γ) be the map in Theorem 2.15 and let r∗ : P(Γ(cid:48)) → P(Γ)
be the induced simplicial isomorphism. Then r(E) is a vertex in X(Γ). Moreover,
r∗( ˆE) = (cid:91)r(E) by (1) and (2) of Theorem 2.15. Suppose there exists a non-prime
vertex in ¯u ∈ F (Γ(cid:48)). Let x ∈ E be a vertex and let v ∈ ˆx be the lift of ¯u. Then
Lemma 5.17 implies the stretch factor of r∗ at v (Lemma 5.4) is ≥ d¯v, where
¯v = f−1(v). On the other hand, Lemma 5.4 implies that this stretch factor is
bounded above by the number of prime factors at π ◦ r∗(v), which is equal to d¯v
f→ P(Γ(cid:48)) r∗→ P(Γ) π→ F (Γ) is a
by Remark 5.10 (note that the composition F (Γ)
simplicial isomorphism). Thus ¯u is prime, which is a contradiction.

In summary, we have proved the following result.

Theorem 5.18. Let G(Γ) be a right-angled Artin group of type II. Then there
exists a prime right-angled Artin group G(Γ(cid:48)) such that G(Γ) is isomorphic to a
special subgroup of ﬁnite index in G(Γ(cid:48)).
Remark 5.19. Suppose Γ is of type II. For each vertex v ∈ P(Γ), we pick an
identiﬁcation fv between the collection of v-sub-tiers and a copy of integers Zv.
A v-halfspace is a subcomplex of P(Γ) of form St(v) ∪ f−1
v ([a,∞)) or St(v) ∪
v ((−∞, a]), where a ∈ Zv. We can put a pocset structure on the collection of
f−1
all these halfspaces in a similar way as before. Then the CAT (0) cube complex
associated with this pocset is isomorphic to X(Γ(cid:48)).

We will not use this fact, so we will not give the detailed argument. However,
it is instructive to think about the case when Out(G(Γ)) is ﬁnite. Then the cube
complex associated with the above pocset is actually isomorphic to X(Γ). So the

QUASI-ISOMETRY CLASSIFICATION OF RIGHT-ANGLED ARTIN GROUPS II

51

quasi-isometry rigidity/ﬂexibility of G(Γ) is reﬂected in how hard it is to reconstruct
X(Γ) from P(Γ) via cubulation.

It follows from Corollary 3.24, Theorem 5.18 and Theorem 5.9 that

Theorem 5.20. If G(Γ1) is a right-angled Artin group of type II, then G(Γ2) is
quasi-isometric to G(Γ1) if and only if G(Γ2) is commensurable to G(Γ1). More-
over, there exists a unique prime right-angled Artin group G(Γ) such that G(Γ1)
and G(Γ2) are isomorphic to special subgroups of ﬁnite index in G(Γ).

Now we discuss several applications of the above theorem.

Example 5.21. Let Γ1 be a 5-gon and let Γ2 be a 6-gon. We glue Γ1 and Γ2 along
a vertex star to form Γ and claim Γ is prime. Let ¯v be the only vertex of Γ such
that St(¯v) separates Γ and for i = 1, 2 and let Ci = Γi \ St(¯v). Pick v ∈ P(Γ) such
that π(v) = ¯v and let Bi be a v-branch such that Π(Bi) = Ci. It suﬃces to show
B1 and B2 are not QII.
Suppose the contrary is true and let q be the quasi-isometry such that q∗(B1) =
B2. By Corollary 3.14, there exist vertices x1, x2 ∈ Pv such that (Γi)xi \ St(v) ⊂ Bi
for i = 1, 2 ((Γi)xi ⊂ (Γ)xi
is the lift of Γi). By Remark 3.8 and Lemma 5.7,
q∗((Γ1)x1) = (Γ1)x3 for some vertex x3 ∈ Pv.
It follows from Lemma 3.9 that
q∗(B1) (cid:54)= B2, which is a contradiction.
Theorem 5.20 implies that any G(Γ(cid:48)) quasi-isometric G(Γ) is isomorphic to a
ﬁnite index subgroup of G(Γ). Note that by the same proof, this statement is true
in the case when Γ is obtained by gluing two distinct graphs Γ1 and Γ2 (Out(G(Γi))
is ﬁnite for i = 1, 2) along an isomorphic vertex star.
Example 5.22. We produce two graphs Γ and Γ(cid:48) as below such that P(Γ) and
P(Γ(cid:48)) are isomorphic, but G(Γ) and G(Γ(cid:48)) are not quasi-isometric.

First we show G(Γ) and G(Γ(cid:48)) are not quasi-isometric. Suppose the contrary
is true and let q : G(Γ) → G(Γ(cid:48)) be a quasi-isometry. Pick vertex v ∈ P(Γ) such
that π(v) = ¯v and let v(cid:48) = q∗(v). Then π(v(cid:48)) = ¯v(cid:48). This follows from the fact that
π(v) = ¯v (or π(v(cid:48)) = ¯v(cid:48)) if and only if there are at least two QII classes among
all the v-branches (or v(cid:48)-branches). And this fact follows from the discussion in
Example 5.21 and Corollary 3.14. However, the associated 2-tuple for ¯v and ¯v(cid:48) are
(1,1) and (1,2) respectively, which contradicts Lemma 5.4.
It remains to show P(Γ) and P(Γ(cid:48)) are isomorphic. Let f1 and f2 be two sim-
plicial embeddings from Γ to Γ(cid:48) such that (1) they cover diﬀerent 6-gons in Γ(cid:48);
(2) f1 = f2 when restricted to the 5-gon in Γ. We also use fi to denote the
group monomorphism induced by fi. Let ω ∈ G(Γ) be a geodesic word and write
ω = ω1a1 ··· ωnanωn+1, here ai is a product of powers of elements in St(¯v) for all
i, but ωi does not contain any powers of elements in St(¯v) (ω1 or ωn+1 may be
trivial). By permuting letters in ai, we have ai = ¯vkibi, where bi does not contain
any power of ¯v.

52

JINGYIN HUANG

1a(cid:48)

1 ··· ω(cid:48)

Deﬁne a map h : G(Γ) → G(Γ(cid:48)) by mapping ω to ω(cid:48)

nω(cid:48)
na(cid:48)
n+1 such that
(1) ω(cid:48)
i = f1(ωi) if and only if ki−1/2 is an integer, otherwise ω(cid:48)
i = f2(ωi); (2)
a(cid:48)
i = f1(ai) if and only if the ﬁrst letter of wi+1 is inside the 5-gon, otherwise
i = ¯v(cid:48)(cid:98)ki/2(cid:99) · f1(bi). Given a diﬀerent geodesic word ω1 = ω, we can obtain ω1
a(cid:48)
from ω by using the commutator relations to permute the letters in ω, moreover,
each word in the middle is also a geodesic word. Now it is easy to check that
h is well-deﬁned, and for each S-geodesic l ⊂ G(Γ), there exists a unique S(cid:48)-
geodesic l(cid:48) ⊂ G(Γ(cid:48)) such that h(l) = l(cid:48) up to ﬁnite many points, moreover, if
two S-geodesic are parallel (or orthogonal), then the corresponding h-images are
parallel (or orthogonal), thus h induces a simplicial map h∗ : P(Γ) → P(Γ(cid:48)). We
can deﬁne a map h(cid:48) : G(Γ(cid:48)) → G(Γ) in a similar fashion which serves as the inverse
of h, which would imply that h∗ is actually a simplicial isomorphism.

References

[BH99]

[BJN10]

Martin R. Bridson and André Haeﬂiger. Metric spaces of non-positive curvature, vol-
ume 319 of Grundlehren der Mathematischen Wissenschaften [Fundamental Princi-
ples of Mathematical Sciences]. Springer-Verlag, Berlin, 1999.
Jason A. Behrstock, Tadeusz Januszkiewicz, and Walter D. Neumann. Quasi-isometric
classiﬁcation of some high dimensional right-angled Artin groups. Groups Geom.
Dyn., 4(4):681–692, 2010.

[BKMM12] Jason Behrstock, Bruce Kleiner, Yair Minsky, and Lee Mosher. Geometry and rigidity

of mapping class groups. Geom. Topol., 16(2):781–888, 2012.

[BKS08] Mladen Bestvina, Bruce Kleiner, and Michah Sageev. The asymptotic geometry of

[BN08]

[CN05]

right-angled Artin groups. I. Geom. Topol., 12(3):1653–1699, 2008.
Jason A Behrstock and Walter D Neumann. Quasi-isometric classiﬁcation of graph
manifold groups. Duke Mathematical Journal, 141(2):217–240, 2008.
Indira Chatterji and Graham Niblo. From wall spaces to CAT (0) cube complexes.
International Journal of Algebra and Computation, 15(05n06):875–885, 2005.

[Ger98]

[Hag08]

[HP98]

[CS11]

[EF97]

[Ham05]

[CRSV10] Ruth Charney, Kim Ruane, Nathaniel Stambaugh, and Anna Vijayan. The automor-
phism group of a graph product with no SIL. Illinois J. Math., 54(1):249–262, 2010.
Pierre-Emmanuel Caprace and Michah Sageev. Rank rigidity for CAT (0) cube com-
plexes. Geometric and functional analysis, 21(4):851–891, 2011.
Alex Eskin and Benson Farb. Quasi-ﬂats and rigidity in higher rank symmetric spaces.
Journal of the American Mathematical Society, 10(3):653–692, 1997.
V Gerasimov. Fixed-point-free actions on cubings. Siberian Advances in Mathematics,
8(3):36–58, 1998.
Frédéric Haglund. Finite index subgroups of graph products. Geometriae Dedicata,
135(1):167–209, 2008.
Ursula Hamenstaedt. Geometry of the mapping class groups III: Quasi-isometric rigid-
ity. arXiv preprint math/0512429, 2005.
Frédéric Haglund and Frédéric Paulin. Simplicité de groupes d’automorphismes
d’espaces á courbure négative. Geometry and topology monographs, 1, 1998.
Jingyin Huang. Quasi-isometry rigidity of right-angled artin groups i: the ﬁnite out
case. arXiv preprint arXiv:1410.8512, 2014.
Jingyin Huang. Top dimensional quasiﬂats in cat(0) cube complexes. arXiv preprint
arXiv:1410.8195, 2014.
Frédéric Haglund and Daniel T. Wise. Special cube complexes. Geom. Funct. Anal.,
17(5):1551–1620, 2008.
G Christopher Hruska and Daniel T Wise. Finiteness properties of cubulated groups.
Compositio Mathematica, 150(03):453–506, 2014.
Sang-hyun Kim and Thomas Koberda. Embedability between right-angled Artin
groups. Geometry & Topology, 17(1):493–530, 2013.
Bruce Kleiner and Bernhard Leeb. Rigidity of quasi-isometries for symmetric spaces
and Euclidean buildings. Comptes Rendus de l’Académie des Sciences-Series I-
Mathematics, 324(6):639–643, 1997.

[Hua14b]

[Hua14a]

[KK13]

[KL97]

[HW08]

[HW14]

QUASI-ISOMETRY CLASSIFICATION OF RIGHT-ANGLED ARTIN GROUPS II

53

[Lau95]

[Nic04]
[Rol98]

[Sag95]

[Sag12]

[Ser89]

Michael R Laurence. A generating set for the automorphism group of a graph group.
Journal of the London Mathematical Society, 52(2):318–334, 1995.
Bogdan Nica. Cubulating spaces with walls. Algebr. Geom. Topol, 4:297–309, 2004.
Martin Roller. Poc-sets, median algebras and group actions. An extended study of
Dunwoody’s construction and Sageev’s theorem, 1998.
Michah Sageev. Ends of group pairs and non-positively curved cube complexes. Proc.
London Math. Soc. (3), 71(3):585–617, 1995.
Michah Sageev. CAT(0) cube complexes and groups. IAS/Park City Mathematics
Series, 2012.
Herman Servatius. Automorphisms of graph groups. Journal of Algebra, 126(1):34–60,
1989.

