6
1
0
2

 
r
a

 

M
1
2

 
 
]
S
D
h
t
a
m

.

[
 
 

1
v
5
8
3
6
0

.

3
0
6
1
:
v
i
X
r
a

Consensus and Voting on Large Graphs:

An Application of Graph Limit Theory

Barton Lee

School of Mathematics and Statistics

The University of New South Wales

Sydney NSW 2052, Australia

barton.lee@unswalumni.com

March 22, 2016

Abstract

Building on recent work by Medvedev (2014) we establish new connections between
a basic consensus model, called the voting model, and the theory of graph limits. We
show that in the voting model if consensus is attained in the continuum limit then
solutions to the ﬁnite model will eventually be close to a constant function, and a class
of graph limits which guarantee consensus is identiﬁed. Additionally, we introduce
the notion of perturbed graph sequences as a tool to model noisy data or random
shocks, and investigate consensus on perturbed systems. Finally, it is proven that the
dynamics in the continuum limit can be decomposed as a direct sum of dynamics on
the connected components, using Janson’s deﬁnition of connectivity for graph limits.
This implies that without loss of generality it may be assumed that the continuum
voting model occurs on a connected graph limit.

1

Introduction

Given a group of agents voting on whether or not to implement a policy, when and how can
the group come to an agreement? This is a consensus problem. Models and algorithms which
solve consensus problems are important in the theory of control systems [14, Section 16.2]
and economics [8]. In this paper we focus on a particular model of the consensus problem
called the voting model. This model ﬁts into the framework considered by Medvedev [15],
who applied graph limit theory to dynamical systems.

1

Our key result shows that if the solution to the continuum limit of the voting model
reaches consensus then solutions to the ﬁnite model on suﬃciently large graphs will eventually
be close to a constant function. Futhermore, building on our concept of twin-kernels a
class of graph limits which guarantee consensus is identiﬁed. We introduce a notion of
perturbed graph sequences which can model noisy data and random shocks and then prove
a convergence result for solutions to the voting model on perturbed graph sequences. A
close relationship between the dynamics of the voting model on sets of weakly isomorphic
graph limits is shown. Finally, we prove that the dynamics in the continuum limit can be
decomposed as a direct sum of the dynamics on connected components. This means that
without loss of generality we may assume that the dynamics of the continuum model occur
on a connected graph limit. These results provide motivation for the continued study of
graph limit theory in the consensus protocol literature.

The structure of the remainder of this paper is as follows.

In Section 2 we will give
a brief introduction to the voting model in the ﬁnite setting and Section 3 will review
some basic results from the graph limit theory literature whilst also introducing a notion
of perturbed graph sequences. Section 4 extends the model to the continuum setting and
Section 5 analyses solutions on connected components. Finally Section 6 studies consensus
in the continuum model and its relationship with the ﬁnite model.

Some of the results (such as 4.7, 4.9, 4.10, 5.2, 6.7 and 6.8) presented in this paper
extend easily to the more general class of nonlinear heat equation initial value problems
considered by Medvedev in [15]. Other results such as 6.1 and 6.9 rely on the Conservation
Law ( 5.1) and may be extended with this added condition. The remaining results rely on
speciﬁc aspects of the voting model we consider. However, in any case the methods used
throughout this paper may prove useful for researchers interested in initial value problems
on large graphs and results about consensus.

2 Finite voting model

Various voting models have been formulated in the consensus problem literature [1, 5]. We
focus on an elementary form which is also studied by [17] and [21]. Section 4 will then extend
the voting model to a new setting.

We ﬁrst begin with some basic deﬁnitions from graph theory:

A graph is an ordered pair of sets, say G = (V, E), with V denoting the vertex set and E
denoting the edge set of the graph. The elements of E are two element subsets of V . This
deﬁnition implies that the graph is simple; that is, the edge set contains no loops or multiple

2

edges. For more information on graphs we refer the reader to [4].

An edge-weighted graph is a graph H = (V, E) together with a sequence {βij}i,j∈V of
real edge weights, such that βij = βji for all i, j ∈ V and if βij 6= 0 then {i, j} is an edge
of H. A simple graph is a special case of an edge-weighted graph where edge weights are
0-1 valued with βii = 0 for all i ∈ V . For notational simplicity we will only consider edge
weights which are contained in the interval [−1, 1]. The results in this paper follow similarly
for edge weights contained in any larger interval say [−M, M] for some M > 1.

Given an edge-weighted graph G on vertex set [n] := {1, 2, . . . , n} with edge weights
{βij}i,j∈[n], our voting model arises from the following process. Begin with a set of voters
[n], each with initial opinions denoted by ui(0) ∈ R for i ∈ [n]. The inﬂuence of voter i on
voter j (i, j ∈ [n]) is represented by the edge weight βij. At each time step (or inﬁnitesimal),
every voter i ∈ [n] independently and uniformly at random chooses another voter j ∈ [n]
and updates their opinion such that

∆ui(t)

∆t

= βij(cid:16)uj(t) − ui(t)(cid:17).

(2.1)

If βij = 1, then (2.1) implies that voter i adopts voter j’s opinion in the next time step,

while if βij = −1, then voter i will diverge from voter j’s opinion in the next time step.

The quantity of focus in this paper will be the expected value attained from (2.1). That

is,

E"∆ui(t)

∆t # = 1

n

nXj=1

βij(cid:16)uj(t) − ui(t)(cid:17).

(2.2)

Equivalently, the right hand side of (2.2) could be realised, without the expectation operator,
by considering a model which at each stage every voter updates their opinion based on the
average of the voters in the graph, scaled according to the edge weights βij.

It should be noted that this process represents more general systems than voters with
opinions. In particular, the aforementioned process has been used in autonomous vehicle
control systems [22], to model the spread of alcohol abuse [7] and neuron-network activity
[19].

We will exclusively consider time to be continuous with t ∈ R≥0. Thus the voting
process described above can be expressed as an initial value problem (IVP). Vectors and
vector-valued functions will be written in bold font whilst components will not.

For any positive integer n, let g ∈ Rn and let Hn be an edge-weighted graph with vertex
set [n] and edge weights {βij}i,j∈[n]. Then the evolution of voters’ opinions is described by

3

the solution u : R≥0 → Rn of the IVP

dui(t)

dt

= 1

u(0) = g.

j=1 βij(cid:16)uj(t) − ui(t)(cid:17)
nPn



We now deﬁne consensus, this will be a key focus of Section 5.

for all i ∈ [n] and t ∈ R>0,

(2.3)

Deﬁnition 2.1. For any positive integer n, let g ∈ Rn and let Hn be an edge-weighted
graph on vertex set [n]. If u is a solution to (2.3) such that

lim
t→∞

i,j∈[n]|ui(t) − uj(t)| = 0,
max

(2.4)

then we say consensus is attained by u.

Example 2.2. For any positive integer n, let Hn be an edge-weighted graph on the vertex
set [n] such that the edge weights are all equal to 1. Then Hn will attain consensus for
every initial condition vector g ∈ Rn. Whilst, if the edge weights are all equal to −1 then u
⋄
reaches consensus if and only if g is a constant-valued vector.
j=1 βij, we

By considering the matrix D = 1

can express (2.3) as a linear system of diﬀerential equations via

n(cid:0)B − diag(β1, β2, . . . , βn)(cid:1), where βi = Pn


u(0) = g.

= D u(t),

du(t)

dt

u(t) = eDt

g,

(2.5)

(2.6)

The IVP (2.5) has a unique solution

so questions of interest such as whether the agents reach a consensus and the time taken to
arrive at this consensus are completely determined via the eigenvalues of the (real, symmet-
ric) matrix D.

3 Graph limit theory

The theory of graph limits was introduced by Lov´asz and Szegedy in 2006 [13] and then
further developed in a series of papers by Borgs et al.
[2, 3]. A key goal of Lov´asz and
Szegedy was to understand large graph structures by characterising convergence for sequences
of graphs which grow unboundedly, thereby constructing a natural ‘limit object’.

4

In Section 3.1 we present some basic deﬁnitions and results from the theory of graph
limits, and describe a canonical example of a convergent graph sequence. We introduce
the deﬁnition of a perturbed graph sequence in Section 3.2. In Section 3.3 we review the
appropriate notion of connectivity for graph limits. For an overview of the theory and its
applications we refer the interested reader to the excellent monograph by Lov´asz [12].

3.1 Preliminary theory

The theory of graph limits is motivated using the graph-theoretic notion of a homomorphism
density. This notion is then used to deﬁne convergence of graph sequences. Alternatively,
we will focus on an equivalent deﬁnition formulated using a metric which we review in this
section.

Throughout this paper we will use the term measurable, this will always refer to the
Lebesgue measure with Borel σ-algebra.
It is also important to note that a number of
the deﬁnitions and results reviewed in this section have been stated without an additional
necessary requirement of uniformly bounded edge weights since this is automatically satisﬁed
by our assumption that edge weights are contained in [−1, 1]. Lastly, since this paper is only
concerned with edge-weighted graphs rather than both vertex and edge weighted graphs, we
will restrict some deﬁnitions to this special case without explicit warning.

Let H be an edge-weighted graph, the pixel kernel of H is a measurable function from
[0, 1]2 to [−1, 1] which represents the graph H and is denoted by WH . The construction is as
follows: let H = (V, E) be an edge-weighted graph with edge weights {βij}i, j∈V . Partition
[0, 1] into |V | measurable subsets of equal measure, say {Ii}i∈V . Then deﬁne the pixel kernel
of H:

WH(x, y) = βij

if (x, y) ∈ Ii × Ij for some i, j ∈ V .

(3.1)

This construction is not unique, however given a graph, the set of pixel kernels arising via
(3.1) can be considered to be equivalent via the weakly isomorphic relation (deﬁned later).

We now introduce the cut norm which is used to construct the cut distance and deﬁne

convergence for graph sequences. Let W be a pixel kernel the cut norm of W is

kWk✷ = sup

ZS×T

S,T ⊆[0,1](cid:12)(cid:12)(cid:12)(cid:12)(cid:12)

where the subsets S, T are required to be measurable. Given a pixel kernel U and a map
ϕ from [0, 1] to [0, 1] we deﬁne the ϕ pull-back of U by U ϕ : (x, y) 7→ U(ϕ(x), ϕ(y)). Let

W (x, y) dx dy(cid:12)(cid:12)(cid:12)(cid:12)(cid:12)

,

5

S[0, 1] denote the set of measure-preserving maps from [0, 1] into [0, 1]. Then the cut distance
between two pixel kernels W, U is

δ✷(W, U) = inf

ϕ∈S[0,1]kW − U ϕk✷.

It should be noted that this ‘distance’ function is only a pseudo-distance function. This
issue can be rectiﬁed by considering the quotient space of weakly isomorphic kernels (to be
deﬁned), however, we will not need to explicitly consider the quotient space in this paper.

Deﬁnition 3.1. [2, Theorem 2.6]
A sequence of edge-weighted graphs {Hn}n∈N is said to converge if {WHn}n∈N is a Cauchy
sequence with respect to the cut distance.

An interesting consequence of this deﬁnition is that the space of graphs, or equivalently
pixel kernels, is not closed under the cut distance. We now consider the larger space of
kernels which deﬁnes the completion of this space [2, Corollary 3.9].

Deﬁnition 3.2. A kernel is symmetric, measurable function W : [0, 1]2 → [−1, 1]. In the
special case that W : [0, 1]2 → [0, 1] we call W a graphon. We denote the set of all kernels
and graphons by W1 and W0, respectively.

Informally a kernel (or graphon) can be thought of as a generalisation of the adjacency
matrix of an edge-weighted graph which has a continuum number of vertices. It should be
noted that the cut norm and cut distance deﬁnitions extend naturally to the larger space of
kernels.

We now deﬁne convergence of a graph sequence to a kernel via the cut distance.

Deﬁnition 3.3. [2, Theorem 2.6]
Let {Hn}n∈N be a sequence of edge-weighted graphs and let W ∈ W. Then Hn → W as
n → ∞ if and only if δ✷(WHn, W ) → 0 as n → ∞.

A useful observation which will be used throughout this paper is the following:

δ✷(W, U) ≤ kW − Uk✷ ≤ kW − Uk2,

(3.2)

here k · k2 denotes the L2-norm on [0, 1]2. Thus, convergence in L2-norm of a sequence of
a pixel kernels (recall the construction given in (3.1)) is suﬃcient to prove convergence of a
sequence of graphs with respect to 3.1.

6

We now introduce the weakly isomorphic relation, denoted ∼, which identiﬁes sets of
kernels which all have a cut distance of zero apart [12, Corollary 10.34]. Let W, U ∈ W1 be
kernels, we say that W and U are weakly isomorphic if and only if

δ✷(U, W ) = 0.

(3.3)

This relationship can also be characterised using measure-preserving maps.

Theorem 3.4. [12, Section 8.2.5 and Corollary 10.35(a)]
A pair of kernels W, U ∈ W1 are weakly isomorphic if and only if there exists two measure-
preserving maps, say ϕ, φ ∈ S[0, 1], such that

W ϕ = U φ

almost everywhere.

In the special case that W and U are step kernels; that is, kernels which are also step
functions, then there exists a pair of invertible measure-preserving maps which satisfy the
above statement.

It should be noted that for every edge-weighted graph H the pixel kernel of H is a step
kernel. We now present a canonical example of a graph sequence which converges to a given
kernel. This construction was utilised by [15] and will be referred to throughout this paper.

Example 3.5. [15, Section 5] Given W ∈ W1, for every positive integer n deﬁne the partition
Pn of [0, 1] by

Pn =(I n

i

n

: I n

i =(cid:18)i − 1
1 =(cid:2)0, 1

i

n(cid:21) for i ∈ [n]).

,

For completeness we can redeﬁne I n
that follow. We now construct the sequence of edge-weighted graphs Hn on vertex set [n]
with edge weights

n(cid:3), however, it makes no diﬀerence for the results

βn

ij = n2ZI n

i ×I n

j

W (x, y) dx dy

for all i, j ∈ [n].

Medvedev [15] proved that WHn converges to W in L2-norm; that is

kW − WHnk2 → 0

as n → ∞.

Then by (3.2) and 3.3 this suﬃces to prove that the graph sequence {Hn}n∈N converges to
⋄
W .
Remark 3.6. The L2-bound utilised in 3.5 may seem unnecessarily large, since the L1-norm
would have suﬃced to prove the same result. Indeed this is true. The L2-norm has been
chosen with hindsight and will be referred back to in 4.4 and 4.7.

7

3.2 Perturbed graph sequences and convergence

This section will introduce a new concept of perturbed graph sequences which allow limited
amounts of variation in the edge sets of graphs in a given sequence. This concept aims to
model the degree of uncertainty or random shocks researchers may experience when observing
networks in the real world.

Deﬁnition 3.7. For each positive integer n, let Hn and H ′
same vertex set Vn with edge weights denoted by {βn
Suppose that the graph sequences {Hn}n∈N,{H ′
in [−1, 1] and there exists a function r(n) ∈ o(n2) such that

n be edge-weighted graphs on the
ij }i,j∈Vn, respectively.
n}n∈N have edge weights uniformly contained

ij}i,j∈Vn and {β′ n

(cid:12)(cid:12)(cid:8)(i, j) ∈ V 2

n : βn

ij 6= β′ n

ij(cid:9)(cid:12)(cid:12) ≤ r(n)

for all n ∈ N.

Then we say that {H ′

n}n∈N is a o(n2)-perturbation of the graph sequence {Hn}n∈N.

We now prove that convergence to a graph limit is robust to perturbations of graph

sequences.

Lemma 3.8. For each positive integer n, let Hn be an edge-weighted graph on the vertex
set [n]. If the graph sequence {Hn}n∈N converges to the kernel W ∈ W1 then any o(n2)-
perturbation of {Hn}n∈N, say {H ′
Proof. Denote the edge weights of Hn and H ′
following pixel kernels of Hn and H ′

n}n∈N, also converges to W .

ij , respectively. Deﬁne the

n (see Equation (3.1))

ij and β′ n

n as βn

Wn = WHn

and W ′

n = WH ′

n

for every positive integer n.

Both of these kernels have n2 steps in [0, 1]2 of measure 1
perturbation of {Hn}n∈N, there exists a function r(n) ∈ o(n2) such that
for all n ∈ N.

ij 6= β′ n

n2 . Since {H ′

(cid:12)(cid:12)(cid:8)(i, j) ∈ [n]2 : βn

ij(cid:9)(cid:12)(cid:12) ≤ r(n)

Further, since both graph sequences {Hn}n∈N and {H ′
contained in [−1, 1]. For every positive integer n, we have

n}n∈N have edges weights uniformly

n}n∈N is a o(n2)-

(3.4)

(3.5)

ij − β′n
|βn
n → W it suﬃces to prove that δ✷(W ′
As seen in 3.5, to prove H ′

for all i, j ∈ [n].

ij | ≤ 2

triangle inequality and Equation (3.2) we attain the following upper bound:

n, W ) → 0. Using the

δ✷(W ′

n, W ) ≤ δ✷(W ′

n, Wn) + δ✷(Wn, W ) ≤ kW ′

n − Wnk2 + δ✷(Wn, W )

(3.6)

8

The second term can be made arbitrarily small for large n, since Hn → W by assumption.
We now prove that the ﬁrst term can also be made arbitrarily small for large n, by expressing
the integral as a summation over the steps of Wn and W ′

n, as follows:

kWn − W ′

nk2

n(x, y)(cid:1)2

2 =Z[0,1]2(cid:0)Wn(x, y) − W ′
= Xi,j∈[n]
≤ Xi,j∈[n]

ij 6=β ′n
22 1{βn
ij }
n2

ij − β′n
(βn

ij)2 1
n2

r(n)
≤ 4
n2
= o(1).

dx dy

by (3.5)

by (3.4).

(3.7)

Thus the ﬁrst term in (3.6) can be made arbitrarily small for large n and we conclude that
δ✷(W ′

n, W ) → 0. Applying 3.3 proves that H ′

n → W as n → ∞, as required.

✷

The size of the perturbation in 3.8 is tight in the following sense. Let {Hn}n∈N be a
sequence of growing edge-weighted graphs. If {H ′
n}n∈N is a perturbed edge-weighted graph
sequence which alters cn2 edges for some ﬁxed c > 0, then {Hn}n∈N and {H ′
n}n∈N need not
converge to the same limit. To see this suppose that c > 0 is suﬃciently small then for every
positive integer n consider the simple graphs Gn = ([n],∅) and G′
n = ([n], E′) such that
|E′| = cn2. The cut distance between the pixel kernels of Gn and G′
n denoted by Wn and
W ′
n) = c > 0 for all positive integers n. Hence the graph
sequences cannot converge to the same limit.

n, respectively, will be δ✷(Wn, W ′

3.3 Connectivity in graph limit

We will make use of the notion of connectivity for graph limits, introduced by Janson [11],
which we review here.

Deﬁnition 3.9. [11, Deﬁnition 1.12]
A kernel W ∈ W1 is connected if for every subset S ⊆ [0, 1] with 0 < λ(S) < 1, we have

Here λ(S) denotes the Lebesgue measure of the set S ⊆ [0, 1].

ZS×(cid:0)[0,1]\S(cid:1) |W (x, y)| dx dy > 0.

9

If two kernels are weakly isomorphic and one is connected, then so is the other [11,
Theorem 1.16]. Hence we say that the equivalence class of kernels weakly isomorphic to W
is connected if W is connected, and note that this is well-deﬁned.

Janson proved that every kernel can be decomposed as a direct sum of connected kernels.
To describe this decomposition we need some deﬁnitions. Given an interval J = [M, N] ⊆
[0, 1], we deﬁne the positive aﬃne map of J onto [0, 1] as follows:

φ : J → [0, 1]

x 7→

x − M
M − N

=

x − M
λ(J)

.

(3.8)

Deﬁnition 3.10. Let {Wi}i∈I ⊆ W1 be a countable family of kernels and let {ai}i∈I be a

countable family of real postive numbers such that Pj∈I ai = 1. Then the direct sum of

{Wi}i∈I with weights {ai}i∈I is the kernel denoted by
aiWi ∈ W1.

(3.9)

Mi∈I

We interpret (3.9) by partitioning [0, 1] into intervals Ji of Lebesgue measure ai for i ∈ I
and denoting the positive aﬃne map of Ji onto [0, 1] by φi (see (3.8)). Then

(cid:16)Mi∈I

aiWi(cid:17)(x, y) =

Wk(cid:0)φk(x), φk(y)(cid:1)

0

if x, y ∈ Jk for some k ∈ Z+,
otherwise.

(3.10)

Lemma 3.11. [11, Theorem 1.5]
Let W ∈ W1. Then there exist a countable family of connected kernels, {Wi}i∈I ⊆ W1, and

a corresponding family of positive real numbers {ai}i∈I withPi∈I ai = 1 such that

W =Mi∈I

aiWi.

4 Voting on large graphs and graph limits

Extending the voting model to kernels is motivated by two observations. Firstly, many
modern-day networks such as the internet are for all practical purposes inﬁnitely large.
Thus it may be more appropriate to consider the voting model in the setting of graph limits.
Secondly, the behaviour of solutions to the ﬁnite voting model are completely determined
via eigenvalues and eigenvectors (recall (2.6)). However, for suﬃciently large graphs it is
computationally infeasible to compute these values and vectors. Approximating a large

10

∂u(x,t)

∂t

u(0) = g.

0 W (x, y)(cid:16)u(y, t) − u(x, t)(cid:17)dy
=R 1

for all x ∈ [0, 1] and t ∈ R>0,

(4.1)



graph by a kernel provides an alternative method for approximately solving the dynamics of
the IVP (2.3) on the graph.

We begin by presenting the voting model on a kernel. Let W ∈ W1 and g ∈ L∞([0, 1]).

Then the continuum limit of (2.3) can be expressed by u : R≥0 → L∞([0, 1]) such that

Here, and throughout this paper, the integral sign refers to Lebesgue integration. Re-
placing IVPs such as (2.3) with the continuum limit has attracted interest in a number of
papers [7, 20, 23]. However as pointed out by Medvedev [15], “a rigorous justiﬁcation for
taking the continuum limit in (such models) was lacking”. In light of this, Medvedev [15]
showed that the theory of graph limits could be used to prove that the continuum limit of
such dynamical systems can approximate the dynamics on large ﬁnite graphs, under certain
conditions.

First we present an existence and uniqueness result which shows that the continuum limit
IVP (4.1) is well-posed; allowing the voting model to be extended to the continuum setting.
The result considers the space of continuously diﬀerentiable vector-valued functions from R
to L∞([0, 1]), denoted by C 1(R, L∞([0, 1])). This space is equipped with the following norm:
let u ∈ C 1(R, L∞([0, 1])) then

kukC(R,L∞([0,1])) = sup

0≤t<∞ ku(t)k∞ = sup

0≤t<∞

ess sup
x∈[0,1]

|u(x, t)|,

(4.2)

where ess sup denotes the essential supremum. The theorem follows as a special case of [15,
Theorem 3.2].

Theorem 4.1. (Existence and Uniqueness)

Let W ∈ W1 and g ∈ L∞(cid:0)[0, 1](cid:1). Then the IVP (4.1) has a unique solution in C 1(cid:16)R, L∞(cid:0)[0, 1](cid:1)(cid:17).

For the remainder of this paper when we refer to ‘the’ solution of the IVP (4.1) this will
always mean the unique solution in C 1(R, L∞([0, 1])) described above. We now introduce an
inﬁnite analogy of 2.1.

Deﬁnition 4.2. Let A ⊆ [0, 1] of nonzero measure. We say that consensus on A is attained
if

lim
t→∞

(x,y)∈A2 |u(x, t) − u(y, t)| = 0.
ess sup

(4.3)

If A = [0, 1] then we say consensus is attained.

11

Example 4.3. The constant 1-valued graphon attains consensus for every g ∈ L∞([0, 1]),
while, the constant −1-valued kernel reaches consensus if and only if g is a constant valued
⋄
function.
By applying Medvedev’s convergence result [15, Theorem 5.2] we justify the use of the
continuum limit (4.1). We show that under certain conditions the continuum limit approxi-
mates the solutions to the voting model on suﬃciently large graphs. First consider an IVP
in the form of (4.1) with kernel W and initial condition function g ∈ L∞([0, 1]). We deﬁne
a sequence of IVPs with the n-th IVP corresponding to the voting model on the graph Hn
(as deﬁned in 3.5) and initial condition gn deﬁned below:

n

i−1

g(y) dy

gn(x) =Z i
ni. This can naturally be interpreted as a vector in Rn, say g

for each i ∈ [n] and for all x ∈ I n
i ,

n is the value of the function gn on I n
i .

n

where I n
n. Where the i-th component of the vector g

n , i

(4.4)

(n) for each

Thus, the n-th approximate IVP is

= 1

dun
i (t)
dt
n(0) = g

nPn

(n).

ij(cid:0)un

j=1 βn

j (t) − un

i (t)(cid:1)

for all i ∈ [n] and t ∈ R>0,

(4.5)

i =(cid:16) i−1


u

This is equivalent to the continuum IVP with step kernel Wn = WHn (see (3.1)) and step

for all x ∈ [0, 1] and t ∈ R>0,

(4.6)

function gn (described in (4.4))

∂un(x,t)

∂t

=R 1
0 Wn(x, y)(cid:0)un(t) − un(t)(cid:1) dy

un(x, 0) = gn(x),



in the sense that un(x, t) = un

i (t) for all x ∈ I n
i .

Lemma 4.4. Let g ∈ L∞([0, 1]) and let W ∈ W1. Deﬁne gn and Wn for n ∈ N as in (4.4)
and 3.5, respectively. Then

kg − gnk2 → 0

and

kW − Wnk2 → 0.

Proof. The second result was proven in 3.5 and the ﬁrst follows similarly.

✷

In a similar manner to (4.2), we deﬁne the C([0, T ]; L2([0, 1]))-norm as follows: let u ∈

C([0, T ]; L2([0, 1])) then

kukC([0,T ];L2([0,1])) = max

t∈[0,T ]ku(t)k2.

We now present a key result, which follows as an application of [15, Theorem 5.2].

12

Theorem 4.5. Let W ∈ W1 and let g ∈ L∞([0, 1]). If {un}n∈N is a sequence of solutions
to IVPs of the form (4.1) with initial conditions functions {gn}n∈N ⊆ L∞([0, 1]) and kernels
{Wn}n∈N ⊆ W1 and u is a solution to the IVP (4.1) with initial condition g and kernel W ,
then for any 0 < T < ∞

ku − unkC([0,T ];L2([0,1])) ≤ kg − gnk2

2 +

C1kW − Wnk2

C2

!exp(C2T ),

(4.7)

where C1, C2 are positive constants independent of n. Furthermore, if each Wn and gn is
given by the construction in 3.5 and (4.4) then for any 0 < T < ∞
as n → ∞.

ku − unkC([0,T ];L2([0,1])) → 0

For the voting model, 4.5 shows that solutions to the IVP (4.5) can be approximated by
the graph limit IVP (4.1). However, in general replacing IVPs on sequences of convergent
graphs with the IVP on their graph limit does not guarantee convergence [18].

In 3.8, we showed that the graph limit of a convergent sequence of graphs was robust
to o(n2)-perturbations (recall 3.7). We now extend this notion to solutions of IVPs on
graphs. This result will provide a neat extension of 4.5 which may be useful in an applied
setting where the approximate graphs Hn are only known within a certain degree of accuracy.
Alternatively, we may also interpret o(n2)-perturbations of IVPs (to be deﬁned below) as
small random shocks to the dynamical system, which has also become a recent focus in
applied research ([10, Section 11.4] and [17]).

Deﬁnition 4.6. Given a sequence of edge-weighted graphs {Hn}n∈N on vertex sets [n] and a
(n) ∈ Rn, we can deﬁne a sequence of IVPs each of the
sequence of initial condition vectors g
n}n∈N be a o(n2)-perturbation of the graph sequence {Hn}n∈N.
form given by (2.3). Let {H ′
The o(n2)-perturbed sequence of IVPs is the sequence of IVPs attained by replacing each Hn
with H ′
n in the IVPs of the form (2.3) for each n. Note that the initial condition vector for
each IVP remains unchanged.

We can equivalently consider these two sequences of IVPs on graphs as sequences of
IVPs on step kernels with initial conditions given by step functions. In particular for each
n, the step kernels are given by Wn = WHn and W ′
n (see Equation (3.1)) and initial
condition step function for each i ∈ [n] is deﬁned as

n = WH ′

g(x) = g(n)

i

for all x ∈(cid:16) i − 1

n

,

i

ni.

To distinguish between the two solutions we use superscript u
solution and the subscript un to denote the solution with image in L∞([0, 1]).

n to denote the vector-valued

13

u

Corollary 4.7. Let W ∈ W1 and let g ∈ L∞([0, 1]). If u is a solution to the IVP (4.1) and
n is the sequence of solutions to the sequence of o(n2)-perturbed IVPs described in (4.6)
′
then for any 0 < T < ∞

ku − u

′

nkC([0,T ];L2([0,1])) → 0

as n → ∞.

Proof. First apply the bound on ku− u
is,

′

nkC([0,T ];L2([0,1])) given by Equation (4.7) in 4.5; that

nkC([0,T ];L2([0,1])) ≤ kg − gnk2

′

2 +

C1kW − W ′

nk2

C2

!exp(C2T ),

ku − u

for some positive constants C1, C2 independent of n. Then the triangle inequality for kW −
W ′

nk2 gives

′

ku − u

nkC([0,T ];L2([0,1]))

≤ kg − gnk2

2 +

C1(cid:0)kW − Wnk2 + kWn − W ′
nk2(cid:1)

C2

!exp(C2T ).

This can be made arbitrarily small for large n by (3.7) and 4.4.

✷

The theory of graph limits identiﬁes graphs and kernels which have a cut distance of zero
apart via the weakly isomorphic relation. A natural question to ask of the voting model is
whether this identiﬁcation also leads to similar dynamics. To the best of our knowledge, this
relationship has not been studied elsewhere.

First, recall the pull-back of a kernel. Given a measure-preserving map ϕ ∈ S[0, 1], we

similarly deﬁne the pull-back of the function u : [0, 1] × R → R and g : [0, 1] → R as

uϕ(x, t) = u(ϕ(x), t)

and

gϕ(x) = g(ϕ(x)).

Proposition 4.8. Let W ∈ W1 and let g ∈ L∞([0, 1]). If u is the solution to the IVP (4.1)
ϕ solves the IVP (4.1)
with W and g then for any measure-preserving map ϕ ∈ S[0, 1], u
with W ϕ and g

ϕ.

Proof. Let u be a solution of the IVP with W and g; that is, u ∈ C 1(R, L∞([0, 1])) and

0 W (x, y)(cid:16)u(y, t) − u(x, t)(cid:17)dy
=R 1

for all x ∈ [0, 1] and t ∈ R>0,

(4.8)

∂u(x,t)

∂t

u(0) = g.



14

For an arbitrary measure-preserving map ϕ ∈ S[0, 1], we also have that u
So to prove the proposition it suﬃces to show that u
W and g replaced with W ϕ and g

ϕ, respectively. That is,

ϕ ∈ C 1(R, L∞([0, 1])).
ϕ satisﬁes the conditions of (4.8) with

∂uϕ(x,t)

0 W ϕ(x, y)(cid:16)uϕ(y, t) − uϕ(x, t)(cid:17)dy
=R 1

ϕ.

∂t
ϕ(0) = g

u

for all t ∈ R>0,

(4.9)

Starting with the right hand side of the ﬁrst condition of (4.9), we have



0

Z 1
W ϕ(x, y)(cid:0)uϕ(y, t) − uϕ(x, t)(cid:1) dy
=Z 1
W (ϕ(x), ϕ(y))(cid:0)u(ϕ(y), t) − u(ϕ(x), t)(cid:1) dy.

0

(4.10)

Since ϕ ∈ S[0, 1] is a measure-preserving map we have that:
f : [0, 1] → R

for all integrable functions

Z 1

0

f (ϕ(x))dx =Z 1

0

Thus, applying (4.11) to (4.10) we attain

0

Z 1
W ϕ(x, y)(cid:0)uϕ(y, t) − uϕ(x, t)(cid:1) dy
=Z 1
W (ϕ(x), y)(cid:0)u(y, t) − u(ϕ(x), t)(cid:1) dy
(cid:12)(cid:12)(cid:12)(cid:12)

0
∂u(w, t)

∂uϕ(x, t)

w=ϕ(x)

∂t

=

=

∂t

f (x)dx.

(4.11)

by Equation (4.11),

by (4.8),

since ϕ does not act on t.

This proves the ﬁrst condition in (4.9). The second condition u
from the second condition in (4.8). This completes the proof.

ϕ(0) = g

ϕ follows directly

✷

Lemma 4.9. Let W, U ∈ W1 such that W ∼ U and let g ∈ L∞([0, 1]). If u is the solution
to the IVP (4.1) with W and g then there exists two measure-preserving maps ϕ, φ ∈ S[0, 1]
such that u

ϕ solves the IVP (4.1) with U φ and g

ϕ.

Proof. Since W ∼ U there exists two measure-preserving maps ϕ, φ ∈ S[0, 1] such that
W ϕ = U φ almost everywhere ( 3.4). Thus, the lemma follows from 4.8 by replacing W ϕ
with U φ.

✷

15

Corollary 4.10. Let W, U ∈ W1 be step kernels and u be the solution of the IVP (4.1) for
some initial condition function g ∈ L∞([0, 1]). If W ∼ U then there exists an invertible
measure preserving map ψ ∈ S[0, 1] such that u
Proof. Since W and U are weakly isomorphic step kernels by 3.4 there exists two invertible
measure preserving maps ϕ, φ such that W ϕ = U φ almost everywhere. Deﬁne ψ = ϕ◦φ which
is again an invertible measure-preserving map and W ψ = U almost everywhere. Applying
4.8 with ψ then completes the proof.

ψ solves the IVP (4.1) with U and g

ψ.

✷

5 Connected components and decomposing solutions

This section will present some basic properties of solutions to the continuum voting model.
These include the Conservation Law which follows from [16, Lemma 3.5] and a result which
decomposes the solutions of the continuum IVP (4.1) into solutions on the connected com-
ponents of a kernel.

Lemma 5.1. (Conservation Law)
Let W ∈ W1 be a kernel and let g ∈ L∞([0, 1]). If u is the solution of the IVP (4.1) then

Z 1

0

u(x, t) dx =Z 1

0

g(x) dx

for any 0 ≤ t < ∞.

(5.1)

✷

Proof. This proof follows similarly to that of [16, Lemma 3.5].

In the ﬁnite setting it can be shown that the dynamics of the model on connected com-
ponents of the graph are self-contained. This is a convenient result since, without loss of
generality, it can be assumed that the graph on which the dynamics occur is connected. We
now extend this characterisation to the continuum limit, utilising the deﬁnition of connect-
edness provided in 3.9.

Lemma 5.2. Let W ∈ W1 and g ∈ L∞([0, 1]). If u solves the IVP (4.1) then there ex-
ists a countable family of positive real numbers {ai}i∈I and a unique family of functions in
{ui}i∈I ⊆ C 1(R, L∞([0, 1])) such that

u(t) =Mi∈I

aiui(t),

where ui are solutions to the IVP (4.1) on a connected kernel. We interpret this direct sum
in a similar way to 3.10: partition [0, 1] into intervals Ji of length ai for i ∈ I. Then letting

16

φi denote the positive aﬃne map from Ji to [0, 1] (see 3.8) we have

u(x, t) =

ui(φi(x), t)

0

if x ∈ Ji, i = 1, 2, . . . ,
otherwise.

Proof. First, decompose the kernel W ∈ W1 into a direct sum of connected kernels as in
3.11; that is,

W =Mi∈I

aiWi

for a family of connected kernels {Wi}i∈I ⊆ W1 and corresponding family of positive real

numbers {ai}i∈I withPi∈I ai = 1. Let {Ji}i∈I denote the partition of [0, 1] into intervals of

length ai and let φi denote the positive aﬃne map from Ji to [0, 1] (see 3.8).

Deﬁne the normalised degree function of W ∈ W1 as

dW (x) =Z 1

0

W (x, y)dy.

(5.2)

Then via an integrating factor it can be shown that the solution to the continuum model
(4.1) solves

u(x, t) = e−dW (x)tg(x) +Z t
0 Z 1

0

edW (x)(s−t)W (x, y)u(y, s) dy ds.

(5.3)

For an arbitrary element x ∈ Ji (see 3.10), dW (x) can be simpliﬁed as follows:

For x ∈ Ji, the solution (5.3) then becomes

u(x, t) = e−dcWi

= e−dcWi

(φi(x))t g(x) +Z t
0 ZJi
(φi(x))t g(x) +Z t
0 Z 1

0

where we deﬁnecWi =

1
ai

W .

edcWi

(φi(x))(s−t) Wi(φi(x), φi(y)) u(y, s) dy ds

edcWi

(φi(x))(s−t)cWi(φi(x), z) u(φ−1

i (z), s) dz ds

17

W (x, y) dy

0

dW (x) =Z 1
=ZJi
aiZ 1

= 1

0

= dcWi

(φi(x))

Wi(φi(x), φi(y)) dy

see (3.10),

Wi(φi(x), z) dz

substitute y with φ−1

i (z),

= e−dcWi

(φi(x))t gφ−1

i (φi(x)) +Z t
0 Z 1

0

edcWi

(φi(x))(s−t)cWi(φi(x), z) uφ−1

i (z, s) dz ds,

where, again, we substitute y with φ−1

i (z). Thus for all x ∈ Ji,

uφ−1

i (x, t) = e−dcWi

(x)t gφ−1

i (z, s) dz ds.

(5.4)

i (x) +Z t
0 Z 1

0

edcWi

(x)(s−t)cWi(x, z) uφ−1

But the function which solves (5.4) is the unique solution to the IVP (4.1) in C 1(R, L∞([0, 1]))
. Thus, by deﬁning ui as the
, we

with connected kernel cWi and initial condition function g
solution to the IVP (4.1) with connected kernel cWi and initial condition function g

have

φ−1

φ−1

i

i

uφ−1

i (x, t) = ui(x, t)

and so

u(x, t) = ui(φi(x), t)

for all x ∈ Ji,
for all x ∈ Ji.

Compactly, we can express this result as

u(t) =Mi∈I

aiui(t),

as required.

✷

It was shown by Janson [11] that any sequence of graphs converging to a connected graph
limit will eventually have minimal cuts growing at a rate proportional to n2. In our context,
the following equivalent lemma is more relevant.

Lemma 5.3. (Reformulated from [11, Theorem 1.10])
Let {Hn}n∈N be a sequence of edge-weighted graphs converging to the graph limit [W ] ∈ W 1.
If [W ] is connected then for suﬃciently large n, the step kernels WHn is also connected (in
the sense of 3.9).

This ensures that results for the continuum model (4.1) which rely on connectedness of

the kernel also apply to the approximate IVP (4.6) when n is suﬃciently large.

6 Reaching consensus

In Section 6.2 using the results of [15] we were able to show that the continuum voting
model could be used to approximate the ﬁnite voting model for large graphs. However, this
approximation is attained in the C([0, T ], L2([0, 1]))-norm, and consensus of the continuum
model does not imply consensus of the ﬁnite model, even for large graphs. This leaves open

18

the question of whether graph limit theory can be used to infer consensus in the ﬁnite voting
model.

We now prove our main result which answers the above question in the aﬃrmative. We
show that if the solution to the continuum model (4.1) reaches consensus then solutions to the
ﬁnite model (4.6) will be close to a constant function, for suﬃciently large n and suﬃciently
large t. This provides motivation for the continued study of the continuum model and, in
particular, the search for suﬃcient conditions which guarantee consensus. We then identify
a class of graphons, called twin-graphons, which guarantee consensus.

Theorem 6.1. Let u be a solution to the IVP (4.1), with kernel W ∈ W1 and initial
condition function g ∈ L∞([0, 1]), and let un be the solution to the approximate IVP (4.6)
for each positive integer n. Suppose that u reaches consensus on [0, 1] and let D be any
positive real number. Then for all ε > 0 and for all c > 0, there exists T = T (ε) and a subset
St ⊆ [0, 1]2 with λ(St) < c2 such that for all suﬃciently large n,

|un(x, t) − un(y, t)| ≤ ε

for all (x, y) ∈ [0, 1]2 \ St and t ∈ [T, T + D].

(6.1)

Proof. For any positive integer n, applying the triangle inequality three times gives the
following upper bound on the consensus equation namely, (4.3) with A = [0, 1], of un, for
any ﬁxed t ∈ R≥0:

(x,y)∈[0,1]2 |un(x, t) − un(y, t)|
ess sup

≤ 2 ess sup

x∈[0,1]

|un(x, t) − u(x, t)| + ess sup

(x,y)∈[0,1]2 |u(x, t) − u(y, t)|.

Since u reaches consensus, for any ε > 0 there exists T > 0 such that

(x,y)∈[0,1]2 |u(x, t) − u(y, t)| <
ess sup

ε
3

for all t ≥ T.

(6.2)

(6.3)

Let X ∼ U[0, 1] and deﬁne the continuous-time processes {u(X, t)}t≥0 and {un(X, t)}t≥0.

By 5.1, we have E[u(X, t) − un(X, t)] =R g −R gn = 0. Then Chebyshev’s inequality [24,

Section 7.3] gives, for all t > 0,

Ph(cid:12)(cid:12)u(X, t) − un(X, t)(cid:12)(cid:12) > εi ≤

E(cid:2)(cid:0)u(X, t) − un(X, t)(cid:1)2(cid:3)

ε2

= ku(t) − un(t)k2

2

ε2

.

(6.4)

Now for any D > 0, we have un → u in C([0, T + D]; L2([0, 1]))-norm ( 4.5), and from

(6.4) we have

max

t∈[0,T +D]

Ph(cid:12)(cid:12)u(X, t) − un(X, t)(cid:12)(cid:12) > ε

3i ≤(cid:16)3ku − unkC([0,T +D];L2([0,1])

ε

(cid:17)2

→ 0,

(6.5)

19

has Lebesgue measure at most c2/2. It follows that

3o
At =nx ∈ [0, 1] :(cid:12)(cid:12)u(x, t) − un(x, t)(cid:12)(cid:12) > ε
St =(cid:8)(x, y) ∈ [0, 1]2 : x ∈ At or y ∈ At(cid:9)

for large n. Thus, for any ε > 0 and any c > 0 there exists an N such that for all n > N,

ku − unkC([0,T +D];L2([0,1])) <

c ε
3√2

.

(6.6)

Combining (6.4) and (6.6), we see that for each t ∈ [0, T + D], the set

has Lebesgue measure strictly less than c2.

Applying (6.2) and (6.3) we attain the required result: for all ε > 0 and for all c > 0

there exists a positive integer N such that for every t ∈ [T, T + D], if n > N then

|un(x, t) − un(y, t)| ≤ ε

for all (x, y) ∈ [0, 1]2\St.

✷

Remark 6.2. It follows directly from 4.7 that the above theorem also applies to o(n2)-
perturbed sequences of IVPs (see 4.6).

We now establish an almost everywhere pointwise limit for solutions to the continuum

model.

Deﬁnition 6.3. Let u be a solution to the IVP (4.1). We say that u is a bounded solution
if

t≥0 ku(t)k∞ = sup
sup

t≥0ness sup

x∈[0,1]

|u(x, t)|o < ∞.

In the continuum model, we prove that if W ∈ W0 is a graphon then the solution u is

automatically bounded.

Lemma 6.4. Let W ∈ W0 and let g ∈ L∞([0, 1]). If u solves the IVP (4.1) with W and g
then

ku(t)k∞ ≤ kgk∞

for all t ≥ 0.

Hence u is a bounded solution.

Proof. This follows similar arguments presented in the proof of [9, Lemma 2].

✷

20

We now show that any solution to the continuum model (4.1) which is bounded deﬁnes

a continuous-time martingale.

Deﬁnition 6.5. A family of random variables {Zt : t ≥ 0} is called a continuous-time
martingale if

E(cid:2)Zt(cid:12)(cid:12){Zr : 0 ≤ r ≤ s}(cid:3) = Zs

for all s < t.

(6.7)

Proposition 6.6. Let u be a solution to the IVP (4.1) with kernel W ∈ W1 and initial
condition function g ∈ L∞([0, 1]).
If u is a bounded solution and X ∼ U[0, 1] then the
continuous-time process {Zt}t≥0 deﬁned by Zt = u(X, t) is a bounded continuous-time mar-
tingale. Further, {Zt}t≥0 converges almost surely as t → ∞.
Proof. First note that by assumption the solution u is bounded and so Zt is bounded. That
is,

sup
t≥0

E[|Zt|] = sup

0 |u(x, t)| dx ≤ sup

t≥0 ku(t)k∞ < ∞.

t≥0 Z 1

Secondly, we have for all x ∈ [0, 1] and for all t ∈ R≥0,

Thus, taking the conditional expectation gives

0

0

u(x, t) = g(x) +Z t
0 Z 1
W (x, y)(cid:0)u(y, r) − u(x, r)(cid:1) dy dr
= u(x, s) +Z t
s Z 1
W (x, y)(cid:0)u(y, r) − u(x, r)(cid:1) dy dr for any 0 ≤ s ≤ t.
E[Zt|{Zτ , τ ≤ s}] = Zs + EhZ t
s Z 1
W (X, y)(cid:0)u(y, r) − u(X, r)(cid:1) dy dr(cid:12)(cid:12)(cid:12){Zτ , τ ≤ s}i
= Zs +Z 1
0 Z t
s Z 1
W (x, y)(cid:0)u(y, r) − u(x, r)(cid:1) dy dr dx
= Zs +Z 1
0 Z t
s Z 1
−Z 1
0 Z t
s Z 1

W (x, y) u(x, r) dy dr dx.

W (x, y) u(y, r) dy dr dx

0

0

0

0

Since the integrands of the last two terms are absolutely integrable and bounded above by
some positive constant, via Fubini’s theorem [6, Thereom 2.37] we have that

Z 1
0 Z t
s Z 1

0

W (x, y) u(y, r) dy dr dx −Z 1
0 Z t
s Z 1

0

W (x, y) u(x, r) dy dr dx

21

s  Z[0,1]2
=Z t

W (x, y) u(y, r) dy dx −Z[0,1]2

W (x, y) u(x, r) dx dy! dr.

Noting that W is symmetric we have that the above expression equals zero. Hence the
necessary condition (6.7) holds and we have a continuous-time martingale.

The ﬁnal claim in the corollary follows immediately from the Martingale Convergence

Theorem [24, Theorem 11.5].

✷

The ﬁnal statement in the proposition above can equivalently be stated in deterministic
terms: for all bounded solutions u to the IVP (4.1) the limit limt→∞ u(x, t) exists for almost
every x ∈ [0, 1], and the function limt→∞ u(t) is integrable.

We now deﬁne the following function:

u

∗ : [0, 1] → R

x 7→

limt→∞ u(x, t)

if the limit exists,

0

otherwise.

It should be noted that the existence of limt→∞ u(x, t) almost everywhere is not enough
to ensure that consensus is attained. A trivial example is the constant 0-valued graphon,
which will have u(t) = u

∗ = g for any initial condition function g ∈ L∞([0, 1]).

We begin with two lemmas which show how the weak isomorphism property and consen-

sus in the voting model are related.

Lemma 6.7. Let W, U ∈ W1 be kernels such that W ∼ U and let g ∈ L∞([0, 1]).
If
the solution to the IVP (4.1) with W and g reaches consensus then there exists two measure
ϕ reaches
preserving maps ϕ, φ ∈ S[0, 1] such that the solution to the IVP (4.1) with U φ and g
consensus.

Proof. Let u be the solution to the IVP (4.1) with W and g. By 4.9 there exists two
ϕ.
ϕ solves the IVP (4.1) with U φ and g
measure-preserving maps ϕ, φ ∈ S[0, 1] such that u
ϕ attains consensus. This completes the
If u attains consensus (recall 4.2) it follows that u
proof.

✷

Lemma 6.8. Let W, U ∈ W1 be step kernels such that W ∼ U and let g ∈ L∞([0, 1]). If
the solution to the IVP (4.1) with W and g reaches consensus then there exists an invertible
ψ
measure preserving map ψ ∈ S[0, 1] such that the solution to the IVP (4.1) with U and g
reaches consensus.

22

Proof. This proof follows from the proof of 6.7 by replacing the application of 4.9 with the
application of 4.10.

✷

An invertible measure-preserving map is equivalent to a relabelling of the continuum of
vertices and when applied to a step kernel W , it corresponds to a permutation of the vertices
of a ﬁnite graph. Thus 6.8 appears to be identical to the fact that relabelling the vertices
of a ﬁnite graph does not change the behaviour of the IVP (2.3). However, 6.8 is more
general since the initial condition function g ∈ L∞([0, 1]) need not correspond to a ﬁnite
length vector, as it need not be a step function.

The following proposition shows that if the solution to the voting model attains consensus
then the constant which u(t) converges to, almost everwhere, is the average of the initial
condition function over [0, 1].

Proposition 6.9. Given a kernel W ∈ W1 and initial condition g ∈ L∞([0, 1]), let u be a
solution to the IVP (4.1) on W and g. If u reaches consensus then

Proof. By the Conservation Law ( 5.1) we have

for almost every x ∈ [0, 1].

u

0

g(y) dy

∗(x) =Z 1
Z 1
u(x, t)dx =Z 1

0

0

0

Z 1
∗(x) =Z 1

0

u

g(y) dy

for all 0 ≤ t < ∞.

(6.8)

∗ exists almost everywhere and is bounded. Taking
If u reaches consensus then the limit u
the limit as t approaches inﬁnity of (6.8) and applying the Dominated Convergence Theorem
[6, Theorem 2.24] gives

u∗(x)dx = lim

t→∞Z 1

0

u(x, t)dx =Z 1

0

g(x) dx.

But u

∗ is constant almost everywhere, since u reaches consensus. Thus

g(y) dy

for almost every x ∈ [0, 1].

✷

We now introduce a class of kernels which will be shown to attain consensus.

Deﬁnition 6.10. Let A ⊆ [0, 1] with nonzero measure and let W be a kernel. We say that
A is a twin-set of W if there exists a function a : A × A → R such that

W (x, y) = a(x, x′) W (x′, y)

for all x, x′ ∈ A and almost every y ∈ [0, 1].

23

We say a twin-set is maximal if for any twin-set B such that

then B = A. If W has a ﬁnite number of maximal twin-sets {Ai}n

i=1 such that

A ⊆ B

[0, 1] =

Ai

n[i=1

then we say that W is a twin-kernel. Here set equality means up to a set of measure zero.

Recall the normalised degree function, dW (see Equation (5.2)).

Remark 6.11. Let W be a kernel with twin-sets A and B.

(i) Distinct maximal twin-sets are disjoint. That is, if A, B are maximal twin-sets such
that A ∩ B 6= ∅ then A ∪ B is a twin-set containing A and B and so A = B = A ∪ B.

(ii) If x ∈ A then for all x′ ∈ A we have dW (x) = a(x, x′) dW (x′); and either

dW (x) = 0
dW (x) 6= 0

for all x ∈ A; or,
for all x ∈ A.

Consider a twin-kernel W with twin-sets {Ai}n

i=1 such that ai(x, x′) = 1 for every (x, x′) ∈
Ai×Ai. Then we see that W is a step kernel. This shows that step kernels are a subset of twin-
kernels. Given any nonzero function f : [0, 1] → [−1, 1]\{0}, the kernel W (x, y) = f (x) f (y)
is a twin-kernel with twin-set equal to [0, 1]. This follows since for every x, x′ ∈ [0, 1]

W (x, y) =

f (x)
f (x′)

W (x′, y)

for almost every y ∈ [0, 1].

On the other hand, the kernel W (x, y) = x + y does not have any twin-sets and so is not a
twin-kernel.

Lemma 6.12. Let W ∈ W1 with a twin-set A and let g ∈ L∞([0, 1]). If u is a bounded
solution to the IVP (4.1) and dW (x) 6= 0 for all x ∈ A then

u∗(x) = C

for almost every x ∈ A,

(6.9)

where C is some constant. That is, u reaches consensus on A.

24

∗ exists
Proof. By assumption the solution u is bounded. This ensures the limit function u
almost everywhere, by 6.6. Now ﬁx an x ∈ A such that u∗(x) exists. Then by the Dominated
Convergence Theorem [6, Theorem 2.24]

lim
τ →∞

u′(x, τ ) = lim
τ →∞

0

t=τ

∂t

lim

= lim

∂u(x, t)

(cid:12)(cid:12)(cid:12)
τ →∞Z 1
W (x, y)(cid:0)u(y, τ ) − u(x, τ )(cid:1) dy
=Z 1
τ →∞(cid:16)W (x, y)(cid:0)u(y, τ ) − u(x, τ )(cid:1)(cid:17) dy
=Z 1
W (x, y)(cid:0)u∗(y) − u∗(x)(cid:1) dy.
τ →∞(cid:16)u(x, τ ) + u′(x, τ )(cid:17) = L.

lim

0

0

That is, the limit on the left hand side exists. So there exists a ﬁnite constant L such that

(6.10)

This implies that limτ →∞ u′(x, τ ) = 0, since L’Hˆopital’s rule gives

lim
τ →∞

u(x, τ ) = lim
τ →∞

eτ u(x, τ )

eτ

= lim
τ →∞

eτ(cid:0)u(x, τ ) + u′(x, τ )(cid:1)

eτ

= L.

Thus, rearranging (6.10), gives the following ‘stabilising condition’

dW (x) u∗(x) =Z 1

0

W (x, y) u∗(y) dy.

(6.11)

Since dW (x) 6= 0 by assumption, we can divide by dW (x) which gives

u∗(x) =

W (x, y) u∗(y) dy.

(6.12)

1

dW (x)Z 1

0

Let x′ ∈ A such that u∗(x′) exists. Then dW (x) = a(x, x′) dW (x′) (see 6.11(ii)) and

Z 1

0

W (x, y) u∗(y) dy = a(x, x′)Z 1

0

W (x′, y) u∗(y) dy.

Thus the right hand side of (6.12) is invariant for all elements in the same twin set, since
the a(x, x′) term in the numerator and denominator cancels. Hence,

u∗(x) = u∗(x′)

for almost every x, x′ ∈ A.
∗ is almost everywhere constant on A. This proves (6.14).

That is, u

✷

25

By restricting the above lemma to the set of graphons W0 we attain a more elegant result.
Lemma 6.13. Let W ∈ W0 with a twin-set A and let g ∈ L∞([0, 1]). If u is a solution to
the IVP (4.1) then we have

u∗(x) = g(x)
u∗(x) = C

for almost every x ∈ A; or,
for almost every x ∈ A,

(6.13)

(6.14)

where C is some constant. In the latter case, u reaches consensus on A (recall 4.2).

Proof. Let u be the solution the IVP (4.1) with graphon W and initial condition g. First
note that 6.11 (ii) states that either dW (x) = 0 for all x ∈ A, or dW (x) 6= 0 for all x ∈ A.
In the ﬁrst case, since W ∈ W0, this implies that for all x ∈ A we have W (x, y) = 0 for
almost every y ∈ [0, 1]. Thus, the solution of the IVP is u(x, t) = g(x) for all x ∈ A. In the
second case, we can apply 6.12 since u is automatically a bounded solution (see 6.4). This
completes the proof.

✷

Recall that by 5.2 we can assume a kernel is connected without loss of generality.

Corollary 6.14. Let W ∈ W0 be a connected twin-graphon and let g ∈ L∞([0, 1]). If u
solves the IVP (4.1) then u reaches consensus on [0, 1] and u

∗ =R g almost everywhere.

Proof. Note that W ∈ W0 and so by 6.4, u is a bounded solution. This guarantees the
∗ almost everywhere (see 6.6). Also W is a twin-graphon and so there exists
existence of u
a ﬁnite family of maximal twin-sets {Ai}n
i=1, which are disjoint (see 6.11 (i)). Thus, [0, 1] =
˙∪n
i=1Ai almost everywhere.
Now since W ∈ W0 is connected, dW (x) 6= 0 for almost every x ∈ [0, 1]. Thus, 6.12

∗ is almost everywhere constant on the twin-sets and so we have

states that u

u∗(x) =

nXi=1

ai1Ai(x)

for some positive integer n,

where 1A denotes the indicator function with respect to the set A. We can assume that
ai 6= aj for i 6= j, by taking set unions if this is not the case.

Suppose for the purpose of a contradiction that u

∗ is not constant. Then there exists
i ∈ {1, 2, . . . , n} such that ai > aj for all j 6= i. Since W is connected, there must exists a
set S ⊆ Ai of positive measure such that

ZAc

i

W (x, y) dy > 0

for all x ∈ S.

(6.15)

26

Now ﬁx x ∈ S. The stabilising condition (6.11) then gives

dW (x)ai =

W (x, y) dy

W (x, y) dy

since ai > aj for all j 6= i and by (6.15)

ajZAj
nXj=1
nXj=1ZAj

< ai

= dW (x) ai,

∗ is constant almost everywhere.
∗ is almost-everywhere constant then u reaches consensus on [0, 1]. Applying 6.9 then

which is a contradiction. Thus it must be the case that u
If u
gives the required result.

✷

The nonnegativity of the kernel (i.e. W ∈ W0) in 6.14 is essential. The following example
shows that a connected, twin-kernel which takes negative values can have a non-constant
limit: that is, consensus is never attained.

Example 6.15. Consider the edge-weighted graph G illustrated below

v1

−1

v3

1

1

v2

−1

v4

The kernel representing the graph WG (see Equation (3.1)) is a connected twin-kernel.
4 , i
4 ]

However, it takes negative values and so 6.14 does not apply since WG /∈ W0. Let Ii = [ i−1
for i = 1, 2, 3, 4. Then any initial condition function g such that

ZIi

g(y)dy =ZIj

g(y)dy

for (i, j) = (2, 3) or (i, j) = (1, 4)

(6.16)

will force u(t) = g = u
need not reach consensus. For example, the function

∗ for all t ∈ R≥0. However, g need not be constant, and hence u(t)

will satisfy (6.16).

g(x) =

−1 + 4x
3 − 4x

if 0 ≤ x ≤ 1
2 ,
if 1
2 < x ≤ 1,

27

⋄

Acknowledgements

I would like to acknowledge Associate Professor Catherine Greenhill and Professor Richard
Holden’s assistance in various aspects of this paper. A particular thanks goes to Catherine
for her careful reading of many drafts and constructive feedback.

References

[1] D. Aldous, Interacting Particle Systems as Stochastic Social Dynamics, Bernoulli

19(4) (2013), 1122–1149.

[2] C. Borgs, J. Chayes, L. Lov´asz, V.T. S´os and K. Vesztergombi, Convergent Sequences
of Dense Graphs. I. Subgraph Frequencies, Metric Properties, and Testing, Advances
in Mathematics 219 (2008), 1801–1851.

[3] C. Borgs, J. Chayes, L. Lov´asz, V.T. S´os and K. Vesztergombi, Convergent Sequences
of Dense Graphs. II. Multiway Cuts and Statistical Physics, Annals of Mathematics
176 (2012), 151–219.

[4] R. Diestel, Graph Theory, Springer, Heidelberg, 4th ed., 2000.

[5] M. Dyer, G. Istrate, L.A. Goldberg, C. Greenhill and M. Jerrum, Convergence of
the Iterated Prisoner’s Dilemma Game, Combinatorics, Probability and Computing 11
(2002), 135–147.

[6] G.B. Folland, Real Analysis, Wiley-Interscience Publication, 2nd ed., 1999.

[7] D.A. French, Z. Teymuroglu, T.J. Lewis and R.J. Braun, An Integro-Diﬀerential Equa-
tion Model for the Spread of Alcohol Abuse, Journal of Integral Equations and Appli-
cations 22(3) (2010), 443–464.

[8] B. Golub and M.O. Jackson, Naive Learning in Social Networks: Convergence, In-
ﬂuence and the Wisdom of Crowds, American Economic Journal: Microeconomics 2
(2010), 112–149.

[9] J.M. Hendrickx and A. Olshevsky, Symmetric Continuum Opinion Dynamics: Conver-
gence, but sometimes only in Distribution, IEEE Conference on Decision and Control
52 (2013), 1989–1994.

28

[10] M.O. Jackson, Social and Economic Networks, Princeton University Press, Princeton,

N.J. , 2008.

[11] S. Janson, Connectedness in Graph Limits, U.U.D.M. report, ISSN 1101-3591, Depart-

ment of Mathematics, Uppsala University (2008).

[12] L. Lov´asz, Large Networks and Graph Limits, American Mathematical Society, Rhode

Island, 2012.

[13] L. Lov´asz and B. Szegedy, Limits of Dense Graph Sequences, Journal of Combinatorial

Theory, Series B 96 (2006), 933–957.

[14] J. Lunze, F. Lamnabhi-Lagarrigue and Others, Handbook of Hybrid Systems Control:

Theory, Tools, Applications, Cambridge University Press, 2009.

[15] G.S. Medvedev, The Nonlinear Heat Equation on Dense Graphs and Graph Limits,

SIAM Journal of Mathematical Analysis 46(4) (2014), 2743–2766.

[16] G.S. Medvedev, Small-world Networks of Kuramoto Oscillators, Physica D: Nonlinear

Phenomena 266 (2014), 13–22.

[17] G.S. Medvedev, Stochastic stability of Continuous Time Consensus Protocols, SIAM

Journal on Control and Optimization 50(4) (2012), 1859–1885.

[18] G.S. Medvedev and X. Tang, Stability of Twisted States in the Kuramoto Model on
Cayley and Random Graphs, Journal of Nonlinear Science 25(6) (2015), 1169–1208.

[19] G.S. Medvedev and S. Zhuravytska, The Geometry of Spontaneous Spiking in Neuronal

Networks, Journal of Nonlinear Science 22(4) (2012), 689–725.

[20] O.E. Omelchenko, M. Wolfrum, S. Yanchuk, Y. Maistrenko and O. Sudakov, Stationary
Patterns of Coherence and Incoherence in Two-dimensional Arrays of Non-locally-
Coupled Phase Oscillators, Physical Review E, 85 (2012), 036210.

[21] R. Olfati-Saber and R.M. Murray, Consensus Protocols for Networks of Dynamics

Agents, Proceedings of the American Control Conference, June (2003).

[22] W. Ren, R.W. Beard and E.M. Atkins, Information Consensus in Multivehicle Coop-

erative Control, IEEE Control Systems Magazine (2007), 71–82.

[23] D.A. Wiley, S.H. Strogatz and M. Girvan, The Size of the Sync Basin, Chaos: An

Interdisciplinary Journal of Nonlinear Science 16 (2006), 015103.

29

[24] D. Williams, Probability with Martingales, Cambridge University Press, Cambridge,

1991.

30

